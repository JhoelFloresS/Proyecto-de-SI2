var Vv=Object.defineProperty;var Yv=(k,a,l)=>a in k?Vv(k,a,{enumerable:!0,configurable:!0,writable:!0,value:l}):k[a]=l;var Fi=(k,a,l)=>(Yv(k,typeof a!="symbol"?a+"":a,l),l);import{c as ns}from"./_commonjsHelpers.b8add541.js";var o={exports:{}};(function(k){(function(){var a;function l(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}function m(t){var e=typeof Symbol<"u"&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:l(t)}}function f(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}var x=typeof Object.create=="function"?Object.create:function(t){function e(){}return e.prototype=t,new e},P;if(typeof Object.setPrototypeOf=="function")P=Object.setPrototypeOf;else{var w;t:{var C={a:!0},G={};try{G.__proto__=C,w=G.a;break t}catch{}w=!1}P=w?function(t,e){if(t.__proto__=e,t.__proto__!==e)throw new TypeError(t+" is not extensible");return t}:null}var A=P;function z(t,e){if(t.prototype=x(e.prototype),t.prototype.constructor=t,A)A(t,e);else for(var n in e)if(n!="prototype")if(Object.defineProperties){var i=Object.getOwnPropertyDescriptor(e,n);i&&Object.defineProperty(t,n,i)}else t[n]=e[n];t.hA=e.prototype}var Z=typeof ns<"u"&&ns!=null?ns:self,gt=typeof Object.assign=="function"?Object.assign:function(t,e){for(var n=1;n<arguments.length;n++){var i=arguments[n];if(i)for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},Nt=typeof Object.defineProperties=="function"?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)};function jt(t,e){if(e){var n=Z;t=t.split(".");for(var i=0;i<t.length-1;i++){var r=t[i];r in n||(n[r]={}),n=n[r]}t=t[t.length-1],i=n[t],e=e(i),e!=i&&e!=null&&Nt(n,t,{writable:!0,value:e})}}jt("Object.assign",function(t){return t||gt}),jt("Array.prototype.fill",function(t){return t||function(e,n,i){var r=this.length||0;for(0>n&&(n=Math.max(0,r+n)),(i==null||i>r)&&(i=r),i=Number(i),0>i&&(i=Math.max(0,r+i)),n=Number(n||0);n<i;n++)this[n]=e;return this}});var it=typeof globalThis=="object"&&globalThis||typeof ns=="object"&&ns.global===ns&&ns||typeof self=="object"&&self.self===self&&self||{};it.requestAnimationFrame===void 0&&(it.setImmediate===void 0?it.requestAnimationFrame=function(t){it.setTimeout(t,0)}:it.requestAnimationFrame=it.setImmediate);function vn(){}function mi(t,e){var n=-1;return function(){var i=this,r=arguments;n!==-1&&it.clearTimeout(n),n=On(function(){n=-1,t.apply(i,r)},e)}}function On(t,e){return it.setTimeout(t,e)}function _e(t){return it.document.createElement(t)}function X(t){throw Error(t)}function yt(t,e){t="The object is frozen, so its properties cannot be set: "+t.toString(),e!==void 0&&(t+="  to value: "+e),X(t)}function Rt(t,e,n,i){n=n===null?"*":typeof n=="string"?n:typeof n=="function"&&typeof n.className=="string"?n.className:"",i!==void 0&&(n+="."+i),X(n+" is not in the range "+e+": "+t)}function Ve(t){it.console&&it.console.log(t)}function Bt(t){return typeof t=="object"&&t!==null}function ue(t){return Array.isArray(t)||it.NodeList&&t instanceof it.NodeList||it.HTMLCollection&&t instanceof it.HTMLCollection}function wo(t){return Array.prototype.slice.call(t)}function Lr(t,e,n){Array.isArray(t)?e>=t.length?t.push(n):t.splice(e,0,n):X("Cannot insert an object into an HTMLCollection or NodeList: "+n+" at "+e)}function Bi(t,e){Array.isArray(t)?e>=t.length?t.pop():t.splice(e,1):X("Cannot remove an object from an HTMLCollection or NodeList at "+e)}function Yt(){var t=ma.pop();return t===void 0?[]:t}function At(t){t.length=0,ma.push(t)}function oo(t){if(typeof t=="function"){if(t.className)return t.className;if(t.name)return t.name;var e=t.toString();if(e=e.substring(9,e.indexOf("(")).trim(),e!=="")return t._className=e}else if(Bt(t)&&t.constructor)return oo(t.constructor);return typeof t}function Kn(t){var e=t;return Bt(t)&&(t.text?e=t.text:t.name?e=t.name:t.key!==void 0?e=t.key:t.id!==void 0?e=t.id:t.constructor===Object&&(t.Text?e=t.Text:t.Name?e=t.Name:t.Key!==void 0?e=t.Key:t.Id!==void 0?e=t.Id:t.ID!==void 0&&(e=t.ID))),e===void 0?"undefined":e===null?"null":e.toString()}function Ih(t,e){if(t.hasOwnProperty(e))return!0;for(t=Object.getPrototypeOf(t);t&&t!==Function;){if(t.hasOwnProperty(e))return!0;var n=t.Uz;if(n&&n[e])return!0;t=Object.getPrototypeOf(t)}return!1}function Hn(t,e,n){Object.defineProperty($t.prototype,t,{get:e,set:n})}function Tt(t){for(var e=[],n=0;256>n;n++)e["0123456789abcdef".charAt(n>>4)+"0123456789abcdef".charAt(n&15)]=String.fromCharCode(n);t.length%2&&(t="0"+t),n=[];for(var i=0,r=0;r<t.length;r+=2)n[i++]=e[t.substr(r,2)];for(t=n.join(""),t=t===""?"0":t,e=[],n=0;256>n;n++)e[n]=n;for(n=i=0;256>n;n++)i=(i+e[n]+119)%256,r=e[n],e[n]=e[i],e[i]=r;i=n=0;for(var s="",h=0;h<t.length;h++)n=(n+1)%256,i=(i+e[n])%256,r=e[n],e[n]=e[i],e[i]=r,s+=String.fromCharCode(t.charCodeAt(h)^e[(e[n]+e[i])%256]);return s}var Ah=it.navigator!==void 0&&0<it.navigator.userAgent.indexOf("Trident/7"),Td=it.navigator!==void 0&&0<it.navigator.userAgent.indexOf("Edge/"),Ji=it.navigator!==void 0&&it.navigator.platform!==void 0&&it.navigator.platform.match(/(iPhone|iPod|iPad|Mac)/i)!==null,ma=[];Object.freeze([]),vn.className="Util",vn.Dx="32ab5ff3b26f42dc0ed90f21462913b5",vn.adym="gojs.net",vn.vfo="28e644fdb167",vn.className="Util";function J(t,e,n){ce(this),this.j=t,this.va=e,this.m=n}J.prototype.toString=function(){return"EnumValue."+this.va};function Mr(t,e){return e==null||e===""?null:t[e]}Z.Object.defineProperties(J.prototype,{classType:{get:function(){return this.j}},name:{get:function(){return this.va}},value:{get:function(){return this.m}}}),J.className="EnumValue";function xa(){this.zv=[]}xa.prototype.toString=function(){return this.zv.join("")},xa.prototype.add=function(t){t!==""&&this.zv.push(t)},xa.className="StringBuilder";function In(){}In.className="PropertyCollection";var js={Wz:!1,aA:!1,Yz:!1,$z:!1,fA:!1,dA:!1,Hw:!1,Xz:null,trace:function(t){it.console&&it.console.log(t)},Zz:function(t,e,n,i){t.strokeStyle="red",t.fillStyle="red",t.font="8px sans-serif",t.beginPath(),t.moveTo(-10,0),t.lineTo(10,0),t.moveTo(0,-10),t.lineTo(0,10),t.stroke(),t.setTransform(1,0,0,1,0,0),t.scale(n,n),t.transform(e.m11,e.m12,e.m21,e.m22,e.dx,e.dy),t.lineWidth=2,t.beginPath(),t.moveTo(i.left,i.top+20),t.lineTo(i.left,i.top),t.lineTo(i.left+20,i.top),t.moveTo(i.right,i.bottom-20),t.lineTo(i.right,i.bottom),t.lineTo(i.right-20,i.bottom),t.stroke(),t.fillText("DB: "+Math.round(i.x)+", "+Math.round(i.y)+", "+Math.round(i.width)+", "+Math.round(i.height),i.left,i.top-5)},Vz:function(t){var e={},n;for(n in t){if(e.x=n,e.x!=="licenseKey"){var i=t[e.x];if(i.prototype!==void 0){e.xl=Object.getOwnPropertyNames(i.prototype);for(var r={Dj:0};r.Dj<e.xl.length;r={Dj:r.Dj},r.Dj++){var s=Object.getOwnPropertyDescriptor(i.prototype,e.xl[r.Dj]);s.get!==void 0&&s.set===void 0&&Object.defineProperty(i.prototype,e.xl[r.Dj],{set:function(h,u){return function(){throw Error("Property "+h.xl[u.Dj]+" of "+h.x+" is read-only.")}}(e,r)})}}}e={xl:e.xl,x:e.x}}}};function Ae(){}Ae.prototype.reset=function(){},Ae.prototype.next=function(){return!1},Ae.prototype.rd=function(){return!1},Ae.prototype.first=function(){return null},Ae.prototype.any=function(){return!1},Ae.prototype.all=function(){return!0},Ae.prototype.each=function(){return this},Ae.prototype.map=function(){return this},Ae.prototype.filter=function(){return this},Ae.prototype.Td=function(){},Ae.prototype.toString=function(){return"EmptyIterator"},Z.Object.defineProperties(Ae.prototype,{iterator:{get:function(){return this}},count:{get:function(){return 0}}}),Ae.prototype.first=Ae.prototype.first,Ae.prototype.hasNext=Ae.prototype.rd,Ae.prototype.next=Ae.prototype.next,Ae.prototype.reset=Ae.prototype.reset;var Wn=null;Ae.className="EmptyIterator",Wn=new Ae;function ge(t){this.key=-1,this.value=t}ge.prototype.reset=function(){this.key=-1},ge.prototype.next=function(){return this.key===-1?(this.key=0,!0):!1},ge.prototype.rd=function(){return this.next()},ge.prototype.first=function(){return this.key=0,this.value},ge.prototype.any=function(t){return this.key=-1,t(this.value)},ge.prototype.all=function(t){return this.key=-1,t(this.value)},ge.prototype.each=function(t){return this.key=-1,t(this.value),this},ge.prototype.map=function(t){return new ge(t(this.value))},ge.prototype.filter=function(t){return t(this.value)?new ge(this.value):Wn},ge.prototype.Td=function(){this.value=null},ge.prototype.toString=function(){return"SingletonIterator("+this.value+")"},Z.Object.defineProperties(ge.prototype,{iterator:{get:function(){return this}},count:{get:function(){return 1}}}),ge.prototype.first=ge.prototype.first,ge.prototype.hasNext=ge.prototype.rd,ge.prototype.next=ge.prototype.next,ge.prototype.reset=ge.prototype.reset,ge.className="SingletonIterator";function Le(t){this.xb=t,this.$e=null,t.Pa=null,this.na=t.Ia,this.Xa=-1}Le.prototype.reset=function(){var t=this.xb;t.Pa=null,this.na=t.Ia,this.Xa=-1},Le.prototype.next=function(){var t=this.xb;if(t.Ia!==this.na&&0>this.key)return!1;t=t.s;var e=t.length,n=++this.Xa,i=this.$e;if(i!==null)for(;n<e;){var r=t[n];if(i(r))return this.key=this.Xa=n,this.value=r,!0;n++}else{if(n<e)return this.key=n,this.value=t[n],!0;this.Td()}return!1},Le.prototype.rd=function(){return this.next()},Le.prototype.first=function(){var t=this.xb;this.na=t.Ia,this.Xa=0,t=t.s;var e=t.length,n=this.$e;if(n!==null){for(var i=0;i<e;){var r=t[i];if(n(r))return this.key=this.Xa=i,this.value=r;i++}return null}return 0<e?(t=t[0],this.key=0,this.value=t):null},Le.prototype.any=function(t){var e=this.xb;e.Pa=null,this.Xa=-1,e=e.s;for(var n=e.length,i=this.$e,r=0;r<n;r++){var s=e[r];if((i===null||i(s))&&t(s))return!0}return!1},Le.prototype.all=function(t){var e=this.xb;e.Pa=null,this.Xa=-1,e=e.s;for(var n=e.length,i=this.$e,r=0;r<n;r++){var s=e[r];if((i===null||i(s))&&!t(s))return!1}return!0},Le.prototype.each=function(t){var e=this.xb;e.Pa=null,this.Xa=-1,e=e.s;for(var n=e.length,i=this.$e,r=0;r<n;r++){var s=e[r];(i===null||i(s))&&t(s)}return this},Le.prototype.map=function(t){var e=this.xb;e.Pa=null,this.Xa=-1;var n=[];e=e.s;for(var i=e.length,r=this.$e,s=0;s<i;s++){var h=e[s];(r===null||r(h))&&n.push(t(h))}return t=new Q,t.s=n,t.sb(),t.iterator},Le.prototype.filter=function(t){var e=this.xb;e.Pa=null,this.Xa=-1;var n=[];e=e.s;for(var i=e.length,r=this.$e,s=0;s<i;s++){var h=e[s];(r===null||r(h))&&t(h)&&n.push(h)}return t=new Q,t.s=n,t.sb(),t.iterator},Le.prototype.Td=function(){this.key=-1,this.value=null,this.na=-1,this.$e=null,this.xb.Pa=this},Le.prototype.toString=function(){return"ListIterator@"+this.Xa+"/"+this.xb.count},Z.Object.defineProperties(Le.prototype,{iterator:{get:function(){return this}},predicate:{get:function(){return this.$e},set:function(t){this.$e=t}},count:{get:function(){var t=this.$e;if(t!==null){for(var e=0,n=this.xb.s,i=n.length,r=0;r<i;r++)t(n[r])&&e++;return e}return this.xb.s.length}}}),Le.prototype.first=Le.prototype.first,Le.prototype.hasNext=Le.prototype.rd,Le.prototype.next=Le.prototype.next,Le.prototype.reset=Le.prototype.reset,Le.className="ListIterator";function se(t){this.xb=t,t.tg=null,this.na=t.Ia,this.Xa=t.s.length}se.prototype.reset=function(){var t=this.xb;t.tg=null,this.na=t.Ia,this.Xa=t.s.length},se.prototype.next=function(){var t=this.xb;if(t.Ia!==this.na&&0>this.key)return!1;var e=--this.Xa;return 0<=e?(this.key=e,this.value=t.s[e],!0):(this.Td(),!1)},se.prototype.rd=function(){return this.next()},se.prototype.first=function(){var t=this.xb;this.na=t.Ia;var e=t.s;return this.Xa=t=e.length-1,0<=t?(e=e[t],this.key=t,this.value=e):null},se.prototype.any=function(t){var e=this.xb;e.tg=null,e=e.s;var n=e.length;for(this.Xa=n,--n;0<=n;n--)if(t(e[n]))return!0;return!1},se.prototype.all=function(t){var e=this.xb;e.tg=null,e=e.s;var n=e.length;for(this.Xa=n,--n;0<=n;n--)if(!t(e[n]))return!1;return!0},se.prototype.each=function(t){var e=this.xb;e.tg=null,e=e.s;var n=e.length;for(this.Xa=n,--n;0<=n;n--)t(e[n]);return this},se.prototype.map=function(t){var e=this.xb;e.tg=null;var n=[];e=e.s;var i=e.length;for(this.Xa=i,--i;0<=i;i--)n.push(t(e[i]));return t=new Q,t.s=n,t.sb(),t.iterator},se.prototype.filter=function(t){var e=this.xb;e.tg=null;var n=[];e=e.s;var i=e.length;for(this.Xa=i,--i;0<=i;i--){var r=e[i];t(r)&&n.push(r)}return t=new Q,t.s=n,t.sb(),t.iterator},se.prototype.Td=function(){this.key=-1,this.value=null,this.na=-1,this.xb.tg=this},se.prototype.toString=function(){return"ListIteratorBackwards("+this.Xa+"/"+this.xb.count+")"},Z.Object.defineProperties(se.prototype,{iterator:{get:function(){return this}},count:{get:function(){return this.xb.s.length}}}),se.prototype.first=se.prototype.first,se.prototype.hasNext=se.prototype.rd,se.prototype.next=se.prototype.next,se.prototype.reset=se.prototype.reset,se.className="ListIteratorBackwards";function Q(t){ce(this),this._isFrozen=!1,this.s=[],this.Ia=0,this.tg=this.Pa=null,typeof t=="string"&&X("Error: Since 2.0 List/Map/Set constructors no longer take an argument that enforces type."),t!==void 0&&this.addAll(t)}a=Q.prototype,a.sb=function(){var t=this.Ia;t++,999999999<t&&(t=0),this.Ia=t},a.freeze=function(){return this._isFrozen=!0,this},a.ja=function(){return this._isFrozen=!1,this},a.toString=function(){return"List()#"+$e(this)},a.add=function(t){return t===null?this:(this._isFrozen&&yt(this,t),this.s.push(t),this.sb(),this)},a.push=function(t){this.add(t)},a.addAll=function(t){if(t===null)return this;this._isFrozen&&yt(this);var e=this.s;if(ue(t))for(var n=t.length,i=0;i<n;i++)e.push(t[i]);else for(t=t.iterator;t.next();)e.push(t.value);return this.sb(),this},a.clear=function(){this._isFrozen&&yt(this),this.s.length=0,this.sb()},a.contains=function(t){return t===null?!1:this.s.indexOf(t)!==-1},a.has=function(t){return this.contains(t)},a.indexOf=function(t){return t===null?-1:this.s.indexOf(t)},a.L=function(t){var e=this.s;return(0>t||t>=e.length)&&Rt(t,"0 <= i < length",Q,"elt:i"),e[t]},a.get=function(t){return this.L(t)},a.Tc=function(t,e){var n=this.s;(0>t||t>=n.length)&&Rt(t,"0 <= i < length",Q,"setElt:i"),this._isFrozen&&yt(this,t),n[t]=e},a.set=function(t,e){this.Tc(t,e)},a.first=function(){var t=this.s;return t.length===0?null:t[0]},a.ec=function(){var t=this.s,e=t.length;return 0<e?t[e-1]:null},a.pop=function(){this._isFrozen&&yt(this);var t=this.s;return 0<t.length?t.pop():null},Q.prototype.any=function(t){for(var e=this.s,n=e.length,i=0;i<n;i++)if(t(e[i]))return!0;return!1},Q.prototype.all=function(t){for(var e=this.s,n=e.length,i=0;i<n;i++)if(!t(e[i]))return!1;return!0},Q.prototype.each=function(t){for(var e=this.s,n=e.length,i=0;i<n;i++)t(e[i]);return this},Q.prototype.map=function(t){for(var e=new Q,n=[],i=this.s,r=i.length,s=0;s<r;s++)n.push(t(i[s]));return e.s=n,e.sb(),e},Q.prototype.filter=function(t){for(var e=new Q,n=[],i=this.s,r=i.length,s=0;s<r;s++){var h=i[s];t(h)&&n.push(h)}return e.s=n,e.sb(),e},a=Q.prototype,a.Cb=function(t,e){0>t&&Rt(t,">= 0",Q,"insertAt:i"),this._isFrozen&&yt(this,t);var n=this.s;t>=n.length?n.push(e):n.splice(t,0,e),this.sb()},a.remove=function(t){if(t===null)return!1;this._isFrozen&&yt(this,t);var e=this.s;return t=e.indexOf(t),t===-1?!1:(t===e.length-1?e.pop():e.splice(t,1),this.sb(),!0)},a.delete=function(t){return this.remove(t)},a.lb=function(t){var e=this.s;(0>t||t>=e.length)&&Rt(t,"0 <= i < length",Q,"removeAt:i"),this._isFrozen&&yt(this,t),t===e.length-1?e.pop():e.splice(t,1),this.sb()},a.removeRange=function(t,e){var n=this.s,i=n.length;if(0>t)t=0;else if(t>=i)return this;if(0>e)return this;if(e>=i&&(e=i-1),t>e)return this;this._isFrozen&&yt(this);for(var r=t,s=e+1;s<i;)n[r++]=n[s++];return n.length=i-(e-t+1),this.sb(),this},Q.prototype.copy=function(){var t=new Q,e=this.s;return 0<e.length&&(t.s=Array.prototype.slice.call(e)),t},a=Q.prototype,a.Da=function(){for(var t=this.s,e=this.count,n=Array(e),i=0;i<e;i++)n[i]=t[i];return n},a.cv=function(){for(var t=new H,e=this.s,n=this.count,i=0;i<n;i++)t.add(e[i]);return t},a.sort=function(t){return this._isFrozen&&yt(this),this.s.sort(t),this.sb(),this},a.ji=function(t,e,n){var i=this.s,r=i.length;e===void 0&&(e=0),n===void 0&&(n=r),this._isFrozen&&yt(this);var s=n-e;if(1>=s)return this;if((0>e||e>=r-1)&&Rt(e,"0 <= from < length",Q,"sortRange:from"),s===2)return n=i[e],r=i[e+1],0<t(n,r)&&(i[e]=r,i[e+1]=n,this.sb()),this;if(e===0)if(n>=r)i.sort(t);else for(e=i.slice(0,n),e.sort(t),t=0;t<n;t++)i[t]=e[t];else if(n>=r)for(n=i.slice(e),n.sort(t),t=e;t<r;t++)i[t]=n[t-e];else for(r=i.slice(e,n),r.sort(t),t=e;t<n;t++)i[t]=r[t-e];return this.sb(),this},a.reverse=function(){return this._isFrozen&&yt(this),this.s.reverse(),this.sb(),this},Z.Object.defineProperties(Q.prototype,{_dataArray:{get:function(){return this.s}},count:{get:function(){return this.s.length}},size:{get:function(){return this.s.length}},length:{get:function(){return this.s.length}},iterator:{get:function(){if(0>=this.s.length)return Wn;var t=this.Pa;return t!==null?(t.reset(),t):new Le(this)}},iteratorBackwards:{get:function(){if(0>=this.s.length)return Wn;var t=this.tg;return t!==null?(t.reset(),t):new se(this)}}}),Q.prototype.reverse=Q.prototype.reverse,Q.prototype.sortRange=Q.prototype.ji,Q.prototype.sort=Q.prototype.sort,Q.prototype.toSet=Q.prototype.cv,Q.prototype.toArray=Q.prototype.Da,Q.prototype.removeRange=Q.prototype.removeRange,Q.prototype.removeAt=Q.prototype.lb,Q.prototype.delete=Q.prototype.delete,Q.prototype.remove=Q.prototype.remove,Q.prototype.insertAt=Q.prototype.Cb,Q.prototype.pop=Q.prototype.pop,Q.prototype.last=Q.prototype.ec,Q.prototype.first=Q.prototype.first,Q.prototype.set=Q.prototype.set,Q.prototype.setElt=Q.prototype.Tc,Q.prototype.get=Q.prototype.get,Q.prototype.elt=Q.prototype.L,Q.prototype.indexOf=Q.prototype.indexOf,Q.prototype.has=Q.prototype.has,Q.prototype.contains=Q.prototype.contains,Q.prototype.clear=Q.prototype.clear,Q.prototype.addAll=Q.prototype.addAll,Q.prototype.push=Q.prototype.push,Q.prototype.add=Q.prototype.add,Q.prototype.thaw=Q.prototype.ja,Q.prototype.freeze=Q.prototype.freeze,Q.className="List";function Ye(t){this.Tf=t,t.Pa=null,this.na=t.Ia,this.ra=null}Ye.prototype.reset=function(){var t=this.Tf;t.Pa=null,this.na=t.Ia,this.ra=null},Ye.prototype.next=function(){var t=this.Tf;if(t.Ia!==this.na&&this.key===null)return!1;var e=this.ra;return e=e===null?t.ea:e.ta,e!==null?(this.ra=e,this.value=e.value,this.key=e.key,!0):(this.Td(),!1)},Ye.prototype.rd=function(){return this.next()},Ye.prototype.first=function(){var t=this.Tf;if(this.na=t.Ia,t=t.ea,t!==null){this.ra=t;var e=t.value;return this.key=t.key,this.value=e}return null},Ye.prototype.any=function(t){var e=this.Tf;for(this.ra=e.Pa=null,e=e.ea;e!==null;){if(t(e.value))return!0;e=e.ta}return!1},Ye.prototype.all=function(t){var e=this.Tf;for(this.ra=e.Pa=null,e=e.ea;e!==null;){if(!t(e.value))return!1;e=e.ta}return!0},Ye.prototype.each=function(t){var e=this.Tf;for(this.ra=e.Pa=null,e=e.ea;e!==null;)t(e.value),e=e.ta;return this},Ye.prototype.map=function(t){var e=this.Tf;e.Pa=null;var n=new Q;for(e=e.ea;e!==null;)n.add(t(e.value)),e=e.ta;return n.iterator},Ye.prototype.filter=function(t){var e=this.Tf;e.Pa=null;var n=new Q;for(e=e.ea;e!==null;){var i=e.value;t(i)&&n.add(i),e=e.ta}return n.iterator},Ye.prototype.Td=function(){this.value=this.key=null,this.na=-1,this.Tf.Pa=this},Ye.prototype.toString=function(){return this.ra!==null?"SetIterator@"+this.ra.value:"SetIterator"},Z.Object.defineProperties(Ye.prototype,{iterator:{get:function(){return this}},count:{get:function(){return this.Tf.Mb}}}),Ye.prototype.first=Ye.prototype.first,Ye.prototype.hasNext=Ye.prototype.rd,Ye.prototype.next=Ye.prototype.next,Ye.prototype.reset=Ye.prototype.reset,Ye.className="SetIterator";function H(t){ce(this),this._isFrozen=!1,this.Nb={},this.Mb=0,this.Pa=null,this.Ia=0,this.Ve=this.ea=null,typeof t=="string"&&X("Error: Since 2.0 List/Map/Set constructors no longer take an argument that enforces type."),t!==void 0&&this.addAll(t)}a=H.prototype,a.sb=function(){var t=this.Ia;t++,999999999<t&&(t=0),this.Ia=t},a.freeze=function(){return this._isFrozen=!0,this},a.ja=function(){return this._isFrozen=!1,this},a.toString=function(){return"Set()#"+$e(this)},a.add=function(t){if(t===null)return this;this._isFrozen&&yt(this,t);var e=t;return Bt(t)&&(e=Xo(t)),this.Nb[e]===void 0&&(this.Mb++,t=new is(t,t),this.Nb[e]=t,e=this.Ve,e===null?this.ea=t:(t.Rk=e,e.ta=t),this.Ve=t,this.sb()),this},a.addAll=function(t){if(t===null)return this;if(this._isFrozen&&yt(this),ue(t))for(var e=t.length,n=0;n<e;n++)this.add(t[n]);else for(t=t.iterator;t.next();)this.add(t.value);return this},a.contains=function(t){if(t===null)return!1;var e=t;return Bt(t)&&(e=$e(t),e===void 0)?!1:this.Nb[e]!==void 0},a.has=function(t){return this.contains(t)},a.ly=function(t){if(t===null)return!0;for(t=t.iterator;t.next();)if(!this.contains(t.value))return!1;return!0},a.my=function(t){if(t===null)return!0;for(t=t.iterator;t.next();)if(this.contains(t.value))return!0;return!1},a.first=function(){var t=this.ea;return t===null?null:t.value},H.prototype.any=function(t){for(var e=this.ea;e!==null;){if(t(e.value))return!0;e=e.ta}return!1},H.prototype.all=function(t){for(var e=this.ea;e!==null;){if(!t(e.value))return!1;e=e.ta}return!0},H.prototype.each=function(t){for(var e=this.ea;e!==null;)t(e.value),e=e.ta;return this},H.prototype.map=function(t){for(var e=new H,n=this.ea;n!==null;)e.add(t(n.value)),n=n.ta;return e},H.prototype.filter=function(t){for(var e=new H,n=this.ea;n!==null;){var i=n.value;t(i)&&e.add(i),n=n.ta}return e},a=H.prototype,a.remove=function(t){if(t===null)return!1;this._isFrozen&&yt(this,t);var e=t;if(Bt(t)&&(e=$e(t),e===void 0)||(t=this.Nb[e],t===void 0))return!1;var n=t.ta,i=t.Rk;return n!==null&&(n.Rk=i),i!==null&&(i.ta=n),this.ea===t&&(this.ea=n),this.Ve===t&&(this.Ve=i),delete this.Nb[e],this.Mb--,this.sb(),!0},a.delete=function(t){return this.remove(t)},a.Bo=function(t){if(t===null)return this;if(this._isFrozen&&yt(this),ue(t))for(var e=t.length,n=0;n<e;n++)this.remove(t[n]);else for(t=t.iterator;t.next();)this.remove(t.value);return this},a.Hz=function(t){if(t===null||this.count===0)return this;this._isFrozen&&yt(this);var e=new H;e.addAll(t),t=[];for(var n=this.iterator;n.next();){var i=n.value;e.contains(i)||t.push(i)}return this.Bo(t),this},a.clear=function(){this._isFrozen&&yt(this),this.Nb={},this.Mb=0,this.Pa!==null&&this.Pa.reset(),this.Ve=this.ea=null,this.sb()},H.prototype.copy=function(){var t=new H,e=this.Nb,n;for(n in e)t.add(e[n].value);return t},H.prototype.Da=function(){var t=Array(this.Mb),e=this.Nb,n=0,i;for(i in e)t[n]=e[i].value,n++;return t},H.prototype.bv=function(){var t=new Q,e=this.Nb,n;for(n in e)t.add(e[n].value);return t};function ce(t){t.__gohashid=Lo++}function Xo(t){var e=t.__gohashid;return e===void 0&&(e=Lo++,t.__gohashid=e),e}function $e(t){return t.__gohashid}Z.Object.defineProperties(H.prototype,{count:{get:function(){return this.Mb}},size:{get:function(){return this.Mb}},iterator:{get:function(){if(0>=this.Mb)return Wn;var t=this.Pa;return t!==null?(t.reset(),t):new Ye(this)}}}),H.prototype.toList=H.prototype.bv,H.prototype.toArray=H.prototype.Da,H.prototype.clear=H.prototype.clear,H.prototype.retainAll=H.prototype.Hz,H.prototype.removeAll=H.prototype.Bo,H.prototype.delete=H.prototype.delete,H.prototype.remove=H.prototype.remove,H.prototype.first=H.prototype.first,H.prototype.containsAny=H.prototype.my,H.prototype.containsAll=H.prototype.ly,H.prototype.has=H.prototype.has,H.prototype.contains=H.prototype.contains,H.prototype.addAll=H.prototype.addAll,H.prototype.add=H.prototype.add,H.prototype.thaw=H.prototype.ja,H.prototype.freeze=H.prototype.freeze;var Lo=1;H.className="Set",H.uniqueHash=ce,H.hashIdUnique=Xo,H.hashId=$e;function ze(t){this.la=t,this.na=t.Ia,this.ra=null}ze.prototype.reset=function(){this.na=this.la.Ia,this.ra=null},ze.prototype.next=function(){var t=this.la;if(t.Ia!==this.na&&this.key===null)return!1;var e=this.ra;return e=e===null?t.ea:e.ta,e!==null?(this.ra=e,this.value=this.key=t=e.key,!0):(this.Td(),!1)},ze.prototype.rd=function(){return this.next()},ze.prototype.first=function(){var t=this.la;return this.na=t.Ia,t=t.ea,t!==null?(this.ra=t,this.value=this.key=t=t.key):null},ze.prototype.any=function(t){var e=this.la;for(this.ra=null,e=e.ea;e!==null;){if(t(e.key))return!0;e=e.ta}return!1},ze.prototype.all=function(t){var e=this.la;for(this.ra=null,e=e.ea;e!==null;){if(!t(e.key))return!1;e=e.ta}return!0},ze.prototype.each=function(t){var e=this.la;for(this.ra=null,e=e.ea;e!==null;)t(e.key),e=e.ta;return this},ze.prototype.map=function(t){var e=this.la;this.ra=null;var n=new Q;for(e=e.ea;e!==null;)n.add(t(e.key)),e=e.ta;return n.iterator},ze.prototype.filter=function(t){var e=this.la;this.ra=null;var n=new Q;for(e=e.ea;e!==null;){var i=e.key;t(i)&&n.add(i),e=e.ta}return n.iterator},ze.prototype.Td=function(){this.value=this.key=null,this.na=-1},ze.prototype.toString=function(){return this.ra!==null?"MapKeySetIterator@"+this.ra.value:"MapKeySetIterator"},Z.Object.defineProperties(ze.prototype,{iterator:{get:function(){return this}},count:{get:function(){return this.la.Mb}}}),ze.prototype.first=ze.prototype.first,ze.prototype.hasNext=ze.prototype.rd,ze.prototype.next=ze.prototype.next,ze.prototype.reset=ze.prototype.reset,ze.className="MapKeySetIterator";function Zt(t){H.call(this),ce(this),this._isFrozen=!0,this.la=t}z(Zt,H),a=Zt.prototype,a.freeze=function(){return this},a.ja=function(){return this},a.toString=function(){return"MapKeySet("+this.la.toString()+")"},a.add=function(){X("This Set is read-only: "+this.toString())},a.contains=function(t){return this.la.contains(t)},a.has=function(t){return this.contains(t)},a.remove=function(){X("This Set is read-only: "+this.toString())},a.delete=function(t){return this.remove(t)},a.clear=function(){X("This Set is read-only: "+this.toString())},a.first=function(){var t=this.la.ea;return t!==null?t.key:null},Zt.prototype.any=function(t){for(var e=this.la.ea;e!==null;){if(t(e.key))return!0;e=e.ta}return!1},Zt.prototype.all=function(t){for(var e=this.la.ea;e!==null;){if(!t(e.key))return!1;e=e.ta}return!0},Zt.prototype.each=function(t){for(var e=this.la.ea;e!==null;)t(e.key),e=e.ta;return this},Zt.prototype.map=function(t){for(var e=new H,n=this.la.ea;n!==null;)e.add(t(n.key)),n=n.ta;return e},Zt.prototype.filter=function(t){for(var e=new H,n=this.la.ea;n!==null;){var i=n.key;t(i)&&e.add(i),n=n.ta}return e},Zt.prototype.copy=function(){return new Zt(this.la)},Zt.prototype.cv=function(){var t=new H,e=this.la.Nb,n;for(n in e)t.add(e[n].key);return t},Zt.prototype.Da=function(){var t=this.la.Nb,e=Array(this.la.Mb),n=0,i;for(i in t)e[n]=t[i].key,n++;return e},Zt.prototype.bv=function(){var t=new Q,e=this.la.Nb,n;for(n in e)t.add(e[n].key);return t},Z.Object.defineProperties(Zt.prototype,{count:{get:function(){return this.la.Mb}},size:{get:function(){return this.la.Mb}},iterator:{get:function(){return 0>=this.la.Mb?Wn:new ze(this.la)}}}),Zt.prototype.toList=Zt.prototype.bv,Zt.prototype.toArray=Zt.prototype.Da,Zt.prototype.toSet=Zt.prototype.cv,Zt.prototype.first=Zt.prototype.first,Zt.prototype.clear=Zt.prototype.clear,Zt.prototype.delete=Zt.prototype.delete,Zt.prototype.remove=Zt.prototype.remove,Zt.prototype.has=Zt.prototype.has,Zt.prototype.contains=Zt.prototype.contains,Zt.prototype.add=Zt.prototype.add,Zt.prototype.thaw=Zt.prototype.ja,Zt.prototype.freeze=Zt.prototype.freeze,Zt.className="MapKeySet";function Ee(t){this.la=t,t.Ue=null,this.na=t.Ia,this.ra=null}Ee.prototype.reset=function(){var t=this.la;t.Ue=null,this.na=t.Ia,this.ra=null},Ee.prototype.next=function(){var t=this.la;if(t.Ia!==this.na&&this.key===null)return!1;var e=this.ra;return e=e===null?t.ea:e.ta,e!==null?(this.ra=e,this.value=e.value,this.key=e.key,!0):(this.Td(),!1)},Ee.prototype.rd=function(){return this.next()},Ee.prototype.first=function(){var t=this.la;if(this.na=t.Ia,t=t.ea,t!==null){this.ra=t;var e=t.value;return this.key=t.key,this.value=e}return null},Ee.prototype.any=function(t){var e=this.la;for(this.ra=e.Ue=null,e=e.ea;e!==null;){if(t(e.value))return!0;e=e.ta}return!1},Ee.prototype.all=function(t){var e=this.la;for(this.ra=e.Ue=null,e=e.ea;e!==null;){if(!t(e.value))return!1;e=e.ta}return!0},Ee.prototype.each=function(t){var e=this.la;for(this.ra=e.Ue=null,e=e.ea;e!==null;)t(e.value),e=e.ta;return this},Ee.prototype.map=function(t){var e=this.la;this.ra=e.Ue=null;var n=new Q;for(e=e.ea;e!==null;)n.add(t(e.value)),e=e.ta;return n.iterator},Ee.prototype.filter=function(t){var e=this.la;this.ra=e.Ue=null;var n=new Q;for(e=e.ea;e!==null;){var i=e.value;t(i)&&n.add(i),e=e.ta}return n.iterator},Ee.prototype.Td=function(){this.value=this.key=null,this.na=-1,this.la.Ue=this},Ee.prototype.toString=function(){return this.ra!==null?"MapValueSetIterator@"+this.ra.value:"MapValueSetIterator"},Z.Object.defineProperties(Ee.prototype,{iterator:{get:function(){return this}},count:{get:function(){return this.la.Mb}}}),Ee.prototype.first=Ee.prototype.first,Ee.prototype.hasNext=Ee.prototype.rd,Ee.prototype.next=Ee.prototype.next,Ee.prototype.reset=Ee.prototype.reset,Ee.className="MapValueSetIterator";function is(t,e){this.key=t,this.value=e,this.Rk=this.ta=null}is.prototype.toString=function(){return"{"+this.key+":"+this.value+"}"},is.className="KeyValuePair";function Xe(t){this.la=t,t.Pa=null,this.na=t.Ia,this.ra=null}Xe.prototype.reset=function(){var t=this.la;t.Pa=null,this.na=t.Ia,this.ra=null},Xe.prototype.next=function(){var t=this.la;if(t.Ia!==this.na&&this.key===null)return!1;var e=this.ra;return e=e===null?t.ea:e.ta,e!==null?(this.ra=e,this.key=e.key,this.value=e.value,!0):(this.Td(),!1)},Xe.prototype.rd=function(){return this.next()},Xe.prototype.first=function(){var t=this.la;return this.na=t.Ia,t=t.ea,t!==null?(this.ra=t,this.key=t.key,this.value=t.value,t):null},Xe.prototype.any=function(t){var e=this.la;for(this.ra=e.Pa=null,e=e.ea;e!==null;){if(t(e))return!0;e=e.ta}return!1},Xe.prototype.all=function(t){var e=this.la;for(this.ra=e.Pa=null,e=e.ea;e!==null;){if(!t(e))return!1;e=e.ta}return!0},Xe.prototype.each=function(t){var e=this.la;for(this.ra=e.Pa=null,e=e.ea;e!==null;)t(e),e=e.ta;return this},Xe.prototype.map=function(t){var e=this.la;this.ra=e.Pa=null;var n=new Q;for(e=e.ea;e!==null;)n.add(t(e)),e=e.ta;return n.iterator},Xe.prototype.filter=function(t){var e=this.la;this.ra=e.Pa=null;var n=new Q;for(e=e.ea;e!==null;)t(e)&&n.add(e),e=e.ta;return n.iterator},Xe.prototype.Td=function(){this.value=this.key=null,this.na=-1,this.la.Pa=this},Xe.prototype.toString=function(){return this.ra!==null?"MapIterator@"+this.ra:"MapIterator"},Z.Object.defineProperties(Xe.prototype,{iterator:{get:function(){return this}},count:{get:function(){return this.la.Mb}}}),Xe.prototype.first=Xe.prototype.first,Xe.prototype.hasNext=Xe.prototype.rd,Xe.prototype.next=Xe.prototype.next,Xe.prototype.reset=Xe.prototype.reset,Xe.className="MapIterator";function pt(t){ce(this),this._isFrozen=!1,this.Nb={},this.Mb=0,this.Ue=this.Pa=null,this.Ia=0,this.Ve=this.ea=null,typeof t=="string"&&X("Error: Since 2.0 List/Map/Set constructors no longer take an argument that enforces type."),t!==void 0&&this.addAll(t)}a=pt.prototype,a.sb=function(){var t=this.Ia;t++,999999999<t&&(t=0),this.Ia=t},a.freeze=function(){return this._isFrozen=!0,this},a.ja=function(){return this._isFrozen=!1,this},a.toString=function(){return"Map()#"+$e(this)},a.add=function(t,e){this._isFrozen&&yt(this,t);var n=t;Bt(t)&&(n=Xo(t));var i=this.Nb[n];return i===void 0?(this.Mb++,t=new is(t,e),this.Nb[n]=t,n=this.Ve,n===null?this.ea=t:(t.Rk=n,n.ta=t),this.Ve=t,this.sb()):i.value=e,this},a.set=function(t,e){return this.add(t,e)},a.addAll=function(t){if(t===null)return this;if(ue(t))for(var e=t.length,n=0;n<e;n++){var i=t[n];this.add(i.key,i.value)}else if(t instanceof pt)for(t=t.iterator;t.next();)this.add(t.key,t.value);else for(t=t.iterator;t.next();)e=t.value,this.add(e.key,e.value);return this},a.first=function(){return this.ea},pt.prototype.any=function(t){for(var e=this.ea;e!==null;){if(t(e))return!0;e=e.ta}return!1},pt.prototype.all=function(t){for(var e=this.ea;e!==null;){if(!t(e))return!1;e=e.ta}return!0},pt.prototype.each=function(t){for(var e=this.ea;e!==null;)t(e),e=e.ta;return this},pt.prototype.map=function(t){for(var e=new pt,n=this.ea;n!==null;)e.add(n.key,t(n)),n=n.ta;return e},pt.prototype.filter=function(t){for(var e=new pt,n=this.ea;n!==null;)t(n)&&e.add(n.key,n.value),n=n.ta;return e},a=pt.prototype,a.contains=function(t){var e=t;return Bt(t)&&(e=$e(t),e===void 0)?!1:this.Nb[e]!==void 0},a.has=function(t){return this.contains(t)},a.I=function(t){var e=t;return Bt(t)&&(e=$e(t),e===void 0)?null:(t=this.Nb[e],t===void 0?null:t.value)},a.get=function(t){return this.I(t)},a.remove=function(t){if(t===null)return!1;this._isFrozen&&yt(this,t);var e=t;if(Bt(t)&&(e=$e(t),e===void 0)||(t=this.Nb[e],t===void 0))return!1;var n=t.ta,i=t.Rk;return n!==null&&(n.Rk=i),i!==null&&(i.ta=n),this.ea===t&&(this.ea=n),this.Ve===t&&(this.Ve=i),delete this.Nb[e],this.Mb--,this.sb(),!0},a.delete=function(t){return this.remove(t)},a.clear=function(){this._isFrozen&&yt(this),this.Nb={},this.Mb=0,this.Pa!==null&&this.Pa.reset(),this.Ue!==null&&this.Ue.reset(),this.Ve=this.ea=null,this.sb()},pt.prototype.copy=function(){var t=new pt,e=this.Nb,n;for(n in e){var i=e[n];t.add(i.key,i.value)}return t},pt.prototype.Da=function(){var t=this.Nb,e=Array(this.Mb),n=0,i;for(i in t){var r=t[i];e[n]=new is(r.key,r.value),n++}return e},pt.prototype.yf=function(){return new Zt(this)},Z.Object.defineProperties(pt.prototype,{count:{get:function(){return this.Mb}},size:{get:function(){return this.Mb}},iterator:{get:function(){if(0>=this.count)return Wn;var t=this.Pa;return t!==null?(t.reset(),t):new Xe(this)}},iteratorKeys:{get:function(){return 0>=this.count?Wn:new ze(this)}},iteratorValues:{get:function(){if(0>=this.count)return Wn;var t=this.Ue;return t!==null?(t.reset(),t):new Ee(this)}}}),pt.prototype.toKeySet=pt.prototype.yf,pt.prototype.toArray=pt.prototype.Da,pt.prototype.clear=pt.prototype.clear,pt.prototype.delete=pt.prototype.delete,pt.prototype.remove=pt.prototype.remove,pt.prototype.get=pt.prototype.get,pt.prototype.getValue=pt.prototype.I,pt.prototype.has=pt.prototype.has,pt.prototype.contains=pt.prototype.contains,pt.prototype.first=pt.prototype.first,pt.prototype.addAll=pt.prototype.addAll,pt.prototype.set=pt.prototype.set,pt.prototype.add=pt.prototype.add,pt.prototype.thaw=pt.prototype.ja,pt.prototype.freeze=pt.prototype.freeze,pt.className="Map";function T(t,e){t===void 0?this.y=this.x=0:typeof t=="number"&&typeof e=="number"?(this.x=t,this.y=e):X("Invalid arguments to Point constructor: "+t+", "+e),this._isFrozen=!1}var Zi,kr,zh,ya,Ds;T.prototype.assign=function(t){return this.x=t.x,this.y=t.y,this},T.prototype.h=function(t,e){return this.x=t,this.y=e,this},T.prototype.eg=function(t,e){return this.x=t,this.y=e,this},T.prototype.set=function(t){return this.x=t.x,this.y=t.y,this},T.prototype.copy=function(){var t=new T;return t.x=this.x,t.y=this.y,t},a=T.prototype,a.ha=function(){return this._isFrozen=!0,Object.freeze(this),this},a.J=function(){return this._isFrozen||Object.isFrozen(this)?this:this.copy().freeze()},a.freeze=function(){return this._isFrozen=!0,this},a.ja=function(){return Object.isFrozen(this)&&X("cannot thaw constant: "+this),this._isFrozen=!1,this};function du(t){if(typeof t=="string"){t=t.split(" ");for(var e=0,n=0;t[e]==="";)e++;var i=t[e++];i&&(n=parseFloat(i));for(var r=0;t[e]==="";)e++;return(i=t[e++])&&(r=parseFloat(i)),new T(n,r)}return new T}function fu(t){return t.x.toString()+" "+t.y.toString()}a.toString=function(){return"Point("+this.x+","+this.y+")"},a.C=function(t){return t instanceof T?this.x===t.x&&this.y===t.y:!1},a.Vh=function(t,e){return this.x===t&&this.y===e},a.$a=function(t){return O.B(this.x,t.x)&&O.B(this.y,t.y)},a.add=function(t){return this.x+=t.x,this.y+=t.y,this},a.ge=function(t){return this.x-=t.x,this.y-=t.y,this},a.offset=function(t,e){return this.x+=t,this.y+=e,this},T.prototype.rotate=function(t){if(t===0)return this;var e=this.x,n=this.y;if(e===0&&n===0)return this;if(360<=t?t-=360:0>t&&(t+=360),t===90){t=0;var i=1}else t===180?(t=-1,i=0):t===270?(t=0,i=-1):(i=t*Math.PI/180,t=Math.cos(i),i=Math.sin(i));return this.x=t*e-i*n,this.y=i*e+t*n,this},a=T.prototype,a.scale=function(t,e){return this.x*=t,this.y*=e,this},a.mf=function(t){var e=t.x-this.x;return t=t.y-this.y,e*e+t*t},a.qd=function(t,e){return t-=this.x,e-=this.y,t*t+e*e},a.normalize=function(){var t=this.x,e=this.y,n=Math.sqrt(t*t+e*e);return 0<n&&(this.x=t/n,this.y=e/n),this},a.Za=function(t){return Eh(t.x-this.x,t.y-this.y)},a.direction=function(t,e){return Eh(t-this.x,e-this.y)};function Eh(t,e){if(t===0)return 0<e?90:0>e?270:0;if(e===0)return 0<t?0:180;if(isNaN(t)||isNaN(e))return 0;var n=180*Math.atan(Math.abs(e/t))/Math.PI;return 0>t?n=0>e?n+180:180-n:0>e&&(n=360-n),n}a.ky=function(t,e){return O.il(t.x,t.y,e.x,e.y,this.x,this.y)},a.xz=function(t,e,n,i){return O.$g(t,e,n,i,this.x,this.y,this),this},a.yz=function(t,e){return O.$g(t.x,t.y,e.x,e.y,this.x,this.y,this),this},a.Mz=function(t,e,n,i){return O.jo(this.x,this.y,t,e,n,i,this),this},a.Nz=function(t,e){return O.jo(this.x,this.y,t.x,t.y,e.width,e.height,this),this},a.hi=function(t,e){return this.x=t.x+e.x*t.width+e.offsetX,this.y=t.y+e.y*t.height+e.offsetY,this},a.ii=function(t,e,n,i,r){return this.x=t+r.x*n+r.offsetX,this.y=e+r.y*i+r.offsetY,this},a.transform=function(t){return t.Ea(this),this};function Ue(t,e){return e.Gd(t),t}function ve(t,e,n,i,r,s){var h=r-n,u=s-i,p=h*h+u*u;n-=t,i-=e;var d=-n*h-i*u;return 0>=d||d>=p?(h=r-t,u=s-e,Math.min(n*n+i*i,h*h+u*u)):(t=h*i-u*n,t*t/p)}function oi(t,e,n,i){return t=n-t,e=i-e,t*t+e*e}function ji(t,e,n,i){return t=n-t,e=i-e,t===0?0<e?90:0>e?270:0:e===0?0<t?0:180:isNaN(t)||isNaN(e)?0:(i=180*Math.atan(Math.abs(e/t))/Math.PI,0>t?i=0>e?i+180:180-i:0>e&&(i=360-i),i)}a.w=function(){return isFinite(this.x)&&isFinite(this.y)},T.alloc=function(){var t=Uo.pop();return t===void 0?new T:t},T.allocAt=function(t,e){var n=Uo.pop();return n===void 0?new T(t,e):(n.x=t,n.y=e,n)},T.free=function(t){Uo.push(t)},T.prototype.isReal=T.prototype.w,T.prototype.setSpot=T.prototype.ii,T.prototype.setRectSpot=T.prototype.hi,T.prototype.snapToGridPoint=T.prototype.Nz,T.prototype.snapToGrid=T.prototype.Mz,T.prototype.projectOntoLineSegmentPoint=T.prototype.yz,T.prototype.projectOntoLineSegment=T.prototype.xz,T.intersectingLineSegments=function(t,e,n,i,r,s,h,u){return O.ql(t,e,n,i,r,s,h,u)},T.prototype.compareWithLineSegmentPoint=T.prototype.ky,T.compareWithLineSegment=function(t,e,n,i,r,s){return O.il(t,e,n,i,r,s)},T.prototype.direction=T.prototype.direction,T.prototype.directionPoint=T.prototype.Za,T.prototype.normalize=T.prototype.normalize,T.prototype.distanceSquared=T.prototype.qd,T.prototype.distanceSquaredPoint=T.prototype.mf,T.prototype.scale=T.prototype.scale,T.prototype.rotate=T.prototype.rotate,T.prototype.offset=T.prototype.offset,T.prototype.subtract=T.prototype.ge,T.prototype.add=T.prototype.add,T.prototype.equalsApprox=T.prototype.$a,T.prototype.equalTo=T.prototype.Vh,T.prototype.equals=T.prototype.C,T.prototype.set=T.prototype.set,T.prototype.setTo=T.prototype.eg;var Uo=[];T.className="Point",T.parse=du,T.stringify=fu,T.distanceLineSegmentSquared=ve,T.distanceSquared=oi,T.direction=ji,T.Origin=Zi=new T(0,0).ha(),T.InfiniteTopLeft=kr=new T(-1/0,-1/0).ha(),T.InfiniteBottomRight=zh=new T(1/0,1/0).ha(),T.SixPoint=ya=new T(6,6).ha(),T.NoPoint=Ds=new T(NaN,NaN).ha(),T.parse=du,T.stringify=fu,T.distanceLineSegmentSquared=ve,T.distanceSquared=oi,T.direction=ji;function ht(t,e){t===void 0?this.height=this.width=0:typeof t=="number"&&(0<=t||isNaN(t))&&typeof e=="number"&&(0<=e||isNaN(e))?(this.width=t,this.height=e):X("Invalid arguments to Size constructor: "+t+", "+e),this._isFrozen=!1}var Nr,va,Rh,Tr,gu,Cr,os;ht.prototype.assign=function(t){return this.width=t.width,this.height=t.height,this},ht.prototype.h=function(t,e){return this.width=t,this.height=e,this},ht.prototype.eg=function(t,e){return this.width=t,this.height=e,this},ht.prototype.set=function(t){return this.width=t.width,this.height=t.height,this},ht.prototype.copy=function(){var t=new ht;return t.width=this.width,t.height=this.height,t},a=ht.prototype,a.ha=function(){return this._isFrozen=!0,Object.freeze(this),this},a.J=function(){return this._isFrozen||Object.isFrozen(this)?this:this.copy().freeze()},a.freeze=function(){return this._isFrozen=!0,this},a.ja=function(){return Object.isFrozen(this)&&X("cannot thaw constant: "+this),this._isFrozen=!1,this};function Vh(t){if(typeof t=="string"){t=t.split(" ");for(var e=0,n=0;t[e]==="";)e++;var i=t[e++];i&&(n=parseFloat(i));for(var r=0;t[e]==="";)e++;return(i=t[e++])&&(r=parseFloat(i)),new ht(n,r)}return new ht}function Yh(t){return t.width.toString()+" "+t.height.toString()}a.toString=function(){return"Size("+this.width+","+this.height+")"},a.C=function(t){return t instanceof ht?this.width===t.width&&this.height===t.height:!1},a.Vh=function(t,e){return this.width===t&&this.height===e},a.$a=function(t){return O.B(this.width,t.width)&&O.B(this.height,t.height)},a.vc=function(t,e){return t=this.width+t,this.width=0<=t?t:0,e=this.height+e,this.height=0<=e?e:0,this},a.w=function(){return isFinite(this.width)&&isFinite(this.height)},ht.alloc=function(){var t=cu.pop();return t===void 0?new ht:t},ht.free=function(t){cu.push(t)},ht.prototype.isReal=ht.prototype.w,ht.prototype.inflate=ht.prototype.vc,ht.prototype.equalsApprox=ht.prototype.$a,ht.prototype.equalTo=ht.prototype.Vh,ht.prototype.equals=ht.prototype.C,ht.prototype.set=ht.prototype.set,ht.prototype.setTo=ht.prototype.eg;var cu=[];ht.className="Size",ht.parse=Vh,ht.stringify=Yh,ht.ZeroSize=Nr=new ht(0,0).ha(),ht.OneSize=va=new ht(1,1).ha(),ht.SixSize=Rh=new ht(6,6).ha(),ht.EightSize=Tr=new ht(8,8).ha(),ht.TenSize=gu=new ht(10,10).ha(),ht.InfiniteSize=Cr=new ht(1/0,1/0).ha(),ht.NoSize=os=new ht(NaN,NaN).ha(),ht.parse=Vh,ht.stringify=Yh;function E(t,e,n,i){t===void 0?this.height=this.width=this.y=this.x=0:typeof t=="number"&&typeof e=="number"&&typeof n=="number"&&(0<=n||isNaN(n))&&typeof i=="number"&&(0<=i||isNaN(i))?(this.x=t,this.y=e,this.width=n,this.height=i):t instanceof T?(n=t.x,t=t.y,e instanceof T?(i=e.x,e=e.y,this.x=Math.min(n,i),this.y=Math.min(t,e),this.width=Math.abs(n-i),this.height=Math.abs(t-e)):e instanceof ht?(this.x=n,this.y=t,this.width=e.width,this.height=e.height):X("Incorrect second argument supplied to Rect constructor "+e)):X("Invalid arguments to Rect constructor: "+t+", "+e+", "+n+", "+i),this._isFrozen=!1}a=E.prototype,a.assign=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},a.h=function(t,e,n,i){return this.x=t,this.y=e,this.width=n,this.height=i,this};function $(t,e,n){t.width=e,t.height=n}a.eg=function(t,e,n,i){return this.x=t,this.y=e,this.width=n,this.height=i,this},a.set=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},a.Uc=function(t){return this.x=t.x,this.y=t.y,this},a.Lz=function(t){return this.width=t.width,this.height=t.height,this},E.prototype.copy=function(){var t=new E;return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},a=E.prototype,a.ha=function(){return this._isFrozen=!0,Object.freeze(this),this},a.J=function(){return this._isFrozen||Object.isFrozen(this)?this:this.copy().freeze()},a.freeze=function(){return this._isFrozen=!0,this},a.ja=function(){return Object.isFrozen(this)&&X("cannot thaw constant: "+this),this._isFrozen=!1,this};function st(t){if(typeof t=="string"){t=t.split(" ");for(var e=0,n=0;t[e]==="";)e++;var i=t[e++];i&&(n=parseFloat(i));for(var r=0;t[e]==="";)e++;(i=t[e++])&&(r=parseFloat(i));for(var s=0;t[e]==="";)e++;(i=t[e++])&&(s=parseFloat(i));for(var h=0;t[e]==="";)e++;return(i=t[e++])&&(h=parseFloat(i)),new E(n,r,s,h)}return new E}function ae(t){return t.x.toString()+" "+t.y.toString()+" "+t.width.toString()+" "+t.height.toString()}a.toString=function(){return"Rect("+this.x+","+this.y+","+this.width+","+this.height+")"},a.C=function(t){return t instanceof E?this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height:!1},a.Vh=function(t,e,n,i){return this.x===t&&this.y===e&&this.width===n&&this.height===i},a.$a=function(t){return O.B(this.x,t.x)&&O.B(this.y,t.y)&&O.B(this.width,t.width)&&O.B(this.height,t.height)};function Ce(t,e){return O.ca(t.x,e.x)&&O.ca(t.y,e.y)&&O.ca(t.width,e.width)&&O.ca(t.height,e.height)}a.ba=function(t){return this.x<=t.x&&this.x+this.width>=t.x&&this.y<=t.y&&this.y+this.height>=t.y},a.Ce=function(t){return this.x<=t.x&&t.x+t.width<=this.x+this.width&&this.y<=t.y&&t.y+t.height<=this.y+this.height},a.contains=function(t,e,n,i){return n===void 0&&(n=0),i===void 0&&(i=0),this.x<=t&&t+n<=this.x+this.width&&this.y<=e&&e+i<=this.y+this.height},a.offset=function(t,e){return this.x+=t,this.y+=e,this},a.vc=function(t,e){return Ko(this,e,t,e,t)},a.Wn=function(t){return Ko(this,t.top,t.right,t.bottom,t.left)},a.av=function(t){return Ko(this,-t.top,-t.right,-t.bottom,-t.left)},a.az=function(t,e,n,i){return Ko(this,t,e,n,i)};function Ko(t,e,n,i,r){var s=t.width;return n+r<=-s?(t.x+=s/2,t.width=0):(t.x-=r,t.width+=n+r),n=t.height,e+i<=-n?(t.y+=n/2,t.height=0):(t.y-=e,t.height+=e+i),t}a.Vw=function(t){return rs(this,t.x,t.y,t.width,t.height)},a.uu=function(t,e,n,i){return rs(this,t,e,n,i)};function rs(t,e,n,i,r){var s=Math.max(t.x,e),h=Math.max(t.y,n);return e=Math.min(t.x+t.width,e+i),n=Math.min(t.y+t.height,n+r),t.x=s,t.y=h,t.width=Math.max(0,e-s),t.height=Math.max(0,n-h),t}a.Qc=function(t){return this.vu(t.x,t.y,t.width,t.height)},a.vu=function(t,e,n,i){var r=this.width,s=this.x;return r!==1/0&&n!==1/0&&(r+=s,n+=t,isNaN(n)||isNaN(r)||s>n||t>r)?!1:(t=this.height,n=this.y,!(t!==1/0&&i!==1/0&&(t+=n,i+=e,isNaN(i)||isNaN(t)||n>i||e>t)))};function Oc(t,e){var n=t.width,i=t.x,r=e.x-10;return i>e.width+10+10+r||r>n+i?!1:(n=t.height,t=t.y,i=e.y-10,!(t>e.height+10+10+i||i>n+t))}a.Ke=function(t){return De(this,t.x,t.y,0,0)},a.Vc=function(t){return De(this,t.x,t.y,t.width,t.height)},a.ev=function(t,e,n,i){return n===void 0&&(n=0),i===void 0&&(i=0),De(this,t,e,n,i)};function De(t,e,n,i,r){var s=Math.min(t.x,e),h=Math.min(t.y,n);return e=Math.max(t.x+t.width,e+i),n=Math.max(t.y+t.height,n+r),t.x=s,t.y=h,t.width=e-s,t.height=n-h,t}a.ii=function(t,e,n){return this.x=t-n.offsetX-n.x*this.width,this.y=e-n.offsetY-n.y*this.height,this};function Di(t,e,n,i,r,s,h,u){return h===void 0&&(h=0),u===void 0&&(u=0),t<=r&&r+h<=t+n&&e<=s&&s+u<=e+i}function Ic(t,e,n,i,r,s,h,u){return t>h+r||r>n+t?!1:!(e>u+s||s>i+e)}a.w=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},a.fz=function(){return this.width===0&&this.height===0},E.alloc=function(){var t=Cd.pop();return t===void 0?new E:t},E.allocAt=function(t,e,n,i){var r=Cd.pop();return r===void 0?new E(t,e,n,i):r.h(t,e,n,i)},E.free=function(t){Cd.push(t)},Z.Object.defineProperties(E.prototype,{left:{get:function(){return this.x},set:function(t){this.x=t}},top:{get:function(){return this.y},set:function(t){this.y=t}},right:{get:function(){return this.x+this.width},set:function(t){this.x+=t-(this.x+this.width)}},bottom:{get:function(){return this.y+this.height},set:function(t){this.y+=t-(this.y+this.height)}},position:{get:function(){return new T(this.x,this.y)},set:function(t){this.x=t.x,this.y=t.y}},size:{get:function(){return new ht(this.width,this.height)},set:function(t){this.width=t.width,this.height=t.height}},center:{get:function(){return new T(this.x+this.width/2,this.y+this.height/2)},set:function(t){this.x=t.x-this.width/2,this.y=t.y-this.height/2}},centerX:{get:function(){return this.x+this.width/2},set:function(t){this.x=t-this.width/2}},centerY:{get:function(){return this.y+this.height/2},set:function(t){this.y=t-this.height/2}}}),E.prototype.isEmpty=E.prototype.fz,E.prototype.isReal=E.prototype.w,E.intersectsLineSegment=function(t,e,n,i,r,s,h,u){return O.Ww(t,e,n,i,r,s,h,u)},E.prototype.setSpot=E.prototype.ii,E.prototype.union=E.prototype.ev,E.prototype.unionRect=E.prototype.Vc,E.prototype.unionPoint=E.prototype.Ke,E.prototype.intersects=E.prototype.vu,E.prototype.intersectsRect=E.prototype.Qc,E.prototype.intersect=E.prototype.uu,E.prototype.intersectRect=E.prototype.Vw,E.prototype.grow=E.prototype.az,E.prototype.subtractMargin=E.prototype.av,E.prototype.addMargin=E.prototype.Wn,E.prototype.inflate=E.prototype.vc,E.prototype.offset=E.prototype.offset,E.prototype.contains=E.prototype.contains,E.prototype.containsRect=E.prototype.Ce,E.prototype.containsPoint=E.prototype.ba,E.prototype.equalsApprox=E.prototype.$a,E.prototype.equalTo=E.prototype.Vh,E.prototype.equals=E.prototype.C,E.prototype.setSize=E.prototype.Lz,E.prototype.setPoint=E.prototype.Uc,E.prototype.set=E.prototype.set,E.prototype.setTo=E.prototype.eg;var mu=null,Ac=null,Cd=[];E.className="Rect",E.parse=st,E.stringify=ae,E.contains=Di,E.intersects=Ic,E.ZeroRect=mu=new E(0,0,0,0).ha(),E.NoRect=Ac=new E(NaN,NaN,NaN,NaN).ha(),E.parse=st,E.stringify=ae,E.contains=Di,E.intersects=Ic;function Ft(t,e,n,i){t===void 0?this.left=this.bottom=this.right=this.top=0:e===void 0?this.left=this.bottom=this.right=this.top=t:n===void 0?(this.top=t,this.right=e,this.bottom=t,this.left=e):i!==void 0?(this.top=t,this.right=e,this.bottom=n,this.left=i):X("Invalid arguments to Margin constructor: "+t+", "+e+", "+n+", "+i),this._isFrozen=!1}Ft.prototype.assign=function(t){return this.top=t.top,this.right=t.right,this.bottom=t.bottom,this.left=t.left,this},Ft.prototype.eg=function(t,e,n,i){return this.top=t,this.right=e,this.bottom=n,this.left=i,this},Ft.prototype.set=function(t){return this.top=t.top,this.right=t.right,this.bottom=t.bottom,this.left=t.left,this},Ft.prototype.copy=function(){var t=new Ft;return t.top=this.top,t.right=this.right,t.bottom=this.bottom,t.left=this.left,t},a=Ft.prototype,a.ha=function(){return this._isFrozen=!0,Object.freeze(this),this},a.J=function(){return this._isFrozen||Object.isFrozen(this)?this:this.copy().freeze()},a.freeze=function(){return this._isFrozen=!0,this},a.ja=function(){return Object.isFrozen(this)&&X("cannot thaw constant: "+this),this._isFrozen=!1,this};function zc(t){if(typeof t=="string"){t=t.split(" ");for(var e=0,n=NaN;t[e]==="";)e++;var i=t[e++];if(i&&(n=parseFloat(i)),isNaN(n))return new Ft;for(var r=NaN;t[e]==="";)e++;if((i=t[e++])&&(r=parseFloat(i)),isNaN(r))return new Ft(n);for(var s=NaN;t[e]==="";)e++;if((i=t[e++])&&(s=parseFloat(i)),isNaN(s))return new Ft(n,r);for(var h=NaN;t[e]==="";)e++;return(i=t[e++])&&(h=parseFloat(i)),isNaN(h)?new Ft(n,r):new Ft(n,r,s,h)}return new Ft}function Ec(t){return t.top.toString()+" "+t.right.toString()+" "+t.bottom.toString()+" "+t.left.toString()}a.toString=function(){return"Margin("+this.top+","+this.right+","+this.bottom+","+this.left+")"},a.C=function(t){return t instanceof Ft?this.top===t.top&&this.right===t.right&&this.bottom===t.bottom&&this.left===t.left:!1},a.Vh=function(t,e,n,i){return this.top===t&&this.right===e&&this.bottom===n&&this.left===i},a.$a=function(t){return O.B(this.top,t.top)&&O.B(this.right,t.right)&&O.B(this.bottom,t.bottom)&&O.B(this.left,t.left)},a.w=function(){return isFinite(this.top)&&isFinite(this.right)&&isFinite(this.bottom)&&isFinite(this.left)},Ft.alloc=function(){var t=Rc.pop();return t===void 0?new Ft:t},Ft.free=function(t){Rc.push(t)},Ft.prototype.isReal=Ft.prototype.w,Ft.prototype.equalsApprox=Ft.prototype.$a,Ft.prototype.equalTo=Ft.prototype.Vh,Ft.prototype.equals=Ft.prototype.C,Ft.prototype.set=Ft.prototype.set,Ft.prototype.setTo=Ft.prototype.eg;var Sa=null,Fd=null,Rc=[];Ft.className="Margin",Ft.parse=zc,Ft.stringify=Ec,Ft.ZeroMargin=Sa=new Ft(0,0,0,0).ha(),Ft.TwoMargin=Fd=new Ft(2,2,2,2).ha(),Ft.parse=zc,Ft.stringify=Ec;function rt(t,e,n,i){t===void 0?this.offsetY=this.offsetX=this.y=this.x=0:(e===void 0&&(e=0),n===void 0&&(n=0),i===void 0&&(i=0),this.x=t,this.y=e,this.offsetX=n,this.offsetY=i),this._isFrozen=!1}var Ke,Qe,Mo,Pa,Xh,Dt,Uh,wa,Gs,ro,La,Ma,ka,Na,Bd,jd,Dd,Gd,Od,Id,Ad,zd,Ed,Rd,Vd,He,Vc,Yc,xu,Xc,ri,si,Tn,ai,Yd,Xd;rt.prototype.assign=function(t){return this.x=t.x,this.y=t.y,this.offsetX=t.offsetX,this.offsetY=t.offsetY,this},rt.prototype.eg=function(t,e,n,i){return this.x=t,this.y=e,this.offsetX=n,this.offsetY=i,this},rt.prototype.set=function(t){return this.x=t.x,this.y=t.y,this.offsetX=t.offsetX,this.offsetY=t.offsetY,this},rt.prototype.copy=function(){var t=new rt;return t.x=this.x,t.y=this.y,t.offsetX=this.offsetX,t.offsetY=this.offsetY,t},a=rt.prototype,a.ha=function(){return this._isFrozen=!0,Object.freeze(this),this},a.J=function(){return this._isFrozen||Object.isFrozen(this)?this:this.copy().freeze()},a.freeze=function(){return this._isFrozen=!0,this},a.ja=function(){return Object.isFrozen(this)&&X("cannot thaw constant: "+this),this._isFrozen=!1,this};function Jn(t,e){return t.x=NaN,t.y=NaN,t.offsetX=e,t}function Ud(t){if(typeof t=="string"){if(t=t.trim(),t==="None")return Ke;if(t==="TopLeft")return Qe;if(t==="Top"||t==="TopCenter"||t==="MiddleTop")return Mo;if(t==="TopRight")return Pa;if(t==="Left"||t==="LeftCenter"||t==="MiddleLeft")return Xh;if(t==="Center")return Dt;if(t==="Right"||t==="RightCenter"||t==="MiddleRight")return Uh;if(t==="BottomLeft")return wa;if(t==="Bottom"||t==="BottomCenter"||t==="MiddleBottom")return Gs;if(t==="BottomRight")return ro;if(t==="TopSide")return La;if(t==="LeftSide")return Ma;if(t==="RightSide")return ka;if(t==="BottomSide")return Na;if(t==="TopBottomSides")return Bd;if(t==="LeftRightSides")return jd;if(t==="TopLeftSides")return Dd;if(t==="TopRightSides")return Gd;if(t==="BottomLeftSides")return Od;if(t==="BottomRightSides")return Id;if(t==="NotTopSide")return Ad;if(t==="NotLeftSide")return zd;if(t==="NotRightSide")return Ed;if(t==="NotBottomSide")return Rd;if(t==="AllSides")return Vd;if(t==="Default")return He;t=t.split(" ");for(var e=0,n=0;t[e]==="";)e++;var i=t[e++];i!==void 0&&0<i.length&&(n=parseFloat(i));for(var r=0;t[e]==="";)e++;i=t[e++],i!==void 0&&0<i.length&&(r=parseFloat(i));for(var s=0;t[e]==="";)e++;i=t[e++],i!==void 0&&0<i.length&&(s=parseFloat(i));for(var h=0;t[e]==="";)e++;return i=t[e++],i!==void 0&&0<i.length&&(h=parseFloat(i)),new rt(n,r,s,h)}return new rt}function Uc(t){return t.pb()?t.x.toString()+" "+t.y.toString()+" "+t.offsetX.toString()+" "+t.offsetY.toString():t.toString()}a.toString=function(){return this.pb()?this.offsetX===0&&this.offsetY===0?"Spot("+this.x+","+this.y+")":"Spot("+this.x+","+this.y+","+this.offsetX+","+this.offsetY+")":this.C(Ke)?"None":this.C(Qe)?"TopLeft":this.C(Mo)?"Top":this.C(Pa)?"TopRight":this.C(Xh)?"Left":this.C(Dt)?"Center":this.C(Uh)?"Right":this.C(wa)?"BottomLeft":this.C(Gs)?"Bottom":this.C(ro)?"BottomRight":this.C(La)?"TopSide":this.C(Ma)?"LeftSide":this.C(ka)?"RightSide":this.C(Na)?"BottomSide":this.C(Bd)?"TopBottomSides":this.C(jd)?"LeftRightSides":this.C(Dd)?"TopLeftSides":this.C(Gd)?"TopRightSides":this.C(Od)?"BottomLeftSides":this.C(Id)?"BottomRightSides":this.C(Ad)?"NotTopSide":this.C(zd)?"NotLeftSide":this.C(Ed)?"NotRightSide":this.C(Rd)?"NotBottomSide":this.C(Vd)?"AllSides":this.C(He)?"Default":"None"},a.C=function(t){return t instanceof rt?(this.x===t.x||isNaN(this.x)&&isNaN(t.x))&&(this.y===t.y||isNaN(this.y)&&isNaN(t.y))&&this.offsetX===t.offsetX&&this.offsetY===t.offsetY:!1},a.Gu=function(){return new rt(.5-(this.x-.5),.5-(this.y-.5),-this.offsetX,-this.offsetY)},a.tf=function(t){if(!this.Sc())return!1;if(!t.Sc())if(t.C(Vc))t=Ma;else if(t.C(Yc))t=ka;else if(t.C(xu))t=La;else if(t.C(Xc))t=Na;else return!1;return t=t.offsetY,(this.offsetY&t)===t},a.pb=function(){return!isNaN(this.x)&&!isNaN(this.y)},a.Ec=function(){return isNaN(this.x)||isNaN(this.y)},a.Sc=function(){return isNaN(this.x)&&isNaN(this.y)&&this.offsetX===1&&this.offsetY!==0},a.Or=function(){return isNaN(this.x)&&isNaN(this.y)&&this.offsetX===0&&this.offsetY===0},a.Rb=function(){return isNaN(this.x)&&isNaN(this.y)&&this.offsetX===-1&&this.offsetY===0},rt.alloc=function(){var t=Kc.pop();return t===void 0?new rt:t},rt.free=function(t){Kc.push(t)},rt.prototype.isDefault=rt.prototype.Rb,rt.prototype.isNone=rt.prototype.Or,rt.prototype.isSide=rt.prototype.Sc,rt.prototype.isNoSpot=rt.prototype.Ec,rt.prototype.isSpot=rt.prototype.pb,rt.prototype.includesSide=rt.prototype.tf,rt.prototype.opposite=rt.prototype.Gu,rt.prototype.equals=rt.prototype.C,rt.prototype.set=rt.prototype.set,rt.prototype.setTo=rt.prototype.eg;var Kc=[];rt.className="Spot",rt.parse=Ud,rt.stringify=Uc,rt.None=Ke=Jn(new rt(0,0,0,0),0).ha(),rt.Default=He=Jn(new rt(0,0,-1,0),-1).ha(),rt.TopLeft=Qe=new rt(0,0,0,0).ha(),rt.TopCenter=Mo=new rt(.5,0,0,0).ha(),rt.TopRight=Pa=new rt(1,0,0,0).ha(),rt.LeftCenter=Xh=new rt(0,.5,0,0).ha(),rt.Center=Dt=new rt(.5,.5,0,0).ha(),rt.RightCenter=Uh=new rt(1,.5,0,0).ha(),rt.BottomLeft=wa=new rt(0,1,0,0).ha(),rt.BottomCenter=Gs=new rt(.5,1,0,0).ha(),rt.BottomRight=ro=new rt(1,1,0,0).ha(),rt.MiddleTop=ri=Mo,rt.MiddleLeft=si=Xh,rt.MiddleRight=Tn=Uh,rt.MiddleBottom=ai=Gs,rt.Top=xu=Mo,rt.Left=Vc=Xh,rt.Right=Yc=Uh,rt.Bottom=Xc=Gs,rt.TopSide=La=Jn(new rt(0,0,1,1),1).ha(),rt.LeftSide=Ma=Jn(new rt(0,0,1,2),1).ha(),rt.RightSide=ka=Jn(new rt(0,0,1,4),1).ha(),rt.BottomSide=Na=Jn(new rt(0,0,1,8),1).ha(),rt.TopBottomSides=Bd=Jn(new rt(0,0,1,9),1).ha(),rt.LeftRightSides=jd=Jn(new rt(0,0,1,6),1).ha(),rt.TopLeftSides=Dd=Jn(new rt(0,0,1,3),1).ha(),rt.TopRightSides=Gd=Jn(new rt(0,0,1,5),1).ha(),rt.BottomLeftSides=Od=Jn(new rt(0,0,1,10),1).ha(),rt.BottomRightSides=Id=Jn(new rt(0,0,1,12),1).ha(),rt.NotTopSide=Ad=Jn(new rt(0,0,1,14),1).ha(),rt.NotLeftSide=zd=Jn(new rt(0,0,1,13),1).ha(),rt.NotRightSide=Ed=Jn(new rt(0,0,1,11),1).ha(),rt.NotBottomSide=Rd=Jn(new rt(0,0,1,7),1).ha(),rt.AllSides=Vd=Jn(new rt(0,0,1,15),1).ha(),Yd=new rt(.156,.156).ha(),Xd=new rt(.844,.844).ha(),rt.parse=Ud,rt.stringify=Uc;function ct(){this.m11=1,this.m21=this.m12=0,this.m22=1,this.dy=this.dx=0}ct.prototype.set=function(t){return this.m11=t.m11,this.m12=t.m12,this.m21=t.m21,this.m22=t.m22,this.dx=t.dx,this.dy=t.dy,this},ct.prototype.setTransform=function(t,e,n,i,r,s){return this.m11=t,this.m12=e,this.m21=n,this.m22=i,this.dx=r,this.dy=s,this},ct.prototype.copy=function(){var t=new ct;return t.m11=this.m11,t.m12=this.m12,t.m21=this.m21,t.m22=this.m22,t.dx=this.dx,t.dy=this.dy,t},ct.prototype.toString=function(){return"Transform("+this.m11+","+this.m12+","+this.m21+","+this.m22+","+this.dx+","+this.dy+")"},ct.prototype.C=function(t){return this.m11===t.m11&&this.m12===t.m12&&this.m21===t.m21&&this.m22===t.m22&&this.dx===t.dx&&this.dy===t.dy},ct.prototype.Mr=function(){return this.dx===0&&this.dy===0&&this.m11===1&&this.m12===0&&this.m21===0&&this.m22===1},ct.prototype.reset=function(){return this.m11=1,this.m21=this.m12=0,this.m22=1,this.dy=this.dx=0,this},ct.prototype.multiply=function(t){var e=this.m11*t.m11+this.m21*t.m12,n=this.m12*t.m11+this.m22*t.m12,i=this.m11*t.m21+this.m21*t.m22,r=this.m12*t.m21+this.m22*t.m22;return this.dx=this.m11*t.dx+this.m21*t.dy+this.dx,this.dy=this.m12*t.dx+this.m22*t.dy+this.dy,this.m11=e,this.m12=n,this.m21=i,this.m22=r,this},ct.prototype.Cu=function(t){var e=1/(t.m11*t.m22-t.m12*t.m21),n=t.m22*e,i=-t.m12*e,r=-t.m21*e,s=t.m11*e,h=e*(t.m21*t.dy-t.m22*t.dx);return t=e*(t.m12*t.dx-t.m11*t.dy),e=this.m11*n+this.m21*i,n=this.m12*n+this.m22*i,i=this.m11*r+this.m21*s,r=this.m12*r+this.m22*s,this.dx=this.m11*h+this.m21*t+this.dx,this.dy=this.m12*h+this.m22*t+this.dy,this.m11=e,this.m12=n,this.m21=i,this.m22=r,this},ct.prototype.Lr=function(){var t=1/(this.m11*this.m22-this.m12*this.m21),e=-this.m12*t,n=-this.m21*t,i=this.m11*t,r=t*(this.m21*this.dy-this.m22*this.dx),s=t*(this.m12*this.dx-this.m11*this.dy);return this.m11=this.m22*t,this.m12=e,this.m21=n,this.m22=i,this.dx=r,this.dy=s,this},ct.prototype.rotate=function(t,e,n){if(360<=t?t-=360:0>t&&(t+=360),t===0)return this;if(this.translate(e,n),t===90){t=0;var i=1}else t===180?(t=-1,i=0):t===270?(t=0,i=-1):(i=t*Math.PI/180,t=Math.cos(i),i=Math.sin(i));var r=this.m12*t+this.m22*i,s=this.m11*-i+this.m21*t,h=this.m12*-i+this.m22*t;return this.m11=this.m11*t+this.m21*i,this.m12=r,this.m21=s,this.m22=h,this.translate(-e,-n),this},a=ct.prototype,a.translate=function(t,e){return this.dx+=this.m11*t+this.m21*e,this.dy+=this.m12*t+this.m22*e,this},a.scale=function(t,e){return e===void 0&&(e=t),this.m11*=t,this.m12*=t,this.m21*=e,this.m22*=e,this},a.Ea=function(t){var e=t.x,n=t.y;return t.h(e*this.m11+n*this.m21+this.dx,e*this.m12+n*this.m22+this.dy)},a.Gd=function(t){var e=1/(this.m11*this.m22-this.m12*this.m21),n=t.x,i=t.y;return t.h(n*this.m22*e+i*-this.m21*e+e*(this.m21*this.dy-this.m22*this.dx),n*-this.m12*e+i*this.m11*e+e*(this.m12*this.dx-this.m11*this.dy))},a.vw=function(t){var e=1/(this.m11*this.m22-this.m12*this.m21),n=1.25*t.x,i=1.2*t.y;return t.h(n*this.m22*e+i*-this.m21*e+e*(this.m21*this.dy-this.m22*this.dx),n*-this.m12*e+i*this.m11*e+e*(this.m12*this.dx-this.m11*this.dy))},a.Jo=function(t){var e=t.x,n=t.y,i=e+t.width,r=n+t.height,s=this.m11,h=this.m12,u=this.m21,p=this.m22,d=this.dx,g=this.dy,c=e*s+n*u+d,y=e*h+n*p+g,S=i*s+n*u+d,v=i*h+n*p+g;return n=e*s+r*u+d,e=e*h+r*p+g,s=i*s+r*u+d,i=i*h+r*p+g,r=Math.min(c,S),c=Math.max(c,S),S=Math.min(y,v),y=Math.max(y,v),r=Math.min(r,n),c=Math.max(c,n),S=Math.min(S,e),y=Math.max(y,e),r=Math.min(r,s),c=Math.max(c,s),S=Math.min(S,i),y=Math.max(y,i),t.h(r,S,c-r,y-S),t},ct.alloc=function(){var t=Hc.pop();return t===void 0?new ct:t},ct.free=function(t){Hc.push(t)},ct.prototype.transformRect=ct.prototype.Jo,ct.prototype.transformPoint=ct.prototype.Ea,ct.prototype.scale=ct.prototype.scale,ct.prototype.translate=ct.prototype.translate,ct.prototype.rotate=ct.prototype.rotate,ct.prototype.invert=ct.prototype.Lr,ct.prototype.multiplyInverted=ct.prototype.Cu,ct.prototype.multiply=ct.prototype.multiply,ct.prototype.reset=ct.prototype.reset,ct.prototype.isIdentity=ct.prototype.Mr,ct.prototype.equals=ct.prototype.C,ct.prototype.setTransform=ct.prototype.setTransform,ct.prototype.set=ct.prototype.set;var Hc=[];ct.className="Transform",ct.xF="54a702f3e53909c447824c6706603faf4c";var O={Sz:"7da71ca0ad381e90",ig:(Math.sqrt(2)-1)/3*4,ov:null,sqrt:function(t){if(0>=t)return 0;var e=O.ov;if(e===null){e=[];for(var n=0;2e3>=n;n++)e[n]=Math.sqrt(n);O.ov=e}return 1>t?(n=1/t,2e3>=n?1/e[n|0]:Math.sqrt(t)):2e3>=t?e[t|0]:Math.sqrt(t)},B:function(t,e){return t-=e,.5>t&&-.5<t},ca:function(t,e){return t-=e,5e-8>t&&-5e-8<t},Sb:function(t,e,n,i,r,s,h){if(0>=r&&(r=1e-6),t<n)var u=t,p=n;else u=n,p=t;if(e<i)var d=e,g=i;else d=i,g=e;if(t===n)return d<=h&&h<=g&&t-r<=s&&s<=t+r;if(e===i)return u<=s&&s<=p&&e-r<=h&&h<=e+r;if(p+=r,u-=r,u<=s&&s<=p&&(g+=r,d-=r,d<=h&&h<=g))if(p-u>g-d)if(t-n>r||n-t>r){if(s=(i-e)/(n-t)*(s-t)+e,s-r<=h&&h<=s+r)return!0}else return!0;else if(e-i>r||i-e>r){if(h=(n-t)/(i-e)*(h-e)+t,h-r<=s&&s<=h+r)return!0}else return!0;return!1},tr:function(t,e,n,i,r,s,h,u,p,d,g,c){if(O.Sb(t,e,h,u,c,n,i)&&O.Sb(t,e,h,u,c,r,s))return O.Sb(t,e,h,u,c,d,g);var y=(t+n)/2,S=(e+i)/2,v=(n+r)/2,L=(i+s)/2;r=(r+h)/2,s=(s+u)/2,i=(y+v)/2,n=(S+L)/2,v=(v+r)/2,L=(L+s)/2;var N=(i+v)/2,M=(n+L)/2;return O.tr(t,e,y,S,i,n,N,M,p,d,g,c)||O.tr(N,M,v,L,r,s,h,u,p,d,g,c)},ww:function(t,e,n,i,r,s,h,u,p){var d=(n+r)/2,g=(i+s)/2;return p.h((((t+n)/2+d)/2+(d+(r+h)/2)/2)/2,(((e+i)/2+g)/2+(g+(s+u)/2)/2)/2),p},gy:function(t,e,n,i,r,s,h,u){var p=(n+r)/2,d=(i+s)/2;return ji(((t+n)/2+p)/2,((e+i)/2+d)/2,(p+(r+h)/2)/2,(d+(s+u)/2)/2)},gl:function(t,e,n,i,r,s,h,u,p,d){if(O.Sb(t,e,h,u,p,n,i)&&O.Sb(t,e,h,u,p,r,s))De(d,t,e,0,0),De(d,h,u,0,0);else{var g=(t+n)/2,c=(e+i)/2,y=(n+r)/2,S=(i+s)/2;r=(r+h)/2,s=(s+u)/2,i=(g+y)/2,n=(c+S)/2,y=(y+r)/2,S=(S+s)/2;var v=(i+y)/2,L=(n+S)/2;O.gl(t,e,g,c,i,n,v,L,p,d),O.gl(v,L,y,S,r,s,h,u,p,d)}return d},Be:function(t,e,n,i,r,s,h,u,p,d){if(O.Sb(t,e,h,u,p,n,i)&&O.Sb(t,e,h,u,p,r,s))d.length===0&&(d.push(t),d.push(e)),d.push(h),d.push(u);else{var g=(t+n)/2,c=(e+i)/2,y=(n+r)/2,S=(i+s)/2;r=(r+h)/2,s=(s+u)/2,i=(g+y)/2,n=(c+S)/2,y=(y+r)/2,S=(S+s)/2;var v=(i+y)/2,L=(n+S)/2;O.Be(t,e,g,c,i,n,v,L,p,d),O.Be(v,L,y,S,r,s,h,u,p,d)}return d},Ju:function(t,e,n,i,r,s,h,u,p,d){if(O.Sb(t,e,r,s,d,n,i))return O.Sb(t,e,r,s,d,u,p);var g=(t+n)/2,c=(e+i)/2;n=(n+r)/2,i=(i+s)/2;var y=(g+n)/2,S=(c+i)/2;return O.Ju(t,e,g,c,y,S,h,u,p,d)||O.Ju(y,S,n,i,r,s,h,u,p,d)},gA:function(t,e,n,i,r,s,h){return h.h(((t+n)/2+(n+r)/2)/2,((e+i)/2+(i+s)/2)/2),h},Iu:function(t,e,n,i,r,s,h,u){if(O.Sb(t,e,r,s,h,n,i))De(u,t,e,0,0),De(u,r,s,0,0);else{var p=(t+n)/2,d=(e+i)/2;n=(n+r)/2,i=(i+s)/2;var g=(p+n)/2,c=(d+i)/2;O.Iu(t,e,p,d,g,c,h,u),O.Iu(g,c,n,i,r,s,h,u)}return u},xo:function(t,e,n,i,r,s,h,u){if(O.Sb(t,e,r,s,h,n,i))u.length===0&&(u.push(t),u.push(e)),u.push(r),u.push(s);else{var p=(t+n)/2,d=(e+i)/2;n=(n+r)/2,i=(i+s)/2;var g=(p+n)/2,c=(d+i)/2;O.xo(t,e,p,d,g,c,h,u),O.xo(g,c,n,i,r,s,h,u)}return u},Yn:function(t,e,n,i,r,s,h,u,p,d,g,c,y,S){if(O.Sb(t,e,h,u,y,n,i)&&O.Sb(t,e,h,u,y,r,s))return!O.ql(t,e,h,u,p,d,g,c)||(y=(t-h)*(d-c)-(e-u)*(p-g),y===0)?!1:(S.h(((t*u-e*h)*(p-g)-(t-h)*(p*c-d*g))/y,((t*u-e*h)*(d-c)-(e-u)*(p*c-d*g))/y),!0);var v=(t+n)/2,L=(e+i)/2,N=(n+r)/2,M=(i+s)/2;r=(r+h)/2,s=(s+u)/2,i=(v+N)/2,n=(L+M)/2,N=(N+r)/2,M=(M+s)/2;var B=(i+N)/2,F=(n+M)/2,j=1/0,D=!1,R=0,W=0;return O.Yn(t,e,v,L,i,n,B,F,p,d,g,c,y,S)&&(t=(S.x-p)*(S.x-p)+(S.y-d)*(S.y-d),t<j&&(j=t,D=!0,R=S.x,W=S.y)),O.Yn(B,F,N,M,r,s,h,u,p,d,g,c,y,S)&&(S.x-p)*(S.x-p)+(S.y-d)*(S.y-d)<j&&(D=!0,R=S.x,W=S.y),D&&(S.x=R,S.y=W),D},Zn:function(t,e,n,i,r,s,h,u,p,d,g,c,y){var S=0;if(O.Sb(t,e,h,u,y,n,i)&&O.Sb(t,e,h,u,y,r,s)){if(y=(t-h)*(d-c)-(e-u)*(p-g),y===0)return S;var v=((t*u-e*h)*(p-g)-(t-h)*(p*c-d*g))/y,L=((t*u-e*h)*(d-c)-(e-u)*(p*c-d*g))/y;if(v>=g)return S;if((p>g?p-g:g-p)<(d>c?d-c:c-d)){if(e<u?(p=e,t=u):(p=u,t=e),L<p||L>t)return S}else if(t<h?(p=t,t=h):p=h,v<p||v>t)return S;0<y?S++:0>y&&S--}else{v=(t+n)/2,L=(e+i)/2;var N=(n+r)/2,M=(i+s)/2;r=(r+h)/2,s=(s+u)/2,i=(v+N)/2,n=(L+M)/2,N=(N+r)/2,M=(M+s)/2;var B=(i+N)/2,F=(n+M)/2;S+=O.Zn(t,e,v,L,i,n,B,F,p,d,g,c,y),S+=O.Zn(B,F,N,M,r,s,h,u,p,d,g,c,y)}return S},$g:function(t,e,n,i,r,s,h){return O.ca(t,n)?(e<i?(n=e,e=i):n=i,s<n?(h.h(t,n),!1):s>e?(h.h(t,e),!1):(h.h(t,s),!0)):O.ca(e,i)?(t<n?(i=t,t=n):i=n,r<i?(h.h(i,e),!1):r>t?(h.h(t,e),!1):(h.h(r,e),!0)):(r=((t-r)*(t-n)+(e-s)*(e-i))/((n-t)*(n-t)+(i-e)*(i-e)),-5e-6>r?(h.h(t,e),!1):1.000005<r?(h.h(n,i),!1):(h.h(t+r*(n-t),e+r*(i-e)),!0))},He:function(t,e,n,i,r,s,h,u,p){return O.B(t,n)&&O.B(e,i)?(p.h(t,e),!1):O.ca(r,h)?O.ca(t,n)?(O.$g(t,e,n,i,r,s,p),!1):O.$g(t,e,n,i,r,(i-e)/(n-t)*(r-t)+e,p):(u=(u-s)/(h-r),O.ca(t,n)?(n=u*(t-r)+s,e<i?(r=e,e=i):r=i,n<r?(p.h(t,r),!1):n>e?(p.h(t,e),!1):(p.h(t,n),!0)):(h=(i-e)/(n-t),O.ca(u,h)?(O.$g(t,e,n,i,r,s,p),!1):(r=(h*t-u*r+s-e)/(h-u),O.ca(h,0)?(t<n?(i=t,t=n):i=n,r<i?(p.h(i,e),!1):r>t?(p.h(t,e),!1):(p.h(r,e),!0)):O.$g(t,e,n,i,r,h*(r-t)+e,p))))},eA:function(t,e,n,i,r){return O.He(n.x,n.y,i.x,i.y,t.x,t.y,e.x,e.y,r)},cA:function(t,e,n,i,r,s,h,u,p,d){function g(N,M){var B=(N-t)*(N-t)+(M-e)*(M-e);B<c&&(c=B,p.h(N,M))}var c=1/0;g(p.x,p.y);var y=0,S=0,v=0,L=0;if(r<h?(y=r,S=h):(y=h,S=r),s<u?(v=r,L=h):(v=h,L=r),y=(S-y)/2+d,d=(L-v)/2+d,r=(r+h)/2,s=(s+u)/2,y===0||d===0)return p;if(.5>(n>t?n-t:t-n)){if(y=1-(n-r)*(n-r)/(y*y),0>y)return p;y=Math.sqrt(y),i=-d*y+s,g(n,d*y+s),g(n,i)}else{if(n=(i-e)/(n-t),i=1/(y*y)+n*n/(d*d),u=2*n*(e-n*t)/(d*d)-2*n*s/(d*d)-2*r/(y*y),y=u*u-4*i*(2*n*t*s/(d*d)-2*e*s/(d*d)+s*s/(d*d)+r*r/(y*y)-1+(e-n*t)*(e-n*t)/(d*d)),0>y)return p;y=Math.sqrt(y),d=(-u+y)/(2*i),g(d,n*d-n*t+e),y=(-u-y)/(2*i),g(y,n*y-n*t+e)}return p},sf:function(t,e,n,i,r,s,h,u,p){var d=1e21,g=t,c=e;if(O.He(t,e,t,i,r,s,h,u,p)){var y=(p.x-r)*(p.x-r)+(p.y-s)*(p.y-s);y<d&&(d=y,g=p.x,c=p.y)}return O.He(n,e,n,i,r,s,h,u,p)&&(y=(p.x-r)*(p.x-r)+(p.y-s)*(p.y-s),y<d&&(d=y,g=p.x,c=p.y)),O.He(t,e,n,e,r,s,h,u,p)&&(e=(p.x-r)*(p.x-r)+(p.y-s)*(p.y-s),e<d&&(d=e,g=p.x,c=p.y)),O.He(t,i,n,i,r,s,h,u,p)&&(t=(p.x-r)*(p.x-r)+(p.y-s)*(p.y-s),t<d&&(d=t,g=p.x,c=p.y)),p.h(g,c),1e21>d},bA:function(t,e,n,i,r,s,h,u,p){return n=t-n,h=r-h,n===0||h===0?n===0?(e=(s-u)/h,u=t,r=e*u+(s-e*r)):(s=(e-i)/n,u=r,r=s*u+(e-s*t)):(i=(e-i)/n,u=(s-u)/h,t=e-i*t,u=(s-u*r-t)/(i-u),r=i*u+t),p.h(u,r),p},Jr:function(t,e,n){return O.Ww(t.x,t.y,t.width,t.height,e.x,e.y,n.x,n.y)},Ww:function(t,e,n,i,r,s,h,u){var p=t+n,d=e+i;return r===h?(s<u?(h=s,s=u):h=u,t<=r&&r<=p&&h<=d&&s>=e):s===u?(r<h?(u=r,r=h):u=h,e<=s&&s<=d&&u<=p&&r>=t):!!(Di(t,e,n,i,r,s)||Di(t,e,n,i,h,u)||O.ql(t,e,p,e,r,s,h,u)||O.ql(p,e,p,d,r,s,h,u)||O.ql(p,d,t,d,r,s,h,u)||O.ql(t,d,t,e,r,s,h,u))},ql:function(t,e,n,i,r,s,h,u){return 0>=O.il(t,e,n,i,r,s)*O.il(t,e,n,i,h,u)&&0>=O.il(r,s,h,u,t,e)*O.il(r,s,h,u,n,i)},il:function(t,e,n,i,r,s){return n-=t,i-=e,t=r-t,e=s-e,s=t*i-e*n,s===0&&(s=t*n+e*i,0<s&&(s=(t-n)*n+(e-i)*i,0>s&&(s=0))),s},vo:function(t){return 0>t&&(t+=360),360<=t&&(t-=360),t},Dw:function(t,e,n,i,r,s){var h=Math.PI;s||(i*=h/180,r*=h/180);var u=i>r?-1:1;s=[];var p=h/2,d=i;if(i=Math.min(2*h,Math.abs(r-i)),1e-5>i)return p=d+u*Math.min(i,p),u=t+n*Math.cos(d),d=e+n*Math.sin(d),t+=n*Math.cos(p),e+=n*Math.sin(p),n=(u+t)/2,p=(d+e)/2,s.push([u,d,n,p,n,p,t,e]),s;for(;1e-5<i;)r=d+u*Math.min(i,p),s.push(O.oy(n,d,r,t,e)),i-=Math.abs(r-d),d=r;return s},oy:function(t,e,n,i,r){var s=(n-e)/2,h=t*Math.cos(s),u=t*Math.sin(s),p=-u,d=h*h+p*p,g=d+h*h+p*u;return d=4/3*(Math.sqrt(2*d*g)-g)/(h*u-p*h),u=h-d*p,h=p+d*h,p=-h,d=s+e,s=Math.cos(d),d=Math.sin(d),[i+t*Math.cos(e),r+t*Math.sin(e),i+u*s-h*d,r+u*d+h*s,i+u*s-p*d,r+u*d+p*s,i+t*Math.cos(n),r+t*Math.sin(n)]},jo:function(t,e,n,i,r,s,h){n=Math.floor((t-n)/r)*r+n,i=Math.floor((e-i)/s)*s+i;var u=n;return n+r-t<r/2&&(u=n+r),t=i,i+s-e<s/2&&(t=i+s),h.h(u,t),h},Nw:function(t,e){var n=Math.max(t,e);t=Math.min(t,e);var i;do e=n%t,n=i=t,t=e;while(0<e);return i},uy:function(t,e,n,i){var r=0>n,s=0>i;if(t<e)var h=1,u=0;else h=0,u=1;var p=h===0?t:e,d=h===0?n:i;return(h===0?r:s)&&(d=-d),h=u,n=h===0?n:i,(h===0?r:s)&&(n=-n),O.vy(p,h===0?t:e,d,n,0,0)},vy:function(t,e,n,i,r,s){if(0<i)if(0<n){r=t*t,s=e*e,t*=n;var h=e*i,u=-s+h,p=-s+Math.sqrt(t*t+h*h);e=u;for(var d=0;9999999999>d&&(e=.5*(u+p),!(e===u||e===p));++d){var g=t/(e+r),c=h/(e+s);if(g=g*g+c*c-1,0<g)u=e;else if(0>g)p=e;else break}n=r*n/(e+r)-n,i=s*i/(e+s)-i,n=Math.sqrt(n*n+i*i)}else n=Math.abs(i-e);else i=t*t-e*e,s=t*n,s<i?(i=s/i,s=e*Math.sqrt(Math.abs(1-i*i)),n=t*i-n,n=Math.sqrt(n*n+s*s)):n=Math.abs(n-t);return n},Le:new In,Ul:new In,zf:new In,Af:0,Vl:100};O.za=O.Sz;function K(t){ce(this),this.o=2,t===void 0&&(t=K.m),this.qa=t,this.yc=this.xc=this.ed=this.dd=0,t===K.m?this.Ud=new Q:(K.W===null&&(K.W=new Q().freeze()),this.Ud=K.W),this.vp=this.Ud.Ia,this.bp=new E().freeze(),this.Xl=this.Yj=null,this.Yl=NaN,this.Uf=Qe,this.Vf=ro,this.xk=this.yk=NaN,this.Hf=ne}K.prototype.copy=function(){var t=new K;if(t.o=this.o&-2,t.qa=this.qa,t.dd=this.dd,t.ed=this.ed,t.xc=this.xc,t.yc=this.yc,this.qa===K.m){for(var e=this.Ud.s,n=t.Ud,i=0;i<e.length;i++)n.add(e[i].copy());t.Ud=n}else t.Ud=this.Ud;return t.vp=this.vp,t.bp.assign(this.bp),t.Yj=this.Yj,t.Xl=this.Xl,t.Yl=this.Yl,t.Uf=this.Uf.J(),t.Vf=this.Vf.J(),t.yk=this.yk,t.xk=this.xk,t.Hf=this.Hf,t},K.prototype.ha=function(){return this.freeze(),Object.freeze(this),this},K.prototype.freeze=function(){if(this._isFrozen=!0,this.type!==K.m)return this;var t=this.figures;t.freeze(),t=t.s;for(var e=t.length,n=0;n<e;n++)t[n].freeze();return this},K.prototype.ja=function(){if(Object.isFrozen(this)&&X("cannot thaw constant: "+this),this._isFrozen=!1,this.type!==K.m)return this;var t=this.figures;t.ja(),t=t.s;for(var e=t.length,n=0;n<e;n++)t[n].ja();return this},K.prototype.$a=function(t){if(!(t instanceof K))return!1;if(this.type!==t.type)return this.type===K.j&&t.type===K.m?Wc(this,t):t.type===K.j&&this.type===K.m?Wc(t,this):!1;if(this.type===K.m){var e=this.figures.s;t=t.figures.s;var n=e.length;if(n!==t.length)return!1;for(var i=0;i<n;i++)if(!e[i].$a(t[i]))return!1;return!0}return O.B(this.startX,t.startX)&&O.B(this.startY,t.startY)&&O.B(this.endX,t.endX)&&O.B(this.endY,t.endY)};function Wc(t,e){return t.type!==K.j||e.type!==K.m?!1:!!(e.figures.count===1&&(e=e.figures.L(0),e.segments.count===1&&O.B(t.startX,e.startX)&&O.B(t.startY,e.startY)&&(e=e.segments.L(0),e.type===Jt&&O.B(t.endX,e.endX)&&O.B(t.endY,e.endY))))}K.ga=function(t){return t.toString()},K.prototype.ob=function(t){t.classType===K&&(this.type=t)},K.prototype.toString=function(t){switch(t===void 0&&(t=-1),this.type){case K.j:return 0>t?"M"+this.startX.toString()+" "+this.startY.toString()+"L"+this.endX.toString()+" "+this.endY.toString():"M"+this.startX.toFixed(t)+" "+this.startY.toFixed(t)+"L"+this.endX.toFixed(t)+" "+this.endY.toFixed(t);case K.u:var e=new E(this.startX,this.startY,0,0);return e.ev(this.endX,this.endY,0,0),0>t?"M"+e.x.toString()+" "+e.y.toString()+"H"+e.right.toString()+"V"+e.bottom.toString()+"H"+e.left.toString()+"z":"M"+e.x.toFixed(t)+" "+e.y.toFixed(t)+"H"+e.right.toFixed(t)+"V"+e.bottom.toFixed(t)+"H"+e.left.toFixed(t)+"z";case K.F:if(e=new E(this.startX,this.startY,0,0),e.ev(this.endX,this.endY,0,0),0>t)return t=e.left.toString()+" "+(e.y+e.height/2).toString(),"M"+t+"A"+(e.width/2).toString()+" "+(e.height/2).toString()+" 0 0 1 "+(e.right.toString()+" "+(e.y+e.height/2).toString())+"A"+(e.width/2).toString()+" "+(e.height/2).toString()+" 0 0 1 "+t;var n=e.left.toFixed(t)+" "+(e.y+e.height/2).toFixed(t);return"M"+n+"A"+(e.width/2).toFixed(t)+" "+(e.height/2).toFixed(t)+" 0 0 1 "+(e.right.toFixed(t)+" "+(e.y+e.height/2).toFixed(t))+"A"+(e.width/2).toFixed(t)+" "+(e.height/2).toFixed(t)+" 0 0 1 "+n;case K.m:e="",n=this.figures.s;for(var i=n.length,r=0;r<i;r++){var s=n[r];0<r&&(e+=" x "),s.isFilled&&(e+="F "),e+=s.toString(t)}return e;default:return this.type.toString()}},K.mb=function(t){t=t.split(/[Xx]/);for(var e=t.length,n="",i=0;i<e;i++){var r=t[i];n=r.match(/[Ff]/)!==null?i===0?n+r:n+("X"+(r[0]===" "?"":" ")+r):n+((i===0?"":"X ")+"F"+(r[0]===" "?"":" ")+r)}return n},K.parse=function(t,e){function n(){return L>=j-1?!0:d[L+1].match(D)!==null}function i(){return L++,d[L]}function r(V){var ft=parseFloat(i()),at=parseFloat(i());N===N.toLowerCase()&&(ft=F.x+ft,at=F.y+at),V.h(ft,at)}function s(){return r(F),F}function h(){return r(B),B}function u(){var V=M.toLowerCase();return V!=="c"&&V!=="s"&&V!=="q"&&V!=="t"?F:new T(2*F.x-B.x,2*F.y-B.y)}e===void 0&&(e=!1);var p=/([UuBbMmZzLlHhVvCcSsQqTtAaFfXx])([UuBbMmZzLlHhVvCcSsQqTtAaFfXx])/gm;t=t.replace(/,/gm," "),t=t.replace(p,"$1 $2"),t=t.replace(p,"$1 $2"),t=t.replace(/([UuBbMmZzLlHhVvCcSsQqTtAaFfXx])([^s])/gm,"$1 $2"),t=t.replace(/([^s])([UuBbMmZzLlHhVvCcSsQqTtAaFfXx])/gm,"$1 $2"),t=t.replace(/([0-9])([+\-])/gm,"$1 $2"),t=t.replace(/[\s\r\t\n]+/gm," "),t=t.replace(/^\s+|\s+$/g,"");var d=t.split(" ");for(t=0;t<d.length;t++){var g=d[t];if(g.match(/(\.[0-9]*)(\.)/gm)!==null){p=Yt();for(var c="",y=!1,S=0;S<g.length;S++){var v=g[S];v!=="."||y?v==="."?(p.push(c),c="."):c+=v:(y=!0,c+=v)}for(p.push(c),d.splice(t,1),g=0;g<p.length;g++)d.splice(t+g,0,p[g]);t+=p.length-1,At(p)}}var L=-1,N="",M="";p=new T(0,0);var B=new T(0,0),F=new T(0,0),j=d.length;t=Hm(null),c=g=!1,y=!0,S=null;for(var D=/[UuBbMmZzLlHhVvCcSsQqTtAaFfXx]/;!(L>=j-1);)if(M=N,N=i(),N!=="")switch(N.toUpperCase()){case"X":y=!0,c=g=!1;break;case"M":for(S=s(),t.oc===null||y===!0?(oh(t,S.x,S.y,g,!c),y=!1):t.moveTo(S.x,S.y),p.assign(F);!n();)S=s(),t.lineTo(S.x,S.y);break;case"L":for(;!n();)S=s(),t.lineTo(S.x,S.y);break;case"H":for(;!n();)F=new T((N===N.toLowerCase()?F.x:0)+parseFloat(i()),F.y),t.lineTo(F.x,F.y);break;case"V":for(;!n();)F=new T(F.x,(N===N.toLowerCase()?F.y:0)+parseFloat(i())),t.lineTo(F.x,F.y);break;case"C":for(;!n();){S=new T,r(S),v=h();var R=s();ir(t,S.x,S.y,v.x,v.y,R.x,R.y)}break;case"S":for(;!n();)S=u(),v=h(),R=s(),ir(t,S.x,S.y,v.x,v.y,R.x,R.y);break;case"Q":for(;!n();)S=h(),v=s(),dp(t,S.x,S.y,v.x,v.y);break;case"T":for(;!n();)B=S=u(),v=s(),dp(t,S.x,S.y,v.x,v.y);break;case"B":for(;!n();){S=parseFloat(i()),v=parseFloat(i()),R=parseFloat(i());var W=parseFloat(i()),tt=parseFloat(i()),q=tt,b=!1;n()||(q=parseFloat(i()),n()||(b=parseFloat(i())!==0)),N===N.toLowerCase()&&(R+=F.x,W+=F.y),t.arcTo(S,v,R,W,tt,q,b)}break;case"A":for(;!n();)S=Math.abs(parseFloat(i())),v=Math.abs(parseFloat(i())),R=parseFloat(i()),tt=W=!1,b=q=0,q=i(),q.length===1?(W=!!parseFloat(q),tt=!!parseFloat(i()),q=parseFloat(i())):q.length===2?(W=!!parseFloat(q[0]),tt=!!parseFloat(q[1]),q=parseFloat(i())):(W=!!parseFloat(q[0]),tt=!!parseFloat(q[1]),q=parseFloat(q.slice(2))),b=parseFloat(i()),N===N.toLowerCase()&&(q=F.x+q,b=F.y+b),F.h(q,b),gv(t,S,v,R,W,tt,q,b);break;case"Z":fv(t),F.assign(p);break;case"F":for(S="",v=1;d[L+v];)if(d[L+v].match(/[Uu]/)!==null)v++;else if(d[L+v].match(D)===null)v++;else{S=d[L+v];break}S.match(/[Mm]/)?g=!0:0<t.oc.segments.length&&(t.oc.isFilled=!0);break;case"U":for(S="",v=1;d[L+v];)if(d[L+v].match(/[Ff]/)!==null)v++;else if(d[L+v].match(D)===null)v++;else{S=d[L+v];break}S.match(/[Mm]/)?c=!0:t.Ol(!1)}if(p=t.Dr,fp=t,e)for(e=p.figures.iterator;e.next();)e.value.isFilled=!0;return p},K.Fa=function(t,e){for(var n=t.length,i=T.alloc(),r=0;r<n;r++){var s=t[r];i.x=s[0],i.y=s[1],e.Ea(i),s[0]=i.x,s[1]=i.y,i.x=s[2],i.y=s[3],e.Ea(i),s[2]=i.x,s[3]=i.y,i.x=s[4],i.y=s[5],e.Ea(i),s[4]=i.x,s[5]=i.y,i.x=s[6],i.y=s[7],e.Ea(i),s[6]=i.x,s[7]=i.y}T.free(i)},K.prototype.zu=function(){if(this._isInvalidBounds)return!0;if(this.type===K.m){if(this.vp!==this.figures.Ia)return!0;for(var t=this.figures.s,e=t.length,n=0;n<e;n++)if(t[n].zu())return!0}return!1},K.prototype.computeBounds=function(){if(this._isInvalidBounds=!1,this.Xl=this.Yj=null,this.Yl=NaN,this.type===K.m){this.vp=this.figures.Ia;for(var t=this.figures.s,e=t.length,n=0;n<e;n++){var i=t[n];i._isInvalidBounds=!1;var r=i.segments;i.Jq=r.Ia,i=r.s,r=i.length;for(var s=0;s<r;s++){var h=i[s];h._isInvalidBounds=!1,h.Qd=null}}}t=this.bp,t.ja(),isNaN(this.yk)||isNaN(this.xk)?t.h(0,0,0,0):t.h(0,0,this.yk,this.xk),Jc(this,t,!1),De(t,0,0,0,0),t.freeze()},K.prototype.Cw=function(){var t=new E;return Jc(this,t,!0),t};function Jc(t,e,n){switch(t.type){case K.j:case K.u:case K.F:n?e.h(t.dd,t.ed,0,0):De(e,t.dd,t.ed,0,0),De(e,t.xc,t.yc,0,0);break;case K.m:var i=t.figures;t=i.s,i=i.length;for(var r=0;r<i;r++){var s=t[r];n&&r===0?e.h(s.startX,s.startY,0,0):De(e,s.startX,s.startY,0,0);for(var h=s.segments.s,u=h.length,p=s.startX,d=s.startY,g=0;g<u;g++){var c=h[g];switch(c.type){case Jt:case xi:p=c.endX,d=c.endY,De(e,p,d,0,0);break;case Zn:O.gl(p,d,c.point1X,c.point1Y,c.point2X,c.point2Y,c.endX,c.endY,.5,e),p=c.endX,d=c.endY;break;case _i:O.Iu(p,d,c.point1X,c.point1Y,c.endX,c.endY,.5,e),p=c.endX,d=c.endY;break;case pe:case Gi:var y=c.type===pe?ko(c,s):ss(c,s,p,d),S=y.length;if(S===0){p=c.type===pe?c.centerX:c.endX,d=c.type===pe?c.centerY:c.endY,De(e,p,d,0,0);break}c=null;for(var v=0;v<S;v++)c=y[v],O.gl(c[0],c[1],c[2],c[3],c[4],c[5],c[6],c[7],.5,e);c!==null&&(p=c[6],d=c[7]);break;default:X("Unknown Segment type: "+c.type)}}}break;default:X("Unknown Geometry type: "+t.type)}}K.prototype.normalize=function(){this._isFrozen&&yt(this);var t=this.Cw();return this.offset(-t.x,-t.y),new T(-t.x,-t.y)},K.prototype.offset=function(t,e){return this._isFrozen&&yt(this),this.transform(1,0,0,1,t,e),this},K.prototype.scale=function(t,e){return this._isFrozen&&yt(this),this.transform(t,0,0,e,0,0),this},K.prototype.rotate=function(t,e,n){this._isFrozen&&yt(this),e===void 0&&(e=0),n===void 0&&(n=0);var i=ct.alloc();return i.reset(),i.rotate(t,e,n),this.transform(i.m11,i.m12,i.m21,i.m22,i.dx,i.dy),ct.free(i),this},a=K.prototype,a.transform=function(t,e,n,i,r,s){switch(this.type){case K.j:case K.u:case K.F:var h=this.dd,u=this.ed;this.dd=h*t+u*n+r,this.ed=h*e+u*i+s,h=this.xc,u=this.yc,this.xc=h*t+u*n+r,this.yc=h*e+u*i+s;break;case K.m:for(var p=this.figures.s,d=p.length,g=0;g<d;g++){var c=p[g];h=c.startX,u=c.startY,c.startX=h*t+u*n+r,c.startY=h*e+u*i+s,c=c.segments.s;for(var y=c.length,S=0;S<y;S++){var v=c[S];switch(v.type){case Jt:case xi:h=v.endX,u=v.endY,v.endX=h*t+u*n+r,v.endY=h*e+u*i+s;break;case Zn:h=v.point1X,u=v.point1Y,v.point1X=h*t+u*n+r,v.point1Y=h*e+u*i+s,h=v.point2X,u=v.point2Y,v.point2X=h*t+u*n+r,v.point2Y=h*e+u*i+s,h=v.endX,u=v.endY,v.endX=h*t+u*n+r,v.endY=h*e+u*i+s;break;case _i:h=v.point1X,u=v.point1Y,v.point1X=h*t+u*n+r,v.point1Y=h*e+u*i+s,h=v.endX,u=v.endY,v.endX=h*t+u*n+r,v.endY=h*e+u*i+s;break;case pe:h=v.centerX,u=v.centerY,v.centerX=h*t+u*n+r,v.centerY=h*e+u*i+s,e!==0&&(h=180*Math.atan2(e,t)/Math.PI,0>h&&(h+=360),v.startAngle+=h),0>t&&(v.startAngle=180-v.startAngle,v.sweepAngle=-v.sweepAngle),0>i&&(v.startAngle=-v.startAngle,v.sweepAngle=-v.sweepAngle),v.radiusX*=Math.sqrt(t*t+n*n),v.radiusY!==void 0&&(v.radiusY*=Math.sqrt(e*e+i*i));break;case Gi:if(h=v.endX,u=v.endY,v.endX=h*t+u*n+r,v.endY=h*e+u*i+s,v.radiusX===0||v.radiusY===0)break;e!==0&&(h=180*Math.atan2(e,t)/Math.PI,0>h&&(h+=360),v.xAxisRotation+=h),0>t&&(v.xAxisRotation=180-v.xAxisRotation,v.isClockwiseArc=!v.isClockwiseArc),0>i&&(v.xAxisRotation=-v.xAxisRotation,v.isClockwiseArc=!v.isClockwiseArc),v.radiusX*=Math.sqrt(t*t+n*n),v.radiusY*=Math.sqrt(e*e+i*i);break;default:X("Unknown Segment type: "+v.type)}}}}return this._isInvalidBounds=!0,this},a.ba=function(t,e){e===void 0&&(e=0);var n=this.dd,i=this.ed,r=this.xc,s=this.yc;switch(this.type){case K.j:return O.Sb(n,i,r,s,e,t.x,t.y);case K.u:var h=E.allocAt(Math.min(n,r)-e,Math.min(i,s)-e,Math.abs(r-n)+2*e,Math.abs(s-i)+2*e);return t=h.ba(t),E.free(h),t;case K.F:h=Math.min(n,r)-e;var u=Math.min(i,s)-e;return n=(Math.abs(r-n)+2*e)/2,e=(Math.abs(s-i)+2*e)/2,0>=n||0>=e?!1:(h=t.x-(h+n),u=t.y-(u+e),1>=h*h/(n*n)+u*u/(e*e));case K.m:return Kd(this,t,e,!0,!1);default:return!1}};function Kd(t,e,n,i,r){var s=e.x;e=e.y;for(var h=t.bounds.x-20,u=0,p,d,g,c,y=t.figures.s,S=y.length,v=0;v<S;v++){var L=y[v];if(L.isFilled){if(i&&L.ba(s,e,n))return!0;var N=L.segments;p=L.startX,d=L.startY;for(var M=p,B=d,F=N.s,j=0;j<=N.length;j++){var D=void 0;if(j!==N.length){D=F[j];var R=D.type;t=D.endX,c=D.endY}else R=Jt,t=M,c=B;switch(R){case xi:if(M=yu(s,e,h,e,p,d,M,B),isNaN(M))return!0;u+=M,M=t,B=c;break;case Jt:if(p=yu(s,e,h,e,p,d,t,c),isNaN(p))return!0;u+=p;break;case Zn:g=O.Zn(p,d,D.point1X,D.point1Y,D.point2X,D.point2Y,t,c,h,e,s,e,.5),u+=g;break;case _i:g=O.Zn(p,d,(p+2*D.point1X)/3,(d+2*D.point1Y)/3,(2*D.point1X+t)/3,(2*D.point1Y+c)/3,t,c,h,e,s,e,.5),u+=g;break;case pe:case Gi:R=D.type===pe?ko(D,L):ss(D,L,p,d);var W=R.length;if(W===0){if(p=yu(s,e,h,e,p,d,D.type===pe?D.centerX:D.endX,D.type===pe?D.centerY:D.endY),isNaN(p))return!0;u+=p;break}D=null;for(var tt=0;tt<W;tt++){if(D=R[tt],tt===0){if(g=yu(s,e,h,e,p,d,D[0],D[1]),isNaN(g))return!0;u+=g}g=O.Zn(D[0],D[1],D[2],D[3],D[4],D[5],D[6],D[7],h,e,s,e,.5),u+=g}D!==null&&(t=D[6],c=D[7]);break;default:X("Unknown Segment type: "+D.type)}p=t,d=c}if(u!==0)return!0;u=0}else if(L.ba(s,e,r?n:n+2))return!0}return u!==0}function yu(t,e,n,i,r,s,h,u){if(O.Sb(r,s,h,u,.05,t,e))return NaN;var p=(t-n)*(s-u);if(p===0)return 0;var d=((t*i-e*n)*(r-h)-(t-n)*(r*u-s*h))/p;if(e=(t*i-e*n)*(s-u)/p,d>=t)return 0;if((r>h?r-h:h-r)<(s>u?s-u:u-s)){if(s<u){if(e<s||e>u)return 0}else if(e<u||e>s)return 0}else if(r<h){if(d<r||d>h)return 0}else if(d<h||d>r)return 0;return 0<p?1:-1}function Zc(t,e,n,i){t=t.figures.s;for(var r=t.length,s=0;s<r;s++)if(t[s].ba(e,n,i))return!0;return!1}a.pu=function(t,e){if(0>t?t=0:1<t&&(t=1),e===void 0&&(e=new T),this.type===K.j)return e.h(this.startX+t*(this.endX-this.startX),this.startY+t*(this.endY-this.startY)),e;for(var n=this.flattenedSegments,i=this.flattenedLengths,r=n.length,s=this.flattenedTotalLength*t,h=0,u=0;u<r;u++){var p=i[u],d=p.length;for(t=0;t<d;t++){var g=p[t];if(h+g>=s)return i=s-h,i=g===0?0:i/g,n=n[u],u=n[2*t],r=n[2*t+1],e.h(u+(n[2*t+2]-u)*i,r+(n[2*t+3]-r)*i),e;h+=g}}return e},a.Ow=function(t){if(0>t?t=0:1<t&&(t=1),this.type===K.j)return 180*Math.atan2(this.endY-this.startY,this.endX-this.startX)/Math.PI;for(var e=this.flattenedSegments,n=this.flattenedLengths,i=e.length,r=this.flattenedTotalLength*t,s=0,h=0;h<i;h++){var u=n[h],p=u.length;for(t=0;t<p;t++){var d=u[t];if(s+d>=r)return r=e[h],e=r[2*t],n=r[2*t+1],i=r[2*t+2],t=r[2*t+3],1>Math.abs(i-e)&&1>Math.abs(t-n)?0:1>Math.abs(i-e)?0<=t-n?90:270:1>Math.abs(t-n)?0<=i-e?0:180:180*Math.atan2(t-n,i-e)/Math.PI;s+=d}}return NaN},a.qu=function(t,e){if(0>t?t=0:1<t&&(t=1),e===void 0&&(e=[]),e.length=3,this.type===K.j)return e[0]=this.startX+t*(this.endX-this.startX),e[1]=this.startY+t*(this.endY-this.startY),e[2]=180*Math.atan2(this.endY-this.startY,this.endX-this.startX)/Math.PI,e;for(var n=this.flattenedSegments,i=this.flattenedLengths,r=n.length,s=this.flattenedTotalLength*t,h=0,u=0;u<r;u++){var p=i[u],d=p.length;for(t=0;t<d;t++){var g=p[t];if(h+g>=s)return i=s-h,i=g===0?0:i/g,g=n[u],n=g[2*t],u=g[2*t+1],r=g[2*t+2],t=g[2*t+3],e[0]=n+(r-n)*i,e[1]=u+(t-u)*i,e[2]=1>Math.abs(r-n)&&1>Math.abs(t-u)?0:1>Math.abs(r-n)?0<=t-u?90:270:1>Math.abs(t-u)?0<=r-n?0:180:180*Math.atan2(t-u,r-n)/Math.PI,e;h+=g}}return e},a.Pw=function(t){if(this.type===K.j){var e=this.startX,n=this.startY,i=this.endX,r=this.endY;if(e!==i||n!==r){var s=t.x;if(t=t.y,e===i){if(n<r){var h=n;i=r}else h=r,i=n;return t<=h?h===n?0:1:t>=i?i===n?0:1:Math.abs(t-n)/(i-h)}if(n===r)return e<i?h=e:(h=i,i=e),s<=h?h===e?0:1:s>=i?i===e?0:1:Math.abs(s-e)/(i-h);h=(i-e)*(i-e)+(r-n)*(r-n);var u=T.alloc();return O.$g(e,n,i,r,s,t,u),t=u.x,s=u.y,T.free(u),Math.sqrt(((t-e)*(t-e)+(s-n)*(s-n))/h)}}else if(this.type===K.u){h=this.startX,u=this.startY;var p=this.endX;if(r=this.endY,h!==p||u!==r){e=p-h,n=r-u,s=2*e+2*n,i=t.x,t=t.y,i=Math.min(Math.max(i,h),p),t=Math.min(Math.max(t,u),r),h=Math.abs(i-h),p=Math.abs(i-p),u=Math.abs(t-u),r=Math.abs(t-r);var d=Math.min(h,p,u,r);if(d===u)return i/s;if(d===p)return(e+t)/s;if(d===r)return(2*e+n-i)/s;if(d===h)return(2*e+2*n-t)/s}}else{e=this.flattenedSegments,n=this.flattenedLengths,s=this.flattenedTotalLength,i=T.alloc(),r=1/0,u=h=0,p=e.length;for(var g=d=0,c=0;c<p;c++)for(var y=e[c],S=n[c],v=y.length,L=0;L<v;L+=2){var N=y[L],M=y[L+1];if(L!==0){O.$g(d,g,N,M,t.x,t.y,i);var B=(i.x-t.x)*(i.x-t.x)+(i.y-t.y)*(i.y-t.y);B<r&&(r=B,h=u,h+=Math.sqrt((i.x-d)*(i.x-d)+(i.y-g)*(i.y-g))),u+=S[(L-2)/2]}d=N,g=M}return T.free(i),t=h/s,0>t?0:1<t?1:t}return 0};function _c(t){if(t.Yj===null){var e=t.Yj=[],n=t.Xl=[],i=[],r=[];if(t.type===K.j)i.push(t.startX),i.push(t.startY),i.push(t.endX),i.push(t.endY),e.push(i),r.push(Math.sqrt((t.startX-t.endX)*(t.startX-t.endX)+(t.startY-t.endY)*(t.startY-t.endY))),n.push(r);else if(t.type===K.u)i.push(t.startX),i.push(t.startY),i.push(t.endX),i.push(t.startY),i.push(t.endX),i.push(t.endY),i.push(t.startX),i.push(t.endY),i.push(t.startX),i.push(t.startY),e.push(i),r.push(Math.abs(t.startX-t.endX)),r.push(Math.abs(t.startY-t.endY)),r.push(Math.abs(t.startX-t.endX)),r.push(Math.abs(t.startY-t.endY)),n.push(r);else if(t.type===K.F){var s=new Fe;s.startX=t.endX,s.startY=(t.startY+t.endY)/2;var h=new wt(pe);if(h.startAngle=0,h.sweepAngle=360,h.centerX=(t.startX+t.endX)/2,h.centerY=(t.startY+t.endY)/2,h.radiusX=Math.abs(t.startX-t.endX)/2,h.radiusY=Math.abs(t.startY-t.endY)/2,s.add(h),t=ko(h,s),r=t.length,r===0)i.push(h.centerX),i.push(h.centerY);else{h=s.startX,s=s.startY;for(var u=0;u<r;u++){var p=t[u];O.Be(h,s,p[2],p[3],p[4],p[5],p[6],p[7],.5,i),h=p[6],s=p[7]}}e.push(i),n.push(Hd(i))}else for(t=t.figures.iterator;t.next();){r=t.value,i=[],i.push(r.startX),i.push(r.startY),h=r.startX,s=r.startY,u=h,p=s;for(var d=r.segments.s,g=d.length,c=0;c<g;c++){var y=d[c];switch(y.type){case xi:4<=i.length&&(e.push(i),n.push(Hd(i))),i=[],i.push(y.endX),i.push(y.endY),h=y.endX,s=y.endY,u=h,p=s;break;case Jt:i.push(y.endX),i.push(y.endY),h=y.endX,s=y.endY;break;case Zn:O.Be(h,s,y.point1X,y.point1Y,y.point2X,y.point2Y,y.endX,y.endY,.5,i),h=y.endX,s=y.endY;break;case _i:O.xo(h,s,y.point1X,y.point1Y,y.endX,y.endY,.5,i),h=y.endX,s=y.endY;break;case pe:var S=ko(y,r),v=S.length;if(v===0){i.push(y.centerX),i.push(y.centerY),h=y.centerX,s=y.centerY;break}for(var L=0;L<v;L++){var N=S[L];O.Be(h,s,N[2],N[3],N[4],N[5],N[6],N[7],.5,i),h=N[6],s=N[7]}break;case Gi:if(S=ss(y,r,h,s),v=S.length,L=y.endX,N=y.endY,v===0){i.push(L),i.push(N),h=L,s=N;break}for(L=0;L<v;L++)N=S[L],O.Be(h,s,N[2],N[3],N[4],N[5],N[6],N[7],.5,i),h=N[6],s=N[7];break;default:X("Segment not of valid type: "+y.type)}y.isClosed&&(i.push(u),i.push(p))}4<=i.length&&(e.push(i),n.push(Hd(i)))}}}function Hd(t){for(var e=[],n=0,i=0,r=t.length,s=0;s<r;s+=2){var h=t[s],u=t[s+1];s!==0&&e.push(Math.sqrt(oi(n,i,h,u))),n=h,i=u}return e}a.add=function(t){return this.Ud.add(t),this},a.Pl=function(t,e,n,i,r,s,h,u){return this._isFrozen&&yt(this),this.Uf=new rt(t,e,r,s).freeze(),this.Vf=new rt(n,i,h,u).freeze(),this},Z.Object.defineProperties(K.prototype,{_isFrozen:{get:function(){return(this.o&1)!==0},set:function(t){this.o=t?this.o|1:this.o&-2}},_isInvalidBounds:{get:function(){return(this.o&2)!==0},set:function(t){this.o=t?this.o|2:this.o&-3}},flattenedSegments:{get:function(){return _c(this),this.Yj}},flattenedLengths:{get:function(){return _c(this),this.Xl}},flattenedTotalLength:{get:function(){var t=this.Yl;if(isNaN(t)){if(this.type===K.j){t=Math.abs(this.endX-this.startX);var e=Math.abs(this.endY-this.startY);t=Math.sqrt(t*t+e*e)}else if(this.type===K.u)t=2*Math.abs(this.endX-this.startX)+2*Math.abs(this.endY-this.startY);else{e=this.flattenedLengths;for(var n=e.length,i=t=0;i<n;i++)for(var r=e[i],s=r.length,h=0;h<s;h++)t+=r[h]}this.Yl=t}return t}},type:{get:function(){return this.qa},set:function(t){this.qa!==t&&(this._isFrozen&&yt(this,t),this.qa=t,t===K.m?this.Ud=new Q:(K.W===null&&(K.W=new Q().freeze()),this.Ud=K.W),this._isInvalidBounds=!0)}},startX:{get:function(){return this.dd},set:function(t){this.dd!==t&&(this._isFrozen&&yt(this,t),this.dd=t,this._isInvalidBounds=!0)}},startY:{get:function(){return this.ed},set:function(t){this.ed!==t&&(this._isFrozen&&yt(this,t),this.ed=t,this._isInvalidBounds=!0)}},endX:{get:function(){return this.xc},set:function(t){this.xc!==t&&(this._isFrozen&&yt(this,t),this.xc=t,this._isInvalidBounds=!0)}},endY:{get:function(){return this.yc},set:function(t){this.yc!==t&&(this._isFrozen&&yt(this,t),this.yc=t,this._isInvalidBounds=!0)}},figures:{get:function(){return this.Ud},set:function(t){this.Ud!==t&&(this._isFrozen&&yt(this,t),this.Ud=t,this._isInvalidBounds=!0)}},spot1:{get:function(){return this.Uf},set:function(t){this._isFrozen&&yt(this,t),this.Uf=t.J()}},spot2:{get:function(){return this.Vf},set:function(t){this._isFrozen&&yt(this,t),this.Vf=t.J()}},defaultStretch:{get:function(){return this.Hf},set:function(t){this._isFrozen&&yt(this,t),this.Hf=t}},bounds:{get:function(){return this.zu()&&this.computeBounds(),this.bp}}}),K.prototype.setSpots=K.prototype.Pl,K.prototype.add=K.prototype.add,K.prototype.getFractionForPoint=K.prototype.Pw,K.prototype.getPointAndAngleAlongPath=K.prototype.qu,K.prototype.getAngleAlongPath=K.prototype.Ow,K.prototype.getPointAlongPath=K.prototype.pu,K.prototype.containsPoint=K.prototype.ba,K.prototype.transform=K.prototype.transform,K.prototype.rotate=K.prototype.rotate,K.prototype.scale=K.prototype.scale,K.prototype.offset=K.prototype.offset,K.prototype.normalize=K.prototype.normalize,K.prototype.computeBoundsWithoutOrigin=K.prototype.Cw,K.prototype.equalsApprox=K.prototype.$a,K.className="Geometry",K.j=new J(K,"Line",0),K.u=new J(K,"Rectangle",1),K.F=new J(K,"Ellipse",2),K.m=new J(K,"Path",3),K.W=null,K.gb="UuBbMmZzLlHhVvCcSsQqTtAaFfXx",K.className="Geometry",K.stringify=K.ga,K.fillPath=K.mb,K.parse=K.parse,K.Line=K.j,K.Rectangle=K.u,K.Ellipse=K.F,K.Path=K.m;function Fe(t,e,n,i){ce(this),n===void 0&&(n=!0),i===void 0&&(i=!0),this.o=2|(n?4:0)|(i?8:0),t!==void 0?this.dd=t:this.dd=0,e!==void 0?this.ed=e:this.ed=0,this.Vk=new Q,this.Jq=this.Vk.Ia,this.Av=null}Fe.prototype.copy=function(){var t=new Fe;t.o=this.o&-2,t.dd=this.dd,t.ed=this.ed;for(var e=this.Vk.s,n=e.length,i=t.Vk,r=0;r<n;r++){var s=e[r].copy();i.add(s)}return t.Jq=this.Jq,t.Av=this.Av,t},a=Fe.prototype,a.$a=function(t){if(!(t instanceof Fe&&O.B(this.startX,t.startX)&&O.B(this.startY,t.startY)))return!1;var e=this.segments.s;t=t.segments.s;var n=e.length;if(n!==t.length)return!1;for(var i=0;i<n;i++)if(!e[i].$a(t[i]))return!1;return!0},a.toString=function(t){t===void 0&&(t=-1);for(var e=0>t?"M"+this.startX.toString()+" "+this.startY.toString():"M"+this.startX.toFixed(t)+" "+this.startY.toFixed(t),n=this.segments.s,i=n.length,r=0;r<i;r++)e+=" "+n[r].toString(t);return e},a.freeze=function(){this._isFrozen=!0;var t=this.segments;t.freeze();var e=t.s;t=t.length;for(var n=0;n<t;n++)e[n].freeze();return this},a.ja=function(){this._isFrozen=!1;var t=this.segments;t.ja(),t=t.s;for(var e=t.length,n=0;n<e;n++)t[n].ja();return this},a.zu=function(){if(this._isInvalidBounds)return!0;var t=this.segments;if(this.Jq!==t.Ia)return!0;t=t.s;for(var e=t.length,n=0;n<e;n++)if(t[n]._isInvalidBounds)return!0;return!1},a.add=function(t){return this.Vk.add(t),this},a.ba=function(t,e,n){for(var i=this.startX,r=this.startY,s=i,h=r,u=this.segments.s,p=u.length,d=0;d<p;d++){var g=u[d];switch(g.type){case xi:s=g.endX,h=g.endY,i=g.endX,r=g.endY;break;case Jt:if(O.Sb(i,r,g.endX,g.endY,n,t,e))return!0;i=g.endX,r=g.endY;break;case Zn:if(O.tr(i,r,g.point1X,g.point1Y,g.point2X,g.point2Y,g.endX,g.endY,.5,t,e,n))return!0;i=g.endX,r=g.endY;break;case _i:if(O.Ju(i,r,g.point1X,g.point1Y,g.endX,g.endY,.5,t,e,n))return!0;i=g.endX,r=g.endY;break;case pe:case Gi:var c=g.type===pe?ko(g,this):ss(g,this,i,r),y=c.length,S=g.type===pe?g.centerX:g.endX,v=g.type===pe?g.centerY:g.endY;if(y===0){if(O.Sb(i,r,S,v,n,t,e))return!0;i=S,r=v;break}for(S=null,v=0;v<y;v++)if(S=c[v],v===0&&O.Sb(i,r,S[0],S[1],n,t,e)||O.tr(S[0],S[1],S[2],S[3],S[4],S[5],S[6],S[7],.5,t,e,n))return!0;S!==null&&(i=S[6],r=S[7]);break;default:X("Unknown Segment type: "+g.type)}if(g.isClosed&&(i!==s||r!==h)&&O.Sb(i,r,s,h,n,t,e))return!0}return!1},Z.Object.defineProperties(Fe.prototype,{_isFrozen:{get:function(){return(this.o&1)!==0},set:function(t){this.o=t?this.o|1:this.o&-2}},_isInvalidBounds:{get:function(){return(this.o&2)!==0},set:function(t){this.o=t?this.o|2:this.o&-3}},isFilled:{get:function(){return(this.o&4)!==0},set:function(t){this._isFrozen&&yt(this,t),this.o=t?this.o|4:this.o&-5}},isShadowed:{get:function(){return(this.o&8)!==0},set:function(t){this._isFrozen&&yt(this,t),this.o=t?this.o|8:this.o&-9}},startX:{get:function(){return this.dd},set:function(t){this._isFrozen&&yt(this,t),this.dd=t,this._isInvalidBounds=!0}},startY:{get:function(){return this.ed},set:function(t){this._isFrozen&&yt(this,t),this.ed=t,this._isInvalidBounds=!0}},segments:{get:function(){return this.Vk},set:function(t){this._isFrozen&&yt(this,t),this.Vk=t,this._isInvalidBounds=!0}}}),Fe.prototype.add=Fe.prototype.add,Fe.prototype.equalsApprox=Fe.prototype.$a,Fe.className="PathFigure";function wt(t,e,n,i,r,s,h,u){ce(this),t===void 0&&(t=Jt),this.qa=t,this.o=2,e!==void 0?this.xc=e:this.xc=0,n!==void 0?this.yc=n:this.yc=0,i===void 0&&(i=0),r===void 0&&(r=0),s===void 0&&(s=0),h===void 0&&(h=0),t===Gi?(t=s%360,0>t&&(t+=360),this.ze=t,this.Hh=0,this.Ih=Math.max(i,0),this.Ag=Math.max(r,0),typeof h=="boolean"?h&&(this.isLargeArc=!0):typeof h=="number"&&h&&(this.isLargeArc=!0),u&&(this.isClockwiseArc=!0)):(this.ze=i,this.Hh=r,t===pe&&(s=Math.max(s,0)),this.Ih=s,typeof h=="number"?(t===pe&&(h=Math.max(h,0)),this.Ag=h):this.Ag=0),this.Qd=null}wt.prototype.copy=function(){var t=new wt;return t.qa=this.qa,t.o=this.o&-2,t.xc=this.xc,t.yc=this.yc,t.ze=this.ze,t.Hh=this.Hh,t.Ih=this.Ih,t.Ag=this.Ag,t},a=wt.prototype,a.$a=function(t){if(!(t instanceof wt)||this.type!==t.type||this.isClosed!==t.isClosed)return!1;switch(this.type){case xi:case Jt:return O.B(this.endX,t.endX)&&O.B(this.endY,t.endY);case Zn:return O.B(this.endX,t.endX)&&O.B(this.endY,t.endY)&&O.B(this.point1X,t.point1X)&&O.B(this.point1Y,t.point1Y)&&O.B(this.point2X,t.point2X)&&O.B(this.point2Y,t.point2Y);case _i:return O.B(this.endX,t.endX)&&O.B(this.endY,t.endY)&&O.B(this.point1X,t.point1X)&&O.B(this.point1Y,t.point1Y);case pe:return O.B(this.startAngle,t.startAngle)&&O.B(this.sweepAngle,t.sweepAngle)&&O.B(this.centerX,t.centerX)&&O.B(this.centerY,t.centerY)&&O.B(this.radiusX,t.radiusX)&&O.B(this.radiusY,t.radiusY);case Gi:return this.isClockwiseArc===t.isClockwiseArc&&this.isLargeArc===t.isLargeArc&&O.B(this.xAxisRotation,t.xAxisRotation)&&O.B(this.endX,t.endX)&&O.B(this.endY,t.endY)&&O.B(this.radiusX,t.radiusX)&&O.B(this.radiusY,t.radiusY);default:return!1}},a.ob=function(t){t.classType===wt&&(this.type=t)},a.toString=function(t){switch(t===void 0&&(t=-1),this.type){case xi:t=0>t?"M"+this.endX.toString()+" "+this.endY.toString():"M"+this.endX.toFixed(t)+" "+this.endY.toFixed(t);break;case Jt:t=0>t?"L"+this.endX.toString()+" "+this.endY.toString():"L"+this.endX.toFixed(t)+" "+this.endY.toFixed(t);break;case Zn:t=0>t?"C"+this.point1X.toString()+" "+this.point1Y.toString()+" "+this.point2X.toString()+" "+this.point2Y.toString()+" "+this.endX.toString()+" "+this.endY.toString():"C"+this.point1X.toFixed(t)+" "+this.point1Y.toFixed(t)+" "+this.point2X.toFixed(t)+" "+this.point2Y.toFixed(t)+" "+this.endX.toFixed(t)+" "+this.endY.toFixed(t);break;case _i:t=0>t?"Q"+this.point1X.toString()+" "+this.point1Y.toString()+" "+this.endX.toString()+" "+this.endY.toString():"Q"+this.point1X.toFixed(t)+" "+this.point1Y.toFixed(t)+" "+this.endX.toFixed(t)+" "+this.endY.toFixed(t);break;case pe:t=0>t?"B"+this.startAngle.toString()+" "+this.sweepAngle.toString()+" "+this.centerX.toString()+" "+this.centerY.toString()+" "+this.radiusX.toString()+" "+this.radiusY.toString():"B"+this.startAngle.toFixed(t)+" "+this.sweepAngle.toFixed(t)+" "+this.centerX.toFixed(t)+" "+this.centerY.toFixed(t)+" "+this.radiusX.toFixed(t)+" "+this.radiusY.toFixed(t);break;case Gi:t=0>t?"A"+this.radiusX.toString()+" "+this.radiusY.toString()+" "+this.xAxisRotation.toString()+" "+(this.isLargeArc?1:0)+" "+(this.isClockwiseArc?1:0)+" "+this.endX.toString()+" "+this.endY.toString():"A"+this.radiusX.toFixed(t)+" "+this.radiusY.toFixed(t)+" "+this.xAxisRotation.toFixed(t)+" "+(this.isLargeArc?1:0)+" "+(this.isClockwiseArc?1:0)+" "+this.endX.toFixed(t)+" "+this.endY.toFixed(t);break;default:t=this.type.toString()}return t+(this.isClosed?"z":"")},a.freeze=function(){return this._isFrozen=!0,this},a.ja=function(){return this._isFrozen=!1,this},a.close=function(){return this.isClosed=!0,this};function ko(t,e){if(t.Qd!==null&&e._isInvalidBounds===!1)return t.Qd;var n=t.radiusX,i=t.radiusY;if(i===void 0&&(i=n),n===0||i===0)return t.Qd=[],t.Qd;e=t.ze;var r=t.Hh,s=O.Dw(0,0,n<i?n:i,t.startAngle,t.startAngle+t.sweepAngle,!1);if(n!==i){var h=ct.alloc();h.reset(),n<i?h.scale(1,i/n):h.scale(n/i,1),K.Fa(s,h),ct.free(h)}for(n=s.length,i=0;i<n;i++)h=s[i],h[0]+=e,h[1]+=r,h[2]+=e,h[3]+=r,h[4]+=e,h[5]+=r,h[6]+=e,h[7]+=r;return t.Qd=s,t.Qd}function ss(t,e,n,i){function r(L,N,M,B){return(L*B<N*M?-1:1)*Math.acos((L*M+N*B)/(Math.sqrt(L*L+N*N)*Math.sqrt(M*M+B*B)))}if(t.Qd!==null&&e._isInvalidBounds===!1)return t.Qd;if(t.radiusX===0||t.radiusY===0)return t.Qd=[],t.Qd;e=t.Ih;var s=t.Ag;e===0&&(e=1e-4),s===0&&(s=1e-4);var h=Math.PI/180*t.ze,u=t.isLargeArc,p=t.isClockwiseArc,d=t.xc,g=t.yc,c=Math.cos(h),y=Math.sin(h),S=c*(n-d)/2+y*(i-g)/2;h=-y*(n-d)/2+c*(i-g)/2;var v=S*S/(e*e)+h*h/(s*s);return 1<v&&(e*=Math.sqrt(v),s*=Math.sqrt(v)),v=(u===p?-1:1)*Math.sqrt((e*e*s*s-e*e*h*h-s*s*S*S)/(e*e*h*h+s*s*S*S)),isNaN(v)&&(v=0),u=v*e*h/s,v=v*-s*S/e,isNaN(u)&&(u=0),isNaN(v)&&(v=0),n=(n+d)/2+c*u-y*v,i=(i+g)/2+y*u+c*v,g=r(1,0,(S-u)/e,(h-v)/s),c=(S-u)/e,d=(h-v)/s,S=(-S-u)/e,u=(-h-v)/s,h=r(c,d,S,u),S=(c*S+d*u)/(Math.sqrt(c*c+d*d)*Math.sqrt(S*S+u*u)),-1>=S?h=Math.PI:1<=S&&(h=0),!p&&0<h&&(h-=2*Math.PI),p&&0>h&&(h+=2*Math.PI),p=e>s?1:e/s,S=e>s?s/e:1,e=O.Dw(0,0,e>s?e:s,g,g+h,!0),s=ct.alloc(),s.reset(),s.translate(n,i),s.rotate(t.ze,0,0),s.scale(p,S),K.Fa(e,s),ct.free(s),t.Qd=e,t.Qd}Z.Object.defineProperties(wt.prototype,{_isFrozen:{get:function(){return(this.o&1)!==0},set:function(t){this.o=t?this.o|1:this.o&-2}},_isInvalidBounds:{get:function(){return(this.o&2)!==0},set:function(t){this.o=t?this.o|2:this.o&-3}},isClosed:{get:function(){return(this.o&8)!==0},set:function(t){this.isClosed!==t&&(this.o=t?this.o|8:this.o&-9,this._isInvalidBounds=!0)}},type:{get:function(){return this.qa},set:function(t){this._isFrozen&&yt(this,t),this.qa=t,this._isInvalidBounds=!0}},endX:{get:function(){return this.xc},set:function(t){this._isFrozen&&yt(this,t),this.xc=t,this._isInvalidBounds=!0}},endY:{get:function(){return this.yc},set:function(t){this._isFrozen&&yt(this,t),this.yc=t,this._isInvalidBounds=!0}},point1X:{get:function(){return this.ze},set:function(t){this._isFrozen&&yt(this,t),this.ze=t,this._isInvalidBounds=!0}},point1Y:{get:function(){return this.Hh},set:function(t){this._isFrozen&&yt(this,t),this.Hh=t,this._isInvalidBounds=!0}},point2X:{get:function(){return this.Ih},set:function(t){this._isFrozen&&yt(this,t),this.Ih=t,this._isInvalidBounds=!0}},point2Y:{get:function(){return this.Ag},set:function(t){this._isFrozen&&yt(this,t),this.Ag=t,this._isInvalidBounds=!0}},centerX:{get:function(){return this.ze},set:function(t){this._isFrozen&&yt(this,t),this.ze=t,this._isInvalidBounds=!0}},centerY:{get:function(){return this.Hh},set:function(t){this._isFrozen&&yt(this,t),this.Hh=t,this._isInvalidBounds=!0}},radiusX:{get:function(){return this.Ih},set:function(t){0>t&&Rt(t,">= zero",wt,"radiusX"),this._isFrozen&&yt(this,t),this.Ih=t,this._isInvalidBounds=!0}},radiusY:{get:function(){return this.Ag},set:function(t){0>t&&Rt(t,">= zero",wt,"radiusY"),this._isFrozen&&yt(this,t),this.Ag=t,this._isInvalidBounds=!0}},startAngle:{get:function(){return this.xc},set:function(t){this._isFrozen&&yt(this,t),t%=360,0>t&&(t+=360),this.xc=t,this._isInvalidBounds=!0}},sweepAngle:{get:function(){return this.yc},set:function(t){this._isFrozen&&yt(this,t),360<t&&(t=360),-360>t&&(t=-360),this.yc=t,this._isInvalidBounds=!0}},isClockwiseArc:{get:function(){return(this.o&4)!==0},set:function(t){this._isFrozen&&yt(this,t),this.o=t?this.o|4:this.o&-5,this._isInvalidBounds=!0}},isLargeArc:{get:function(){return(this.o&16)!==0},set:function(t){this._isFrozen&&yt(this,t),this.o=t?this.o|16:this.o&-17,this._isInvalidBounds=!0}},xAxisRotation:{get:function(){return this.ze},set:function(t){this._isFrozen&&yt(this,t),t%=360,0>t&&(t+=360),this.ze=t,this._isInvalidBounds=!0}}}),wt.prototype.equalsApprox=wt.prototype.$a;var xi=new J(wt,"Move",0),Jt=new J(wt,"Line",1),Zn=new J(wt,"Bezier",2),_i=new J(wt,"QuadraticBezier",3),pe=new J(wt,"Arc",4),Gi=new J(wt,"SvgArc",4);wt.className="PathSegment",wt.Move=xi,wt.Line=Jt,wt.Bezier=Zn,wt.QuadraticBezier=_i,wt.Arc=pe,wt.SvgArc=Gi;function _n(){this.H=null,this.Tt=new T(0,0).freeze(),this.Fs=new T(0,0).freeze(),this.Vo=this.kq=0,this.Wo=1,this.Qp="",this.nr=this.np=!1,this.lp=this.Yo=0,this.jg=this.Gp=this.Mp=!1,this.sp=null,this.ir=0,this.pd=this.er=null}_n.prototype.copy=function(){var t=new _n;return this.clone(t)},_n.prototype.clone=function(t){return t.H=this.H,t.Tt.assign(this.viewPoint),t.Fs.assign(this.documentPoint),t.kq=this.kq,t.Vo=this.Vo,t.Wo=this.Wo,t.Qp=this.Qp,t.np=this.np,t.nr=this.nr,t.Yo=this.Yo,t.lp=this.lp,t.Mp=this.Mp,t.Gp=this.Gp,t.jg=this.jg,t.sp=this.sp,t.ir=this.ir,t.er=this.er,t.pd=this.pd,t},_n.prototype.toString=function(){var t="^";return this.modifiers!==0&&(t+="M:"+this.modifiers),this.button!==0&&(t+="B:"+this.button),this.key!==""&&(t+="K:"+this.key),this.clickCount!==0&&(t+="C:"+this.clickCount),this.delta!==0&&(t+="D:"+this.delta),this.handled&&(t+="h"),this.bubbles&&(t+="b"),this.documentPoint!==null&&(t+="@"+this.documentPoint.toString()),t},_n.prototype.mo=function(t,e){var n=this.diagram;return n===null||z0(n,this.event,t,e),e},_n.prototype.Vy=function(t,e){var n=this.diagram;return n===null||(z0(n,this.event,t,e),e.assign(n.hs(e))),e},Z.Object.defineProperties(_n.prototype,{diagram:{get:function(){return this.H},set:function(t){this.H=t}},viewPoint:{get:function(){return this.Tt},set:function(t){this.Tt.assign(t)}},documentPoint:{get:function(){return this.Fs},set:function(t){this.Fs.assign(t)}},modifiers:{get:function(){return this.kq},set:function(t){this.kq=t}},button:{get:function(){return this.Vo},set:function(t){if(this.Vo=t,this.event===null)switch(t){case 0:this.buttons=1;break;case 1:this.buttons=4;break;case 2:this.buttons=2}}},buttons:{get:function(){return this.Wo},set:function(t){this.Wo=t}},key:{get:function(){return this.Qp},set:function(t){this.Qp=t}},down:{get:function(){return this.np},set:function(t){this.np=t}},up:{get:function(){return this.nr},set:function(t){this.nr=t}},clickCount:{get:function(){return this.Yo},set:function(t){this.Yo=t}},delta:{get:function(){return this.lp},set:function(t){this.lp=t}},isMultiTouch:{get:function(){return this.Mp},set:function(t){this.Mp=t}},handled:{get:function(){return this.Gp},set:function(t){this.Gp=t}},bubbles:{get:function(){return this.jg},set:function(t){this.jg=t}},event:{get:function(){return this.sp},set:function(t){this.sp=t}},isTouchEvent:{get:function(){var t=it.TouchEvent,e=this.event;return t&&e instanceof t?!0:(t=it.PointerEvent)&&e instanceof t&&(e.pointerType==="touch"||e.pointerType==="pen")}},timestamp:{get:function(){return this.ir},set:function(t){this.ir=t}},targetDiagram:{get:function(){return this.er},set:function(t){this.er=t}},targetObject:{get:function(){return this.pd},set:function(t){this.pd=t}},control:{get:function(){return(this.modifiers&1)!==0},set:function(t){this.modifiers=t?this.modifiers|1:this.modifiers&-2}},shift:{get:function(){return(this.modifiers&4)!==0},set:function(t){this.modifiers=t?this.modifiers|4:this.modifiers&-5}},alt:{get:function(){return(this.modifiers&2)!==0},set:function(t){this.modifiers=t?this.modifiers|2:this.modifiers&-3}},meta:{get:function(){return(this.modifiers&8)!==0},set:function(t){this.modifiers=t?this.modifiers|8:this.modifiers&-9}},left:{get:function(){var t=this.event;return t===null||t.type!=="mousedown"&&t.type!=="mouseup"&&t.type!=="pointerdown"&&t.type!=="pointerup"?(this.buttons&1)!==0:this.button===0},set:function(t){this.buttons=t?this.buttons|1:this.buttons&-2}},right:{get:function(){var t=this.event;return t===null||t.type!=="mousedown"&&t.type!=="mouseup"&&t.type!=="pointerdown"&&t.type!=="pointerup"?(this.buttons&2)!==0:this.button===2},set:function(t){this.buttons=t?this.buttons|2:this.buttons&-3}},middle:{get:function(){var t=this.event;return t===null||t.type!=="mousedown"&&t.type!=="mouseup"&&t.type!=="pointerdown"&&t.type!=="pointerup"?(this.buttons&4)!==0:this.button===1},set:function(t){this.buttons=t?this.buttons|4:this.buttons&-5}}}),_n.prototype.getMultiTouchDocumentPoint=_n.prototype.Vy,_n.prototype.getMultiTouchViewPoint=_n.prototype.mo,_n.className="InputEvent";function Os(){this.H=null,this.va="",this.tq=this.br=null}Os.prototype.copy=function(){var t=new Os;return t.H=this.H,t.va=this.va,t.br=this.br,t.tq=this.tq,t},Os.prototype.toString=function(){var t="*"+this.name;return this.subject!==null&&(t+=":"+this.subject.toString()),this.parameter!==null&&(t+="("+this.parameter.toString()+")"),t},Z.Object.defineProperties(Os.prototype,{diagram:{get:function(){return this.H},set:function(t){this.H=t}},name:{get:function(){return this.va},set:function(t){this.va=t}},subject:{get:function(){return this.br},set:function(t){this.br=t}},parameter:{get:function(){return this.tq},set:function(t){this.tq=t}}}),Os.className="DiagramEvent";function _t(){this.dm=Ht,this.af=this.jq="",this.jn=this.kn=this.pn=this.qn=this.on=this.H=this.$b=null}_t.prototype.clear=function(){this.jn=this.kn=this.pn=this.qn=this.on=this.H=this.$b=null},_t.prototype.copy=function(){var t=new _t;t.dm=this.dm,t.jq=this.jq,t.af=this.af,t.$b=this.$b,t.H=this.H,t.on=this.on;var e=this.qn;return t.qn=Bt(e)&&typeof e.J=="function"?e.J():e,e=this.pn,t.pn=Bt(e)&&typeof e.J=="function"?e.J():e,e=this.kn,t.kn=Bt(e)&&typeof e.J=="function"?e.J():e,e=this.jn,t.jn=Bt(e)&&typeof e.J=="function"?e.J():e,t},_t.prototype.ob=function(t){t.classType===_t&&(this.change=t)},_t.prototype.toString=function(){var t="";return t=this.change===Oi?t+"* ":this.change===Ht?t+(this.model!==null?"!m":"!d"):t+((this.model!==null?"!m":"!d")+this.change),this.propertyName&&typeof this.propertyName=="string"&&(t+=" "+this.propertyName),this.modelChange&&this.modelChange!==this.propertyName&&(t+=" "+this.modelChange),t+=": ",this.change===Oi?this.oldValue!==null&&(t+=" "+this.oldValue):(this.object!==null&&(t+=Kn(this.object)),this.oldValue!==null&&(t+="  old: "+Kn(this.oldValue)),this.oldParam!==null&&(t+=" "+this.oldParam),this.newValue!==null&&(t+="  new: "+Kn(this.newValue)),this.newParam!==null&&(t+=" "+this.newParam)),t},_t.prototype.I=function(t){return t?this.oldValue:this.newValue},_t.prototype.Xy=function(t){return t?this.oldParam:this.newParam},_t.prototype.canUndo=function(){return this.model!==null||this.diagram!==null},_t.prototype.undo=function(){this.canUndo()&&(this.model!==null?this.model.changeState(this,!0):this.diagram!==null&&this.diagram.changeState(this,!0))},_t.prototype.canRedo=function(){return this.model!==null||this.diagram!==null},_t.prototype.redo=function(){this.canRedo()&&(this.model!==null?this.model.changeState(this,!1):this.diagram!==null&&this.diagram.changeState(this,!1))},Z.Object.defineProperties(_t.prototype,{model:{get:function(){return this.$b},set:function(t){this.$b=t}},diagram:{get:function(){return this.H},set:function(t){this.H=t}},change:{get:function(){return this.dm},set:function(t){this.dm=t}},modelChange:{get:function(){return this.jq},set:function(t){this.jq=t}},propertyName:{get:function(){return this.af},set:function(t){this.af=t}},isTransactionFinished:{get:function(){return this.dm===Oi&&(this.af==="CommittedTransaction"||this.af==="FinishedUndo"||this.af==="FinishedRedo")}},object:{get:function(){return this.on},set:function(t){this.on=t}},oldValue:{get:function(){return this.qn},set:function(t){this.qn=t}},oldParam:{get:function(){return this.pn},set:function(t){this.pn=t}},newValue:{get:function(){return this.kn},set:function(t){this.kn=t}},newParam:{get:function(){return this.jn},set:function(t){this.jn=t}}}),_t.prototype.redo=_t.prototype.redo,_t.prototype.canRedo=_t.prototype.canRedo,_t.prototype.undo=_t.prototype.undo,_t.prototype.canUndo=_t.prototype.canUndo,_t.prototype.getParam=_t.prototype.Xy,_t.prototype.getValue=_t.prototype.I,_t.prototype.clear=_t.prototype.clear;var Oi=new J(_t,"Transaction",-1),Ht=new J(_t,"Property",0),me=new J(_t,"Insert",1),Me=new J(_t,"Remove",2);_t.className="ChangedEvent",_t.Transaction=Oi,_t.Property=Ht,_t.Insert=me,_t.Remove=Me;function Ge(){this.m=new Q().freeze(),this.va="",this.j=!1}Ge.prototype.toString=function(t){var e="Transaction: "+this.name+" "+this.changes.count.toString()+(this.isComplete?"":", incomplete");if(t!==void 0&&0<t){t=this.changes.count;for(var n=0;n<t;n++){var i=this.changes.L(n);i!==null&&(e+=`
  `+i.toString())}}return e},Ge.prototype.clear=function(){var t=this.changes;t.ja();for(var e=t.count-1;0<=e;e--){var n=t.L(e);n!==null&&n.clear()}t.clear(),t.freeze()},Ge.prototype.canUndo=function(){return this.isComplete},Ge.prototype.undo=function(){if(this.canUndo())for(var t=this.changes.count-1;0<=t;t--){var e=this.changes.L(t);e!==null&&e.undo()}},Ge.prototype.canRedo=function(){return this.isComplete},Ge.prototype.redo=function(){if(this.canRedo())for(var t=this.changes.count,e=0;e<t;e++){var n=this.changes.L(e);n!==null&&n.redo()}},Ge.prototype.Kj=function(){if(this.isComplete){var t=this.changes;t.ja();for(var e=new pt,n=0;n<t.count;n++){var i=t.L(n);if(i!==null&&i.change===Ht&&i.object){var r=e.get(i.object);r||(r=new pt,e.set(i.object,r));var s=r.get(i.propertyName);s===null?r.set(i.propertyName,-1):(0<s&&t.Tc(s,null),r.set(i.propertyName,n))}}for(n=e=0;n<t.count;n++)i=t.L(n),i!==null&&(n>e&&t.Tc(e,i),e++);for(;t.length>e;)t.pop();t.freeze()}},Z.Object.defineProperties(Ge.prototype,{changes:{get:function(){return this.m}},name:{get:function(){return this.va},set:function(t){this.va=t}},isComplete:{get:function(){return this.j},set:function(t){this.j=t}}}),Ge.prototype.optimize=Ge.prototype.Kj,Ge.prototype.redo=Ge.prototype.redo,Ge.prototype.canRedo=Ge.prototype.canRedo,Ge.prototype.undo=Ge.prototype.undo,Ge.prototype.canUndo=Ge.prototype.canUndo,Ge.prototype.clear=Ge.prototype.clear,Ge.className="Transaction";function qt(){this.kt=new H,this.wd=!1,this.u=new Q().freeze(),this.pe=-1,this.m=999,this.re=!1,this.hp=null,this.Oh=0,this.j=!1,this.ue=new Q().freeze(),this.Nk=new Q,this.Ns=!0,this.Xs=this.Kp=this.$s=this.Zs=!1}qt.prototype.toString=function(t){var e="UndoManager "+this.historyIndex+"<"+this.history.count+"<="+this.maxHistoryLength;e+="[";for(var n=this.nestedTransactionNames.count,i=0;i<n;i++)0<i&&(e+=" "),e+=this.nestedTransactionNames.L(i);if(e+="]",t!==void 0&&0<t)for(n=this.history.count,i=0;i<n;i++)e+=`
 `+this.history.L(i).toString(t-1);return e},qt.prototype.clear=function(){var t=this.history;t.ja();for(var e=t.count-1;0<=e;e--){var n=t.L(e);n!==null&&n.clear()}t.clear(),this.pe=-1,t.freeze(),this.re=!1,this.hp=null,this.Oh=0,this.ue.ja(),this.ue.clear(),this.ue.freeze(),this.Nk.clear(),this.Xs=this.Kp=this.$s=this.Zs=!1},qt.prototype.copyProperties=function(t){this.isEnabled=t.isEnabled,this.maxHistoryLength=t.maxHistoryLength,this.checksTransactionLevel=t.checksTransactionLevel},a=qt.prototype,a.rw=function(t){this.kt.add(t)},a.mx=function(t){this.kt.remove(t)},a.Ca=function(t){if(t===void 0&&(t=""),t===null&&(t=""),this.isUndoingRedoing)return!1;this.Ns===!0&&(this.Ns=!1,this.Oh++,this.isInternalTransaction||this.Jb("StartingFirstTransaction",t,this.currentTransaction),0<this.Oh&&this.Oh--),this.isEnabled&&(this.ue.ja(),this.ue.add(t),this.ue.freeze(),this.currentTransaction===null?this.Nk.add(0):this.Nk.add(this.currentTransaction.changes.count)),this.Oh++;var e=this.transactionLevel===1;return e&&(this.isInternalTransaction||this.Jb("StartedTransaction",t,this.currentTransaction)),e},a.cb=function(t){return t===void 0&&(t=""),$c(this,!0,t)},a.xf=function(){return $c(this,!1,"")};function $c(t,e,n){if(t.isUndoingRedoing)return!1;t.checksTransactionLevel&&1>t.transactionLevel&&Ve("Ending transaction without having started a transaction: "+n);var i=t.transactionLevel===1,r=t.currentTransaction;i&&e&&(t.isInternalTransaction||t.Jb("CommittingTransaction",n,r));var s=0;if(0<t.transactionLevel&&(t.Oh--,t.isEnabled)){var h=t.ue.count;0<h&&(n===""&&(n=t.ue.L(0)),t.ue.ja(),t.ue.lb(h-1),t.ue.freeze()),h=t.Nk.count,0<h&&(s=t.Nk.L(h-1),t.Nk.lb(h-1))}if(i){if(e){if(t.Kp=!1,r===null&&n!==""&&(r=t.currentTransaction),t.isEnabled&&r!==null){for(r.isComplete||(r.isComplete=!0,r.name=n),e=t.history,e.ja(),i=e.count-1;i>t.historyIndex;i--)s=e.L(i),s!==null&&s.clear(),e.lb(i),t.Kp=!0;i=t.maxHistoryLength,0<=i&&(i===0?e.clear():e.count>=i&&(s=e.L(0),s!==null&&s.clear(),e.lb(0),t.pe--)),i===0||e.count!==0&&e.get(e.count-1)===r||(e.add(r),t.pe++),e.freeze()}t.isInternalTransaction||t.Jb("CommittedTransaction",n,r)}else{t.re=!0;try{t.isEnabled&&r!==null&&(r.isComplete=!0,r.undo())}finally{t.isInternalTransaction||t.Jb("RolledBackTransaction",n,r),t.re=!1}r!==null&&r.clear()}return t.hp=null,t.isPendingClear&&t.clear(),t.isPendingClear=!1,t.isPendingUnmodified=!1,!0}if(t.isEnabled&&!e&&r!==null){for(t=s,n=r.changes,r=n.count-1;r>=t;r--)e=n.L(r),e!==null&&e.undo(),n.ja(),n.lb(r);n.freeze()}return!1}qt.prototype.canUndo=function(){if(!this.isEnabled||0<this.transactionLevel)return!1;var t=this.transactionToUndo;return!!(t!==null&&t.canUndo())},qt.prototype.undo=function(){if(this.canUndo()){var t=this.transactionToUndo;try{this.re=!0,this.Jb("StartingUndo","Undo",t),this.pe--,t.undo()}catch(e){Ve("undo error: "+e.toString())}finally{this.Jb("FinishedUndo","Undo",t),this.re=!1}}},qt.prototype.canRedo=function(){if(!this.isEnabled||0<this.transactionLevel)return!1;var t=this.transactionToRedo;return!!(t!==null&&t.canRedo())},qt.prototype.redo=function(){if(this.canRedo()){var t=this.transactionToRedo;try{this.re=!0,this.Jb("StartingRedo","Redo",t),this.pe++,t.redo()}catch(e){Ve("redo error: "+e.toString())}finally{this.Jb("FinishedRedo","Redo",t),this.re=!1}}},qt.prototype.Jb=function(t,e,n){n===void 0&&(n=null);var i=new _t;for(i.change=Oi,i.propertyName=t,i.object=n,i.oldValue=e,t=this.models;t.next();)e=t.value,i.model=e,e.ur(i)},qt.prototype.tu=function(t){if(this.isEnabled&&!this.isUndoingRedoing&&!this.skipsEvent(t)){var e=this.currentTransaction;e===null&&(this.hp=e=new Ge);var n=t.copy();e=e.changes,e.ja(),e.add(n),e.freeze(),this.checksTransactionLevel&&0>=this.transactionLevel&&!this.Ns&&(t=t.diagram,t!==null&&t.ci===!1||Ve("Change not within a transaction: "+n.toString()))}},qt.prototype.skipsEvent=function(t){if(t===null||0>t.change.value)return!0;if(t=t.object,t===null)return!1;if(t.layer!==void 0){if(t=t.layer,t!==null&&t.isTemporary)return!0}else if(t.isTemporary)return!0;return!1},Z.Object.defineProperties(qt.prototype,{models:{get:function(){return this.kt.iterator}},isEnabled:{get:function(){return this.wd},set:function(t){this.wd=t}},transactionToUndo:{get:function(){return 0<=this.historyIndex&&this.historyIndex<=this.history.count-1?this.history.L(this.historyIndex):null}},transactionToRedo:{get:function(){return this.historyIndex<this.history.count-1?this.history.L(this.historyIndex+1):null}},isUndoingRedoing:{get:function(){return this.re}},history:{get:function(){return this.u}},maxHistoryLength:{get:function(){return this.m},set:function(t){this.m=t}},historyIndex:{get:function(){return this.pe}},currentTransaction:{get:function(){return this.hp}},transactionLevel:{get:function(){return this.Oh}},isInTransaction:{get:function(){return 0<this.Oh}},checksTransactionLevel:{get:function(){return this.j},set:function(t){this.j=t}},nestedTransactionNames:{get:function(){return this.ue}},isPendingClear:{get:function(){return this.Zs},set:function(t){this.Zs=t}},isPendingUnmodified:{get:function(){return this.$s},set:function(t){this.$s=t}},isInternalTransaction:{get:function(){return this.Xs},set:function(t){this.Xs=t}},isJustDiscarded:{get:function(){return this.Kp}}}),qt.prototype.handleChanged=qt.prototype.tu,qt.prototype.redo=qt.prototype.redo,qt.prototype.undo=qt.prototype.undo,qt.prototype.canUndo=qt.prototype.canUndo,qt.prototype.rollbackTransaction=qt.prototype.xf,qt.prototype.commitTransaction=qt.prototype.cb,qt.prototype.startTransaction=qt.prototype.Ca,qt.prototype.removeModel=qt.prototype.mx,qt.prototype.addModel=qt.prototype.rw,qt.prototype.clear=qt.prototype.clear,qt.className="UndoManager";function Lt(){ce(this),this.H=za,this.va="",this.wd=!0,this.mb=!1,this.pi=null,this.Sx=new _n,this.rr=-1}Lt.prototype.toString=function(){return this.name!==""?this.name+" Tool":oo(this.constructor)},Lt.prototype.updateAdornments=function(){},Lt.prototype.canStart=function(){return this.isEnabled},Lt.prototype.doStart=function(){},Lt.prototype.doActivate=function(){this.isActive=!0},Lt.prototype.doDeactivate=function(){this.isActive=!1},Lt.prototype.doStop=function(){},Lt.prototype.doCancel=function(){this.transactionResult=null,this.stopTool()},Lt.prototype.stopTool=function(){var t=this.diagram;t.currentTool===this&&(t.currentTool=null,t.currentCursor="")},Lt.prototype.doMouseDown=function(){!this.isActive&&this.canStart()&&this.doActivate()},Lt.prototype.doMouseMove=function(){},Lt.prototype.doMouseUp=function(){this.stopTool()},Lt.prototype.doMouseWheel=function(){},Lt.prototype.canStartMultiTouch=function(){return!0},Lt.prototype.standardPinchZoomStart=function(){var t=this.diagram,e=t.lastInput,n=e.mo(0,T.allocAt(NaN,NaN)),i=e.mo(1,T.allocAt(NaN,NaN));if(n.w()&&i.w()&&(this.doCancel(),t.pl("hasGestureZoom"))){t.Wv=t.scale;var r=i.x-n.x,s=i.y-n.y;t.dw=Math.sqrt(r*r+s*s),e.bubbles=!1}T.free(n),T.free(i)},Lt.prototype.standardPinchZoomMove=function(){var t=this.diagram,e=t.lastInput,n=e.mo(0,T.allocAt(NaN,NaN)),i=e.mo(1,T.allocAt(NaN,NaN));if(n.w()&&i.w()&&(this.doCancel(),t.pl("hasGestureZoom"))){var r=i.x-n.x,s=i.y-n.y;s=Math.sqrt(r*r+s*s)/t.dw,r=new T((Math.min(i.x,n.x)+Math.max(i.x,n.x))/2,(Math.min(i.y,n.y)+Math.max(i.y,n.y))/2),s*=t.Wv;var h=t.commandHandler;if(s!==t.scale&&h.canResetZoom(s)){var u=t.zoomPoint;t.zoomPoint=r,h.resetZoom(s),t.zoomPoint=u}e.bubbles=!1}T.free(n),T.free(i)},Lt.prototype.doKeyDown=function(){this.diagram.lastInput.key==="Esc"&&this.doCancel()},Lt.prototype.doKeyUp=function(){},Lt.prototype.Ca=function(t){return t===void 0&&(t=this.name),this.transactionResult=null,this.diagram.Ca(t)},Lt.prototype.stopTransaction=function(){var t=this.diagram;return this.transactionResult===null?t.xf():t.cb(this.transactionResult)},Lt.prototype.standardMouseSelect=function(){var t=this.diagram;if(t.allowSelect){var e=t.lastInput,n=t.nl(e.documentPoint,!1);if(n!==null){if(Ji?e.meta:e.control){for(t.P("ChangingSelection",t.selection),e=n;e!==null&&!e.canSelect();)e=e.containingGroup;e!==null&&(e.isSelected=!e.isSelected),t.P("ChangedSelection",t.selection)}else if(e.shift){if(!n.isSelected){for(t.P("ChangingSelection",t.selection),e=n;e!==null&&!e.canSelect();)e=e.containingGroup;e!==null&&(e.isSelected=!0),t.P("ChangedSelection",t.selection)}}else if(!n.isSelected){for(e=n;e!==null&&!e.canSelect();)e=e.containingGroup;e!==null&&t.select(e)}}else!e.left||(Ji?e.meta:e.control)||e.shift||t.clearSelection()}},Lt.prototype.standardMouseClick=function(t,e){t===void 0&&(t=null),e===void 0&&(e=function(r){return!r.layer.isTemporary});var n=this.diagram,i=n.lastInput;return t=n.dc(i.documentPoint,t,e),i.targetObject=t,zy(t,i,n),i.handled};function zy(t,e,n){if(e.handled=!1,t===null||t.uf()){var i=0;e.left?i=e.clickCount===1?1:e.clickCount===2?2:1:e.right&&e.clickCount===1&&(i=3);var r="ObjectSingleClicked";if(t!==null){switch(i){case 1:r="ObjectSingleClicked";break;case 2:r="ObjectDoubleClicked";break;case 3:r="ObjectContextClicked"}i!==0&&n.P(r,t)}else{switch(i){case 1:r="BackgroundSingleClicked";break;case 2:r="BackgroundDoubleClicked";break;case 3:r="BackgroundContextClicked"}i!==0&&n.P(r)}if(t!==null)for(;t!==null;){switch(n=null,i){case 1:n=t.click;break;case 2:n=t.doubleClick?t.doubleClick:t.click;break;case 3:n=t.contextClick}if(n!==null&&(n(e,t),e.handled))break;t=t.panel}else{switch(t=null,i){case 1:t=n.click;break;case 2:t=n.doubleClick?n.doubleClick:n.click;break;case 3:t=n.contextClick}t!==null&&t(e)}}}Lt.prototype.standardMouseOver=function(){var t=this.diagram,e=t.lastInput;if(t.animationManager.zb!==!0){var n=t.skipsUndoManager;t.skipsUndoManager=!0;var i=t.viewportBounds.ba(e.documentPoint)?t.dc(e.documentPoint,null,null):null;!e.event||e.event.type!=="pointercancel"&&e.event.type!=="pointerout"||(i=null),e.targetObject=i;var r=!1;if(i!==t.gk){var s=t.gk,h=s;for(t.gk=i,this.doCurrentObjectChanged(s,i),e.handled=!1;s!==null;){var u=s.mouseLeave;if(u!==null&&(i===s||i!==null&&i.dg(s)||(u(e,s,i),r=!0,e.handled)))break;s=s.panel}for(s=h,e.handled=!1;i!==null&&(h=i.mouseEnter,!(h!==null&&(s===i||s!==null&&s.dg(i)||(h(e,i,s),r=!0,e.handled))));)i=i.panel;i=t.gk}if(i!==null){for(s=i,h="";s!==null&&(h=s.cursor,h==="");)s=s.panel;for(t.currentCursor=h,e.handled=!1,s=i;s!==null&&(i=s.mouseOver,!(i!==null&&(i(e,s),r=!0,e.handled)));)s=s.panel}else t.currentCursor="",i=t.mouseOver,i!==null&&(i(e),r=!0);r&&t.Kb(),t.skipsUndoManager=n}},Lt.prototype.doCurrentObjectChanged=function(){},Lt.prototype.standardMouseWheel=function(){var t=this.diagram,e=t.lastInput,n=e.delta;if(n!==0&&t.documentBounds.w()){var i=t.commandHandler,r=t.toolManager.mouseWheelBehavior;if(i!==null&&(r===Kh&&!e.shift||r===Ta&&e.control))(0<n?i.canIncreaseZoom():i.canDecreaseZoom())&&(r=t.zoomPoint,t.zoomPoint=e.viewPoint,0<n?i.increaseZoom():i.decreaseZoom(),t.zoomPoint=r),e.bubbles=!1;else if(r===Kh&&e.shift||r===Ta&&!e.control){i=t.position.copy();var s=0<n?n:-n,h=e.event,u=h.deltaMode;if(r=h.deltaX,h=h.deltaY,(Ah||Td)&&(u=1,0<r&&(r=3),0>r&&(r=-3),0<h&&(h=3),0>h&&(h=-3)),u===void 0||r===void 0||h===void 0||r===0&&h===0||e.shift)!e.shift&&t.allowVerticalScroll?(s=3*s*t.scrollVerticalLineChange,0<n?t.scroll("pixel","up",s):t.scroll("pixel","down",s)):e.shift&&t.allowHorizontalScroll&&(s=3*s*t.scrollHorizontalLineChange,0<n?t.scroll("pixel","left",s):t.scroll("pixel","right",s));else{switch(u){case 0:n="pixel";break;case 1:n="line";break;case 2:n="page";break;default:n="pixel"}r!==0&&t.allowHorizontalScroll&&(r*=t.scrollHorizontalLineChange/16,0<r?t.scroll(n,"left",-r):t.scroll(n,"right",r)),h!==0&&t.allowVerticalScroll&&(h*=t.scrollVerticalLineChange/16,0<h?t.scroll(n,"up",-h):t.scroll(n,"down",h))}t.position.C(i)||(e.bubbles=!1)}}},Lt.prototype.standardWaitAfter=function(t,e){e===void 0&&(e=this.diagram.lastInput),this.cancelWaitAfter();var n=this,i=e.clone(this.Sx);this.rr=On(function(){n.doWaitAfter(i)},t)},Lt.prototype.cancelWaitAfter=function(){this.rr!==-1&&it.clearTimeout(this.rr),this.rr=-1},Lt.prototype.doWaitAfter=function(){},Lt.prototype.findToolHandleAt=function(t,e){return t=this.diagram.dc(t,function(n){for(;n!==null&&!(n.panel instanceof St);)n=n.panel;return n}),t===null?null:t.part.category===e?t:null},Lt.prototype.isBeyondDragSize=function(t,e){var n=this.diagram;t===void 0&&(t=n.firstInput.viewPoint),e===void 0&&(e=n.lastInput.viewPoint);var i=n.toolManager.dragSize,r=i.width;return i=i.height,n.firstInput.isTouchEvent&&(r+=6,i+=6),Math.abs(e.x-t.x)>r||Math.abs(e.y-t.y)>i},Z.Object.defineProperties(Lt.prototype,{diagram:{get:function(){return this.H},set:function(t){t instanceof I&&(this.H=t)}},name:{get:function(){return this.va},set:function(t){this.va=t}},isEnabled:{get:function(){return this.wd},set:function(t){this.wd=t}},isActive:{get:function(){return this.mb},set:function(t){this.mb=t}},transactionResult:{get:function(){return this.pi},set:function(t){this.pi=t}}}),Lt.prototype.startTransaction=Lt.prototype.Ca,Lt.className="Tool";function $t(){Lt.call(this),this.name="ToolManager",this.gb=new Q,this.nb=new Q,this.Db=new Q,this.F=this.W=850,this.m=new ht(2,2).ha(),this.Fa=5e3,this.ga=Ta,this.u=bc,this.gp=this.j=null,this.mj=-1}z($t,Lt),$t.prototype.initializeStandardTools=function(){},$t.prototype.updateAdornments=function(t){var e=this.currentToolTip;if(e instanceof St&&this.gp===t){var n=e.adornedObject;(t!==null?n.part===t:n===null)?this.showToolTip(e,n):this.hideToolTip()}},$t.prototype.doMouseDown=function(){var t=this.diagram,e=t.lastInput;if(e.isTouchEvent&&this.gestureBehavior===vu&&(e.bubbles=!1),e.isMultiTouch){if(this.cancelWaitAfter(),this.gestureBehavior===Wd){e.bubbles=!0;return}if(this.gestureBehavior===vu)return;if(t.currentTool.canStartMultiTouch()){t.currentTool.standardPinchZoomStart();return}}for(var n=this.mouseDownTools.length,i=0;i<n;i++){var r=this.mouseDownTools.L(i);if(r.diagram=this.diagram,r.canStart()){t.doFocus(),t.currentTool=r,t.currentTool===r&&(r.isActive||r.doActivate(),r.doMouseDown());return}}t.lastInput.button===1&&(this.mouseWheelBehavior===Ta?this.mouseWheelBehavior=Kh:this.mouseWheelBehavior===Kh&&(this.mouseWheelBehavior=Ta)),this.doActivate(),this.standardWaitAfter(this.holdDelay,e)},$t.prototype.doMouseMove=function(){var t=this.diagram,e=t.lastInput;if(e.isMultiTouch){if(this.gestureBehavior===Wd){e.bubbles=!0;return}if(this.gestureBehavior===vu)return;if(t.currentTool.canStartMultiTouch()){t.currentTool.standardPinchZoomMove();return}}if(this.isActive)for(var n=this.mouseMoveTools.length,i=0;i<n;i++){var r=this.mouseMoveTools.L(i);if(r.diagram=this.diagram,r.canStart()){t.doFocus(),t.currentTool=r,t.currentTool===r&&(r.isActive||r.doActivate(),r.doMouseMove());return}}Qc(this,t),t=e.event,t===null||t.type!=="pointermove"&&t.cancelable||(e.bubbles=!0)};function Qc(t,e){t.standardMouseOver(),t.isBeyondDragSize()&&t.standardWaitAfter(t.isActive?t.holdDelay:t.hoverDelay,e.lastInput)}$t.prototype.doCurrentObjectChanged=function(t,e){t=this.currentToolTip,t===null||e!==null&&t instanceof St&&(e===t||e.dg(t))||this.hideToolTip()},$t.prototype.doWaitAfter=function(t){var e=this.diagram;e.Ha&&(this.doMouseHover(),this.isActive||this.doToolTip(),t.isTouchEvent&&!e.lastInput.handled&&(t=t.copy(),t.button=2,t.buttons=2,e.lastInput=t,e.Mt=!0,e.doMouseUp()))},$t.prototype.doMouseHover=function(){var t=this.diagram,e=t.lastInput;e.targetObject===null&&(e.targetObject=t.dc(e.documentPoint,null,null));var n=e.targetObject;if(n!==null)for(e.handled=!1;n!==null&&(t=this.isActive?n.mouseHold:n.mouseHover,!(t!==null&&(t(e,n),e.handled)));)n=n.panel;else n=this.isActive?t.mouseHold:t.mouseHover,n!==null&&n(e)},$t.prototype.doToolTip=function(){var t=this.diagram,e=t.lastInput;if(e.targetObject===null&&(e.targetObject=t.dc(e.documentPoint,null,null)),e=e.targetObject,e!==null){if(t=this.currentToolTip,!(t instanceof St)||e!==t&&!e.dg(t)){for(;e!==null;){if(t=e.toolTip,t!==null){this.showToolTip(t,e);return}e=e.panel}this.hideToolTip()}}else e=t.toolTip,e!==null?this.showToolTip(e,null):this.hideToolTip()},$t.prototype.showToolTip=function(t,e){var n=this.diagram;if(t!==this.currentToolTip&&this.hideToolTip(),t instanceof St){t.layerName="Tool",t.selectable=!1,t.scale=1/n.scale,t.category="ToolTip",t.placeholder!==null&&(t.placeholder.scale=n.scale);var i=t.diagram;i!==null&&i!==n&&i.remove(t),n.add(t),e!==null?t.adornedObject=e:t.data=n.model,t.Ta(),this.positionToolTip(t,e)}else t instanceof Wo&&t!==this.currentToolTip&&t.show(e,n,this);if(this.currentToolTip=t,this.mj!==-1&&(it.clearTimeout(this.mj),this.mj=-1),t=this.toolTipDuration,0<t&&t!==1/0){var r=this;this.mj=On(function(){r.hideToolTip()},t)}},$t.prototype.positionToolTip=function(t){if(t.placeholder===null){var e=this.diagram,n=e.lastInput.documentPoint.copy(),i=t.measuredBounds,r=e.viewportBounds;e.lastInput.isTouchEvent&&(n.x-=i.width),n.x+i.width>r.right&&(n.x-=i.width+5/e.scale),n.x<r.x&&(n.x=r.x),n.y=n.y+20/e.scale+i.height>r.bottom?n.y-(i.height+5/e.scale):n.y+20/e.scale,n.y<r.y&&(n.y=r.y),t.position=n}},$t.prototype.hideToolTip=function(){this.mj!==-1&&(it.clearTimeout(this.mj),this.mj=-1);var t=this.diagram,e=this.currentToolTip;e!==null&&(e instanceof St?(t.remove(e),this.gp!==null&&this.gp.wf(e.category),e.data=null,e.adornedObject=null):e instanceof Wo&&e.hide!==null&&e.hide(t,this),this.currentToolTip=null)},$t.prototype.doMouseUp=function(){this.cancelWaitAfter();var t=this.diagram;if(this.isActive)for(var e=this.mouseUpTools.length,n=0;n<e;n++){var i=this.mouseUpTools.L(n);if(i.diagram=this.diagram,i.canStart()){t.doFocus(),t.currentTool=i,t.currentTool===i&&(i.isActive||i.doActivate(),i.doMouseUp());return}}t.doFocus(),this.doDeactivate()},$t.prototype.doMouseWheel=function(){this.standardMouseWheel()},$t.prototype.doKeyDown=function(){var t=this.diagram;t.commandHandler!==null&&t.commandHandler.doKeyDown()},$t.prototype.doKeyUp=function(){var t=this.diagram;t.commandHandler!==null&&t.commandHandler.doKeyUp()},$t.prototype.findTool=function(t){for(var e=this.mouseDownTools.length,n=0;n<e;n++){var i=this.mouseDownTools.L(n);if(i.name===t)return i}for(e=this.mouseMoveTools.length,n=0;n<e;n++)if(i=this.mouseMoveTools.L(n),i.name===t)return i;for(e=this.mouseUpTools.length,n=0;n<e;n++)if(i=this.mouseUpTools.L(n),i.name===t)return i;return null},$t.prototype.replaceTool=function(t,e){e!==null&&(e.diagram=this.diagram);for(var n=this.mouseDownTools.length,i=0;i<n;i++){var r=this.mouseDownTools.L(i);if(r.name===t)return e!==null?this.mouseDownTools.Tc(i,e):this.mouseDownTools.lb(i),r}for(n=this.mouseMoveTools.length,i=0;i<n;i++)if(r=this.mouseMoveTools.L(i),r.name===t)return e!==null?this.mouseMoveTools.Tc(i,e):this.mouseMoveTools.lb(i),r;for(n=this.mouseUpTools.length,i=0;i<n;i++)if(r=this.mouseUpTools.L(i),r.name===t)return e!==null?this.mouseUpTools.Tc(i,e):this.mouseUpTools.lb(i),r;return null},$t.prototype.fb=function(t,e,n){e!==null&&(e.name=t,e.diagram=this.diagram),this.findTool(t)?this.replaceTool(t,e):e!==null&&n.add(e)},Z.Object.defineProperties($t.prototype,{mouseWheelBehavior:{get:function(){return this.ga},set:function(t){this.ga=t}},gestureBehavior:{get:function(){return this.u},set:function(t){this.u=t}},currentToolTip:{get:function(){return this.j},set:function(t){this.j=t,this.gp=t!==null&&t instanceof St?t.adornedPart:null}},mouseDownTools:{get:function(){return this.gb}},mouseMoveTools:{get:function(){return this.nb}},mouseUpTools:{get:function(){return this.Db}},hoverDelay:{get:function(){return this.W},set:function(t){this.W=t}},holdDelay:{get:function(){return this.F},set:function(t){this.F=t}},dragSize:{get:function(){return this.m},set:function(t){this.m=t.J()}},toolTipDuration:{get:function(){return this.Fa},set:function(t){this.Fa=t}}}),$t.prototype.replaceStandardTool=$t.prototype.fb;var Ta=new J($t,"WheelScroll",0),Kh=new J($t,"WheelZoom",1),Ey=new J($t,"WheelNone",2),bc=new J($t,"GestureZoom",3),vu=new J($t,"GestureCancel",4),Wd=new J($t,"GestureNone",5);$t.className="ToolManager",$t.WheelScroll=Ta,$t.WheelZoom=Kh,$t.WheelNone=Ey,$t.GestureZoom=bc,$t.GestureCancel=vu,$t.GestureNone=Wd;function Qt(){Lt.call(this),this.name="Dragging",this.u=this.mw=this.nb=!0,this.m=this.Fa=this.W=this.Ae=null,this.wm=this.Db=!1,this.Zk=new T(NaN,NaN),this.Wq=new T,this.gb=!0,this.mk=100,this.og=[],this.ie=new H().freeze(),this.ga=new Ua,this.Ym=null,this.F="copy",this.Gc="",this.Hc="no-drop"}var Is;z(Qt,Lt),Qt.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;if(t.isReadOnly&&!t.allowDragOut||!t.allowMove&&!t.allowCopy&&!t.allowDragOut||!t.allowSelect)return!1;var e=t.lastInput;return!e.left||t.currentTool!==this&&(!this.isBeyondDragSize()||e.isTouchEvent&&e.timestamp-t.firstInput.timestamp<this.mk)?!1:this.findDraggablePart()!==null},Qt.prototype.findDraggablePart=function(){var t=this.diagram;if(t=t.nl(t.firstInput.documentPoint,!1),t===null)return null;for(;t!==null&&!t.canSelect();)t=t.containingGroup;return t!==null&&(t.canMove()||t.canCopy())?t:null},Qt.prototype.standardMouseSelect=function(){var t=this.diagram;if(t.allowSelect){var e=t.nl(t.firstInput.documentPoint,!1);if(e!==null){for(;e!==null&&!e.canSelect();)e=e.containingGroup;this.currentPart=e,this.currentPart===null||this.currentPart.isSelected||(t.P("ChangingSelection",t.selection),e=t.lastInput,(Ji?e.meta:e.control)||e.shift||t.clearSelection(!0),this.currentPart.isSelected=!0,t.P("ChangedSelection",t.selection))}}},Qt.prototype.doActivate=function(){var t=this.diagram;this.Ym=null,this.currentPart===null&&this.standardMouseSelect();var e=this.currentPart;e!==null&&(e.canMove()||e.canCopy())&&(t.bu(!0),Oe=null,this.isActive=!0,this.Zk.set(t.position),Jd(this,t.selection),this.og.length=0,t.animationManager.wc(),this.draggedParts=this.computeEffectiveCollection(t.selection,this.dragOptions),this.mw=this.diagram.layout.isRealtime,this.diagram.layout.isRealtime=!1,t.es=!0,t.Ee("temporaryPixelRatio")===!0&&30<t.uw&&Qh(t),Gu(t,this.draggedParts),this.Ca("Drag"),this.startPoint=t.firstInput.documentPoint,t.isMouseCaptured=!0,t.allowDragOut&&(this.isDragOutStarted=!0,this.wm=!1,Oe=this,as=this.diagram,this.doSimulatedDragOut()))};function Jd(t,e){if(t.dragsLink){var n=t.diagram;n.allowRelink&&(n.model.Fj()&&e.count===1&&e.first()instanceof U?(t.draggedLink=e.first(),t.draggedLink.canRelinkFrom()&&t.draggedLink.canRelinkTo()&&t.draggedLink.rj(),t.Ae=n.toolManager.findTool("Relinking"),t.Ae===null&&(t.Ae=new hi,t.Ae.diagram=n),t.Ae.originalLink=t.draggedLink):(t.draggedLink=null,t.Ae=null))}}Qt.prototype.computeEffectiveCollection=function(t,e){return this.diagram.commandHandler.computeEffectiveCollection(t,e)},Qt.prototype.Cd=function(t){return t===void 0?new jr(Zi):this.isGridSnapEnabled?new jr(new T(Math.round(1e3*t.x)/1e3,Math.round(1e3*t.y)/1e3)):new jr(t.copy())},Qt.prototype.doDeactivate=function(){this.isActive=!1;var t=this.diagram;if(this.diagram.layout.isRealtime=this.mw,t.bu(!1),t.gg(),Zd(this),nl(t,this.draggedParts),this.draggedParts=this.currentPart=this.Ym=null,this.wm=this.isDragOutStarted=!1,0<Is.count){for(var e=Is,n=e.length,i=0;i<n;i++){var r=e.L(i);t0(r),Fr(r),Zd(r),r.diagram.gg()}e.clear()}t0(this),this.Zk.h(NaN,NaN),as!==null&&(as.currentCursor=""),Oe=as=null,Fr(this),t.isMouseCaptured=!1,t.currentCursor="",t.es=!1,this.stopTransaction(),ju(t,!0)},Qt.prototype.stopTransaction=function(){var t=this.diagram,e=Lt.prototype.stopTransaction.call(this);return e&&t.undoManager.transactionToUndo!==null&&t.undoManager.transactionToUndo.Kj(),e};function Zd(t){var e=t.diagram,n=e.skipsUndoManager;e.skipsUndoManager=!0,e0(t,e.lastInput,null),e.skipsUndoManager=n,t.og.length=0}function qc(){var t=Oe;Fr(t),$d(t);var e=t.diagram;t.Zk.w()&&(e.position=t.Zk),e.gg()}Qt.prototype.doCancel=function(){Fr(this),$d(this);var t=this.diagram;this.Zk.w()&&(t.position=this.Zk),this.stopTool()},Qt.prototype.doKeyDown=function(){var t=this.diagram,e=t.lastInput;this.isActive&&(e.key==="Esc"?this.doCancel():e.key!==t.previousInput.key&&this.doMouseMove())},Qt.prototype.doKeyUp=function(){this.isActive&&this.doMouseMove()};function _d(t,e){if(t.copiedParts===null){var n=t.diagram;if((!e||!n.isReadOnly&&!n.isModelReadOnly)&&t.draggedParts!==null){var i=n.undoManager;for(i.isEnabled&&i.isInTransaction?i.currentTransaction!==null&&0<i.currentTransaction.changes.count&&(n.undoManager.xf(),n.Ca("Drag")):$d(t),n.skipsUndoManager=!e,n.partManager.addsToTemporaryLayer=!e,t.startPoint=n.firstInput.documentPoint,e=t.copiesEffectiveCollection?t.draggedParts.yf():n.selection,e=n.wj(e,n,!0),n=new pt,i=t.draggedParts.iterator;i.next();){var r=i.key;if(r.Rc()&&r.canCopy()){var s=e.I(r);s!==null&&(s.location=r.location,s.Ta(),n.add(s,t.Cd(s.location)))}}for(e=e.iterator;e.next();)i=e.value,i instanceof U&&i.canCopy()&&n.add(i,t.Cd());t.copiedParts=n,Jd(t,n.yf()),t.draggedLink!==null&&(n=t.draggedLink,e=n.routeBounds,sr(n,t.startPoint.x-(e.x+e.width/2),t.startPoint.y-(e.y+e.height/2))),t.doUpdateCursor(null,!0)}}}function Fr(t){var e=t.diagram;if(t.copiedParts!==null){if(e.Zr(t.copiedParts.yf(),!1),t.copiedParts=null,t.draggedParts!==null)for(var n=t.draggedParts.iterator;n.next();)n.key instanceof U&&(n.value.point=new T(0,0));t.doUpdateCursor(null,!0)}e.skipsUndoManager=!1,e.partManager.addsToTemporaryLayer=!1,t.startPoint=e.firstInput.documentPoint}function t0(t){if(t.draggedLink!==null){if(t.dragsLink&&t.Ae!==null){var e=t.Ae;e.diagram.remove(e.temporaryFromNode),e.diagram.remove(e.temporaryToNode),t.Ae.originalLink=null}t.draggedLink=null,t.Ae=null}}function As(t,e,n){var i=t.diagram,r=t.startPoint,s=T.alloc();s.assign(i.lastInput.documentPoint),t.moveParts(e,s.ge(r),n),T.free(s),i.Ee("temporaryPixelRatio")===!0&&i.Kh===null&&30<i.uw&&(Qh(i),i.Ao())}Qt.prototype.moveParts=function(t,e,n){n===void 0&&(n=!1);var i=this.diagram;i!==null&&vf(i,t,e,this.dragOptions,n)};function $d(t){if(t.draggedParts!==null){for(var e=t.diagram,n=t.draggedParts.iterator;n.next();){var i=n.key;i.Rc()&&(i.location=n.value.point)}for(n=t.draggedParts.iterator;n.next();)if(i=n.key,i instanceof U&&i.suspendsRouting){var r=n.value.point;t.draggedParts.add(i,t.Cd()),sr(i,-r.x,-r.y)}e.kd()}}function Qd(t,e){var n=t.diagram;t.dragsLink&&(t.draggedLink!==null&&(t.draggedLink.fromNode=null,t.draggedLink.toNode=null),o0(t,!1));var i=t.findDragOverObject(e),r=n.lastInput;r.targetObject=i,t.doUpdateCursor(i,!1);var s=n.skipsUndoManager,h=!1;try{if(n.skipsUndoManager=!0,h=e0(t,r,i),!t.isActive&&Oe===null)return;var u=i!==null?i.part:null;if(u===null||n.handlesDragDropForTopLevelParts&&u.isTopLevel&&!(u instanceof ut)){var p=n.mouseDragOver;p!==null&&(p(r),h=!0)}if(!t.isActive&&Oe===null||(t.doDragOver(e,i),!t.isActive&&Oe===null))return}finally{n.skipsUndoManager=s,h&&n.kd()}t.Ym=i,n.isReadOnly||!n.allowMove&&!n.allowCopy||!n.allowHorizontalScroll&&!n.allowVerticalScroll||n.xr(r.viewPoint)}Qt.prototype.findDragOverObject=function(t){var e=this;return ff(this.diagram,t,null,function(n){return n===null?n=!0:(n=n.part,n=!!(n===null||n instanceof St||n.layer.isTemporary||e.draggedParts&&e.draggedParts.contains(n)||e.copiedParts&&e.copiedParts.contains(n))),!n})},Qt.prototype.doUpdateCursor=function(t,e){var n=this.diagram;(e||this.Ym!==t)&&(!this.diagram.currentTool.isActive||this.mayCopy()?n.currentCursor=this.copyCursor:this.mayMove()?n.currentCursor=this.moveCursor:this.mayDragOut()&&(n.currentCursor=this.nodropCursor))};function e0(t,e,n){var i=!1,r=t.og.length,s=0<r?t.og[0]:null;if(n===s)return!1;e.handled=!1;for(var h=0;h<r;h++){var u=t.og[h],p=u.mouseDragLeave;if(p!==null&&(p(e,u,n),i=!0,e.handled))break}if(t.og.length=0,!t.isActive&&Oe===null||n===null)return i;for(e.handled=!1,r=n;r!==null;)t.og.push(r),r=n0(r);for(r=t.og.length,n=0;n<r&&(h=t.og[n],u=h.mouseDragEnter,u===null||(u(e,h,s),i=!0,!e.handled));n++);return i}function n0(t){var e=t.panel;return e!==null?e:t instanceof ot&&!(t instanceof ut)&&(t=t.containingGroup,t!==null&&t.handlesDragDropForMembers)?t:null}function i0(t,e,n){var i=t.Ae;if(i===null)return null;var r=t.diagram.bg(e,i.portGravity,function(d){return i.findValidLinkablePort(d,n)});t=T.alloc();var s=1/0,h=null;for(r=r.iterator;r.next();){var u=r.value;if(u.part!==null){var p=u.ia(Dt,t);p=e.mf(p),p<s&&(h=u,s=p)}}return T.free(t),h}function o0(t,e){var n=t.draggedLink;if(n!==null&&!(2>n.pointsCount)){var i=t.diagram;if(!i.isReadOnly){var r=t.Ae;if(r!==null){var s=null,h=null;n.fromNode===null&&(s=i0(t,n.i(0),!1),s!==null&&(h=s.part));var u=null,p=null;n.toNode===null&&(u=i0(t,n.i(n.pointsCount-1),!0),u!==null&&(p=u.part)),r.isValidLink(h,s,p,u)?e?(n.defaultFromPoint=n.i(0),n.defaultToPoint=n.i(n.pointsCount-1),n.suspendsRouting=!1,n.fromNode=h,s!==null&&(n.fromPortId=s.portId),n.toNode=p,u!==null&&(n.toPortId=u.portId),n.fromPort!==i.hx&&i.P("LinkRelinked",n,i.hx),n.toPort!==i.ix&&i.P("LinkRelinked",n,i.ix)):p0(r,h,s,p,u):p0(r,null,null,null,null)}}}}Qt.prototype.doDragOver=function(){};function r0(t,e){var n=t.diagram;t.dragsLink&&o0(t,!0),Zd(t);var i=t.findDragOverObject(e),r=n.lastInput;if(r.targetObject=i,i!==null){r.handled=!1;for(var s=i;s!==null;){var h=s.mouseDrop;if(h!==null&&(h(r,s),r.handled))break;Ry(t,r,s),s=n0(s)}}else s=n.mouseDrop,s!==null&&s(r);if(t.isActive||Oe!==null){for(r=(t.copiedParts||t.draggedParts).iterator;r.next();)s=r.key,s instanceof _&&s.linksConnected.each(function(u){u.suspendsRouting=!1});if(t.doDropOnto(e,i),t.isActive||Oe!==null){for(t=E.alloc(),e=n.selection.iterator;e.next();)i=e.value,i instanceof _&&Vy(n,i,t);E.free(t)}}}function Ry(t,e,n){t=t.diagram,n=n.part,!t.handlesDragDropForTopLevelParts||!n.isTopLevel||n instanceof ut||(n=t.mouseDrop,n!==null&&n(e))}function Vy(t,e,n){var i=!1;if(e.getAvoidableRect(n),t.viewportBounds.Ce(n)&&(i=!0),t=t.nu(n,function(r){return r.part},function(r){return r instanceof U},!0,function(r){return r instanceof U},i),t.count!==0)for(t=t.iterator;t.next();)n=t.value,!n.Hd(e)&&n.isAvoiding&&n.ab()}Qt.prototype.doDropOnto=function(){},Qt.prototype.doMouseMove=function(){if(this.isActive){var t=this.diagram,e=t.lastInput;this.simulatedMouseMove(e.event,e.documentPoint,e.targetDiagram)||this.currentPart===null||this.draggedParts===null||(this.mayCopy()?(_d(this,!1),Gu(t,this.copiedParts),As(this,this.copiedParts,!1),nl(t,this.copiedParts)):this.mayMove()?(Fr(this),As(this,this.draggedParts,!0)):this.mayDragOut()?(_d(this,!1),As(this,this.copiedParts,!1)):Fr(this),Qd(this,t.lastInput.documentPoint))}},Qt.prototype.doMouseUp=function(){if(this.isActive){var t=this.diagram,e=t.lastInput;if(!this.simulatedMouseUp(e.event,e.documentPoint,e.targetDiagram)){e=!1;var n=this.mayCopy();if(n&&this.copiedParts!==null?(Fr(this),_d(this,!0),Gu(t,this.copiedParts),As(this,this.copiedParts,!1),nl(t,this.copiedParts),this.copiedParts!==null&&(t.P("ChangingSelection",t.selection),t.clearSelection(!0),this.copiedParts.iteratorKeys.each(function(r){r.isSelected=!0}))):(e=!0,Fr(this),this.mayMove()&&(As(this,this.draggedParts,!0),Qd(this,t.lastInput.documentPoint))),this.wm=!0,r0(this,t.lastInput.documentPoint),this.isActive){var i=n?this.copiedParts.yf():this.draggedParts.yf();this.copiedParts=null,e&&Yy(this),t.Wa(),nl(t,this.draggedParts),this.transactionResult=n?"Copy":"Move",t.P(n?"SelectionCopied":"SelectionMoved",i)}this.stopTool(),n&&t.P("ChangedSelection",t.selection)}}},Qt.prototype.simulatedMouseMove=function(t,e,n){if(Oe===null)return!1;var i=Oe.diagram;n instanceof I||(n=null);var r=as;return n!==r&&(r!==null&&r!==i&&(r.gg(),Oe.isDragOutStarted=!1,r=r.toolManager.findTool("Dragging"),r!==null&&r.doSimulatedDragLeave()),as=n,n!==null&&n!==i&&(qc(),r=n.toolManager.findTool("Dragging"),r!==null&&(Is.contains(r)||Is.add(r),r.doSimulatedDragEnter())),this.doUpdateCursor(null,!0)),n===null||n===i||!n.allowDrop||n.isReadOnly||!n.allowInsert?!1:(i=n.toolManager.findTool("Dragging"),i!==null&&(t!==null&&(t.targetTouches!==void 0&&(0<t.targetTouches.length?t=t.targetTouches[0]:0<t.changedTouches.length&&(t=t.changedTouches[0])),e=n.getMouse(t)),n.lastInput.documentPoint=e,n.lastInput.viewPoint=n.Io(e),n.lastInput.down=!1,n.lastInput.up=!1,i.doSimulatedDragOver()),!0)},Qt.prototype.simulatedMouseUp=function(t,e,n){if(Oe===null)return!1;var i=as,r=Oe.diagram;if(n===null)return Oe.doCancel(),!0;if(n!==i){var s=i.toolManager.findTool("Dragging");if(i!==null&&i!==r&&s!==null)return i.gg(),Oe.isDragOutStarted=!1,s.doSimulatedDragLeave(),!1;as=n,i=n.toolManager.findTool("Dragging"),i!==null&&(qc(),Is.contains(i)||Is.add(i),i.doSimulatedDragEnter())}return n!==this.diagram?(t!==null?(t.targetTouches!==void 0&&(0<t.targetTouches.length?t=t.targetTouches[0]:0<t.changedTouches.length&&(t=t.changedTouches[0])),e=n.getMouse(t)):e===null&&(e=new T),n.lastInput.documentPoint=e,n.lastInput.viewPoint=n.Io(e),n.lastInput.down=!1,n.lastInput.up=!0,t=n.toolManager.findTool("Dragging"),t!==null&&t.doSimulatedDrop(),t=Oe,t!==null&&(n=t.mayCopy(),t.transactionResult=n?"Copy":"Move",t.stopTool()),!0):!1};function Yy(t){if(t.draggedParts!==null)for(var e=t.draggedParts.iterator;e.next();){var n=e.key;n instanceof _&&(n=n.containingGroup,n===null||n.placeholder===null||t.draggedParts.contains(n)||n.placeholder.v())}}Qt.prototype.mayCopy=function(){if(!this.isCopyEnabled)return!1;var t=this.diagram;if(t.isReadOnly||t.isModelReadOnly||!t.allowInsert||!t.allowCopy||(Ji?!t.lastInput.alt:!t.lastInput.control))return!1;for(t=t.selection.iterator;t.next();)if(t.value.canCopy())return!0;return!!(this.draggedLink!==null&&this.dragsLink&&this.draggedLink.canCopy())},Qt.prototype.mayDragOut=function(){if(!this.isCopyEnabled)return!1;var t=this.diagram;if(!t.allowDragOut||!t.allowCopy||t.allowMove)return!1;for(t=t.selection.iterator;t.next();)if(t.value.canCopy())return!0;return!!(this.draggedLink!==null&&this.dragsLink&&this.draggedLink.canCopy())},Qt.prototype.mayMove=function(){var t=this.diagram;if(t.isReadOnly||!t.allowMove)return!1;for(t=t.selection.iterator;t.next();)if(t.value.canMove())return!0;return!!(this.draggedLink!==null&&this.dragsLink&&this.draggedLink.canMove())},Qt.prototype.computeBorder=function(t,e,n){return this.wm||this.draggedParts===null||this.draggedParts.contains(t)?null:n.assign(e)},Qt.prototype.Uy=function(){return Oe},Qt.prototype.mayDragIn=function(){var t=this.diagram;if(!t.allowDrop||t.isReadOnly||t.isModelReadOnly||!t.allowInsert)return!1;var e=Oe;return!(e===null||e.diagram.model.dataFormat!==t.model.dataFormat)},Qt.prototype.doSimulatedDragEnter=function(){if(this.mayDragIn()){var t=this.diagram;t.animationManager.wc(),Zo(t),t.animationManager.wc(),t=Oe,t!==null&&(t.diagram.es=!1),this.doUpdateCursor(null,!0)}},Qt.prototype.doSimulatedDragLeave=function(){var t=Oe;t!==null&&t.doSimulatedDragOut(),this.doCancel()},Qt.prototype.doSimulatedDragOver=function(){var t=this.diagram;t.animationManager.bm=!0;var e=Oe;if(e!==null&&e.draggedParts!==null){if(!this.mayDragIn())return;s0(this,e.draggedParts.yf(),!1,t.firstInput),As(this,this.copiedParts,!1),Qd(this,t.lastInput.documentPoint)}t.animationManager.bm=!1},Qt.prototype.doSimulatedDrop=function(){var t=this.diagram,e=Oe;if(e!==null){var n=e.diagram;if(e.wm=!0,Fr(this),!this.mayDragIn())return;t.animationManager.bm=!0,t.P("ChangingSelection",t.selection),this.Ca("Drop"),s0(this,e.draggedParts.yf(),!0,t.lastInput),As(this,this.copiedParts,!1),this.copiedParts!==null&&(t.clearSelection(!0),this.copiedParts.iteratorKeys.each(function(i){i.isSelected=!0})),r0(this,t.lastInput.documentPoint),t.Wa(),e=t.selection,this.copiedParts!==null?this.transactionResult="ExternalCopy":e=new H,this.copiedParts=null,t.doFocus(),t.P("ExternalObjectsDropped",e,n),this.stopTransaction(),t.P("ChangedSelection",t.selection)}t.animationManager.bm=!1};function s0(t,e,n,i){if(t.copiedParts===null){var r=t.diagram;if(!r.isReadOnly&&!r.isModelReadOnly){r.skipsUndoManager=!n,r.partManager.addsToTemporaryLayer=!n,t.startPoint=i.documentPoint,n=r.wj(e,r,!0);var s=E.alloc();r=i=1/0;for(var h=-1/0,u=-1/0,p=e.iterator;p.next();){var d=p.value;if(d.isVisible()){var g=d.location;d=g.x,g=g.y,isNaN(d)||isNaN(g)||(d<i&&(i=d),g<r&&(r=g),d>h&&(h=d),g>u&&(u=g))}}for(i===1/0?s.h(0,0,0,0):s.h(i,r,h-i,u-r),i=s.x+s.width/2,r=s.y+s.height/2,E.free(s),s=t.Wq,h=new pt,u=T.alloc(),p=e.iterator;p.next();)d=p.value,d instanceof U&&d.canCopy()&&(g=n.I(d),g!==null&&(g.points=d.points,sr(g,s.x-i,s.y-r),g.suspendsRouting=!0,h.add(g,t.Cd())));for(e=e.iterator;e.next();)d=e.value,d.Rc()&&d.canCopy()&&(p=n.I(d),p!==null&&(d=d.location,u.h(s.x-(i-d.x),s.y-(r-d.y)),p.location=u,p.Ta(),h.add(p,t.Cd(u))));T.free(u),t.copiedParts=h,Jd(t,h.yf()),t.draggedLink!==null&&(n=t.draggedLink,e=n.routeBounds,sr(n,t.startPoint.x-(e.x+e.width/2),t.startPoint.y-(e.y+e.height/2))),t.doUpdateCursor(null,!0)}}}Qt.prototype.doSimulatedDragOut=function(){var t=this.diagram;t.es=!1,this.mayCopy()||this.mayMove()?t.currentCursor="":t.currentCursor=this.nodropCursor,this.Ym=null},Qt.prototype.computeMove=function(t,e,n,i){return n=this.diagram,n!==null?n.computeMove(t,e,this.dragOptions,i):new T},Z.Object.defineProperties(Qt.prototype,{isCopyEnabled:{get:function(){return this.nb},set:function(t){this.nb=t}},copiesEffectiveCollection:{get:function(){return this.u},set:function(t){this.u=t}},dragOptions:{get:function(){return this.ga},set:function(t){this.ga=t}},isGridSnapEnabled:{get:function(){return this.dragOptions.isGridSnapEnabled},set:function(t){this.dragOptions.isGridSnapEnabled=t}},isComplexRoutingRealtime:{get:function(){return this.gb},set:function(t){this.gb=t}},isGridSnapRealtime:{get:function(){return this.dragOptions.isGridSnapRealtime},set:function(t){this.dragOptions.isGridSnapRealtime=t}},gridSnapCellSize:{get:function(){return this.dragOptions.gridSnapCellSize},set:function(t){this.dragOptions.gridSnapCellSize.C(t)||(t=t.J(),this.dragOptions.gridSnapCellSize=t)}},gridSnapCellSpot:{get:function(){return this.dragOptions.gridSnapCellSpot},set:function(t){this.dragOptions.gridSnapCellSpot.C(t)||(t=t.J(),this.dragOptions.gridSnapCellSpot=t)}},gridSnapOrigin:{get:function(){return this.dragOptions.gridSnapOrigin},set:function(t){this.dragOptions.gridSnapOrigin.C(t)||(t=t.J(),this.dragOptions.gridSnapOrigin=t)}},dragsLink:{get:function(){return this.dragOptions.dragsLink},set:function(t){this.dragOptions.dragsLink=t}},dragsTree:{get:function(){return this.dragOptions.dragsTree},set:function(t){this.dragOptions.dragsTree=t}},copyCursor:{get:function(){return this.F},set:function(t){this.F=t}},moveCursor:{get:function(){return this.Gc},set:function(t){this.Gc=t}},nodropCursor:{get:function(){return this.Hc},set:function(t){this.Hc=t}},currentPart:{get:function(){return this.W},set:function(t){this.W=t}},copiedParts:{get:function(){return this.m},set:function(t){this.m=t}},draggedParts:{get:function(){return this.Fa},set:function(t){this.Fa=t}},draggingParts:{get:function(){return this.copiedParts!==null?this.copiedParts.yf():this.draggedParts!==null?this.draggedParts.yf():this.ie}},draggedLink:{get:function(){return this.diagram.draggedLink},set:function(t){this.diagram.draggedLink=t}},isDragOutStarted:{get:function(){return this.Db},set:function(t){this.Db=t}},startPoint:{get:function(){return this.Wq},set:function(t){this.Wq.C(t)||this.Wq.assign(t)}},delay:{get:function(){return this.mk},set:function(t){this.mk=t}}}),Qt.prototype.getDraggingSource=Qt.prototype.Uy;var Oe=null,as=null;Qt.className="DraggingTool",Is=new Q,Hn("draggingTool",function(){return this.findTool("Dragging")},function(t){this.fb("Dragging",t,this.mouseMoveTools)}),$t.prototype.doCancel=function(){Oe!==null&&Oe.doCancel(),Lt.prototype.doCancel.call(this)};function We(){Lt.call(this),this.ie=100,this.Fa=!1,this.u="pointer";var t=new U,e=new dt;e.isPanelMain=!0,e.stroke="blue",t.add(e),e=new dt,e.toArrow="Standard",e.fill="blue",e.stroke="blue",t.add(e),t.layerName="Tool",this.ni=t,t=new _,e=new dt,e.portId="",e.figure="Rectangle",e.fill=null,e.stroke="magenta",e.strokeWidth=2,e.desiredSize=va,t.add(e),t.selectable=!1,t.layerName="Tool",this.mi=t,this.j=e,t=new _,e=new dt,e.portId="",e.figure="Rectangle",e.fill=null,e.stroke="magenta",e.strokeWidth=2,e.desiredSize=va,t.add(e),t.selectable=!1,t.layerName="Tool",this.oi=t,this.m=e,this.Hc=this.Gc=this.nb=this.gb=this.Db=null,this.ga=!0,this.No=new pt,this.Bf=this.Vi=this.Cf=null}z(We,Lt),We.prototype.doStop=function(){this.diagram.gg(),this.originalToPort=this.originalToNode=this.originalFromPort=this.originalFromNode=this.originalLink=null,this.validPortsCache.clear(),this.targetPort=null},We.prototype.copyPortProperties=function(t,e,n,i,r){if(t!==null&&e!==null&&n!==null&&i!==null){var s=e.qf(),h=ht.alloc();h.width=e.naturalBounds.width*s,h.height=e.naturalBounds.height*s,i.desiredSize=h,ht.free(h),r?(i.toSpot=e.toSpot,i.toEndSegmentLength=e.toEndSegmentLength):(i.fromSpot=e.fromSpot,i.fromEndSegmentLength=e.fromEndSegmentLength),n.locationSpot=Dt,s=T.alloc(),n.location=e.ia(Dt,s),T.free(s),i.angle=e.Zh(),this.portTargeted!==null&&this.portTargeted(t,e,n,i,r)}},We.prototype.setNoTargetPortProperties=function(t,e,n){e!==null&&(e.desiredSize=va,e.fromSpot=Ke,e.toSpot=Ke),t!==null&&(t.location=this.diagram.lastInput.documentPoint),this.portTargeted!==null&&this.portTargeted(null,null,t,e,n)},We.prototype.doMouseDown=function(){this.isActive&&this.doMouseMove()},We.prototype.doMouseMove=function(){if(this.isActive){var t=this.diagram;if(this.targetPort=this.findTargetPort(this.isForwards),this.targetPort!==null&&this.targetPort.part instanceof _){var e=this.targetPort.part;this.isForwards?this.copyPortProperties(e,this.targetPort,this.temporaryToNode,this.temporaryToPort,!0):this.copyPortProperties(e,this.targetPort,this.temporaryFromNode,this.temporaryFromPort,!1)}else this.isForwards?this.setNoTargetPortProperties(this.temporaryToNode,this.temporaryToPort,!0):this.setNoTargetPortProperties(this.temporaryFromNode,this.temporaryFromPort,!1);(t.allowHorizontalScroll||t.allowVerticalScroll)&&t.xr(t.lastInput.viewPoint)}},We.prototype.findValidLinkablePort=function(t,e){if(t===null)return null;var n=t.part;if(!(n instanceof _))return null;for(;t!==null;){var i=e?t.toLinkable:t.fromLinkable;if(i===!0&&(t.portId!==null||t instanceof _)&&(e?this.isValidTo(n,t):this.isValidFrom(n,t)))return t;if(i===!1)break;t=t.panel}return null},We.prototype.findTargetPort=function(t){var e=this.diagram,n=e.lastInput.documentPoint,i=this.portGravity;0>=i&&(i=.1);var r=this,s=e.bg(n,i,function(c){return r.findValidLinkablePort(c,t)},null,!0);for(i=1/0,e=null,s=s.iterator;s.next();){var h=s.value,u=h.part;if(u instanceof _){var p=h.ia(Dt,T.alloc()),d=n.x-p.x,g=n.y-p.y;T.free(p),p=d*d+g*g,p<i&&(d=this.validPortsCache.I(h),d!==null?d&&(e=h,i=p):t&&this.isValidLink(this.originalFromNode,this.originalFromPort,u,h)||!t&&this.isValidLink(u,h,this.originalToNode,this.originalToPort)?(this.validPortsCache.add(h,!0),e=h,i=p):this.validPortsCache.add(h,!1))}}return e!==null&&(n=e.part,n instanceof _&&(n.layer===null||n.layer.allowLink))?e:null},We.prototype.isValidFrom=function(t,e){if(t===null||e===null)return this.isUnconnectedLinkValid;if(this.diagram.currentTool===this&&(t.layer!==null&&!t.layer.allowLink||e.fromLinkable!==!0))return!1;var n=e.fromMaxLinks;if(1/0>n){if(this.originalLink!==null&&t===this.originalFromNode&&e===this.originalFromPort)return!0;if(e=e.portId,e===null&&(e=""),t.io(e).count>=n)return!1}return!0},We.prototype.isValidTo=function(t,e){if(t===null||e===null)return this.isUnconnectedLinkValid;if(this.diagram.currentTool===this&&(t.layer!==null&&!t.layer.allowLink||e.toLinkable!==!0))return!1;var n=e.toMaxLinks;if(1/0>n){if(this.originalLink!==null&&t===this.originalToNode&&e===this.originalToPort)return!0;if(e=e.portId,e===null&&(e=""),t.Fd(e).count>=n)return!1}return!0},We.prototype.isInSameNode=function(t,e){return t===null||e===null?!1:t===e?!0:(t=t.part,e=e.part,t!==null&&t===e)},We.prototype.isLinked=function(t,e){if(t===null||e===null)return!1;var n=t.part;if(!(n instanceof _))return!1;t=t.portId,t===null&&(t="");var i=e.part;if(!(i instanceof _))return!1;for(e=e.portId,e===null&&(e=""),e=i.Fd(e);e.next();)if(i=e.value,i.fromNode===n&&i.fromPortId===t)return!0;return!1},We.prototype.isValidLink=function(t,e,n,i){if(!this.isValidFrom(t,e)||!this.isValidTo(n,i)||!(e===null||i===null||(e.fromLinkableSelfNode&&i.toLinkableSelfNode||!this.isInSameNode(e,i))&&(e.fromLinkableDuplicates&&i.toLinkableDuplicates||!this.isLinked(e,i)))||this.originalLink!==null&&(t!==null&&this.isLabelDependentOnLink(t,this.originalLink)||n!==null&&this.isLabelDependentOnLink(n,this.originalLink))||t!==null&&n!==null&&(t.data===null&&n.data!==null||t.data!==null&&n.data===null)||!this.isValidCycle(t,n,this.originalLink))return!1;if(t!==null){var r=t.linkValidation;if(r!==null&&!r(t,e,n,i,this.originalLink))return!1}return n!==null&&(r=n.linkValidation,r!==null&&!r(t,e,n,i,this.originalLink))?!1:(r=this.linkValidation,r!==null?r(t,e,n,i,this.originalLink):!0)},We.prototype.isLabelDependentOnLink=function(t,e){if(t===null)return!1;var n=t.labeledLink;if(n===null)return!1;if(n===e)return!0;var i=new H;return i.add(t),bd(this,n,e,i)};function bd(t,e,n,i){if(e===n)return!0;var r=e.fromNode;return r!==null&&r.isLinkLabel&&(i.add(r),bd(t,r.labeledLink,n,i))?!0:(e=e.toNode,!!(e!==null&&e.isLinkLabel&&(i.add(e),bd(t,e.labeledLink,n,i))))}We.prototype.isValidCycle=function(t,e,n){if(n===void 0&&(n=null),t===null||e===null)return this.isUnconnectedLinkValid;var i=this.diagram.validCycle;if(i!==jf){if(i===em){if(i=n||this.temporaryLink,i!==null&&!i.isTreeLink)return!0;for(i=e.linksConnected;i.next();){var r=i.value;if(r!==n&&r.isTreeLink&&r.toNode===e)return!1}return!Hh(this,t,e,n,!0)}if(i===nm){if(i=n||this.temporaryLink,i!==null&&!i.isTreeLink)return!0;for(i=t.linksConnected;i.next();)if(r=i.value,r!==n&&r.isTreeLink&&r.fromNode===t)return!1;return!Hh(this,t,e,n,!0)}if(i===b0)return t===e?t=!0:(i=new H,i.add(e),t=a0(this,i,t,e,n)),!t;if(i===q0)return!Hh(this,t,e,n,!1);if(i===tm)return t===e?t=!0:(i=new H,i.add(e),t=h0(this,i,t,e,n)),!t}return!0};function Hh(t,e,n,i,r){if(e===n)return!0;if(e===null||n===null)return!1;for(var s=e.linksConnected;s.next();){var h=s.value;if(h!==i&&(!r||h.isTreeLink)&&h.toNode===e&&(h=h.fromNode,h!==e&&Hh(t,h,n,i,r)))return!0}return!1}function a0(t,e,n,i,r){if(n===i)return!0;if(n===null||i===null||e.contains(n))return!1;e.add(n);for(var s=n.linksConnected;s.next();){var h=s.value;if(h!==r&&h.toNode===n&&(h=h.fromNode,h!==n&&a0(t,e,h,i,r)))return!0}return!1}function h0(t,e,n,i,r){if(n===i)return!0;if(n===null||i===null||e.contains(n))return!1;e.add(n);for(var s=n.linksConnected;s.next();){var h=s.value;if(h!==r){var u=h.fromNode;if(h=h.toNode,u=u===n?h:u,u!==n&&h0(t,e,u,i,r))return!0}}return!1}Z.Object.defineProperties(We.prototype,{portGravity:{get:function(){return this.ie},set:function(t){0<=t&&(this.ie=t)}},isUnconnectedLinkValid:{get:function(){return this.Fa},set:function(t){this.Fa=t}},linkingCursor:{get:function(){return this.u},set:function(t){this.u=t}},temporaryLink:{get:function(){return this.ni},set:function(t){this.ni=t}},temporaryFromNode:{get:function(){return this.mi},set:function(t){(this.mi=t)&&(this.j=t.port)}},temporaryFromPort:{get:function(){return this.j},set:function(t){if(this.j!==null){var e=this.j.panel;if(e!==null){var n=e.R.indexOf(this.j);e.lb(n),e.Cb(n,t)}}this.j=t}},temporaryToNode:{get:function(){return this.oi},set:function(t){(this.oi=t)&&(this.m=t.port)}},temporaryToPort:{get:function(){return this.m},set:function(t){if(this.m!==null){var e=this.m.panel;if(e!==null){var n=e.R.indexOf(this.m);e.lb(n),e.Cb(n,t)}}this.m=t}},originalLink:{get:function(){return this.Db},set:function(t){this.Db=t}},originalFromNode:{get:function(){return this.gb},set:function(t){this.gb=t}},originalFromPort:{get:function(){return this.nb},set:function(t){this.nb=t}},originalToNode:{get:function(){return this.Gc},set:function(t){this.Gc=t}},originalToPort:{get:function(){return this.Hc},set:function(t){this.Hc=t}},isForwards:{get:function(){return this.ga},set:function(t){this.ga=t}},validPortsCache:{get:function(){return this.No}},targetPort:{get:function(){return this.Cf},set:function(t){this.Cf=t}},linkValidation:{get:function(){return this.Vi},set:function(t){this.Vi=t}},portTargeted:{get:function(){return this.Bf},set:function(t){this.Bf=t}}}),We.className="LinkingBaseTool";function Sn(){We.call(this),this.name="Linking",this.W={},this.F=null,this.K=Su,this.Md=null}z(Sn,We),Sn.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;return t.isReadOnly||t.isModelReadOnly||!t.allowLink||!t.model.Nr()||!t.lastInput.left||t.currentTool!==this&&!this.isBeyondDragSize()?!1:this.findLinkablePort()!==null},Sn.prototype.findLinkablePort=function(){var t=this.diagram,e=this.startObject;if(e===null&&(e=t.dc(t.firstInput.documentPoint,null,null)),e===null||(t=e.part,!(t instanceof _)))return null;var n=this.direction;if(n===Su||n===l0){var i=this.findValidLinkablePort(e,!1);if(i!==null||this.startObject===t&&(i=t.port,this.findValidLinkablePort(i,!1)))return this.isForwards=!0,i}return(n===Su||n===u0)&&(e=this.findValidLinkablePort(e,!0),e!==null||this.startObject===t&&(e=t.port,this.findValidLinkablePort(e,!0)))?(this.isForwards=!1,e):null},Sn.prototype.doActivate=function(){var t=this.diagram,e=this.findLinkablePort();e===null?this.stopTool():(this.Ca(this.name),t.isMouseCaptured=!0,t.currentCursor=this.linkingCursor,this.isForwards?(this.temporaryToNode!==null&&(this.temporaryToNode.location=t.lastInput.documentPoint),this.originalFromPort=e,e=this.originalFromPort.part,e instanceof _&&(this.originalFromNode=e),this.copyPortProperties(this.originalFromNode,this.originalFromPort,this.temporaryFromNode,this.temporaryFromPort,!1)):(this.temporaryFromNode!==null&&(this.temporaryFromNode.location=t.lastInput.documentPoint),this.originalToPort=e,e=this.originalToPort.part,e instanceof _&&(this.originalToNode=e),this.copyPortProperties(this.originalToNode,this.originalToPort,this.temporaryToNode,this.temporaryToPort,!0)),t.add(this.temporaryFromNode),this.temporaryFromNode&&this.temporaryFromNode.Ta(),t.add(this.temporaryToNode),this.temporaryToNode&&this.temporaryToNode.Ta(),this.temporaryLink!==null&&(this.temporaryFromNode!==null&&(this.temporaryLink.fromNode=this.temporaryFromNode),this.temporaryToNode!==null&&(this.temporaryLink.toNode=this.temporaryToNode),this.temporaryLink.isTreeLink=this.isNewTreeLink(),this.temporaryLink.ab(),t.add(this.temporaryLink)),this.isActive=!0)},Sn.prototype.doDeactivate=function(){this.isActive=!1;var t=this.diagram;t.remove(this.temporaryLink),t.remove(this.temporaryFromNode),t.remove(this.temporaryToNode),t.isMouseCaptured=!1,t.currentCursor="",this.stopTransaction()},Sn.prototype.doStop=function(){We.prototype.doStop.call(this),this.startObject=null},Sn.prototype.doMouseUp=function(){if(this.isActive){var t=this.diagram,e=this.transactionResult=null,n=null,i=null,r=null,s=null;try{var h=this.targetPort=this.findTargetPort(this.isForwards);if(h!==null){var u=h.part;u instanceof _&&(this.isForwards?(this.originalFromNode!==null&&(e=this.originalFromNode,n=this.originalFromPort),i=u,r=h):(e=u,n=h,this.originalToNode!==null&&(i=this.originalToNode,r=this.originalToPort)))}else this.isForwards?this.originalFromNode!==null&&this.isUnconnectedLinkValid&&(e=this.originalFromNode,n=this.originalFromPort):this.originalToNode!==null&&this.isUnconnectedLinkValid&&(i=this.originalToNode,r=this.originalToPort);e!==null||i!==null?(s=this.insertLink(e,n,i,r),s!==null?(h===null&&(this.isForwards?s.defaultToPoint=t.lastInput.documentPoint:s.defaultFromPoint=t.lastInput.documentPoint),t.allowSelect&&(t.P("ChangingSelection",t.selection),t.clearSelection(!0),s.isSelected=!0),this.transactionResult=this.name,t.P("LinkDrawn",s)):this.doNoLink(e,n,i,r)):this.isForwards?this.doNoLink(this.originalFromNode,this.originalFromPort,null,null):this.doNoLink(null,null,this.originalToNode,this.originalToPort)}finally{this.stopTool(),s&&t.allowSelect&&t.P("ChangedSelection",t.selection)}}},Sn.prototype.isNewTreeLink=function(){var t=this.archetypeLinkData;if(t===null)return!0;if(t instanceof U)return t.isTreeLink;var e=this.diagram;return e===null?!0:(t=e.partManager.getLinkCategoryForData(t),e=e.partManager.findLinkTemplateForCategory(t),e!==null?e.isTreeLink:!0)},Sn.prototype.insertLink=function(t,e,n,i){return this.diagram.partManager.insertLink(t,e,n,i)},Sn.prototype.doNoLink=function(){},Z.Object.defineProperties(Sn.prototype,{archetypeLinkData:{get:function(){return this.W},set:function(t){this.W=t}},archetypeLabelNodeData:{get:function(){return this.F},set:function(t){this.F=t}},direction:{get:function(){return this.K},set:function(t){this.K=t}},startObject:{get:function(){return this.Md},set:function(t){this.Md=t}}});var Su=new J(Sn,"Either",0),l0=new J(Sn,"ForwardsOnly",0),u0=new J(Sn,"BackwardsOnly",0);Sn.className="LinkingTool",Sn.Either=Su,Sn.ForwardsOnly=l0,Sn.BackwardsOnly=u0;function hi(){We.call(this),this.name="Relinking";var t=new dt;t.figure="Diamond",t.desiredSize=Tr,t.fill="lightblue",t.stroke="dodgerblue",t.cursor=this.linkingCursor,t.segmentIndex=0,this.W=t,t=new dt,t.figure="Diamond",t.desiredSize=Tr,t.fill="lightblue",t.stroke="dodgerblue",t.cursor=this.linkingCursor,t.segmentIndex=-1,this.Md=t,this.F=null,this.Zv=new E}z(hi,We),hi.prototype.updateAdornments=function(t){if(t!==null&&t instanceof U){var e="RelinkFrom",n=null;if(t.isSelected&&!this.diagram.isReadOnly){var i=t.selectionObject;i!==null&&t.canRelinkFrom()&&t.actualBounds.w()&&t.isVisible()&&i.actualBounds.w()&&i.vf()&&(n=t.zj(e),n===null&&(n=this.makeAdornment(i,!1),t.Ng(e,n)))}n===null&&t.wf(e),e="RelinkTo",n=null,t.isSelected&&!this.diagram.isReadOnly&&(i=t.selectionObject,i!==null&&t.canRelinkTo()&&t.actualBounds.w()&&t.isVisible()&&i.actualBounds.w()&&i.vf()&&(n=t.zj(e),n===null?(n=this.makeAdornment(i,!0),t.Ng(e,n)):n.v())),n===null&&t.wf(e)}},hi.prototype.makeAdornment=function(t,e){var n=new St;return n.type=Y.Link,e=e?this.toHandleArchetype:this.fromHandleArchetype,e!==null&&n.add(e.copy()),n.adornedObject=t,n},hi.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;if(t.isReadOnly||t.isModelReadOnly||!t.allowRelink||!t.model.Nr()||!t.lastInput.left)return!1;var e=this.findToolHandleAt(t.firstInput.documentPoint,"RelinkFrom");return e===null&&(e=this.findToolHandleAt(t.firstInput.documentPoint,"RelinkTo")),e!==null},hi.prototype.doActivate=function(){var t=this.diagram;if(this.originalLink===null){var e=this.handle;if(e===null&&(e=this.findToolHandleAt(t.firstInput.documentPoint,"RelinkFrom"),e===null&&(e=this.findToolHandleAt(t.firstInput.documentPoint,"RelinkTo"))),e===null)return;var n=e.part;if(!(n instanceof St&&n.adornedPart instanceof U))return;this.handle=e,this.isForwards=n===null||n.category==="RelinkTo",this.originalLink=n.adornedPart}this.Ca(this.name),t.isMouseCaptured=!0,t.currentCursor=this.linkingCursor,this.originalFromPort=this.originalLink.fromPort,this.originalFromNode=this.originalLink.fromNode,this.originalToPort=this.originalLink.toPort,this.originalToNode=this.originalLink.toNode,this.Zv.set(this.originalLink.actualBounds),this.originalLink!==null&&0<this.originalLink.pointsCount&&(this.originalLink.fromNode===null&&(this.temporaryFromPort!==null&&(this.temporaryFromPort.desiredSize=Nr),this.temporaryFromNode!==null&&(this.temporaryFromNode.location=this.originalLink.i(0))),this.originalLink.toNode===null&&(this.temporaryToPort!==null&&(this.temporaryToPort.desiredSize=Nr),this.temporaryToNode!==null&&(this.temporaryToNode.location=this.originalLink.i(this.originalLink.pointsCount-1)))),this.copyPortProperties(this.originalFromNode,this.originalFromPort,this.temporaryFromNode,this.temporaryFromPort,!1),this.copyPortProperties(this.originalToNode,this.originalToPort,this.temporaryToNode,this.temporaryToPort,!0),t.add(this.temporaryFromNode),t.add(this.temporaryToNode),this.temporaryLink!==null&&(this.temporaryFromNode!==null&&(this.temporaryLink.fromNode=this.temporaryFromNode),this.temporaryToNode!==null&&(this.temporaryLink.toNode=this.temporaryToNode),this.copyLinkProperties(this.originalLink,this.temporaryLink),this.temporaryLink.ab(),t.add(this.temporaryLink)),this.isActive=!0},hi.prototype.copyLinkProperties=function(t,e){if(t!==null&&e!==null){e.adjusting=t.adjusting,e.corner=t.corner;var n=t.curve;(n===ah||n===ar)&&(n=hn),e.curve=n,e.curviness=t.curviness,e.isTreeLink=t.isTreeLink,e.points=t.points,e.routing=t.routing,e.smoothness=t.smoothness,e.fromSpot=t.fromSpot,e.fromEndSegmentLength=t.fromEndSegmentLength,e.fromShortLength=t.fromShortLength,e.toSpot=t.toSpot,e.toEndSegmentLength=t.toEndSegmentLength,e.toShortLength=t.toShortLength}},hi.prototype.doDeactivate=function(){this.isActive=!1;var t=this.diagram;t.remove(this.temporaryLink),t.remove(this.temporaryFromNode),t.remove(this.temporaryToNode),t.isMouseCaptured=!1,t.currentCursor="",this.stopTransaction()},hi.prototype.doStop=function(){We.prototype.doStop.call(this),this.handle=null},hi.prototype.doMouseUp=function(){if(this.isActive){var t=this.diagram;this.transactionResult=null;var e=this.originalFromNode,n=this.originalFromPort,i=this.originalToNode,r=this.originalToPort,s=this.originalLink;try{if(this.targetPort=this.findTargetPort(this.isForwards),this.targetPort!==null){var h=this.targetPort.part;h instanceof _&&(this.isForwards?(i=h,r=this.targetPort):(e=h,n=this.targetPort))}else this.isUnconnectedLinkValid?this.isForwards?r=i=null:n=e=null:s=null;s!==null?(this.reconnectLink(s,this.isForwards?i:e,this.isForwards?r:n,this.isForwards),this.targetPort===null&&(this.isForwards?s.defaultToPoint=t.lastInput.documentPoint:s.defaultFromPoint=t.lastInput.documentPoint,s.ab()),this.transactionResult=this.name,t.P("LinkRelinked",s,this.isForwards?this.originalToPort:this.originalFromPort)):this.doNoRelink(this.originalLink,this.isForwards),this.originalLink.ro(this.Zv)}finally{this.stopTool()}}},hi.prototype.reconnectLink=function(t,e,n,i){return n=n!==null&&n.portId!==null?n.portId:"",i?(t.toNode=e,t.toPortId=n):(t.fromNode=e,t.fromPortId=n),!0},hi.prototype.doNoRelink=function(){};function p0(t,e,n,i,r){e!==null?(t.copyPortProperties(e,n,t.temporaryFromNode,t.temporaryFromPort,!1),t.diagram.add(t.temporaryFromNode)):t.diagram.remove(t.temporaryFromNode),i!==null?(t.copyPortProperties(i,r,t.temporaryToNode,t.temporaryToPort,!0),t.diagram.add(t.temporaryToNode)):t.diagram.remove(t.temporaryToNode)}Z.Object.defineProperties(hi.prototype,{fromHandleArchetype:{get:function(){return this.W},set:function(t){this.W=t}},toHandleArchetype:{get:function(){return this.Md},set:function(t){this.Md=t}},handle:{get:function(){return this.F},set:function(t){if(t!==null&&!(t.part instanceof St))throw Error("new handle is not in an Adornment: "+t);this.F=t}}}),hi.className="RelinkingTool",Hn("linkingTool",function(){return this.findTool("Linking")},function(t){this.fb("Linking",t,this.mouseMoveTools)}),Hn("relinkingTool",function(){return this.findTool("Relinking")},function(t){this.fb("Relinking",t,this.mouseDownTools)});function de(){Lt.call(this),this.name="LinkReshaping";var t=new dt;t.figure="Rectangle",t.desiredSize=Rh,t.fill="lightblue",t.stroke="dodgerblue",this.m=t,t=new dt,t.figure="Diamond",t.desiredSize=Tr,t.fill="lightblue",t.stroke="dodgerblue",t.cursor="move",this.u=t,this.F=3,this.ms=this.j=null,this.$v=new T,this.rq=new Q}z(de,Lt),de.prototype.ru=function(t){return t&&t.reshapingBehavior.value!==0?t.reshapingBehavior:qd},de.prototype.Nl=function(t,e){t.reshapingBehavior=e},de.prototype.updateAdornments=function(t){if(t!==null&&t instanceof U){var e=null;if(t.isSelected&&!this.diagram.isReadOnly){var n=t.path;n!==null&&t.canReshape()&&t.actualBounds.w()&&t.isVisible()&&n.actualBounds.w()&&n.vf()&&(e=t.zj(this.name),e===null||e.Vv!==t.pointsCount||e.ow!==t.resegmentable)&&(e=this.makeAdornment(n),e!==null&&(e.Vv=t.pointsCount,e.ow=t.resegmentable,t.Ng(this.name,e)))}e===null&&t.wf(this.name)}},de.prototype.makeAdornment=function(t){var e=t.part,n=e.pointsCount,i=e.isOrthogonal,r=null;if(e.points!==null&&1<n){r=new St,r.type=Y.Link,n=e.firstPickIndex;var s=e.lastPickIndex,h=i?1:0;if(e.resegmentable&&e.computeCurve()!==Yn)for(var u=n+h;u<s-h;u++){var p=this.makeResegmentHandle(t,u);p!==null&&(p.segmentIndex=u,p.segmentFraction=.5,p.fromMaxLinks=999,r.add(p))}for(h=n+1;h<s;h++)if(u=this.makeHandle(t,h),u!==null){if(u.segmentIndex=h,h!==n)if(h===n+1&&i){p=e.i(n);var d=e.i(n+1);O.B(p.x,d.x)&&O.B(p.y,d.y)&&(d=e.i(n-1)),O.B(p.x,d.x)?(this.Nl(u,Ba),u.cursor="n-resize"):O.B(p.y,d.y)&&(this.Nl(u,Fa),u.cursor="w-resize")}else h===s-1&&i?(p=e.i(s-1),d=e.i(s),O.B(p.x,d.x)&&O.B(p.y,d.y)&&(p=e.i(s+1)),O.B(p.x,d.x)?(this.Nl(u,Ba),u.cursor="n-resize"):O.B(p.y,d.y)&&(this.Nl(u,Fa),u.cursor="w-resize")):h!==s&&(this.Nl(u,tf),u.cursor="move");r.add(u)}r.adornedObject=t}return r},de.prototype.makeHandle=function(){var t=this.handleArchetype;return t===null?null:t.copy()},de.prototype.makeResegmentHandle=function(){var t=this.midHandleArchetype;return t===null?null:t.copy()},de.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;return!t.isReadOnly&&t.allowReshape&&t.lastInput.left?this.findToolHandleAt(t.firstInput.documentPoint,this.name)!==null:!1},de.prototype.doActivate=function(){var t=this.diagram;if(this.handle===null&&(this.handle=this.findToolHandleAt(t.firstInput.documentPoint,this.name)),this.handle!==null){var e=this.handle.part.adornedPart;if(e instanceof U){if(this.ms=e,t.isMouseCaptured=!0,this.Ca(this.name),e.resegmentable&&this.handle.fromMaxLinks===999){var n=e.points.copy(),i=this.getResegmentingPoint();if(n.Cb(this.handle.segmentIndex+1,i),e.isOrthogonal&&n.Cb(this.handle.segmentIndex+1,i),e.points=n,e.Qb(),e.updateAdornments(),this.handle=this.findToolHandleAt(t.firstInput.documentPoint,this.name),this.handle===null){this.doDeactivate();return}}this.$v=e.i(this.handle.segmentIndex),this.rq=e.points.copy(),this.isActive=!0}}},de.prototype.doDeactivate=function(){this.stopTransaction(),this.ms=this.handle=null,this.isActive=this.diagram.isMouseCaptured=!1},de.prototype.stopTransaction=function(){var t=this.diagram,e=Lt.prototype.stopTransaction.call(this);return e&&t.undoManager.transactionToUndo!==null&&t.undoManager.transactionToUndo.Kj(),e},de.prototype.doCancel=function(){var t=this.adornedLink;t!==null&&(t.points=this.rq),this.stopTool()},de.prototype.getResegmentingPoint=function(){return this.handle.ia(Dt)},de.prototype.doMouseMove=function(){var t=this.diagram;this.isActive&&(t=this.computeReshape(t.lastInput.documentPoint),this.reshape(t))},de.prototype.doMouseUp=function(){var t=this.diagram;if(this.isActive){var e=this.computeReshape(t.lastInput.documentPoint);if(this.reshape(e),e=this.adornedLink,e!==null&&e.resegmentable){var n=this.handle.segmentIndex,i=e.i(n-1),r=e.i(n),s=e.i(n+1);if(e.isOrthogonal){if(n>e.firstPickIndex+1&&n<e.lastPickIndex-1){var h=e.i(n-2);if(Math.abs(i.x-r.x)<this.resegmentingDistance&&Math.abs(i.y-r.y)<this.resegmentingDistance&&(Ca(this,h,i,r,s,!0)||Ca(this,h,i,r,s,!1))){var u=e.points.copy();Ca(this,h,i,r,s,!0)?(u.Tc(n-2,new T(h.x,(s.y+h.y)/2)),u.Tc(n+1,new T(s.x,(s.y+h.y)/2))):(u.Tc(n-2,new T((s.x+h.x)/2,h.y)),u.Tc(n+1,new T((s.x+h.x)/2,s.y))),u.lb(n),u.lb(n-1),e.points=u,e.Qb()}else h=e.i(n+2),Math.abs(r.x-s.x)<this.resegmentingDistance&&Math.abs(r.y-s.y)<this.resegmentingDistance&&(Ca(this,i,r,s,h,!0)||Ca(this,i,r,s,h,!1))&&(u=e.points.copy(),Ca(this,i,r,s,h,!0)?(u.Tc(n-1,new T(i.x,(i.y+h.y)/2)),u.Tc(n+2,new T(h.x,(i.y+h.y)/2))):(u.Tc(n-1,new T((i.x+h.x)/2,i.y)),u.Tc(n+2,new T((i.x+h.x)/2,h.y))),u.lb(n+1),u.lb(n),e.points=u,e.Qb())}}else h=T.alloc(),O.$g(i.x,i.y,s.x,s.y,r.x,r.y,h)&&h.mf(r)<this.resegmentingDistance*this.resegmentingDistance&&(i=e.points.copy(),i.lb(n),e.points=i,e.Qb()),T.free(h)}t.Wa(),this.transactionResult=this.name,t.P("LinkReshaped",this.adornedLink,this.rq)}this.stopTool()};function Ca(t,e,n,i,r,s){return s?Math.abs(e.y-n.y)<t.resegmentingDistance&&Math.abs(n.y-i.y)<t.resegmentingDistance&&Math.abs(i.y-r.y)<t.resegmentingDistance:Math.abs(e.x-n.x)<t.resegmentingDistance&&Math.abs(n.x-i.x)<t.resegmentingDistance&&Math.abs(i.x-r.x)<t.resegmentingDistance}de.prototype.reshape=function(t){var e=this.adornedLink;e.eh();var n=this.handle.segmentIndex,i=this.ru(this.handle);if(e.isOrthogonal)if(n===e.firstPickIndex+1)n=e.firstPickIndex+1,i===Ba?(e.M(n,e.i(n-1).x,t.y),e.M(n+1,e.i(n+2).x,t.y)):i===Fa&&(e.M(n,t.x,e.i(n-1).y),e.M(n+1,t.x,e.i(n+2).y));else if(n===e.lastPickIndex-1)n=e.lastPickIndex-1,i===Ba?(e.M(n-1,e.i(n-2).x,t.y),e.M(n,e.i(n+1).x,t.y)):i===Fa&&(e.M(n-1,t.x,e.i(n-2).y),e.M(n,t.x,e.i(n+1).y));else{i=n;var r=e.i(i),s=e.i(i-1),h=e.i(i+1);O.B(s.x,r.x)&&O.B(r.y,h.y)?(O.B(s.x,e.i(i-2).x)&&!O.B(s.y,e.i(i-2).y)?(e.l(i,t.x,s.y),n++,i++):e.M(i-1,t.x,s.y),O.B(h.y,e.i(i+2).y)&&!O.B(h.x,e.i(i+2).x)?e.l(i+1,h.x,t.y):e.M(i+1,h.x,t.y)):O.B(s.y,r.y)&&O.B(r.x,h.x)?(O.B(s.y,e.i(i-2).y)&&!O.B(s.x,e.i(i-2).x)?(e.l(i,s.x,t.y),n++,i++):e.M(i-1,s.x,t.y),O.B(h.x,e.i(i+2).x)&&!O.B(h.y,e.i(i+2).y)?e.l(i+1,t.x,h.y):e.M(i+1,t.x,h.y)):O.B(s.x,r.x)&&O.B(r.x,h.x)?(O.B(s.x,e.i(i-2).x)&&!O.B(s.y,e.i(i-2).y)?(e.l(i,t.x,s.y),n++,i++):e.M(i-1,t.x,s.y),O.B(h.x,e.i(i+2).x)&&!O.B(h.y,e.i(i+2).y)?e.l(i+1,t.x,h.y):e.M(i+1,t.x,h.y)):O.B(s.y,r.y)&&O.B(r.y,h.y)&&(O.B(s.y,e.i(i-2).y)&&!O.B(s.x,e.i(i-2).x)?(e.l(i,s.x,t.y),n++,i++):e.M(i-1,s.x,t.y),O.B(h.y,e.i(i+2).y)&&!O.B(h.x,e.i(i+2).x)?e.l(i+1,h.x,t.y):e.M(i+1,h.x,t.y)),e.M(n,t.x,t.y)}else e.M(n,t.x,t.y),i=e.fromNode,r=e.fromPort,i!==null&&(s=i.findVisibleNode(),s!==null&&s!==i&&(i=s,r=i.port)),n===1&&e.computeSpot(!0,r).Ec()&&(s=r.ia(Dt,T.alloc()),i=e.getLinkPointFromPoint(i,r,s,t,!0,T.alloc()),e.M(0,i.x,i.y),T.free(s),T.free(i)),i=e.toNode,r=e.toPort,i!==null&&(s=i.findVisibleNode(),s!==null&&s!==i&&(i=s,r=i.port)),n===e.pointsCount-2&&e.computeSpot(!1,r).Ec()&&(n=r.ia(Dt,T.alloc()),t=e.getLinkPointFromPoint(i,r,n,t,!1,T.alloc()),e.M(e.pointsCount-1,t.x,t.y),T.free(n),T.free(t));e.kf()},de.prototype.computeReshape=function(t){var e=this.adornedLink,n=this.handle.segmentIndex;switch(this.ru(this.handle)){case tf:return t;case Ba:return new T(e.i(n).x,t.y);case Fa:return new T(t.x,e.i(n).y);default:case qd:return e.i(n)}},Z.Object.defineProperties(de.prototype,{handleArchetype:{get:function(){return this.m},set:function(t){this.m=t}},midHandleArchetype:{get:function(){return this.u},set:function(t){this.u=t}},handle:{get:function(){return this.j},set:function(t){if(t!==null&&!(t.part instanceof St))throw Error("new handle is not in an Adornment: "+t);this.j=t}},adornedLink:{get:function(){return this.ms}},resegmentingDistance:{get:function(){return this.F},set:function(t){this.F=t}},originalPoint:{get:function(){return this.$v}},originalPoints:{get:function(){return this.rq}}}),de.prototype.setReshapingBehavior=de.prototype.Nl,de.prototype.getReshapingBehavior=de.prototype.ru;var qd=new J(de,"None",0),Fa=new J(de,"Horizontal",1),Ba=new J(de,"Vertical",2),tf=new J(de,"All",3);de.className="LinkReshapingTool",de.None=qd,de.Horizontal=Fa,de.Vertical=Ba,de.All=tf,Hn("linkReshapingTool",function(){return this.findTool("LinkReshaping")},function(t){this.fb("LinkReshaping",t,this.mouseDownTools)});function on(){Lt.call(this),this.name="Resizing",this.m=new ht(1,1).freeze(),this.j=new ht(9999,9999).freeze(),this.kg=new ht(NaN,NaN).freeze(),this.W=!1,this.ga=!0,this.je=null;var t=new dt;t.alignmentFocus=Dt,t.figure="Rectangle",t.desiredSize=Rh,t.fill="lightblue",t.stroke="dodgerblue",t.strokeWidth=1,t.cursor="pointer",this.F=t,this.u=null,this.qq=new T,this.Yv=new ht,this.rn=new T,this.Ls=new ht(0,0),this.Ks=new ht(1/0,1/0),this.Js=new ht(1,1)}z(on,Lt),on.prototype.updateAdornments=function(t){if(!(t===null||t instanceof U)){if(t.isSelected&&!this.diagram.isReadOnly){var e=t.resizeObject,n=t.zj(this.name);if(e!==null&&t.canResize()&&t.actualBounds.w()&&t.isVisible()&&e.actualBounds.w()&&e.vf()&&((n===null||n.adornedObject!==e)&&(n=this.makeAdornment(e)),n!==null)){e=e.Zh(),Ir(t)&&this.updateResizeHandles(n,e),t.Ng(this.name,n);return}}t.wf(this.name)}},on.prototype.makeAdornment=function(t){var e=t.part.resizeAdornmentTemplate;if(e===null){e=new St,e.type=Y.Spot,e.locationSpot=Dt;var n=new an;n.isPanelMain=!0,e.add(n),e.add(this.makeHandle(t,Qe)),e.add(this.makeHandle(t,Pa)),e.add(this.makeHandle(t,ro)),e.add(this.makeHandle(t,wa)),e.add(this.makeHandle(t,ri)),e.add(this.makeHandle(t,Tn)),e.add(this.makeHandle(t,ai)),e.add(this.makeHandle(t,si))}else if(ui(e),e=e.copy(),e===null)return null;return e.adornedObject=t,e},on.prototype.makeHandle=function(t,e){return t=this.handleArchetype,t===null?null:(t=t.copy(),t.alignment=e,t)},on.prototype.updateResizeHandles=function(t,e){if(t!==null){if(!t.alignment.Rb()&&(t.cursor==="pointer"||0<t.cursor.indexOf("resize")))t:{var n=t.alignment;if(n.Ec()&&(n=Dt),0>=n.x)e=0>=n.y?e+225:1<=n.y?e+135:e+180;else if(1<=n.x)0>=n.y?e+=315:1<=n.y&&(e+=45);else if(0>=n.y)e+=270;else if(1<=n.y)e+=90;else break t;0>e?e+=360:360<=e&&(e-=360),t.cursor=22.5>e?"e-resize":67.5>e?"se-resize":112.5>e?"s-resize":157.5>e?"sw-resize":202.5>e?"w-resize":247.5>e?"nw-resize":292.5>e?"n-resize":337.5>e?"ne-resize":"e-resize"}else if(t instanceof Y)for(t=t.elements;t.next();)this.updateResizeHandles(t.value,e)}},on.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;return!t.isReadOnly&&t.allowResize&&t.lastInput.left?this.findToolHandleAt(t.firstInput.documentPoint,this.name)!==null:!1},on.prototype.doActivate=function(){var t=this.diagram;this.handle===null&&(this.handle=this.findToolHandleAt(t.firstInput.documentPoint,this.name)),this.handle!==null&&(this.adornedObject=this.handle.part.adornedObject,this.adornedObject!==null&&(t.isMouseCaptured=!0,t.animationManager.wc(),this.Ca(this.name),this.qq.set(this.adornedObject.ia(this.handle.alignment.Gu())),this.rn.set(this.adornedObject.part.location),this.Yv.set(this.adornedObject.desiredSize),this.Js=this.computeCellSize(),this.Ls=this.computeMinSize(),this.Ks=this.computeMaxSize(),this.isActive=!0))},on.prototype.doDeactivate=function(){var t=this.diagram;this.stopTransaction(),this.je=this.handle=null,this.isActive=t.isMouseCaptured=!1},on.prototype.stopTransaction=function(){var t=this.diagram,e=Lt.prototype.stopTransaction.call(this);return e&&t.undoManager.transactionToUndo!==null&&t.undoManager.transactionToUndo.Kj(),e},on.prototype.doCancel=function(){this.adornedObject!==null&&(this.adornedObject.desiredSize=this.originalDesiredSize,this.adornedObject.part.location=this.originalLocation),this.stopTool()},on.prototype.doMouseMove=function(){var t=this.diagram;if(this.isActive){var e=this.Ls,n=this.Ks,i=this.Js,r=this.adornedObject.Fr(t.lastInput.documentPoint,T.alloc()),s=this.computeReshape();e=this.computeResize(r,this.handle.alignment,e,n,i,s),this.resize(e),t.kd(),T.free(r)}},on.prototype.doMouseUp=function(){var t=this.diagram;if(this.isActive){var e=this.Ls,n=this.Ks,i=this.Js,r=this.adornedObject.Fr(t.lastInput.documentPoint,T.alloc()),s=this.computeReshape();e=this.computeResize(r,this.handle.alignment,e,n,i,s),this.resize(e),T.free(r),t.Wa(),this.transactionResult=this.name,t.P("PartResized",this.adornedObject,this.originalDesiredSize)}this.stopTool()},on.prototype.resize=function(t){var e=this.diagram,n=this.adornedObject;if(n!==null){if(n.desiredSize=t.size,t=n.part,t.Ta(),n=n.ia(this.handle.alignment.Gu()),t instanceof ut){var i=new Q;if(i.add(t),!this.dragsMembers&&t.placeholder===null){var r=new Ua;r.dragsMembers=!1}e.moveParts(i,this.oppositePoint.copy().ge(n),!0,r)}else t.location=t.location.copy().ge(n).add(this.oppositePoint);e.kd()}},on.prototype.computeResize=function(t,e,n,i,r,s){e.Ec()&&(e=Dt);var h=this.adornedObject.naturalBounds,u=h.x,p=h.y,d=h.x+h.width,g=h.y+h.height,c=1;if(!s){c=h.width;var y=h.height;0>=c&&(c=1),0>=y&&(y=1),c=y/c}return y=T.alloc(),O.jo(t.x,t.y,u,p,r.width,r.height,y),t=h.copy(),0>=e.x?0>=e.y?(t.x=Math.max(y.x,d-i.width),t.x=Math.min(t.x,d-n.width),t.width=Math.max(d-t.x,n.width),t.y=Math.max(y.y,g-i.height),t.y=Math.min(t.y,g-n.height),t.height=Math.max(g-t.y,n.height),s||(1<=t.height/t.width?(t.height=Math.max(Math.min(c*t.width,i.height),n.height),t.width=t.height/c):(t.width=Math.max(Math.min(t.height/c,i.width),n.width),t.height=c*t.width),t.x=d-t.width,t.y=g-t.height)):1<=e.y?(t.x=Math.max(y.x,d-i.width),t.x=Math.min(t.x,d-n.width),t.width=Math.max(d-t.x,n.width),t.height=Math.max(Math.min(y.y-p,i.height),n.height),s||(1<=t.height/t.width?(t.height=Math.max(Math.min(c*t.width,i.height),n.height),t.width=t.height/c):(t.width=Math.max(Math.min(t.height/c,i.width),n.width),t.height=c*t.width),t.x=d-t.width)):(t.x=Math.max(y.x,d-i.width),t.x=Math.min(t.x,d-n.width),t.width=d-t.x,s||(t.height=Math.max(Math.min(c*t.width,i.height),n.height),t.width=t.height/c,t.y=p+.5*(g-p-t.height))):1<=e.x?0>=e.y?(t.width=Math.max(Math.min(y.x-u,i.width),n.width),t.y=Math.max(y.y,g-i.height),t.y=Math.min(t.y,g-n.height),t.height=Math.max(g-t.y,n.height),s||(1<=t.height/t.width?(t.height=Math.max(Math.min(c*t.width,i.height),n.height),t.width=t.height/c):(t.width=Math.max(Math.min(t.height/c,i.width),n.width),t.height=c*t.width),t.y=g-t.height)):1<=e.y?(t.width=Math.max(Math.min(y.x-u,i.width),n.width),t.height=Math.max(Math.min(y.y-p,i.height),n.height),s||(1<=t.height/t.width?(t.height=Math.max(Math.min(c*t.width,i.height),n.height),t.width=t.height/c):(t.width=Math.max(Math.min(t.height/c,i.width),n.width),t.height=c*t.width))):(t.width=Math.max(Math.min(y.x-u,i.width),n.width),s||(t.height=Math.max(Math.min(c*t.width,i.height),n.height),t.width=t.height/c,t.y=p+.5*(g-p-t.height))):0>=e.y?(t.y=Math.max(y.y,g-i.height),t.y=Math.min(t.y,g-n.height),t.height=g-t.y,s||(t.width=Math.max(Math.min(t.height/c,i.width),n.width),t.height=c*t.width,t.x=u+.5*(d-u-t.width))):1<=e.y&&(t.height=Math.max(Math.min(y.y-p,i.height),n.height),s||(t.width=Math.max(Math.min(t.height/c,i.width),n.width),t.height=c*t.width,t.x=u+.5*(d-u-t.width))),T.free(y),t},on.prototype.computeReshape=function(){var t=te;return this.adornedObject instanceof dt&&(t=rg(this.adornedObject)),!(t===$i||this.diagram.lastInput.shift)},on.prototype.computeMinSize=function(){var t=this.adornedObject.minSize.copy(),e=this.minSize;return!isNaN(e.width)&&e.width>t.width&&(t.width=e.width),!isNaN(e.height)&&e.height>t.height&&(t.height=e.height),t},on.prototype.computeMaxSize=function(){var t=this.adornedObject.maxSize.copy(),e=this.maxSize;return!isNaN(e.width)&&e.width<t.width&&(t.width=e.width),!isNaN(e.height)&&e.height<t.height&&(t.height=e.height),t},on.prototype.computeCellSize=function(){var t=new ht(NaN,NaN),e=this.adornedObject.part;return e!==null&&(e=e.resizeCellSize,!isNaN(e.width)&&0<e.width&&(t.width=e.width),!isNaN(e.height)&&0<e.height&&(t.height=e.height)),e=this.cellSize,isNaN(t.width)&&!isNaN(e.width)&&0<e.width&&(t.width=e.width),isNaN(t.height)&&!isNaN(e.height)&&0<e.height&&(t.height=e.height),e=this.diagram,(isNaN(t.width)||isNaN(t.height))&&e&&(e=e.grid,e!==null&&e.visible&&this.isGridSnapEnabled&&(e=e.gridCellSize,isNaN(t.width)&&!isNaN(e.width)&&0<e.width&&(t.width=e.width),isNaN(t.height)&&!isNaN(e.height)&&0<e.height&&(t.height=e.height))),(isNaN(t.width)||t.width===0||t.width===1/0)&&(t.width=1),(isNaN(t.height)||t.height===0||t.height===1/0)&&(t.height=1),t},Z.Object.defineProperties(on.prototype,{handleArchetype:{get:function(){return this.F},set:function(t){this.F=t}},handle:{get:function(){return this.u},set:function(t){if(t!==null&&!(t.part instanceof St))throw Error("new handle is not in an Adornment: "+t);this.u=t}},adornedObject:{get:function(){return this.je},set:function(t){if(t!==null&&t.part instanceof St)throw Error("new handle must not be in an Adornment: "+t);this.je=t}},minSize:{get:function(){return this.m},set:function(t){if(!this.m.C(t)){var e=t.width;isNaN(e)&&(e=0),t=t.height,isNaN(t)&&(t=0),this.m.h(e,t)}}},maxSize:{get:function(){return this.j},set:function(t){if(!this.j.C(t)){var e=t.width;isNaN(e)&&(e=1/0),t=t.height,isNaN(t)&&(t=1/0),this.j.h(e,t)}}},cellSize:{get:function(){return this.kg},set:function(t){this.kg.C(t)||this.kg.assign(t)}},isGridSnapEnabled:{get:function(){return this.W},set:function(t){this.W=t}},dragsMembers:{get:function(){return this.ga},set:function(t){this.ga=t}},oppositePoint:{get:function(){return this.qq},set:function(t){this.qq.C(t)||this.qq.assign(t)}},originalDesiredSize:{get:function(){return this.Yv}},originalLocation:{get:function(){return this.rn}}}),on.className="ResizingTool",Hn("resizingTool",function(){return this.findTool("Resizing")},function(t){this.fb("Resizing",t,this.mouseDownTools)});function An(){Lt.call(this),this.name="Rotating",this.ga=45,this.W=2,this.rn=new T,this.je=null;var t=new dt;t.figure="Ellipse",t.desiredSize=Tr,t.fill="lightblue",t.stroke="dodgerblue",t.strokeWidth=1,t.cursor="pointer",this.m=t,this.j=null,this.Xv=0,this.Dq=new T(NaN,NaN),this.u=0,this.F=50}z(An,Lt),An.prototype.updateAdornments=function(t){if(t!==null){if(t.Zg()){var e=t.rotateObject;if(e===t||e===t.path||e.isPanelMain)return}if(t.isSelected&&!this.diagram.isReadOnly&&(e=t.rotateObject,e!==null&&t.canRotate()&&t.actualBounds.w()&&t.isVisible()&&e.actualBounds.w()&&e.vf())){var n=t.zj(this.name);if((n===null||n.adornedObject!==e)&&(n=this.makeAdornment(e)),n!==null){n.angle=e.Zh(),n.placeholder===null&&(n.location=this.computeAdornmentLocation(e)),t.Ng(this.name,n);return}}t.wf(this.name)}},An.prototype.makeAdornment=function(t){var e=t.part.rotateAdornmentTemplate;if(e===null){e=new St,e.type=Y.Position,e.locationSpot=Dt;var n=this.handleArchetype;n!==null&&e.add(n.copy())}else if(ui(e),e=e.copy(),e===null)return null;return e.adornedObject=t,e},An.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;return!t.isReadOnly&&t.allowRotate&&t.lastInput.left?this.findToolHandleAt(t.firstInput.documentPoint,this.name)!==null:!1},An.prototype.doActivate=function(){var t=this.diagram;if(this.adornedObject===null){if(this.handle===null&&(this.handle=this.findToolHandleAt(t.firstInput.documentPoint,this.name)),this.handle===null)return;this.adornedObject=this.handle.part.adornedObject}this.adornedObject!==null&&(t.isMouseCaptured=!0,t.delaysLayout=!0,this.Ca(this.name),this.Xv=this.adornedObject.angle,this.Dq=this.computeRotationPoint(this.adornedObject),this.rn=this.adornedObject.part.location.copy(),this.isActive=!0)},An.prototype.computeRotationPoint=function(t){var e=t.part,n=e.locationObject;return e.rotationSpot.pb()?t.ia(e.rotationSpot):t===e||t===n?n.ia(e.locationSpot):t.ia(Dt)},An.prototype.computeAdornmentLocation=function(t){var e=this.rotationPoint;e.w()||(e=this.computeRotationPoint(t)),e=t.Fr(e);var n=this.handleAngle;0>n?n+=360:360<=n&&(n-=360),n=Math.round(45*Math.round(n/45));var i=this.handleDistance;return n===0?e.x=t.naturalBounds.width+i:n===45?(e.x=t.naturalBounds.width+i,e.y=t.naturalBounds.height+i):n===90?e.y=t.naturalBounds.height+i:n===135?(e.x=-i,e.y=t.naturalBounds.height+i):n===180?e.x=-i:n===225?(e.x=-i,e.y=-i):n===270?e.y=-i:n===315&&(e.x=t.naturalBounds.width+i,e.y=-i),t.ia(e)},An.prototype.doDeactivate=function(){var t=this.diagram;this.stopTransaction(),this.je=this.handle=null,this.Dq=new T(NaN,NaN),this.isActive=t.isMouseCaptured=!1},An.prototype.stopTransaction=function(){var t=this.diagram,e=Lt.prototype.stopTransaction.call(this);return e&&t.undoManager.transactionToUndo!==null&&t.undoManager.transactionToUndo.Kj(),e},An.prototype.doCancel=function(){this.diagram.delaysLayout=!1,this.rotate(this.originalAngle),this.stopTool()},An.prototype.doMouseMove=function(){var t=this.diagram;this.isActive&&(t=this.computeRotate(t.lastInput.documentPoint),this.rotate(t))},An.prototype.doMouseUp=function(){var t=this.diagram;if(this.isActive){t.delaysLayout=!1;var e=this.computeRotate(t.lastInput.documentPoint);this.rotate(e),t.Wa(),this.transactionResult=this.name,t.P("PartRotated",this.adornedObject,this.originalAngle)}this.stopTool()},An.prototype.rotate=function(t){var e=this.adornedObject;if(e!==null){e.angle=t,e=e.part,e.Ta();var n=e.locationObject,i=e.rotateObject;(n===i||n.dg(i))&&(n=this.rn.copy(),e.location=n.ge(this.rotationPoint).rotate(t-this.originalAngle).add(this.rotationPoint)),this.diagram.kd()}},An.prototype.computeRotate=function(t){t=this.rotationPoint.Za(t)-this.handleAngle;var e=this.adornedObject.panel;e!==null&&(t-=e.Zh()),360<=t?t-=360:0>t&&(t+=360),e=Math.min(Math.abs(this.snapAngleMultiple),180);var n=Math.min(Math.abs(this.snapAngleEpsilon),e/2);return!this.diagram.lastInput.shift&&0<e&&0<n&&(t%e<n?t=Math.floor(t/e)*e:t%e>e-n&&(t=(Math.floor(t/e)+1)*e)),360<=t?t-=360:0>t&&(t+=360),t},Z.Object.defineProperties(An.prototype,{handleArchetype:{get:function(){return this.m},set:function(t){this.m=t}},handle:{get:function(){return this.j},set:function(t){if(t!==null&&!(t.part instanceof St))throw Error("new handle is not in an Adornment: "+t);this.j=t}},adornedObject:{get:function(){return this.je},set:function(t){if(t!==null&&t.part instanceof St)throw Error("new handle must not be in an Adornment: "+t);this.je=t}},snapAngleMultiple:{get:function(){return this.ga},set:function(t){this.ga=t}},snapAngleEpsilon:{get:function(){return this.W},set:function(t){this.W=t}},originalAngle:{get:function(){return this.Xv}},rotationPoint:{get:function(){return this.Dq},set:function(t){this.Dq=t.copy()}},handleAngle:{get:function(){return this.u},set:function(t){this.u=t}},handleDistance:{get:function(){return this.F},set:function(t){this.F=t}}}),An.className="RotatingTool",Hn("rotatingTool",function(){return this.findTool("Rotating")},function(t){this.fb("Rotating",t,this.mouseDownTools)});function ja(){Lt.call(this),this.name="ClickSelecting"}z(ja,Lt),ja.prototype.canStart=function(){return!(!this.isEnabled||this.isBeyondDragSize())},ja.prototype.doMouseUp=function(){this.isActive&&(this.standardMouseSelect(),!this.standardMouseClick()&&this.diagram.lastInput.isTouchEvent&&this.diagram.toolManager.doToolTip()),this.stopTool()},ja.className="ClickSelectingTool";function Ho(){Lt.call(this),this.name="Action",this.Uj=null}z(Ho,Lt),Ho.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram,e=t.lastInput,n=t.dc(e.documentPoint,function(i){for(;i.panel!==null&&!i.isActionable;)i=i.panel;return i});return n!==null&&n.isActionable?(this.Uj=n,t.gk=t.dc(e.documentPoint,null,null),!0):!1},Ho.prototype.doMouseDown=function(){if(this.isActive){var t=this.diagram.lastInput,e=this.Uj;e!==null&&(t.targetObject=e,e.actionDown!==null&&e.actionDown(t,e))}else this.canStart()&&this.doActivate()},Ho.prototype.doMouseMove=function(){if(this.isActive){var t=this.diagram.lastInput,e=this.Uj;e!==null&&(t.targetObject=e,e.actionMove!==null&&e.actionMove(t,e))}},Ho.prototype.doMouseUp=function(){if(this.isActive){var t=this.diagram.lastInput,e=this.Uj;if(e===null)return;t.targetObject=e,e.actionUp!==null&&e.actionUp(t,e),this.standardMouseClick(function(n){for(;n.panel!==null&&(!n.isActionable||n!==e);)n=n.panel;return n},function(n){return n===e})}this.stopTool()},Ho.prototype.doCancel=function(){var t=this.diagram.lastInput,e=this.Uj;e!==null&&(t.targetObject=e,e.actionCancel!==null&&e.actionCancel(t,e),this.stopTool())},Ho.prototype.doStop=function(){this.Uj=null},Ho.className="ActionTool";function hs(){Lt.call(this),this.name="ClickCreating",this.Ei=null,this.m=!0,this.j=!1,this.Hv=new T(0,0)}z(hs,Lt),hs.prototype.canStart=function(){if(!this.isEnabled||this.archetypeNodeData===null)return!1;var t=this.diagram;if(t.isReadOnly||t.isModelReadOnly||!t.allowInsert||!t.lastInput.left||this.isBeyondDragSize())return!1;if(this.isDoubleClick){if(t.lastInput.clickCount===1&&(this.Hv=t.lastInput.viewPoint.copy()),t.lastInput.clickCount!==2||this.isBeyondDragSize(this.Hv))return!1}else if(t.lastInput.clickCount!==1)return!1;return!(t.currentTool!==this&&t.nl(t.lastInput.documentPoint,!0)!==null)},hs.prototype.doMouseUp=function(){var t=this.diagram;this.isActive&&this.insertPart(t.lastInput.documentPoint),this.stopTool()},hs.prototype.insertPart=function(t){var e=this.diagram,n=this.archetypeNodeData;if(n===null)return null;var i=null;try{if(e.P("ChangingSelection",e.selection),this.Ca(this.name),n instanceof ot)n.Rc()&&(ui(n),i=n.copy(),i!==null&&e.add(i));else if(n!==null){var r=e.model.copyNodeData(n);Bt(r)&&(e.model.hf(r),i=e.Dc(r))}if(i!==null){var s=T.allocAt(t.x,t.y);this.isGridSnapEnabled&&Pf(this.diagram,i,t,s),i.location=s,e.allowSelect&&(e.clearSelection(!0),i.isSelected=!0),T.free(s)}e.Wa(),this.transactionResult=this.name,e.P("PartCreated",i)}finally{this.stopTransaction(),e.P("ChangedSelection",e.selection)}return i},Z.Object.defineProperties(hs.prototype,{archetypeNodeData:{get:function(){return this.Ei},set:function(t){this.Ei=t}},isDoubleClick:{get:function(){return this.m},set:function(t){this.m=t}},isGridSnapEnabled:{get:function(){return this.j},set:function(t){this.j=t}}}),hs.className="ClickCreatingTool";function so(){Lt.call(this),this.name="DragSelecting",this.mk=175,this.m=!1;var t=new ot;t.layerName="Tool",t.selectable=!1;var e=new dt;e.name="SHAPE",e.figure="Rectangle",e.fill=null,e.stroke="magenta",t.add(e),this.j=t}z(so,Lt),so.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;if(!t.allowSelect)return!1;var e=t.lastInput;return!(!e.left||t.currentTool!==this&&(!this.isBeyondDragSize()||e.timestamp-t.firstInput.timestamp<this.delay||t.nl(e.documentPoint,!0)!==null))},so.prototype.doActivate=function(){var t=this.diagram;this.isActive=!0,t.isMouseCaptured=!0,t.skipsUndoManager=!0,t.add(this.box),this.doMouseMove()},so.prototype.doDeactivate=function(){var t=this.diagram;t.gg(),t.remove(this.box),t.skipsUndoManager=!1,this.isActive=t.isMouseCaptured=!1},so.prototype.doMouseMove=function(){var t=this.diagram;if(this.isActive&&this.box!==null){var e=this.computeBoxBounds(),n=this.box.eb("SHAPE");n===null&&(n=this.box.vb());var i=ht.alloc().h(e.width,e.height);n.desiredSize=i,this.box.Ll(e.x,e.y,!1),ht.free(i),(t.allowHorizontalScroll||t.allowVerticalScroll)&&t.xr(t.lastInput.viewPoint)}},so.prototype.doMouseUp=function(){if(this.isActive){var t=this.diagram;t.remove(this.box);try{t.currentCursor="wait",t.P("ChangingSelection",t.selection),this.selectInRect(this.computeBoxBounds()),t.P("ChangedSelection",t.selection)}finally{t.currentCursor=""}}this.stopTool()},so.prototype.computeBoxBounds=function(){var t=this.diagram;return new E(t.firstInput.documentPoint,t.lastInput.documentPoint)},so.prototype.selectInRect=function(t){var e=this.diagram,n=e.lastInput;if(t=e.Mw(t,this.isPartialInclusion),Ji?n.meta:n.control)if(n.shift)for(t=t.iterator;t.next();)e=t.value,e.isSelected&&(e.isSelected=!1);else for(t=t.iterator;t.next();)e=t.value,e.isSelected=!e.isSelected;else if(n.shift)for(t=t.iterator;t.next();)e=t.value,e.isSelected||(e.isSelected=!0);else{for(n=new Q,e=e.selection.iterator;e.next();){var i=e.value;t.contains(i)||n.add(i)}for(e=n.iterator;e.next();)e.value.isSelected=!1;for(t=t.iterator;t.next();)e=t.value,e.isSelected||(e.isSelected=!0)}},Z.Object.defineProperties(so.prototype,{delay:{get:function(){return this.mk},set:function(t){this.mk=t}},isPartialInclusion:{get:function(){return this.m},set:function(t){this.m=t}},box:{get:function(){return this.j},set:function(t){this.j=t}}}),so.className="DragSelectingTool";function ao(){Lt.call(this),this.name="Panning",this.st=new T,this.Rx=new T,this.jg=!1;var t=this;this.ew=function(){var e=t.diagram;e!==null&&e.removeEventListener(it.document,"scroll",t.ew,!1),t.stopTool()}}z(ao,Lt),ao.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;return!(!t.allowHorizontalScroll&&!t.allowVerticalScroll||!t.lastInput.left||t.currentTool!==this&&!this.isBeyondDragSize())},ao.prototype.doActivate=function(){var t=this.diagram;this.jg?(t.lastInput.bubbles=!0,t.addEventListener(it.document,"scroll",this.ew,!1)):(t.currentCursor="move",t.isMouseCaptured=!0,this.st.assign(t.position)),this.isActive=!0},ao.prototype.doDeactivate=function(){var t=this.diagram;t.currentCursor="",this.isActive=t.isMouseCaptured=!1},ao.prototype.doCancel=function(){var t=this.diagram;t.position=this.st,t.isMouseCaptured=!1,this.stopTool()},ao.prototype.doMouseMove=function(){this.move()},ao.prototype.doMouseUp=function(){this.move(),this.stopTool()},ao.prototype.move=function(){var t=this.diagram;if(this.isActive&&t)if(this.jg)t.lastInput.bubbles=!0;else{var e=t.position,n=t.firstInput.documentPoint,i=t.lastInput.documentPoint,r=e.x+n.x-i.x;n=e.y+n.y-i.y,t.allowHorizontalScroll||(r=e.x),t.allowVerticalScroll||(n=e.y),t.position=this.Rx.h(r,n)}},Z.Object.defineProperties(ao.prototype,{bubbles:{get:function(){return this.jg},set:function(t){this.jg=t}},originalPosition:{get:function(){return this.st}}}),ao.className="PanningTool",Hn("clickCreatingTool",function(){return this.findTool("ClickCreating")},function(t){this.fb("ClickCreating",t,this.mouseUpTools)}),Hn("clickSelectingTool",function(){return this.findTool("ClickSelecting")},function(t){this.fb("ClickSelecting",t,this.mouseUpTools)}),Hn("panningTool",function(){return this.findTool("Panning")},function(t){this.fb("Panning",t,this.mouseMoveTools)}),Hn("dragSelectingTool",function(){return this.findTool("DragSelecting")},function(t){this.fb("DragSelecting",t,this.mouseMoveTools)}),Hn("actionTool",function(){return this.findTool("Action")},function(t){this.fb("Action",t,this.mouseDownTools)});function Wo(){this.F=this.u=this.j=this.m=null}Z.Object.defineProperties(Wo.prototype,{mainElement:{get:function(){return this.u},set:function(t){this.u=t}},show:{get:function(){return this.m},set:function(t){this.m!==t&&(this.m=t)}},hide:{get:function(){return this.j},set:function(t){this.j!==t&&(this.j=t)}},valueFunction:{get:function(){return this.F},set:function(t){this.F=t}}}),Wo.className="HTMLInfo";function Ii(t,e,n){this.text=t,this.Bw=e,this.visible=n}Ii.className="ContextMenuButtonInfo";function zn(){Lt.call(this),this.name="ContextMenu",this.m=this.As=this.j=null,this.Tv=new T,this.Cs=null,this.Ys=!1;var t=this;this.Pt=function(){t.stopTool()}}z(zn,Lt);function Xy(t){var e=new Wo;e.show=function(r,s,h){h.showDefaultContextMenu()},e.hide=function(r,s){s.hideDefaultContextMenu()},Da=e,t.Pt=function(){t.stopTool()},e=_e("div");var n=_e("div");e.style.cssText="top: 0px;z-index:10002;position: fixed;display: none;text-align: center;left: 25%;width: 50%;background-color: #F5F5F5;padding: 16px;border: 16px solid #444;border-radius: 10px;margin-top: 10px",n.style.cssText="z-index:10001;position: fixed;display: none;top: 0;left: 0;width: 100%;height: 100%;background-color: black;opacity: 0.8;";var i=_e("style");it.document.getElementsByTagName("head")[0].appendChild(i),i.sheet.insertRule(".goCXul { list-style: none; }",0),i.sheet.insertRule(".goCXli {font:700 1.5em Helvetica, Arial, sans-serif;position: relative;min-width: 60px; }",0),i.sheet.insertRule(".goCXa {color: #444;display: inline-block;padding: 4px;text-decoration: none;margin: 2px;border: 1px solid gray;border-radius: 10px; }",0),i=t.diagram,i!==null&&(i.addEventListener(e,"contextmenu",ef,!1),i.addEventListener(e,"selectstart",ef,!1),i.addEventListener(n,"contextmenu",ef,!1)),e.className="goCXforeground",n.className="goCXbackground",it.document.body&&(it.document.body.appendChild(e),it.document.body.appendChild(n)),Jh=e,Wh=n,nf=!0}function ef(t){return t.preventDefault(),!1}zn.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;return this.isBeyondDragSize()||!t.lastInput.right||1<t.lastInput.clickCount?!1:!!(t.lastInput.isTouchEvent&&this.defaultTouchContextMenu!==null||this.findObjectWithContextMenu()!==null)},zn.prototype.doStart=function(){this.Tv.set(this.diagram.firstInput.documentPoint)},zn.prototype.doStop=function(){this.hideContextMenu(),this.currentObject=null},zn.prototype.findObjectWithContextMenu=function(t){t===void 0&&(t=null);var e=this.diagram,n=e.lastInput,i=null;if(t instanceof I||(t instanceof nt?i=t:i=e.dc(n.documentPoint,null,function(r){return!r.layer.isTemporary})),i!==null){for(t=i;t!==null;){if(t.contextMenu!==null)return t;t=t.panel}if(e.lastInput.isTouchEvent&&this.defaultTouchContextMenu)return i.part}else if(e.contextMenu!==null)return e;return null},zn.prototype.doActivate=function(){},zn.prototype.doMouseDown=function(){if(Lt.prototype.doMouseDown.call(this),this.isActive&&this.currentContextMenu instanceof St){var t=this.diagram.toolManager.findTool("Action");t!==null&&t.canStart()&&(t.doActivate(),t.doMouseDown(),t.doDeactivate())}this.diagram.toolManager.mouseDownTools.contains(this)&&d0(this)},zn.prototype.doMouseUp=function(){if(this.isActive&&this.currentContextMenu instanceof St){var t=this.diagram.toolManager.findTool("Action");t!==null&&t.canStart()&&(t.doActivate(),t.doCancel(),t.doDeactivate())}d0(this)};function d0(t){var e=t.diagram;if(t.isActive){var n=t.currentContextMenu;if(n!==null){if(!(n instanceof Wo)){var i=e.dc(e.lastInput.documentPoint,null,null);i!==null&&i.dg(n)&&t.standardMouseClick(null,null)}t.stopTool(),t.canStart()&&(e.currentTool=t,t.doMouseUp())}}else t.canStart()&&(f0(t,!0),t.isActive||t.stopTool())}function f0(t,e,n){if(n===void 0&&(n=null),!t.Ys&&(t.Ys=!0,e&&t.standardMouseSelect(),e=t.standardMouseClick(),t.Ys=!1,!e)){if(t.isActive=!0,e=Da,n===null&&(n=t.findObjectWithContextMenu()),n!==null){var i=n.contextMenu;i!==null?(t.currentObject=n instanceof nt?n:null,t.showContextMenu(i,t.currentObject)):e!==null&&t.showContextMenu(e,t.currentObject)}else e!==null&&t.showContextMenu(e,null);t.currentContextMenu instanceof St&&!t.currentContextMenu.visible&&t.stopTool()}}zn.prototype.doMouseMove=function(){var t=this.diagram.toolManager.findTool("Action");t!==null&&t.doMouseMove(),this.isActive&&this.diagram.toolManager.doMouseMove()},zn.prototype.showContextMenu=function(t,e){var n=this.diagram;if(t!==this.currentContextMenu&&this.hideContextMenu(),t instanceof St){t.layerName="Tool",t.selectable=!1,t.scale=1/n.scale,t.category=this.name,t.placeholder!==null&&(t.placeholder.scale=n.scale);var i=t.diagram;i!==null&&i!==n&&i.remove(t),n.add(t),e!==null?t.adornedObject=e:t.data=n.model,t.Ta(),this.positionContextMenu(t,e)}else t instanceof Wo&&t.show(e,n,this);this.currentContextMenu=t},zn.prototype.positionContextMenu=function(t){if(t.placeholder===null){var e=this.diagram,n=e.lastInput.documentPoint.copy(),i=t.measuredBounds,r=e.viewportBounds;e.lastInput.isTouchEvent&&(n.x-=i.width),n.x+i.width>r.right&&(n.x-=i.width+5/e.scale),n.x<r.x&&(n.x=r.x),n.y+i.height>r.bottom&&(n.y-=i.height+5/e.scale),n.y<r.y&&(n.y=r.y),t.position=n}},zn.prototype.hideContextMenu=function(){var t=this.diagram,e=this.currentContextMenu;e!==null&&(e instanceof St?(t.remove(e),this.As!==null&&this.As.wf(e.category),e.data=null,e.adornedObject=null):e instanceof Wo&&(e.hide!==null?e.hide(t,this):e.mainElement!==null&&(e.mainElement.style.display="none")),this.currentContextMenu=null,this.standardMouseOver())};function Uy(t){var e=new Q;return e.add(new Ii("Copy",function(n){n.commandHandler.copySelection()},function(n){return n.commandHandler.canCopySelection()})),e.add(new Ii("Cut",function(n){n.commandHandler.cutSelection()},function(n){return n.commandHandler.canCutSelection()})),e.add(new Ii("Delete",function(n){n.commandHandler.deleteSelection()},function(n){return n.commandHandler.canDeleteSelection()})),e.add(new Ii("Paste",function(n){n.commandHandler.pasteSelection(t.mouseDownPoint)},function(n){return n.commandHandler.canPasteSelection(t.mouseDownPoint)})),e.add(new Ii("Select All",function(n){n.commandHandler.selectAll()},function(n){return n.commandHandler.canSelectAll()})),e.add(new Ii("Undo",function(n){n.commandHandler.undo()},function(n){return n.commandHandler.canUndo()})),e.add(new Ii("Redo",function(n){n.commandHandler.redo()},function(n){return n.commandHandler.canRedo()})),e.add(new Ii("Scroll To Part",function(n){n.commandHandler.scrollToPart()},function(n){return n.commandHandler.canScrollToPart()})),e.add(new Ii("Zoom To Fit",function(n){n.commandHandler.zoomToFit()},function(n){return n.commandHandler.canZoomToFit()})),e.add(new Ii("Reset Zoom",function(n){n.commandHandler.resetZoom()},function(n){return n.commandHandler.canResetZoom()})),e.add(new Ii("Group Selection",function(n){n.commandHandler.groupSelection()},function(n){return n.commandHandler.canGroupSelection()})),e.add(new Ii("Ungroup Selection",function(n){n.commandHandler.ungroupSelection()},function(n){return n.commandHandler.canUngroupSelection()})),e.add(new Ii("Edit Text",function(n){n.commandHandler.editTextBlock()},function(n){return n.commandHandler.canEditTextBlock()})),e}zn.prototype.showDefaultContextMenu=function(){var t=this.diagram;this.Cs===null&&(this.Cs=Uy(this)),Jh.innerHTML="",Wh.addEventListener("pointerdown",this.Pt,!1);var e=this,n=_e("ul");n.className="goCXul",Jh.appendChild(n),n.innerHTML="";for(var i=this.Cs.iterator;i.next();){var r=i.value,s=r.visible;if(typeof r.Bw=="function"&&(typeof s!="function"||s(t))){s=_e("li"),s.className="goCXli";var h=_e("a");h.className="goCXa",h.href="#",h.Ex=r.Bw,h.addEventListener("pointerdown",function(u){return this.Ex(t),e.stopTool(),u.preventDefault(),!1},!1),h.textContent=r.text,s.appendChild(h),n.appendChild(s)}}Jh.style.display="block",Wh.style.display="block"},zn.prototype.hideDefaultContextMenu=function(){if(this.currentContextMenu!==null&&this.currentContextMenu===Da){Jh.style.display="none",Wh.style.display="none";var t=this.diagram;t!==null&&t.removeEventListener(Wh,"pointerdown",this.Pt,!1),this.currentContextMenu=null}},Z.Object.defineProperties(zn.prototype,{currentContextMenu:{get:function(){return this.j},set:function(t){this.j=t,this.As=t instanceof St?t.adornedPart:null}},defaultTouchContextMenu:{get:function(){return nf===!1&&Da===null&&yi&&Xy(this),Da},set:function(t){t===null&&(nf=!0),Da=t}},currentObject:{get:function(){return this.m},set:function(t){this.m=t}},mouseDownPoint:{get:function(){return this.Tv}}});var Da=null,nf=!1,Wh=null,Jh=null;zn.className="ContextMenuTool",Hn("contextMenuTool",function(){return this.findTool("ContextMenu")},function(t){this.fb("ContextMenu",t,this.mouseUpTools)});function Kt(){Lt.call(this),this.name="TextEditing",this.Lh=new Gt,this.ga=null,this.W=rf,this.ij=null,this.na=Zh,this.u=1,this.F=!0,this.m=null,this.j=new Wo,this.Ds=null,Ky(this,this.j)}z(Kt,Lt);function Ky(t,e){if(yi){var n=_e("textarea");t.Ds=n,n.addEventListener("input",function(){if(t.textBlock!==null){var i=t.ex(this.value);this.style.width=20+i.measuredBounds.width*this.Oz+"px",this.rows=i.lineCount}},!1),n.addEventListener("keydown",function(i){if(t.textBlock!==null){var r=i.key;r==="Enter"?(t.textBlock.isMultiline===!1&&i.preventDefault(),t.acceptText(wu)):r==="Tab"?(t.acceptText(of),i.preventDefault()):r==="Escape"&&(t.doCancel(),t.diagram!==null&&t.diagram.doFocus())}},!1),n.addEventListener("focus",function(){if(t.currentTextEditor!==null&&t.state!==Zh){var i=t.Ds;t.na===_h&&(t.na=Lu),typeof i.select=="function"&&t.selectsTextOnActivate&&(i.select(),i.setSelectionRange(0,9999))}},!1),n.addEventListener("blur",function(){if(t.currentTextEditor!==null&&t.state!==Zh){var i=t.Ds;typeof i.focus=="function"&&i.focus(),typeof i.select=="function"&&t.selectsTextOnActivate&&(i.select(),i.setSelectionRange(0,9999))}},!1),e.valueFunction=function(){return n.value},e.mainElement=n,e.show=function(i,r,s){if(i instanceof Gt&&s instanceof Kt)if(s.state===$h)n.style.border="3px solid red",n.focus();else{var h=i.ia(Dt),u=r.position,p=r.scale,d=i.qf()*p;d<s.minimumEditorScale&&(d=s.minimumEditorScale);var g=i.naturalBounds.width*d+6,c=i.naturalBounds.height*d+2,y=(h.x-u.x)*p;h=(h.y-u.y)*p,u=i.verticalAlignment,p=(i.lineHeight+i.spacingAbove+i.spacingBelow)*i.lineCount*d,c=u.y*c-u.y*p+u.offsetY-(.5*c-.5*p)-p/2,n.value=i.text,r.div.style.font=i.font,n.style.position="absolute",n.style.zIndex="100",n.style.font="inherit",n.style.fontSize=100*d+"%",n.style.lineHeight="normal",n.style.width=g+"px",n.style.left=(y-g/2|0)-1+"px",n.style.top=(h+c|0)-1+"px",n.style.textAlign=i.textAlign,n.style.margin="0",n.style.padding="1px",n.style.border="0",n.style.outline="none",n.style.whiteSpace="pre-wrap",n.style.overflow="hidden",n.rows=i.lineCount,n.Oz=d,n.className="goTXarea",r.div.appendChild(n),n.focus(),s.selectsTextOnActivate&&(n.select(),n.setSelectionRange(0,9999))}},e.hide=function(i){i.div.removeChild(n)}}}Kt.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;if(t===null||t.isReadOnly||zs&&zs!==this&&(zs.acceptText(Pu),zs&&zs!==this)||!t.lastInput.left||this.isBeyondDragSize())return!1;var e=t.dc(t.lastInput.documentPoint);return e!==null&&e instanceof Gt&&e.editable&&e.part.canEdit()?(e=e.part,!(e===null||this.starting===rf&&!e.isSelected||this.starting===m0&&2>t.lastInput.clickCount)):!1},Kt.prototype.doStart=function(){zs=this,this.textBlock!==null&&this.doActivate()},Kt.prototype.doActivate=function(){if(!this.isActive){var t=this.diagram;if(t!==null){var e=this.textBlock;if(e===null&&(e=t.dc(t.lastInput.documentPoint)),e!==null&&e instanceof Gt&&(this.textBlock=e,e.part!==null)){t.animationManager.wc(),this.isActive=!0,this.na=_h;var n=this.defaultTextEditor;e.textEditor!==null&&(n=e.textEditor),this.Lh=this.textBlock.copy();var i=new E(this.textBlock.ia(Qe),this.textBlock.ia(ro));t.Su(i),n.show(e,t,this),this.currentTextEditor=n}}}},Kt.prototype.doCancel=function(){this.stopTool()},Kt.prototype.doMouseUp=function(){this.canStart()&&this.doActivate()},Kt.prototype.doMouseDown=function(){this.isActive&&this.acceptText(Pu)},Kt.prototype.acceptText=function(t){switch(t){case Pu:this.na===af?this.currentTextEditor instanceof HTMLElement&&this.currentTextEditor.focus():(this.na===_h||this.na===$h||this.na===Lu)&&(this.na=sf,g0(this));break;case c0:case wu:case of:(wu!==t||this.textBlock.isMultiline!==!0)&&(this.na===_h||this.na===$h||this.na===Lu)&&(this.na=sf,g0(this))}};function g0(t){var e=t.textBlock,n=t.diagram,i=t.currentTextEditor;if(e!==null&&i!==null){var r=e.text,s="";i.valueFunction!==null&&(s=i.valueFunction()),t.isValidText(e,r,s)?(t.Ca(t.name),t.na=af,t.transactionResult=t.name,e.text=s,t.doSuccess(r,s),n!==null&&n.P("TextEdited",e,r),t.stopTransaction(),t.stopTool(),n!==null&&n.doFocus()):(t.na=$h,t.doError(r,s))}}Kt.prototype.doError=function(t,e){var n=this.textBlock;n.errorFunction!==null&&n.errorFunction(this,t,e),(t=this.currentTextEditor)&&t.show(n,this.diagram,this)},Kt.prototype.doSuccess=function(t,e){var n=this.textBlock;n.textEdited!==null&&n.textEdited(n,t,e)},Kt.prototype.doDeactivate=function(){var t=this.diagram;t!==null&&(this.na=Zh,this.currentTextEditor!==null&&this.currentTextEditor.hide(t,this),this.textBlock=null,this.isActive=!1)},Kt.prototype.doStop=function(){zs=null},Kt.prototype.isValidText=function(t,e,n){var i=this.textValidation;return i!==null&&!i(t,e,n)?!1:(i=t.textValidation,!!(i===null||i(t,e,n)))},Kt.prototype.ex=function(t){var e=this.Lh;return e.text=t,e.measure(this.textBlock.th,1/0),e},Z.Object.defineProperties(Kt.prototype,{textBlock:{get:function(){return this.ga},set:function(t){this.ga=t}},currentTextEditor:{get:function(){return this.m},set:function(t){this.m=t}},defaultTextEditor:{get:function(){return this.j},set:function(t){this.j=t}},starting:{get:function(){return this.W},set:function(t){this.W=t}},textValidation:{get:function(){return this.ij},set:function(t){this.ij=t}},minimumEditorScale:{get:function(){return this.u},set:function(t){this.u=t}},selectsTextOnActivate:{get:function(){return this.F},set:function(t){this.F=t}},state:{get:function(){return this.na},set:function(t){this.na!==t&&(this.na=t)}}}),Kt.prototype.measureTemporaryTextBlock=Kt.prototype.ex;var c0=new J(Kt,"LostFocus",0),Pu=new J(Kt,"MouseDown",1),of=new J(Kt,"Tab",2),wu=new J(Kt,"Enter",3),Hy=new J(Kt,"SingleClick",0),rf=new J(Kt,"SingleClickSelected",1),m0=new J(Kt,"DoubleClick",2),Zh=new J(Kt,"StateNone",0),_h=new J(Kt,"StateActive",1),Lu=new J(Kt,"StateEditing",2),sf=new J(Kt,"StateValidating",3),$h=new J(Kt,"StateInvalid",4),af=new J(Kt,"StateValidated",5),zs=null;Kt.className="TextEditingTool",Kt.LostFocus=c0,Kt.MouseDown=Pu,Kt.Tab=of,Kt.Enter=wu,Kt.SingleClick=Hy,Kt.SingleClickSelected=rf,Kt.DoubleClick=m0,Kt.StateNone=Zh,Kt.StateActive=_h,Kt.StateEditing=Lu,Kt.StateValidating=sf,Kt.StateInvalid=$h,Kt.StateValidated=af,Hn("textEditingTool",function(){return this.findTool("TextEditing")},function(t){this.fb("TextEditing",t,this.mouseUpTools)});function $n(t){Tu||(S0(),Tu=!0),this.H=za,this.uk=this.zb=this.Op=this.Zb=!1,this.kw=!0,this.vk=Cu,this.bm=!1,this.rh=this.wd=!0,this.pg=600,this.xv=this.iw=!1,this.Od=new H,this.Sd=new be,this.Sd.Nd=this,this.ri=new H,this.Lt=new H,this.jr=new H,this.Uk=new H,t&&Object.assign(this,t)}$n.prototype.Je=function(t){this.H=t},$n.prototype.canStart=function(){return!0};function Jo(t,e){t.wd&&t.canStart(e)&&(t.Od.add(e),t.defaultAnimation.isAnimating&&t.wc(),rn(t.H),t.zb=!0)}function hf(t){if(t.wd&&t.zb){var e=t.Sd,n=t.H,i=t.Od.contains("Model");i&&(t.uk=!0,t.vk===Cu?(e.isViewportUnconstrained=!0,e.rc.clear(),e.add(n,"position",n.position.copy().offset(0,-200),n.position),e.add(n,"opacity",0,1)):t.vk===w0&&e.rc.clear(),t.kw=!!(t.vk===P0&&n.zt.C(n.pa)),n.P("InitialAnimationStarting",t)),i&&!t.rh||e.rc.count===0?(t.Od.clear(),t.zb=!1,e.rc.clear(),Fu(e,n),t.uk=!1,n.N()):(t.Od.clear(),n.Zf=!1,i=e.rc.get(n),n.autoScale!==Qn&&i!==null&&(delete i.start.scale,delete i.end.scale),it.requestAnimationFrame(function(){t.zb===!1||e.Zb||(n.Ee("temporaryPixelRatio")&&Qh(n),pf(n),t.zb=!1,e.start(),e.Zb&&(Ga(t),n.Wa(),M0(e,0),Zo(n,!0),Oa(t),n.P("AnimationStarting",t)))}))}}function Mu(t){return t.Od.contains("Trigger")&&t.Od.count===1}function x0(t,e,n,i){t.isTicking||Mu(t)||e instanceof U&&(e.fromNode!==null||e.toNode!==null)||t.Sd.add(e,"position",n,i,!1)}a=$n.prototype,a.Wr=function(t){return this.Sd.Wr(t)},a.xu=function(t){return this.Sd.xu(t)};function Wy(t,e){function n(){if(0<r.jr.count&&(i.addAll(r.jr),r.jr.clear(),r.Zb=!0),r.Zb!==!1&&i.count!==0){r.Lt.addAll(i);for(var s=r.Lt.iterator;s.next();){var h=s.value;if(h.Zb!==!1){t:if(0<h.dl.count)var u=!0;else{for(u=h.rc.iterator;u.next();){var p=u.key;if(p instanceof nt&&p.diagram!==null||p instanceof I){u=!0;break t}}u=!1}u?L0(h,!1):h.Dk=!0}}r.Lt.clear(),r.Zb!==!1&&(Ga(r),Zo(r.H),Oa(r)),it.requestAnimationFrame(n)}}var i=t.ri,r=t;t.Zb?t.jr.add(e):(t.Zb=!0,i.add(e),it.requestAnimationFrame(function(){n()}))}function Jy(t){for(t=t.ri.iterator;t.next();)t.value.Dk=!1}function Ga(t){if(!t.Op){var e=t.H;t.iw=e.skipsUndoManager,t.xv=e.skipsModelSourceBindings,e.skipsUndoManager=!0,e.skipsModelSourceBindings=!0,t.Op=!0}}function Oa(t){var e=t.H;e.skipsUndoManager=t.iw,e.skipsModelSourceBindings=t.xv,t.Op=!1}a.wc=function(t){var e=this.Sd;if(this.zb===!0&&(this.uk=this.zb=!1,this.Od.clear(),0<e.rc.count&&this.H.Kb()),this.Zb){if(e.ll(!0),e.rc.clear(),Fu(e,null),t===!0)for(t=this.ri.Da(),e=0;e<t.length;e++)t[e].ll(!0)}else e.rc.clear(),Fu(e,this.H)},a.ll=function(t){t===this.defaultAnimation&&this.defaultAnimation.rc.clear(),this.ri.remove(t),this.ri.count===0&&(this.Zb=!1,this.H.Kb()),t===this.defaultAnimation&&(this.defaultAnimation.rc.clear(),this.H.P("AnimationFinished",this))},a.pj=function(t,e){this.zb&&(this.Od.contains("Expand Tree")||this.Od.contains("Expand SubGraph"))&&(this.Sd.pj(t,e),v0(this,t))},a.nj=function(t,e){this.zb&&(this.Od.contains("Collapse Tree")||this.Od.contains("Collapse SubGraph"))&&(this.Sd.nj(t,e),lf(this.Sd,e,"position",e.position,e.position),v0(this,t))};function y0(t,e,n){!t.zb||e.C(n)||Mu(t)||(t.H.ci||(e=n.copy()),lf(t.Sd,t.H,"position",e,n))}function v0(t,e){for(e=e.findLinksConnected();e.next();){var n=e.value;n.bf=n.points.copy(),t.Uk.add(n)}}function ku(t,e,n,i,r){t===null&&(t=[0,0,0,0]),e===null&&(e=[0,0,0,0]);var s=t[0],h=t[1],u=t[2];t=t[3];var p=e[0],d=e[1],g=e[2];return e=e[3],u===0||u===100?(s=p,h=d):(g===0||g===100)&&(p=s,d=h),180<Math.abs(p-s)&&(p>s?s+=360:p+=360),s=r(n,s,p-s,i)%360,h=r(n,h,d-h,i),u=r(n,u,g-u,i),n=r(n,t,e-t,i),"hsla("+s+", "+h+"%, "+u+"%, "+n+")"}function S0(){function t(n,i,r,s,h,u){n.position=new T(s(h,i.x,r.x-i.x,u),s(h,i.y,r.y-i.y,u))}var e=new pt;e.add("position:diagram",t),e.add("position",t),e.add("position:part",function(n,i,r,s,h,u){h<u?n.Ll(s(h,i.x,r.x-i.x,u),s(h,i.y,r.y-i.y,u),!1):n.position=new T(s(h,i.x,r.x-i.x,u),s(h,i.y,r.y-i.y,u))}),e.add("location",function(n,i,r,s,h,u){h<u?n.Ll(s(h,i.x,r.x-i.x,u),s(h,i.y,r.y-i.y,u),!0):n.location=new T(s(h,i.x,r.x-i.x,u),s(h,i.y,r.y-i.y,u))}),e.add("position:placeholder",function(n,i,r,s,h,u){h<u?n.Ll(s(h,i.x,r.x-i.x,u),s(h,i.y,r.y-i.y,u),!1):n.position=new T(s(h,i.x,r.x-i.x,u),s(h,i.y,r.y-i.y,u))}),e.add("position:nodeCollapse",function(n,i,r,s,h,u){var p=n.actualBounds,d=r.actualBounds;r=d.x+d.width/2-p.width/2,p=d.y+d.height/2-p.height/2,h<u?n.Ll(s(h,i.x,r-i.x,u),s(h,i.y,p-i.y,u),!1):n.position=new T(s(h,i.x,r-i.x,u),s(h,i.y,p-i.y,u))}),e.add("desiredSize",function(n,i,r,s,h,u){n.desiredSize=new E(s(h,i.width,r.width-i.width,u),s(h,i.height,r.height-i.height,u))}),e.add("width",function(n,i,r,s,h,u){n.width=s(h,i,r-i,u)}),e.add("height",function(n,i,r,s,h,u){n.height=s(h,i,r-i,u)}),e.add("fill",function(n,i,r,s,h,u){n.fill=ku(i,r,h,u,s)}),e.add("stroke",function(n,i,r,s,h,u){n.stroke=ku(i,r,h,u,s)}),e.add("strokeWidth",function(n,i,r,s,h,u){n.strokeWidth=s(h,i,r-i,u)}),e.add("strokeDashOffset",function(n,i,r,s,h,u){n.strokeDashOffset=s(h,i,r-i,u)}),e.add("background",function(n,i,r,s,h,u){n.background=ku(i,r,h,u,s)}),e.add("areaBackground",function(n,i,r,s,h,u){n.areaBackground=ku(i,r,h,u,s)}),e.add("opacity",function(n,i,r,s,h,u){n.opacity=s(h,i,r-i,u)}),e.add("scale",function(n,i,r,s,h,u){n.scale=s(h,i,r-i,u)}),e.add("angle",function(n,i,r,s,h,u){n.angle=s(h,i,r-i,u)}),Nu=e}Z.Object.defineProperties($n.prototype,{animationReasons:{get:function(){return this.Od}},isEnabled:{get:function(){return this.wd},set:function(t){(this.wd=t)&&this.ri.each(function(e){e.isAnimating||e.runCount!==1/0||e.start()})}},duration:{get:function(){return this.pg},set:function(t){1>t&&Rt(t,">= 1",$n,"duration"),this.pg=t}},isAnimating:{get:function(){return this.Zb}},isTicking:{get:function(){return this.Op}},isInitial:{get:function(){return this.rh},set:function(t){this.rh=t}},defaultAnimation:{get:function(){return this.Sd}},activeAnimations:{get:function(){return this.ri}},initialAnimationStyle:{get:function(){return this.vk},set:function(t){this.vk=t}}}),$n.prototype.stopAnimation=$n.prototype.wc;var Nu=null,Tu=!1,Cu=new J($n,"Default",1),P0=new J($n,"AnimateLocations",2),w0=new J($n,"None",3);$n.className="AnimationManager",$n.defineAnimationEffect=function(t,e){Tu||(S0(),Tu=!0),Nu.add(t,e)},$n.Default=Cu,$n.AnimateLocations=P0,$n.None=w0;function be(t){this.Rt=this.hw=this.Nd=this.H=null,this.Dk=this.Zb=this.j=!1,this.Am=this.Dd=0,this.fp=this.Is=k0,this.Ck=this.Bn=!1,this.yt=1,this.wt=0,this.ud=this.pg=NaN,this.Bv=0,this.Bm=null,this.m=Zi,this.rc=new pt,this.ot=new pt,this.dl=new H,this.pt=new H,this.yv=us,t&&Object.assign(this,t)}be.prototype.suspend=function(){this.Dk=!0},be.prototype.advanceTo=function(t,e){e&&(this.Dk=!1),this.Bn&&t>=this.ud&&(this.Ck=!0,t-=this.ud),this.Bv=t,L0(this,!0),Ga(this.Nd),Zo(this.H),Oa(this.Nd),this.H.redraw()};function Fu(t,e){if(t.ot.clear(),t.Ck=!1,t.wt=0,t.ud=NaN,0<t.dl.count&&t.dl.clear(),0<t.pt.count&&t.pt.clear(),e!==null)for(t=e.links;t.next();)t.value.bf=null}a=be.prototype,a.start=function(){if(this.rc.count===0||this.Zb)return this;for(var t=this.H,e=this.rc.iterator;e.next();){var n=e.value.end,i=e.key;if(n["position:placeholder"]){var r=i.findVisibleNode();if(r instanceof ut&&r.placeholder!==null){var s=r.placeholder;r=s.ia(Qe),s=s.padding,r.x+=s.left,r.y+=s.top,n["position:placeholder"]=r}}t===null&&(i instanceof I?t=i:i instanceof nt&&(t=i.diagram))}if(t!==null)this.H=t,this.Nd=t.animationManager;else return this;return e=this.Nd,e.isEnabled===!1?this:(this.ud=isNaN(this.pg)?e.duration:this.pg,this.fp=this.Is,e.uk&&e.vk===Cu&&this===e.defaultAnimation&&(this.fp=N0,this.ud=isNaN(this.pg)?e.duration===600?900:e.duration:this.pg),this.yv=t.scrollMode,this.isViewportUnconstrained&&(t.fj=Df),Ga(e),this.dl.each(function(h){h.data=null,t.add(h)}),Oa(e),this.Zb=!0,this.Dd=+new Date,this.Am=this.Dd+this.ud,Wy(e,this),this)},a.$x=function(t,e){return t.Rc()?(this.dl.add(t),this.H=e,this):this},a.add=function(t,e,n,i,r){if(e==="position"&&n.C(i))return this;if(this.H===null&&(t instanceof I?this.H=t:t instanceof nt&&t.diagram!==null&&(this.H=t.diagram)),t instanceof ot){if(!t.isAnimated)return this;e==="position"&&(e="position:part")}return lf(this,t,e,n,i,r),this};function lf(t,e,n,i,r,s){var h=t.rc;if(e instanceof I&&n==="position"&&(n="position:diagram"),(n==="fill"||n==="stroke"||n==="background"||n==="areaBackground")&&(jo(i),Xf(),i=[Rn.j,Rn.u,Rn.m,Rn.F],jo(r),Xf(),r=[Rn.j,Rn.u,Rn.m,Rn.F]),h.contains(e)){var u=h.I(e),p=u.start,d=u.end;p[n]===void 0&&(p[n]=Ia(i)),d[n]=Ia(r)}else p={},d={},p[n]=Ia(i),d[n]=Ia(r),u=p.position,e instanceof nt&&u instanceof T&&!u.w()&&e.diagram.animationManager.Od.contains("Expand SubGraph")&&u.assign(d.position),u=new T0(p,d,s),h.add(e,u);h=p[n],h instanceof T&&!h.w()&&h.assign(t.m),s&&n.indexOf("position:")===0&&e instanceof ot?u.iu.location=Ia(e.location):s&&(u.iu[n]=Ia(i))}function Ia(t){return t instanceof T||t instanceof ht?t.copy():t}a.Wr=function(t){return this.Zb?(t=this.rc.I(t),t!==null&&t.Mu):!1},a.xu=function(t){return this.Zb?(t=this.rc.I(t),t!==null&&(t.start.position||t.start.location)):!1};function L0(t,e){if(!t.Dk||e){var n=t.Nd;if(t.Zb!==!1){var i=+new Date,r=i>t.Am?t.ud:i-t.Dd;e&&(r=t.Bv,r<t.ud?(t.Dd=+new Date-r,t.Am=t.Dd+t.ud):r=t.ud),Ga(n),M0(t,r),Zo(t.H,!0),Oa(n),i>t.Am&&(t.Bn&&!t.Ck?(t.Dd=+new Date,t.Am=t.Dd+t.ud,t.Ck=!0):t.ll(!1))}}}function M0(t,e){for(var n=t.ud,i=t.rc.iterator,r=t.Ck;i.next();){var s=i.key;if(!(s instanceof nt&&s.diagram===null)){var h=i.value,u=r?h.end:h.start;h=r?h.start:h.end;var p=Nu,d;for(d in h)d==="position"&&(h["position:placeholder"]||h["position:nodeCollapse"])||p.get(d)===null||p.get(d)(s,u[d],h[d],t.fp,e,n,t)}}}a.stop=function(){return this.Zb?(this.ll(!0),this):this},a.ll=function(t){if(this.Rt!==null&&this.Rt.Dn.remove(this.hw),this.Zb){var e=this.H,n=this.Nd;this.Dk=this.Zb=n.uk=!1,Ga(n);for(var i=this.rc,r=this.dl.iterator;r.next();)e.remove(r.value);for(r=this.pt.iterator;r.next();)r.value.v();r=this.Bn,i=i.iterator;for(var s=Nu;i.next();){var h=i.key,u=i.value,p=r?u.end:u.start,d=r?u.start:u.end,g=u.iu,c;for(c in d)if(s.get(c)!==null){var y=c;!u.du||y!=="position:nodeCollapse"&&y!=="position:placeholder"||(y="position"),s.get(y)(h,p[c],g[c]!==void 0?g[c]:u.du?p[c]:d[c],this.fp,this.ud,this.ud,this)}u.du&&g.location!==void 0&&h instanceof ot&&(h.location=g.location),u.Mu&&h instanceof ot&&h.Tb(!1)}if(e.Rr.clear(),ju(e,!1),e.Wa(),e.N(),Zo(e,!0),n.defaultAnimation===this){for(c=n.Uk.iterator;c.next();)r=c.value,r.bf!==null&&(r.points=r.bf,r.bf=null);n.Uk.clear()}Zo(e,!0),this.isViewportUnconstrained&&(e.scrollMode=this.yv),Oa(n),this.wt++,!t&&this.yt>this.wt?(this.Ck=!1,this.start()):(this.Bm&&this.Bm(this),Fu(this,null),n.ll(this),e.Kb())}},a.pj=function(t,e){var n=e.actualBounds,i=null;if(e instanceof ut&&(i=e.placeholder),i!==null?(n=i.ia(Qe),i=i.padding,n.x+=i.left,n.y+=i.top,this.add(t,"position",n,t.position,!1)):this.add(t,"position",new T(n.x+n.width/2,n.y+n.height/2),t.position,!1),this.add(t,"scale",.01,t.scale,!1),t instanceof ut)for(t=t.memberParts;t.next();)i=t.value,i instanceof _&&this.pj(i,e)},a.nj=function(t,e){if(t.isVisible()){var n=null;if(e instanceof ut&&(n=e.placeholder),n!==null?this.add(t,"position:placeholder",t.position,n,!0):this.add(t,"position:nodeCollapse",t.position,e,!0),this.add(t,"scale",t.scale,.01,!0),n=this.rc,n.contains(t)&&(n.I(t).Mu=!0),t instanceof ut)for(t=t.memberParts;t.next();)n=t.value,n instanceof _&&this.nj(n,e)}},a.Yy=function(t){var e=this.ot.get(t);return e===null&&(e={},this.ot.add(t,e)),e},Z.Object.defineProperties(be.prototype,{duration:{get:function(){return this.pg},set:function(t){1>t&&Rt(t,">= 1",be,"duration"),this.pg=t}},reversible:{get:function(){return this.Bn},set:function(t){this.Bn=t}},runCount:{get:function(){return this.yt},set:function(t){0<t?this.yt=t:X("Animation.runCount value must be a positive integer.")}},finished:{get:function(){return this.Bm},set:function(t){this.Bm!==t&&(this.Bm=t)}},easing:{get:function(){return this.Is},set:function(t){this.Is=t}},isViewportUnconstrained:{get:function(){return this.j},set:function(t){this.j=t}},isAnimating:{get:function(){return this.Zb}}}),be.prototype.getTemporaryState=be.prototype.Yy,be.prototype.stop=be.prototype.stop,be.prototype.add=be.prototype.add,be.prototype.addTemporaryPart=be.prototype.$x;function k0(t,e,n,i){return t/=i/2,1>t?n/2*t*t+e:-n/2*(--t*(t-2)-1)+e}function N0(t,e,n,i){return t===i?e+n:n*(-Math.pow(2,-10*t/i)+1)+e}be.className="Animation",be.EaseLinear=function(t,e,n,i){return n*t/i+e},be.EaseInOutQuad=k0,be.EaseInQuad=function(t,e,n,i){return n*(t/=i)*t+e},be.EaseOutQuad=function(t,e,n,i){return-n*(t/=i)*(t-2)+e},be.EaseInExpo=function(t,e,n,i){return t===0?e:n*Math.pow(2,10*(t/i-1))+e},be.EaseOutExpo=N0;function T0(t,e,n){this.start=t,this.end=e,this.iu={},this.du=n,this.Mu=!1}T0.className="AnimationState";function ho(t,e,n){this.pd=null,this.af=t,this.Mn=n||C0,this.Zj=null,e!==void 0&&(this.Zj=e,n===void 0&&(this.Mn=uf))}ho.prototype.copy=function(){var t=new ho(this.af);t.Mn=this.Mn;var e=this.Zj;if(e!==null){var n={};e.duration!==void 0&&(n.duration=e.duration),e.finished!==void 0&&(n.finished=e.finished),e.easing!==void 0&&(n.easing=e.easing),t.Zj=n}return t};function Zy(t,e){t=t.Zj,t!==null&&(t.duration&&(e.duration=t.duration),t.finished&&(e.finished=t.finished),t.easing&&(e.easing=t.easing))}Z.Object.defineProperties(ho.prototype,{propertyName:{get:function(){return this.af},set:function(t){this.af=t}},animationSettings:{get:function(){return this.Zj},set:function(t){this.Zj=t}},startCondition:{get:function(){return this.Mn},set:function(t){this.Mn=t}}});var C0=new J(ho,"Default",1),uf=new J(ho,"Immediate",2),F0=new J(ho,"Bundled",3);ho.className="AnimationTrigger",ho.Default=C0,ho.Immediate=uf,ho.Bundled=F0;function qe(t){ce(this),this.H=null,this.La=new Q,this.va="",this.tb=1,this.m=!1,this.j=this.Gh=this.u=this.Bi=this.Ai=this.zi=this.yi=this.wi=this.xi=this.vi=this.Di=this.ui=this.Ci=this.ti=this.si=!0,this.sn=[],t&&Object.assign(this,t)}a=qe.prototype,a.clear=function(){this.La.clear(),this.sn.length=0},a.Je=function(t){this.H=t},a.toString=function(t){t===void 0&&(t=0);var e='Layer "'+this.name+'"';if(0>=t)return e;for(var n=0,i=0,r=0,s=0,h=0,u=this.La.iterator;u.next();){var p=u.value;p instanceof ut?r++:p instanceof _?i++:p instanceof U?s++:p instanceof St?h++:n++}if(u="",0<n&&(u+=n+" Parts "),0<i&&(u+=i+" Nodes "),0<r&&(u+=r+" Groups "),0<s&&(u+=s+" Links "),0<h&&(u+=h+" Adornments "),1<t)for(t=this.La.iterator;t.next();)n=t.value,u+=`
    `+n.toString(),i=n.data,i!==null&&$e(i)&&(u+=" #"+$e(i)),n instanceof _?u+=" "+Kn(i):n instanceof U&&(u+=" "+Kn(n.fromNode)+" "+Kn(n.toNode));return e+" "+this.La.count+": "+u},a.dc=function(t,e,n){if(e===void 0&&(e=null),n===void 0&&(n=null),this.Gh===!1)return null;var i=!1;this.diagram!==null&&this.diagram.viewportBounds.ba(t)&&(i=!0);for(var r=T.alloc(),s=this.La.s,h=s.length;h--;){var u=s[h];if((i!==!0||Ir(u)!==!1)&&u.isVisible()&&(r.assign(t),Ue(r,u.de),u=u.dc(r,e,n),u!==null&&(e!==null&&(u=e(u)),u!==null&&(n===null||n(u)))))return T.free(r),u}return T.free(r),null},a.Xh=function(t,e,n,i){if(e===void 0&&(e=null),n===void 0&&(n=null),i instanceof Q||i instanceof H||(i=new H),this.Gh===!1)return i;var r=!1;this.diagram!==null&&this.diagram.viewportBounds.ba(t)&&(r=!0);for(var s=T.alloc(),h=this.La.s,u=h.length;u--;){var p=h[u];if((r!==!0||Ir(p)!==!1)&&p.isVisible()){s.assign(t),Ue(s,p.de);var d=p;p.Xh(s,e,n,i)&&(e!==null&&(d=e(d)),d===null||n!==null&&!n(d)||i.add(d))}}return T.free(s),i},a.pf=function(t,e,n,i,r){if(e===void 0&&(e=null),n===void 0&&(n=null),i===void 0&&(i=!1),r instanceof Q||r instanceof H||(r=new H),this.Gh===!1)return r;var s=!1;this.diagram!==null&&this.diagram.viewportBounds.Ce(t)&&(s=!0);for(var h=this.La.s,u=h.length;u--;){var p=h[u];if((s!==!0||Ir(p)!==!1)&&p.isVisible()){var d=p;p.pf(t,e,n,i,r)&&(e!==null&&(d=e(d)),d===null||n!==null&&!n(d)||r.add(d))}}return r},a.nu=function(t,e,n,i,r,s,h){if(this.Gh===!1)return r;for(var u=this.La.s,p=u.length;p--;){var d=u[p];if((h!==!0||Ir(d)!==!1)&&s(d)&&d.isVisible()){var g=d;d.pf(t,e,n,i,r)&&(e!==null&&(g=e(g)),g===null||n!==null&&!n(g)||r.add(g))}}return r},a.bg=function(t,e,n,i,r,s){if(n===void 0&&(n=null),i===void 0&&(i=null),r===void 0&&(r=!0),r!==!1&&r!==!0&&((r instanceof Q||r instanceof H)&&(s=r),r=!0),s instanceof Q||s instanceof H||(s=new H),this.Gh===!1)return s;var h=!1;this.diagram!==null&&this.diagram.viewportBounds.ba(t)&&(h=!0);for(var u=T.alloc(),p=T.alloc(),d=this.La.s,g=d.length;g--;){var c=d[g];if((h!==!0||Ir(c)!==!1)&&c.isVisible()){u.assign(t),Ue(u,c.de),p.h(t.x+e,t.y),Ue(p,c.de);var y=c;c.bg(u,p,n,i,r,s)&&(n!==null&&(y=n(y)),y===null||i!==null&&!i(y)||s.add(y))}}return T.free(u),T.free(p),s},a.Ld=function(t,e){if(this.visible){var n=this.La.s,i=n.length;if(i!==0){t=Yt();for(var r=Yt(),s=0;s<i;s++){var h=n[s];if(h.Rv=s,h instanceof U){if(h.td===!1)continue}else if(h instanceof St&&h.adornedPart!==null)continue;var u=h.actualBounds;h.isVisible()&&Oc(u,e)?(h.Ld(!0),t.push(h)):(h.Ld(!1),h.adornments!==null&&0<h.adornments.count&&r.push(h))}for(e=0;e<t.length;e++)for(n=t[e],mg(n),n=n.adornments;n.next();)i=n.value,i.measure(1/0,1/0),i.arrange(),i.Ld(!0);for(e=0;e<r.length;e++)mg(r[e]);At(t),At(r)}}};function Aa(t,e){var n=1;return t.tb!==1&&(n=e.globalAlpha,e.globalAlpha=n*t.tb),n}a.tc=function(t,e,n){if(this.visible&&this.tb!==0&&(n===void 0&&(n=!0),n||!this.isTemporary)){n=this.La.s;var i=n.length;if(i!==0){var r=Aa(this,t),s=this.sn;s.length=0;for(var h=e.scale,u=E.alloc(),p=0;p<i;p++)this.Th(t,n[p],e,s,h,u,!0);E.free(u),t.globalAlpha=r}}},a.Th=function(t,e,n,i,r,s,h){if(!h||Ir(e)){if(i!==null&&e instanceof U&&(e.isOrthogonal&&i.push(e),e.td===!1))return;for(h=!1,i=e.containingGroup;i!==null;)h?i.hb!==null&&s.Vw(i.hb):i.hb!==null&&(h=!0,s.assign(i.hb)),i=i.containingGroup;var u=e.actualBounds;if(i=!1,h&&e.isVisible()){if(!s.Qc(u))return;i=!s.Ce(u)}i&&(t.save(),t.beginPath(),t.rect(s.x,s.y,s.width,s.height),t.clip()),u.width*r>n.hq||u.height*r>n.hq?e.tc(t,n):(r=e.actualBounds,s=e.naturalBounds,r.width===0||r.height===0||isNaN(r.x)||isNaN(r.y)||!e.isVisible()||(n=e.transform,e.areaBackground!==null&&(En(e,t,e.areaBackground,!0,!0,s,r),t.fillRect(r.x,r.y,r.width,r.height)),e.areaBackground===null&&e.background===null&&(En(e,t,"rgba(0,0,0,0.3)",!0,!1,s,r),t.fillRect(r.x,r.y,r.width,r.height)),e.background!==null&&(t.transform(n.m11,n.m12,n.m21,n.m22,n.dx,n.dy),En(e,t,e.background,!0,!1,s,r),t.fillRect(0,0,s.width/2,s.height/2),n.Mr()||(e=1/(n.m11*n.m22-n.m12*n.m21),t.transform(n.m22*e,-n.m12*e,-n.m21*e,n.m11*e,e*(n.m21*n.dy-n.m22*n.dx),e*(n.m12*n.dx-n.m11*n.dy)))))),i&&(t.restore(),t.Mc(!0))}},a.g=function(t,e,n,i,r){var s=this.diagram;s!==null&&s.bb(Ht,t,this,e,n,i,r)},a.bi=function(t,e,n){var i=this.La;if(e.uh=this,t>=i.count)t=i.count;else if(i.L(t)===e)return-1;return i.Cb(t,e),e.po(n),i=this.diagram,i!==null&&(n?i.N():i.bi(e)),Bu(this,t,e),t},a.kc=function(t,e,n){if(!n&&e.layer!==this&&e.layer!==null)return e.layer.kc(t,e,n);var i=this.La;if(0>t||t>=i.length){if(t=i.indexOf(e),0>t)return-1}else if(i.L(t)!==e&&(t=i.indexOf(e),0>t))return-1;return e.qo(n),i.lb(t),i=this.diagram,i!==null&&(n?i.N():i.kc(e)),e.uh=null,t};function Bu(t,e,n){if(e=_y(t,e,n),n instanceof ut&&n!==null&&isNaN(n.zOrder)){if(n.memberParts.count!==0){for(var i=-1,r=t.La.s,s=r.length,h=0;h<s;h++){var u=r[h];if(u===n&&(e=h,0<=i)||0>i&&u.containingGroup===n&&(i=h,0<=e))break}!(0>i)&&i<e&&(r=t.La,r.lb(e),r.Cb(i,n))}n=n.containingGroup,n!==null&&Bu(t,-1,n)}}function _y(t,e,n){var i=n.zOrder;if(isNaN(i))return e;t=t.La;var r=t.count;if(1>=r)return e;if(0>e&&(e=t.indexOf(n)),0>e)return-1;for(var s=e-1,h=NaN;0<=s&&(h=t.L(s).zOrder,!!isNaN(h));)s--;for(var u=e+1,p=NaN;u<r&&(p=t.L(u).zOrder,!!isNaN(p));)u++;if(!isNaN(h)&&h>i)for(;;){if(s===-1||h<=i){if(s++,s===e)break;return t.lb(e),t.Cb(s,n),s}for(h=NaN;0<=--s&&(h=t.L(s).zOrder,isNaN(h)););}else if(!isNaN(p)&&p<i)for(;;){if(u===r||p>=i){if(u--,u===e)break;return t.lb(e),t.Cb(u,n),u}for(p=NaN;++u<r&&(p=t.L(u).zOrder,isNaN(p)););}return e}Z.Object.defineProperties(qe.prototype,{parts:{get:function(){return this.La.iterator}},partsBackwards:{get:function(){return this.La.iteratorBackwards}},diagram:{get:function(){return this.H}},name:{get:function(){return this.va},set:function(t){var e=this.va;if(e!==t){var n=this.diagram;if(n!==null)for(e===""&&X("Cannot rename default Layer to: "+t),n=n.layers;n.next();)n.value.name===t&&X("Layer.name is already present in this diagram: "+t);for(this.va=t,this.g("name",e,t),t=this.La.iterator;t.next();)t.value.layerName=this.va}}},opacity:{get:function(){return this.tb},set:function(t){var e=this.tb;e!==t&&((0>t||1<t)&&Rt(t,"0 <= value <= 1",qe,"opacity"),this.tb=t,this.g("opacity",e,t),t=this.diagram,t!==null&&t.N())}},isTemporary:{get:function(){return this.m},set:function(t){var e=this.m;e!==t&&((this.m=t)&&(this.isInDocumentBounds=!1),this.g("isTemporary",e,t))}},visible:{get:function(){return this.u},set:function(t){var e=this.u;if(e!==t){for(this.u=t,this.g("visible",e,t),e=this.La.iterator;e.next();)e.value.Tb(t);t=this.diagram,t!==null&&t.N()}}},pickable:{get:function(){return this.Gh},set:function(t){var e=this.Gh;e!==t&&(this.Gh=t,this.g("pickable",e,t))}},isInDocumentBounds:{get:function(){return this.j},set:function(t){this.j!==t&&(this.j=t,this.diagram!==null&&this.diagram.Wa())}},allowCopy:{get:function(){return this.si},set:function(t){var e=this.si;e!==t&&(this.si=t,this.g("allowCopy",e,t))}},allowDelete:{get:function(){return this.ti},set:function(t){var e=this.ti;e!==t&&(this.ti=t,this.g("allowDelete",e,t))}},allowTextEdit:{get:function(){return this.Ci},set:function(t){var e=this.Ci;e!==t&&(this.Ci=t,this.g("allowTextEdit",e,t))}},allowGroup:{get:function(){return this.ui},set:function(t){var e=this.ui;e!==t&&(this.ui=t,this.g("allowGroup",e,t))}},allowUngroup:{get:function(){return this.Di},set:function(t){var e=this.Di;e!==t&&(this.Di=t,this.g("allowUngroup",e,t))}},allowLink:{get:function(){return this.vi},set:function(t){var e=this.vi;e!==t&&(this.vi=t,this.g("allowLink",e,t))}},allowRelink:{get:function(){return this.xi},set:function(t){var e=this.xi;e!==t&&(this.xi=t,this.g("allowRelink",e,t))}},allowMove:{get:function(){return this.wi},set:function(t){var e=this.wi;e!==t&&(this.wi=t,this.g("allowMove",e,t))}},allowReshape:{get:function(){return this.yi},set:function(t){var e=this.yi;e!==t&&(this.yi=t,this.g("allowReshape",e,t))}},allowResize:{get:function(){return this.zi},set:function(t){var e=this.zi;e!==t&&(this.zi=t,this.g("allowResize",e,t))}},allowRotate:{get:function(){return this.Ai},set:function(t){var e=this.Ai;e!==t&&(this.Ai=t,this.g("allowRotate",e,t))}},allowSelect:{get:function(){return this.Bi},set:function(t){var e=this.Bi;e!==t&&(this.Bi=t,this.g("allowSelect",e,t))}}}),qe.prototype.findObjectsNear=qe.prototype.bg,qe.prototype.findObjectsIn=qe.prototype.pf,qe.prototype.findObjectsAt=qe.prototype.Xh,qe.prototype.findObjectAt=qe.prototype.dc,qe.className="Layer";function I(t,e){if(om||(av(),om=!0),ce(this),za=this,this.wb=!0,this.Ka=null,this.ya=this.Aa=0,this.Ha=null,yi){var n=this,i=function(){n.removeEventListener(it.document,"DOMContentLoaded",i,!1),n.setRTL()};it.document.body!==null?this.setRTL():n.addEventListener(it.document,"DOMContentLoaded",i,!1)}this.Tk=null,Iu.add("Model",Ct);var r=this;return this.Db=function(s){var h=r.partManager;if(s.model===h.diagram.model&&h.diagram.$){h.diagram.$=!1;try{var u=s.change;s.modelChange===""&&u===Ht&&h.updateDataBindings(s.object,s.propertyName)}finally{h.diagram.$=!0}}},this.Gc=function(s){r.partManager.doModelChanged(s)},this.Dt=this.Gt=null,j0(this),this.model=Wg(),this.Gg=!0,O0(this),this.layout=new Ut,this.Gg=!1,this.Lj=this.Oj=this.Pj=this.Nj=this.Mj=this.sz=this.Jj=this.iv=null,this.Ao=function(){},this.preventDefault=null,this.Om=!1,this.qh=new rm,t!==void 0&&(typeof t=="string"||it.Element&&t instanceof Element?Af(this,t):e=t),this.wb=!1,e&&this.Ml(e),this}var B0,za;function j0(t){t.Nd=new $n,t.Nd.Je(t),t.Ab=17,t.aw=!1,t.Qm=!1,t.xt="default",t.Va=new Q,t.Mx=new pt,t.ox(),t.nx(),t.tb=1,t.pa=new T(NaN,NaN).freeze(),t.zt=new T(NaN,NaN),t.wa=1,t.jp=1,t.Ts=new T(NaN,NaN).freeze(),t.Us=NaN,t.jt=1e-4,t.ft=100,t.Bb=new ct,t.Vt=new T(NaN,NaN).freeze(),t.Os=new E(NaN,NaN,NaN,NaN).freeze(),t.ej=new Ft(0,0,0,0).freeze(),t.fj=us,t.Jt=!1,t.ut=null,t.Bt=null,t.ih=Qn,t.dk=He,t.rg=Qn,t.Ip=He,t.Ss=Qe,t.Vs=Qe,t.Zc=!0,t.Mm=!1,t.qe=new H,t.oh=new pt,t.vm=!0,t.Po=250,t.$j=-1,t.Ro=new Ft(16,16,16,16).freeze(),t.Zf=!1,t.nk=!1,t.Dm=!0,t.wp=new _n,t.wp.diagram=t,t.Bg=new _n,t.Bg.diagram=t,t.Ri=new _n,t.Ri.diagram=t,t.lg=null,t.Ze=null,t.Mt=!1,rv(t),t.Nh=new H,t.at=!0,t.Qt=Rs,t.Lv=!1,t.St=jf,t.Bs="auto",t.ip="auto",t.jh=null,t.ph=null,t.lh=null,t.Ch=null,t.Ah=null,t.zh=null,t.lt=null,t.xh=null,t.Rs=!1,t.yh=null,t.Bh=null,t.Mh=null,t.mh=null,t.mt=!1,t.tt={},t.cj=[null,null],t.Gg=!1,t.cw=!1,t.Kt=!1,t.Es=!1,t.Nv=!0,t.$c=!1,t.Oi=!1,t.nw=!0,t.pe=-2,t.zg=new pt,t.wn=new Q,t.sg=!1,t.wd=!0,t.ns=!0,t.si=!0,t.ti=!0,t.os=!1,t.ps=!0,t.Ci=!0,t.ui=!0,t.Di=!0,t.rs=!0,t.vi=!0,t.xi=!0,t.wi=!0,t.yi=!0,t.zi=!0,t.Ai=!0,t.Bi=!0,t.ss=!0,t.us=!0,t.Mv=!1,t.Bk=!1,t.Jm=!0,t.Km=!0,t.qs=!0,t.ts=!0,t.Et=16,t.It=16,t.Hq=!1,t.Ct=!1,t.Ht=0,t.Ft=0,t.ub=new Ft(5).freeze(),t.bw=new H().freeze(),t.gt=999999999,t.Jv=new H().freeze(),t.Li=!0,t.Mi=!0,t.Ni=!0,t.Te=!1,t.Lf=!1,t.hh=!0,t.Nf=!1,t.Lx=new H,t.Kv=new H,t.Jh=null,t.vv=new ht(8,8),t.wv=999,t.Wv=1,t.dw=0,t.gd={scale:1,position:new T,bounds:new E,xw:new ht,gx:new ht,Yw:!1},t.lw=new E(NaN,NaN,NaN,NaN).freeze(),t.Qn=new ht(NaN,NaN).freeze(),t.mp=new E(NaN,NaN,NaN,NaN).freeze(),t.bt=!1,t.wg=new pt;var e=new _,n=new Gt;n.bind(new ie("text","",Kn)),e.add(n),t.Hx=e,t.wg.add("",e),e=new _,n=new Gt,n.stroke="brown",n.bind(new ie("text","",Kn)),e.add(n),t.wg.add("Comment",e),e=new _,e.selectable=!1,e.avoidable=!1,n=new dt,n.figure="Ellipse",n.fill="black",n.stroke=null,n.desiredSize=new ht(3,3).ha(),e.add(n),t.wg.add("LinkLabel",e),t.Ki=new pt,e=new ut,e.selectionObjectName="GROUPPANEL",e.type=Y.Vertical,n=new Gt,n.font="bold 12pt sans-serif",n.bind(new ie("text","",Kn)),e.add(n),n=new Y(Y.Auto),n.name="GROUPPANEL";var i=new dt;i.figure="Rectangle",i.fill="rgba(128,128,128,0.2)",i.stroke="black",n.add(i),i=new an,i.padding=new Ft(5,5,5,5).ha(),n.add(i),e.add(n),t.Fx=e,t.Ki.add("",e),t.wh=new pt,e=new U,n=new dt,n.isPanelMain=!0,e.add(n),n=new dt,n.toArrow="Standard",n.fill="black",n.stroke=null,n.strokeWidth=0,e.add(n),t.Gx=e,t.wh.add("",e),e=new U,n=new dt,n.isPanelMain=!0,n.stroke="brown",e.add(n),t.wh.add("Comment",e),e=new St,e.type=Y.Auto,n=new dt,n.fill=null,n.stroke="dodgerblue",n.strokeWidth=3,e.add(n),n=new an,n.margin=new Ft(1.5,1.5,1.5,1.5).ha(),e.add(n),t.nt=e,t.Qs=e,e=new St,e.type=Y.Link,n=new dt,n.isPanelMain=!0,n.fill=null,n.stroke="dodgerblue",n.strokeWidth=3,e.add(n),t.dt=e,t.Vd=null,t.Fp=!1,t.gk=null,t.partManager=new Ct,t.toolManager=new $t,t.toolManager.initializeStandardTools(),t.defaultTool=t.toolManager,t.currentTool=t.defaultTool,t.Gs=null,t.um=new Ua,t.qt=null,t.rt=null,t.cr=!1,t.commandHandler=G0(),t.dr=!1,t.yp=null,t.zp=Ds,t.jw=!1,t.jc=1,t.Kh=null,t.hq=1,t.lq=0,t.Uv=[0,0,0,0,0],t.mq=0,t.Rp=1,t.Pv=0,t.Qv=new T,t.Tx=500,t.Qo=new T,t.Pp=!1}I.prototype.clear=function(){this.animationManager.wc(),this.model.clear(),Va=null,il="",D0(this,!1),this.wn.clear(),ih(),this.zg.clear(),this.Jh=null,this.Wa(),this.Ta(),this.N()};function D0(t,e){t.animationManager.wc(!0),t.bw=new H().freeze(),t.Jv=new H().freeze();var n=t.skipsUndoManager,i=t.$b!==null&&t.$b!==void 0;i&&(t.skipsUndoManager=!0);var r=null;t.Vd!==null&&(r=t.Vd.part,r!==null&&t.remove(r));var s=[],h=t.Va.length;if(e){for(e=0;e<h;e++)for(var u=t.Va.s[e].parts;u.next();){var p=u.value;p!==r&&p.data===null&&s.push(p)}for(e=0;e<s.length;e++)t.remove(s[e])}for(e=0;e<h;e++)t.Va.s[e].clear();return t.partManager.clear(),t.qe.clear(),t.oh.clear(),t.Nh.clear(),t.gk=null,t.wn.clear(),ih(),t.zg.clear(),ma=[],r!==null&&(t.add(r),t.partManager.parts.remove(r)),i&&(t.skipsUndoManager=n),s}function G0(){return null}I.prototype.reset=function(){this.clear(),this.wb=!0,j0(this),bo(this),this.Gg=!0,O0(this),this.layout=new Ut,this.Gg=!1,this.model=Wg(),this.model.undoManager=new qt,this.wb=this.Om=!1,this.N()},I.prototype.setRTL=function(t){t=t===void 0?this.div:t,t===null&&(t=it.document.body);var e=_e("div");e.dir="rtl",e.style.cssText="font-size: 14px; width: 1px; height: 1px; position: absolute; top: -1000px; overflow: scroll;",e.textContent="A",t.appendChild(e);var n="reverse";0<e.scrollLeft?n="default":(e.scrollLeft=1,e.scrollLeft===0&&(n="negative")),t.removeChild(e),this.xt=n},I.prototype.setScrollWidth=function(t){t=t===void 0?this.div:t,t===null&&(t=it.document.body);var e=0;if(yi){var n=Q0;e=B0,n===null&&(n=Q0=_e("p"),n.style.width="100%",n.style.height="200px",n.style.boxSizing="content-box",e=B0=_e("div"),e.style.position="absolute",e.style.visibility="hidden",e.style.width="200px",e.style.height="150px",e.style.boxSizing="content-box",e.appendChild(n)),e.style.overflow="hidden",t.appendChild(e);var i=n.offsetWidth;e.style.overflow="scroll",n=n.offsetWidth,i===n&&(n=e.clientWidth),t.removeChild(e),e=i-n,e!==0||Ji||(e=11)}this.Ab=e,this.aw=!0},I.prototype.ob=function(t){t.classType===I&&(this.autoScale=t)},I.prototype.toString=function(t){t===void 0&&(t=0);var e="";if(this.div&&this.div.id&&(e=this.div.id),e='Diagram "'+e+'"',0>=t)return e;for(var n=this.Va.iterator;n.next();)e+=`
  `+n.value.toString(t-1);return e},I.prototype.addEventListener=function(t,e,n,i){t.addEventListener(e,n,{capture:i,passive:!1})},I.prototype.removeEventListener=function(t,e,n,i){t.removeEventListener(e,n,{capture:i})};function $y(t){var e=t.Ha.Sa;e instanceof HTMLCanvasElement&&(t.addEventListener(e,"pointerdown",t.Mj,!1),t.addEventListener(e,"pointermove",t.Nj,!1),t.addEventListener(e,"pointerup",t.Pj,!1),t.addEventListener(e,"pointerout",t.Oj,!1),t.addEventListener(e,"pointercancel",t.Lj,!1),t.addEventListener(e,"pointerenter",t.wy,!1),t.addEventListener(e,"pointerleave",t.xy,!1),t.addEventListener(e,"wheel",t.Jj,!1),t.addEventListener(e,"keydown",t.iz,!1),t.addEventListener(e,"keyup",t.jz,!1),t.addEventListener(e,"blur",t.hy,!1),t.addEventListener(e,"focus",t.iy,!1),t.addEventListener(e,"selectstart",function(n){return n.preventDefault(),!1},!1),t.addEventListener(e,"contextmenu",function(n){return n.preventDefault(),!1},!1),t.addEventListener(it,"resize",t.iv,!1))}function Qh(t){30<t.lq&&(t.Kh=1)}function ju(t,e){t.Kh!==null&&(t.Kh=null,e&&t.Ao(),js&&js.Hw||(t.lq=0,t.Uv=[0,0,0,0,0],t.mq=0))}I.prototype.computePixelRatio=function(){return this.Kh!==null?this.Kh:it.devicePixelRatio||1},I.prototype.doMouseMove=function(){this.currentTool.doMouseMove()},I.prototype.doMouseDown=function(){this.currentTool.doMouseDown()},I.prototype.doMouseUp=function(){this.currentTool.doMouseUp()},I.prototype.doMouseWheel=function(){this.currentTool.doMouseWheel()},I.prototype.doKeyDown=function(){this.currentTool.doKeyDown()},I.prototype.doKeyUp=function(){this.currentTool.doKeyUp()},I.prototype.doFocus=function(){this.focus()},I.prototype.focus=function(){if(this.Ha)if(this.scrollsPageOnFocus)this.Ha.focus();else{var t=it.scrollX||it.pageXOffset,e=it.scrollY||it.pageYOffset;this.Ha.focus(),it.scrollTo(t,e)}},I.prototype.iy=function(){this.H.P("GainedFocus")},I.prototype.hy=function(){this.H.P("LostFocus")};function pf(t){if(t.Ha!==null){var e=t.Ka;if(e!==null&&e.clientWidth!==0&&e.clientHeight!==0){t.aw||t.setScrollWidth();var n=t.Lf?t.Ab:0,i=t.Te?t.Ab:0,r=t.jc;t.jc=t.computePixelRatio(),t.jc!==r&&(t.Mm=!0,t.Kb()),(e.clientWidth!==t.Aa+n||e.clientHeight!==t.ya+i)&&(t.Mi=!0,t.Zc=!0,e=t.layout,e!==null&&e.isViewportSized&&t.autoScale===Qn&&(t.nk=!0,e.D()),t.$c||t.Kb())}}}function O0(t){var e=new qe;e.name="Background",t.el(e),e=new qe,e.name="",t.el(e),e=new qe,e.name="Foreground",t.el(e),e=new qe,e.name="Adornment",e.isTemporary=!0,e.isInDocumentBounds=!1,t.el(e),e=new qe,e.name="Tool",e.isTemporary=!0,e.isInDocumentBounds=!0,t.el(e),e=new qe,e.name="Grid",e.allowSelect=!1,e.pickable=!1,e.isTemporary=!0,e.isInDocumentBounds=!1,t.qw(e,t.Aj("Background"))}function I0(t){var e=new Y(Y.Grid);e.name="GRID";var n=new dt;return n.figure="LineH",n.stroke="lightgray",n.strokeWidth=.5,n.interval=1,e.add(n),n=new dt,n.figure="LineH",n.stroke="gray",n.strokeWidth=.5,n.interval=5,e.add(n),n=new dt,n.figure="LineH",n.stroke="gray",n.strokeWidth=1,n.interval=10,e.add(n),n=new dt,n.figure="LineV",n.stroke="lightgray",n.strokeWidth=.5,n.interval=1,e.add(n),n=new dt,n.figure="LineV",n.stroke="gray",n.strokeWidth=.5,n.interval=5,e.add(n),n=new dt,n.figure="LineV",n.stroke="gray",n.strokeWidth=1,n.interval=10,e.add(n),n=new ot,n.add(e),n.layerName="Grid",n.zOrder=0,n.isInDocumentBounds=!1,n.isAnimated=!1,n.pickable=!1,n.locationObjectName="GRID",t.add(n),t.partManager.parts.remove(n),e.visible=!1,e}function Qy(){this.H.Ct?this.H.Ct=!1:this.H.isEnabled?this.H.Ew(this):xf(this.H)}function by(t){this.H.isEnabled?(this.H.Ht=t.target.scrollTop,this.H.Ft=t.target.scrollLeft):xf(this.H)}I.prototype.Ew=function(t){if(this.Ha!==null){var e=this.Gt,n=this.Dt;this.Hq=!0;var i=this.documentBounds,r=this.viewportBounds,s=this.ej,h=i.x-s.left,u=i.y-s.top,p=i.width+s.left+s.right,d=i.height+s.top+s.bottom,g=i.right+s.right;s=i.bottom+s.bottom;var c=r.x;i=r.y;var y=r.width,S=r.height,v=r.right,L=r.bottom;r=this.scale;var N=t.scrollLeft;if(this.Qm)switch(this.xt){case"negative":N=N+t.scrollWidth-t.clientWidth;break;case"reverse":N=t.scrollWidth-N-t.clientWidth}var M=N;y<p||S<d?(N=T.allocAt(this.position.x,this.position.y),this.allowHorizontalScroll&&this.Ft!==M&&(N.x=M/r+h,this.Ft=M),this.allowVerticalScroll&&this.Ht!==t.scrollTop&&(N.y=t.scrollTop/r+u,this.Ht=t.scrollTop),this.position=N,T.free(N),this.Mi=this.Hq=!1):(N=T.alloc(),t.Ox&&this.allowHorizontalScroll&&(h<c&&(this.position=N.h(M+h,this.position.y)),g>v&&(this.position=N.h(-(e.scrollWidth-this.Aa)+M-this.Aa/r+g,this.position.y))),t.Px&&this.allowVerticalScroll&&(u<i&&(this.position=N.h(this.position.x,t.scrollTop+u)),s>L&&(this.position=N.h(this.position.x,-(e.scrollHeight-this.ya)+t.scrollTop-this.ya/r+s))),T.free(N),Br(this),this.Mi=this.Hq=!1,i=this.documentBounds,r=this.viewportBounds,g=i.right,v=r.right,s=i.bottom,L=r.bottom,h=i.x,c=r.x,u=i.y,i=r.y,y>=p&&h>=c&&g<=v&&(n.style.width="1px"),S>=d&&u>=i&&s<=L&&(n.style.height="1px"))}},I.prototype.computeBounds=function(t){return t===void 0&&(t=new E),rn(this),A0(this,t)};function A0(t,e){if(t.fixedBounds.w())return e.assign(t.fixedBounds),e.Wn(t.ub),e;for(var n=!0,i=t.Va.s,r=i.length,s=0;s<r;s++){var h=i[s];if(h.visible&&h.isInDocumentBounds){h=h.La.s;for(var u=h.length,p=0;p<u;p++){var d=h[p];d.isInDocumentBounds&&d.isVisible()&&(d=d.actualBounds,d.w()&&(n?(n=!1,e.assign(d)):e.Vc(d)))}}}return n&&e.h(0,0,0,0),e.Wn(t.ub),e}I.prototype.computePartsBounds=function(t,e){e===void 0&&(e=!1);var n=null;if(ue(t))for(var i=0;i<t.length;i++){var r=t[i];!e&&r instanceof U||(r.Ta(),n===null?n=r.actualBounds.copy():n.Vc(r.actualBounds))}else for(t=t.iterator;t.next();)i=t.value,!e&&i instanceof U||(i.Ta(),n===null?n=i.actualBounds.copy():n.Vc(i.actualBounds));return n===null?new E(NaN,NaN,0,0):n};function Ai(t,e){if((e||t.Nf)&&!t.wb&&t.Ha!==null&&t.documentBounds.w()){if(e){var n=t.initialPosition;if(n.w()){t.position=n;return}n=T.alloc(),n.hi(t.documentBounds,t.initialDocumentSpot);var i=t.viewportBounds;i=E.allocAt(0,0,i.width,i.height);var r=T.alloc();r.hi(i,t.initialViewportSpot),r.h(n.x-r.x,n.y-r.y),t.position=r,E.free(i),T.free(r),T.free(n)}t.wb=!0,n=t.ih,e&&t.rg!==Qn&&(n=t.rg);var s=n!==Qn?Ea(t,n):t.scale;n=t.pa.x,i=t.pa.y,r=t.Aa/s;var h=t.ya/s,u=t.dk,p=t.Ip;e&&!u.pb()&&(p.pb()||p.Rb())&&(u=p.Rb()?Dt:p),df(t,t.documentBounds,r,h,u,e),e=t.scale,t.scale=s,t.wb=!1,_o(t),Ra(t,!0,!1),s=t.viewportBounds,O.B(s.x,n)&&O.B(s.y,i)&&O.B(s.width,r)&&O.B(s.height,h)||t.onViewportBoundsChanged(new E(n,i,r,h),s,e,!1)}}function Ea(t,e){var n=t.jp;if(t.Ha===null)return n;t.Ta();var i=t.documentBounds;if(!i.w())return n;var r=i.width;i=i.height;var s=t.Aa+(t.Lf?t.Ab:0),h=t.ya+(t.Te?t.Ab:0),u=s/r,p=h/i;return e===Ya?(e=Math.min(p,u),e>n&&(e=n),e<t.minScale&&(e=t.minScale),e>t.maxScale&&(e=t.maxScale),e):e===Au?(e=p>u?(h-t.Ab)/i:(s-t.Ab)/r,e>n&&(e=n),e<t.minScale&&(e=t.minScale),e>t.maxScale&&(e=t.maxScale),e):t.scale}I.prototype.zoomToFit=function(){var t=this.fj;this.fj=us,this.scale=Ea(this,Ya),t!==us&&(Ai(this,!1),df(this,this.documentBounds,this.Aa/this.wa,this.ya/this.wa,this.dk,!1)),this.fj=t},a=I.prototype,a.Tz=function(t,e){e===void 0&&(e=Ya);var n=t.width,i=t.height;if(!(n===0||i===0||isNaN(n)&&isNaN(i))){var r=1;if(e===Ya||e===Au)if(isNaN(n))r=this.viewportBounds.height*this.scale/i;else if(isNaN(i))r=this.viewportBounds.width*this.scale/n;else{r=this.Aa;var s=this.ya;r=e===Au?s/i>r/n?(s-(this.Te?this.Ab:0))/i:(r-(this.Lf?this.Ab:0))/n:Math.min(s/i,r/n)}this.scale=r,this.position=new T(t.x,t.y)}},a.ay=function(t,e){this.Ta();var n=this.documentBounds,i=this.viewportBounds;this.position=new T(n.x+(t.x*n.width+t.offsetX)-(e.x*i.width-e.offsetX),n.y+(t.y*n.height+t.offsetY)-(e.y*i.height-e.offsetY))},a.Ty=function(t){if(t instanceof nt){this.yp=t;var e=T.alloc();this.zp=this.Io(t.ia(Qe,e)),T.free(e)}else this.yp=null,this.zp=Ds};function df(t,e,n,i,r,s){var h=T.allocAt(t.pa.x,t.pa.y),u=h.x,p=h.y;if(t.yp!==null){var d=T.alloc();d=t.yp.ia(Qe,d),u=d.x-t.zp.x/t.scale,p=d.y-t.zp.y/t.scale,r=Ke,T.free(d)}(s||t.scrollMode===us)&&(r.pb()&&(n>e.width&&(u=e.x+(r.x*e.width+r.offsetX)-(r.x*n-r.offsetX)),i>e.height&&(p=e.y+(r.y*e.height+r.offsetY)-(r.y*i-r.offsetY))),r=t.ej,s=n-e.width,n<e.width+r.left+r.right?(u=Math.min(u+n/2,e.right+Math.max(s,r.right)-n/2),u=Math.max(u,e.left-Math.max(s,r.left)+n/2),u-=n/2):u>e.left?u=e.left:u<e.right-n&&(u=e.right-n),n=i-e.height,i<e.height+r.top+r.bottom?(p=Math.min(p+i/2,e.bottom+Math.max(n,r.bottom)-i/2),p=Math.max(p,e.top-Math.max(n,r.top)+i/2),p-=i/2):p>e.top?p=e.top:p<e.bottom-i&&(p=e.bottom-i)),h.x=isFinite(u)?u:-t.ub.left,h.y=isFinite(p)?p:-t.ub.top,t.positionComputation!==null&&(e=t.positionComputation(t,h),h.x=e.x,h.y=e.y),y0(t.Nd,t.pa,h),t.pa.h(h.x,h.y),bo(t),T.free(h)}a.nl=function(t,e){if(e===void 0&&(e=!0),e){if(t=ff(this,t,function(n){return n.part},function(n){return n.canSelect()}),t instanceof ot)return t}else if(t=ff(this,t,function(n){return n.part}),t instanceof ot)return t;return null},a.dc=function(t,e,n){e===void 0&&(e=null),n===void 0&&(n=null),rn(this);for(var i=this.Va.iteratorBackwards;i.next();){var r=i.value;if(r.visible&&(r=r.dc(t,e,n),r!==null))return r}return null};function ff(t,e,n,i){for(n===void 0&&(n=null),i===void 0&&(i=null),rn(t),t=t.Va.iteratorBackwards;t.next();){var r=t.value;if(r.visible&&!r.isTemporary&&(r=r.dc(e,n,i),r!==null))return r}return null}a.Gy=function(t,e,n){return e===void 0&&(e=!0),qy(this,t,function(i){return i.part},e?function(i){return i instanceof ot&&i.canSelect()}:null,n)};function qy(t,e,n,i,r){for(n===void 0&&(n=null),i===void 0&&(i=null),r instanceof Q||r instanceof H||(r=new H),rn(t),t=t.Va.iteratorBackwards;t.next();){var s=t.value;s.visible&&!s.isTemporary&&s.Xh(e,n,i,r)}return r}a.Xh=function(t,e,n,i){e===void 0&&(e=null),n===void 0&&(n=null),i instanceof Q||i instanceof H||(i=new H),rn(this);for(var r=this.Va.iteratorBackwards;r.next();){var s=r.value;s.visible&&s.Xh(t,e,n,i)}return i},a.Mw=function(t,e,n,i){return e===void 0&&(e=!1),n===void 0&&(n=!0),tv(this,t,function(r){return r instanceof ot&&(!n||r.canSelect())},e,i)},a.pf=function(t,e,n,i,r){e===void 0&&(e=null),n===void 0&&(n=null),i===void 0&&(i=!1),r instanceof Q||r instanceof H||(r=new H),rn(this);for(var s=this.Va.iteratorBackwards;s.next();){var h=s.value;h.visible&&h.pf(t,e,n,i,r)}return r},a.nu=function(t,e,n,i,r,s){var h=new H;rn(this);for(var u=this.Va.iteratorBackwards;u.next();){var p=u.value;p.visible&&p.nu(t,e,n,i,h,r,s)}return h};function tv(t,e,n,i,r){var s=null;for(n===void 0&&(n=null),i===void 0&&(i=!1),r instanceof Q||r instanceof H||(r=new H),rn(t),t=t.Va.iteratorBackwards;t.next();){var h=t.value;h.visible&&!h.isTemporary&&h.pf(e,s,n,i,r)}return r}a.Hy=function(t,e,n,i,r){return n===void 0&&(n=!0),i===void 0&&(i=!0),ev(this,t,e,function(s){return s instanceof ot&&(!i||s.canSelect())},n,r)},a.bg=function(t,e,n,i,r,s){n===void 0&&(n=null),i===void 0&&(i=null),r===void 0&&(r=!0),r!==!1&&r!==!0&&((r instanceof Q||r instanceof H)&&(s=r),r=!0),s instanceof Q||s instanceof H||(s=new H),rn(this);for(var h=this.Va.iteratorBackwards;h.next();){var u=h.value;u.visible&&u.bg(t,e,n,i,r,s)}return s};function ev(t,e,n,i,r,s){var h=null;for(i===void 0&&(i=null),r===void 0&&(r=!0),r!==!1&&r!==!0&&((r instanceof Q||r instanceof H)&&(s=r),r=!0),s instanceof Q||s instanceof H||(s=new H),rn(t),t=t.Va.iteratorBackwards;t.next();){var u=t.value;u.visible&&!u.isTemporary&&u.bg(e,n,h,i,r,s)}return s}I.prototype.acceptEvent=function(t){return Es(this,t,t instanceof MouseEvent)};function Es(t,e,n){var i=t.Bg;return t.Bg=t.Ri,t.Ri=i,i.diagram=t,i.event=e,n?qh(t,e,i):(i.viewPoint=t.Bg.viewPoint,i.documentPoint=t.Bg.documentPoint),t=0,e.ctrlKey&&(t+=1),e.altKey&&(t+=2),e.shiftKey&&(t+=4),e.metaKey&&(t+=8),i.modifiers=t,i.button=e.button,e.buttons!==void 0&&(i.buttons=e.buttons),Ji&&e.button===0&&e.ctrlKey&&(i.button=2),i.down=!1,i.up=!1,i.clickCount=1,i.delta=0,i.handled=!1,i.bubbles=!1,i.timestamp=e.timeStamp,i.isMultiTouch=!1,i.targetDiagram=gf(e,e.target),i.targetObject=null,i}function gf(t,e){return e===null?null:(e=e.H)?e:((e=t.path)||typeof t.composedPath!="function"||(e=t.composedPath()),e&&e[0]&&e[0].H?e[0].H:null)}function bh(t,e,n,i,r,s){var h=t.Bg;return t.Bg=t.Ri,t.Ri=h,h.diagram=t,h.clickCount=1,t=h.delta=0,e.ctrlKey&&(t+=1),e.altKey&&(t+=2),e.shiftKey&&(t+=4),e.metaKey&&(t+=8),h.modifiers=t,h.event=e,h.timestamp=e.timeStamp,h.button=e.button,h.buttons=e.buttons,Ji&&e.button===0&&e.ctrlKey&&(h.button=2),h.down=n,h.up=i,h.handled=!1,h.bubbles=r,h.isMultiTouch=s,h}function ls(t,e){return t.bubbles?!0:(e.stopPropagation!==void 0&&e.stopPropagation(),e.cancelable!==!1&&e.preventDefault(),e.cancelBubble=!0,!1)}I.prototype.iz=function(t){var e=this.H;if(!this.H.isEnabled)return!1;var n=Es(e,t,!1);switch(n.key=String.fromCharCode(t.which),n.down=!0,t.which){case 8:n.key="Backspace";break;case 33:n.key="PageUp";break;case 34:n.key="PageDown";break;case 35:n.key="End";break;case 36:n.key="Home";break;case 37:n.key="Left";break;case 38:n.key="Up";break;case 39:n.key="Right";break;case 40:n.key="Down";break;case 45:n.key="Insert";break;case 46:n.key="Del";break;case 48:n.key="0";break;case 187:case 61:case 107:n.key="Add";break;case 189:case 173:case 109:n.key="Subtract";break;case 27:n.key="Esc"}return e.doKeyDown(),ls(n,t)},I.prototype.jz=function(t){var e=this.H;if(!e.isEnabled)return!1;var n=Es(e,t,!1);switch(n.key=String.fromCharCode(t.which),n.up=!0,t.which){case 8:n.key="Backspace";break;case 33:n.key="PageUp";break;case 34:n.key="PageDown";break;case 35:n.key="End";break;case 36:n.key="Home";break;case 37:n.key="Left";break;case 38:n.key="Up";break;case 39:n.key="Right";break;case 40:n.key="Down";break;case 45:n.key="Insert";break;case 46:n.key="Del"}return e.doKeyUp(),ls(n,t)},I.prototype.wy=function(t){var e=this.H;if(!e.isEnabled)return!1;var n=Es(e,t,!0);return e.mouseEnter!==null&&e.mouseEnter(n),e.currentTool.standardMouseOver(),ls(n,t)},I.prototype.xy=function(t){var e=this.H;if(!e.isEnabled)return!1;var n=Es(e,t,!0);return e.mouseLeave!==null&&e.mouseLeave(n),ls(n,t)},I.prototype.getMouse=function(t){var e=this.Ha;if(e===null)return new T(0,0);var n=e.getBoundingClientRect();return e=t.clientX-this.Aa/n.width*n.left,t=t.clientY-this.ya/n.height*n.top,this.Bb!==null?Ue(new T(e,t),this.Bb):new T(e,t)};function qh(t,e,n){var i=t.Ha,r=t.Aa,s=t.ya,h=0,u=0;i!==null&&(i=i.getBoundingClientRect(),h=e.clientX-r/i.width*i.left,u=e.clientY-s/i.height*i.top),n.viewPoint.h(h,u),t.Bb!==null?(e=T.allocAt(h,u),t.Bb.Gd(e),n.documentPoint.assign(e),T.free(e)):n.documentPoint.h(h,u)}function z0(t,e,n,i){if(e.targetTouches!==void 0){if(2>e.targetTouches.length)return;e=e.targetTouches[n]}else if(t.cj[0]!==null)e=t.cj[n];else return;n=t.Ha,n!==null&&(n=n.getBoundingClientRect(),i.h(e.clientX-t.Aa/n.width*n.left,e.clientY-t.ya/n.height*n.top))}I.prototype.Wa=function(){this.Li||(this.Li=!0,this.Kb(!0))};function nv(t){t.$c||rn(t),t.Ta()}I.prototype.redraw=function(){this.wb||this.$c||(this.N(),_o(this),this.kd())},a=I.prototype,a.hz=function(){return this.Zf},a.qy=function(t){t===void 0&&(t=null);var e=this.animationManager,n=e.isEnabled;e.wc(),e.isEnabled=!1,Zo(this),this.Nf=!1,this.zt=new T(NaN,NaN),e.isEnabled=n,this.$c=!0;var i=this;t!==null&&On(function(){i.$c=!1,Jo(e,"Model"),t(i)},1)},a.Kb=function(t){if(t===void 0&&(t=!1),this.Zf!==!0&&!(this.wb||t===!1&&this.$c)){this.Zf=!0;var e=this;it.requestAnimationFrame(function(){e.Zf&&e.kd()})}},a.kd=function(){(!this.Dm||this.Zf)&&(this.Dm&&(this.Dm=!1),Zo(this))};function Ra(t,e,n){t.animationManager.defaultAnimation.isAnimating||t.wb||!t.Mi||xf(t)||(e&&rn(t),n&&Ai(t,!1))}function Zo(t,e){if(!t.$c&&(t.Zf=!1,t.Ka!==null||t.Qn.w())){t.$c=!0;var n=t.animationManager,i=t.wn;if(!n.isAnimating&&i.length!==0){for(var r=i.s,s=r.length,h=0;h<s;h++){var u=r[h];bn(u,!1),u.v()}i.clear()}i=t.Kv,0<i.count&&(i.each(function(p){p.hv()}),i.clear()),r=i=!1,n.defaultAnimation.isAnimating&&(r=!0,i=t.skipsUndoManager,t.skipsUndoManager=!0),n.zb||pf(t),Ra(t,!1,!0),t.Vd!==null&&(t.Vd.visible&&!t.Fp&&(Qo(t),t.Fp=!0),!t.Vd.visible&&t.Fp&&(t.Fp=!1)),rn(t),s=!1,(!t.Nf||t.hh)&&(t.Nf?Nf(t,!t.nk):(t.Ca("Initial Layout"),n.isEnabled===!1&&n.wc(),Nf(t,!1)),s=!0),t.nk=!1,rn(t),t.Kt||nv(t),Ra(t,!0,!1),h=!1,s?(n=E.alloc(),n.assign(t.viewportBounds),t.Nf||(h=t.Nf=!0,t.skipsUndoManager||(t.undoManager.isPendingClear=!0),t.undoManager.isPendingUnmodified=!0,iv(t)),t.P("LayoutCompleted"),n.C(t.viewportBounds)||Ra(t,!0,!1),E.free(n)):n.uk&&n.kw&&(t.rg!==Qn?t.scale=Ea(t,t.rg):t.ih!==Qn?t.scale=Ea(t,t.ih):(n=t.initialScale,isFinite(n)&&0<n&&(t.scale=n)),Ai(t,!0)),s&&h&&t.cb("Initial Layout"),rn(t),e||t.tc(t.Yb),r&&(t.skipsUndoManager=i),t.$c=!1}}function iv(t){var e=t.wa;if(t.rg!==Qn)t.scale=Ea(t,t.rg);else if(t.ih!==Qn)t.scale=Ea(t,t.ih);else{var n=t.initialScale;isFinite(n)&&0<n&&(t.scale=n)}t.wa!==e&&(_o(t),Ra(t,!0,!1)),Ai(t,!0),e=t.Va.s,t.Ld(e,e.length,t,t.viewportBounds),t.P("InitialLayoutCompleted"),t.zt.assign(t.pa),Qo(t)}function rn(t){if(t.qe.count!==0&&(t.$c||!t.animationManager.isTicking)){for(var e=0;23>e;e++){var n=t.qe.iterator;if(n===null||t.qe.count===0)break;t.qe=new H,t.hv(n,t.qe)}t.nodes.each(function(i){i instanceof ut&&(i.U&65536)!==0&&(i.U=i.U^65536)})}}a.hv=function(t,e){for(t.reset();t.next();){var n=t.value;!n.Rc()||n instanceof ut||(n.fi()?(n.measure(1/0,1/0),n.arrange()):e.add(n))}for(t.reset();t.next();)n=t.value,n instanceof ut&&n.isVisible()&&cf(this,n);for(t.reset();t.next();)n=t.value,n instanceof U&&n.isVisible()&&(n.fi()?(n.measure(1/0,1/0),n.arrange()):e.add(n));for(t.reset();t.next();)n=t.value,n instanceof St&&n.isVisible()&&(n.fi()?(n.measure(1/0,1/0),n.arrange()):e.add(n))};function cf(t,e){for(var n=Yt(),i=Yt(),r=e.memberParts;r.next();){var s=r.value;s.isVisible()&&(s instanceof ut?(Co(s)||Si(s)||Or(s))&&cf(t,s):s instanceof U?s.fromNode===e||s.toNode===e?i.push(s):n.push(s):(s.measure(1/0,1/0),s.arrange()))}for(t=n.length,r=0;r<t;r++)s=n[r],s.measure(1/0,1/0),s.arrange();for(At(n),e.measure(1/0,1/0),e.arrange(),t=i.length,e=0;e<t;e++)n=i[e],n.measure(1/0,1/0),n.arrange();At(i)}a.Ld=function(t,e,n,i){if(this.Ni||this.animationManager.isAnimating)for(var r=0;r<e;r++)t[r].Ld(n,i)},a.tc=function(t,e){if(this.Ka!==null){this.Ha===null&&X("No canvas specified");var n=this.animationManager;if(!n.zb&&(!n.isAnimating||n.isTicking)){var i=new Date;if(el(this),this.Ka.style.opacity!=="0"){var r=t!==this.Yb,s=this.Va.s,h=s.length,u=this;if(this.Ld(s,h,u,u.viewportBounds),r)t.Mc(!0),Br(this);else if(!this.Zc&&e===void 0&&!n.isAnimating)return;h=this.pa;var p=this.wa,d=Math.round(h.x*p)/p,g=Math.round(h.y*p)/p;for(n=this.Bb,n.reset(),p!==1&&n.scale(p),h.x===0&&h.y===0||n.translate(-d,-g),p=this.jc,t.setTransform(p,0,0,p,0,0),t.clearRect(0,0,this.Aa,this.ya),this.tb!==1&&(t.globalAlpha=this.tb),mf(this,t),d=e!==void 0?function(c){if(c.visible&&c.tb!==0){var y=c.La.s,S=y.length;if(S!==0){var v=Aa(c,t),L=c.sn;L.length=0;for(var N=u.scale,M=E.alloc(),B=0;B<S;B++){var F=y[B];e.contains(F)||c.Th(t,F,u,L,N,M,!0)}E.free(M),t.globalAlpha=v}}}:function(c){c.tc(t,u)},h=s.length,g=0;g<h;g++)t.setTransform(p,0,0,p,0,0),t.transform(n.m11,n.m12,n.m21,n.m22,n.dx,n.dy),t.Nc(),d(s[g]);if(s=!1,this.qh?ol(this.qh,this)&&(s=this.Hs()):s=!0,s&&(ct.prototype.Gd=ct.prototype.vw),r?(this.Yb.Mc(!0),Br(this)):this.Zc=this.Ni=!1,s=+new Date-+i,r=js&&js.Hw,i=this.Uv,r||this.Kh===null){for(i[this.mq]=s,this.mq=(this.mq+1)%i.length,n=s=0;n<i.length;n++)s+=i[n];this.lq=s/i.length}if(this.tb!==1&&(t.globalAlpha=1),r)for(t.setTransform(1,0,0,1,0,0),r=0;r<i.length;r++)t.fillText(i[r].toString(),20,150+ +(20*r))}}}};function Du(t,e,n,i,r,s,h,u,p,d){if(t.Ka!==null){t.Ha===null&&X("No canvas specified"),h===void 0&&(h=null),u===void 0&&(u=null),p===void 0&&(p=!1),d===void 0&&(d=!1),el(t),t.Yb.Mc(!0),Br(t),t.Oi=!0;var g=t.wa;t.wa=r;var c=t.Va.s,y=c.length;try{var S=new E(s.x,s.y,i.width/r,i.height/r),v=S.copy();v.Wn(n),Qo(t,v),rn(t),t.Ld(c,y,t,S),e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,i.width,i.height),u!==null&&u!==""&&(e.fillStyle=u,e.fillRect(0,0,i.width,i.height));var L=t.jc;e.scale(L,L);var N=ct.alloc();N.reset(),N.translate(n.left,n.top),N.scale(r),s.x===0&&s.y===0||N.translate(-s.x,-s.y),e.setTransform(N.m11,N.m12,N.m21,N.m22,N.dx,N.dy),e.Nc(),ct.free(N),mf(t,e),e.globalAlpha=t.tb;var M=t.Aj("Grid");if(h){var B=new H,F=h.iterator;for(F.reset();F.next();){var j=F.value;j instanceof ot&&(d||j.layer!==M)&&B.add(j)}for(d=0;d<y;d++){var D=c[d];M=e;var R=t;if(D.visible&&D.tb!==0&&(p||!D.isTemporary)){var W=D.La.s,tt=W.length;if(tt!==0){var q=Aa(D,M),b=D.sn;b.length=0;var V=R.scale,ft=E.alloc();for(n=0;n<tt;n++){var at=W[n];B.contains(at)&&D.Th(M,at,R,b,V,ft,!1)}E.free(ft),M.globalAlpha=q}}}}else for(B=0;B<y;B++)R=c[B],R===M?d&&R.tc(e,t,!0):R.tc(e,t,p);t.Oi=!1,t.qh&&ol(t.qh,t)&&t.Hs()}finally{t.wa=g,t.Yb.Mc(!0),Br(t),t.Ld(c,y,t,t.viewportBounds),Qo(t)}}}a.Ee=function(t){return this.Cg[t]},a.tx=function(t,e){t==="minDrawingLength"&&(this.hq=e),this.Cg[t]=e,this.redraw()},a.ox=function(){this.Cg=new In,this.Cg.drawShadows=!0,this.Cg.textGreeking=!0,this.Cg.viewportOptimizations=!(Ji||Ah),this.Cg.temporaryPixelRatio=!0,this.Cg.pictureRatioOptimization=!0,this.hq=this.Cg.minDrawingLength=1};function mf(t,e){t=t.Cg,t!==null&&(t.imageSmoothingEnabled!==void 0&&e.sx(!!t.imageSmoothingEnabled),t=t.defaultFont,t!=null&&(e.font=t))}a.pl=function(t){return this.Lm[t]},a.Kz=function(t,e){this.Lm[t]=e},a.nx=function(){this.Lm=new In,this.Lm.extraTouchArea=10,this.Lm.extraTouchThreshold=10,this.Lm.hasGestureZoom=!0},a.set=function(t){return Object.assign(this,t),this},a.au=function(t){return this.Ml(t)},a.Ml=function(t){return tl(this,t),this};function tl(t,e){var n=t instanceof Y,i=t instanceof I,r;for(r in e){r===""&&X("Setting properties requires non-empty property names");var s=t,h=r;if(n||i){var u=r.indexOf(".");if(0<u){var p=r.substring(0,u);n?s=t.eb(p):(s=t[p],s==null&&(s=t.toolManager[p])),Bt(s)?h=r.substr(u+1):X("Unable to find object named: "+p+" in "+t.toString()+" when trying to set property: "+r)}}if(h[0]!=="_"&&!Ih(s,h))if(i&&h==="ModelChanged"){t.sw(e[h]);continue}else if(i&&h==="Changed"){t.Og(e[h]);continue}else if(i&&Ih(t.toolManager,h))s=t.toolManager;else if(i&&H0(t,h)){t.oj(h,e[h]);continue}else if(t instanceof et&&h==="Changed"){t.Og(e[h]);continue}else X('Trying to set undefined property "'+h+'" on object: '+s.toString());s[h]=e[r],h[0]==="_"&&s instanceof nt&&s.pw(h)}}a.yw=function(){if(this.oh.count!==0&&!(1<this.undoManager.transactionLevel)){for(;0<this.oh.count;){var t=this.oh;for(this.oh=new pt,t=t.iterator;t.next();){var e=t.key;e.ro(t.value),e.lc()}}this.N()}},a.N=function(t){if(t===void 0)this.Zc=!0,this.Kb();else{var e=this.viewportBounds;t.w()&&e.Qc(t)&&(this.Zc=!0,this.Kb())}this.P("InvalidateDraw")},I.prototype.invalidateViewport=function(t,e){if(this.Zc!==!0){this.Zc=!0;var n=this.Ee("temporaryPixelRatio")===!0;if(this.Ee("viewportOptimizations")===!0&&this.scrollMode!==Df&&this.ej.Vh(0,0,0,0)&&e.width===t.width&&e.height===t.height){var i=this.scale,r=Math.max(t.x,e.x),s=Math.max(t.y,e.y);if(i=E.allocAt(r,s,Math.max(0,Math.min(t.x+t.width,e.x+e.width)-r)*i,Math.max(0,Math.min(t.y+t.height,e.y+e.height)-s)*i),!this.dr&&0<i.width&&0<i.height){if(!(this.$c||(this.Zf=!1,this.Ka===null||(this.$c=!0,this.documentBounds.w()||(r=E.alloc(),kf(this,this.computeBounds(r)),E.free(r)),r=this.Ha,r===null||r instanceof Fo)))){var h=this.jc;s=this.Aa*h;var u=this.ya*h,p=this.scale*h,d=Math.round(Math.round(e.x*p)-Math.round(t.x*p));e=Math.round(Math.round(e.y*p)-Math.round(t.y*p)),p=this.Ev,t=this.Ix,p.width!==s&&(p.width=s),p.height!==u&&(p.height=u),t.clearRect(0,0,s,u),p=190*h;var g=70*h,c=Math.max(d,0),y=Math.max(e,0),S=Math.floor(s-c),v=Math.floor(u-y);t.drawImage(r.Sa,c,y,S,v,0,0,S,v),ol(this.qh,this)&&t.clearRect(0,0,p,g),r=Yt(),t=Yt(),v=Math.abs(d),S=Math.abs(e);var L=c===0?0:s-v;c=T.allocAt(L,0),v=T.allocAt(v+L,u),t.push(new E(Math.min(c.x,v.x),Math.min(c.y,v.y),Math.abs(c.x-v.x),Math.abs(c.y-v.y)));var N=this.Bb;if(N.reset(),N.scale(h,h),this.wa!==1&&N.scale(this.wa),h=this.pa,(h.x!==0||h.y!==0)&&isFinite(h.x)&&isFinite(h.y)&&N.translate(-h.x,-h.y),Ue(c,N),Ue(v,N),r.push(new E(Math.min(c.x,v.x),Math.min(c.y,v.y),Math.abs(c.x-v.x),Math.abs(c.y-v.y))),L=y===0?0:u-S,c.h(0,L),v.h(s,S+L),t.push(new E(Math.min(c.x,v.x),Math.min(c.y,v.y),Math.abs(c.x-v.x),Math.abs(c.y-v.y))),Ue(c,N),Ue(v,N),r.push(new E(Math.min(c.x,v.x),Math.min(c.y,v.y),Math.abs(c.x-v.x),Math.abs(c.y-v.y))),ol(this.qh,this)&&(s=0<d?0:-d,u=0<e?0:-e,c.h(s,u),v.h(p+s,g+u),t.push(new E(Math.min(c.x,v.x),Math.min(c.y,v.y),Math.abs(c.x-v.x),Math.abs(c.y-v.y))),Ue(c,N),Ue(v,N),r.push(new E(Math.min(c.x,v.x),Math.min(c.y,v.y),Math.abs(c.x-v.x),Math.abs(c.y-v.y)))),T.free(c),T.free(v),Ra(this,!1,!0),this.Ka===null&&X("No div specified"),this.Ha===null&&X("No canvas specified"),!this.animationManager.zb&&(s=this.Yb,this.Zc)){for(el(this),u=this.jc,s.setTransform(1,0,0,1,0,0),s.clearRect(0,0,this.Aa*u,this.ya*u),s.drawImage(this.Ev.Sa,0<d?0:Math.round(-d),0<e?0:Math.round(-e)),d=this.pa,h=this.wa,p=Math.round(d.x*h)/h,g=Math.round(d.y*h)/h,e=this.Bb,e.reset(),h!==1&&e.scale(h),d.x===0&&d.y===0||e.translate(-p,-g),s.save(),s.beginPath(),d=t.length,h=0;h<d;h++)p=t[h],p.width!==0&&p.height!==0&&s.rect(Math.floor(p.x),Math.floor(p.y),Math.ceil(p.width),Math.ceil(p.height));for(s.clip(),s.setTransform(u,0,0,u,0,0),s.transform(e.m11,e.m12,e.m21,e.m22,e.dx,e.dy),s.Nc(),e=this.Va.s,d=e.length,this.Ld(e,d,this,this.viewportBounds),mf(this,s),s.globalAlpha=this.tb,u=0;u<d;u++)if(h=e[u],p=r,h.visible&&h.tb!==0){g=Aa(h,s),y=h.sn,y.length=0,c=this.scale,S=E.alloc(),v=h.La.s,N=v.length,L=p.length;for(var M=0;M<N;M++){var B=v[M],F=Zs(B,B.actualBounds);t:{for(var j=2/c,D=4/c,R=0;R<L;R++){var W=p[R];if(W.width!==0&&W.height!==0&&F.vu(W.x-j,W.y-j,W.width+D,W.height+D)){F=!0;break t}}F=!1}F&&h.Th(s,B,this,y,c,S,!0)}E.free(S),s.globalAlpha=g}s.restore(),s.Mc(!0),this.qh&&ol(this.qh,this)&&this.Hs(),this.Zc=this.Ni=!1,this.Ao()}At(r),At(t),this.$c=!1}}else this.kd();E.free(i),n&&(Qh(this),this.kd(),ju(this,!0))}else n?(Qh(this),this.kd(),ju(this,!0)):this.kd()}};function _o(t){t.Mi===!1&&(t.Mi=!0)}function Br(t){t.Ni===!1&&(t.Ni=!0)}function el(t){t.Mm!==!1&&(t.Mm=!1,E0(t,t.Aa,t.ya))}function E0(t,e,n){bo(t);var i=t.jc;t.Ha.resize(e*i,n*i,e,n)&&(t.Zc=!0,t.Yb.Mc(!0))}function xf(t){var e=t.Ha;if(e===null||t.Qn.w())return!0;var n=t.Aa,i=t.ya,r=t.viewportBounds;if(!t.viewportBounds.w())return!0;var s=r.x,h=r.y,u=r.width,p=r.height,d=t.Gt,g=t.Dt,c=t.Ka,y=!1,S=t.Lf?t.Ab:0,v=t.Te?t.Ab:0,L=c.clientWidth||n+S,N=c.clientHeight||i+v;if((L!==n+S||N!==i+v)&&(t.Lf=!1,t.Te=!1,v=S=0,t.Aa=L,t.ya=N,y=t.Mm=!0,bo(t)),!(y||t.Lf||t.Te||t.Jm||t.Km))return!0;t.Mi=!1;var M=t.documentBounds,B=0,F=0,j=0,D=0;c=r.width;var R=r.height,W=t.ej;t.contentAlignment.pb()?(M.width>c&&(B=W.left,F=W.right),M.height>R&&(j=W.top,D=W.bottom)):(B=W.left,F=W.right,j=W.top,D=W.bottom),W=M.width+B+F;var tt=M.height+j+D;B=M.x-B;var q=r.x;F=M.right+F;var b=r.right+S;j=M.y-j;var V=r.y;M=M.bottom+D,D=r.bottom+v;var ft="1px",at="1px";if(r=t.scale,L=W>L/r,N=tt>N/r,t.scrollMode===us&&(L||N)&&(L&&t.hasHorizontalScrollbar&&t.allowHorizontalScroll&&(L=1,B+1<q&&(L=Math.max((q-B)*r+t.Aa,L)),F>b+1&&(L=Math.max((F-b)*r+t.Aa,L)),c+S+1<W&&(L=Math.max((W-c)*r+t.Aa,L)),ft=L.toString()+"px"),N&&t.hasVerticalScrollbar&&t.allowVerticalScroll&&(L=1,j+1<V&&(L=Math.max((V-j)*r+t.ya,L)),M>D+1&&(L=Math.max((M-D)*r+t.ya,L)),R+v+1<tt&&(L=Math.max((tt-R)*r+t.ya,L)),at=L.toString()+"px")),L=ft!=="1px",N=at!=="1px",L&&N||!L&&!N||(N&&(b-=t.Ab),L&&(D-=t.Ab),W<c+S||!t.hasHorizontalScrollbar||!t.allowHorizontalScroll||(S=1,B+1<q&&(S=Math.max((q-B)*r+t.Aa,S)),F>b+1&&(S=Math.max((F-b)*r+t.Aa,S)),c+1<W&&(S=Math.max((W-c)*r+t.Aa,S)),ft=S.toString()+"px"),L=ft!=="1px",S=t.ya,L!==t.Te&&(S=L?t.ya-t.Ab:t.ya+t.Ab),tt<R+v||!t.hasVerticalScrollbar||!t.allowVerticalScroll||(v=1,j+1<V&&(v=Math.max((V-j)*r+S,v)),M>D+1&&(v=Math.max((M-D)*r+S,v)),R+1<tt&&(v=Math.max((tt-R)*r+S,v)),at=v.toString()+"px"),N=at!=="1px"),t.Hq&&L===t.Te&&N===t.Lf)return n===t.Aa&&i===t.ya||t.kd(),!1;if(L!==t.Te&&(ft==="1px"?t.ya=t.ya+t.Ab:t.ya=Math.max(t.ya-t.Ab,1),y=!0),t.Te=L,g.style.width=ft,N!==t.Lf&&(at==="1px"?t.Aa=t.Aa+t.Ab:t.Aa=Math.max(t.Aa-t.Ab,1),y=!0,t.Qm&&(v=T.alloc(),N?(e.style.left=t.Ab+"px",t.position=v.h(t.pa.x+t.Ab/t.scale,t.pa.y)):(e.style.left="0px",t.position=v.h(t.pa.x-t.Ab/t.scale,t.pa.y)),T.free(v))),y&&bo(t),t.Lf=N,g.style.height=at,t.Ct=!0,y&&(t.Mm=!0),e=d.scrollLeft,t.hasHorizontalScrollbar&&t.allowHorizontalScroll&&(c+1<W?e=(t.position.x-B)*r:B+1<q?e=d.scrollWidth-d.clientWidth:F>b+1&&(e=t.position.x*r)),t.Qm)switch(t.xt){case"negative":e=-(d.scrollWidth-e-d.clientWidth);break;case"reverse":e=d.scrollWidth-e-d.clientWidth}return d.scrollLeft=e,t.hasVerticalScrollbar&&t.allowVerticalScroll&&(R+1<tt?d.scrollTop=(t.position.y-j)*r:j+1<V?d.scrollTop=d.scrollHeight-d.clientHeight:M>D+1&&(d.scrollTop=t.position.y*r)),L=t.Aa,N=t.ya,d.style.width=L+(t.Lf?t.Ab:0)+"px",d.style.height=N+(t.Te?t.Ab:0)+"px",n!==L||i!==N||t.animationManager.zb?(n=E.allocAt(s,h,u,p),t.onViewportBoundsChanged(n,t.viewportBounds,r,y),E.free(n),!1):!0}a=I.prototype,a.add=function(t){var e=t.diagram;if(e!==this&&(e!==null&&X("Cannot add part "+t.toString()+" to "+this.toString()+". It is already a part of "+e.toString()),e=this.Aj(t.layerName),e===null&&(e=this.Aj("")),e===null&&X('Cannot add a Part when unable find a Layer named "'+t.layerName+'" and there is no default Layer'),t.layer!==e)){var n=e.bi(99999999,t,t.diagram===this);0<=n&&this.bb(me,"parts",e,null,t,null,n),e.isTemporary||this.Wa(),t.D(1),n=t.layerChanged,n!==null&&n(t,null,e)}},a.bi=function(t){this.partManager.bi(t);var e=this;cs(t,function(n){X0(e,n)}),(t instanceof St||t instanceof ut&&t.placeholder!==null)&&t.v(),t.data!==null&&cs(t,function(n){Ug(e.partManager,n)}),Si(t)!==!0&&Or(t)!==!0||this.qe.add(t),bm(t,!0,this),tx(t)?(t.actualBounds.w()&&this.N(Zs(t,t.actualBounds)),this.Wa()):t.isVisible()&&t.actualBounds.w()&&this.N(Zs(t,t.actualBounds)),this.Kb()},a.kc=function(t){t.rj(),this.partManager.kc(t);var e=this;t.data!==null&&cs(t,function(n){Kg(e.partManager,n,e)}),this.qe.remove(t),tx(t)?(t.actualBounds.w()&&this.N(Zs(t,t.actualBounds)),this.Wa()):t.isVisible()&&t.actualBounds.w()&&this.N(Zs(t,t.actualBounds)),this.Kb()},a.remove=function(t){yf(this,t,!0)};function yf(t,e,n){var i=e.layer;i!==null&&i.diagram===t&&(e.isSelected=!1,e.isHighlighted=!1,e.D(2),n&&e.xj(),n=i.kc(-1,e,!1),0<=n&&t.bb(Me,"parts",i,e,null,n,null),t=e.layerChanged,t!==null&&t(e,i,null))}a.Zr=function(t,e){if(e===void 0&&(e=!1),ue(t))for(var n=t.length,i=0;i<n;i++){var r=t[i];e&&!r.canDelete()||this.remove(r)}else for(n=new H,n.addAll(t),t=n.iterator;t.next();)n=t.value,e&&!n.canDelete()||this.remove(n)},a.wj=function(t,e,n){return n===void 0&&(n=!1),this.partManager.wj(t,e,n)},I.prototype.moveParts=function(t,e,n,i){if(n===void 0&&(n=!1),i===void 0&&(i=Sf(this)),this.toolManager!==null){var r=new pt;if(t!==null)if(ue(t))for(var s=0;s<t.length;s++)$o(this,r,t[s],n,i);else for(t=t.iterator;t.next();)$o(this,r,t.value,n,i);else{for(t=this.parts;t.next();)$o(this,r,t.value,n,i);for(t=this.nodes;t.next();)$o(this,r,t.value,n,i);for(t=this.links;t.next();)$o(this,r,t.value,n,i)}vf(this,r,e,i,n)}};function $o(t,e,n,i,r,s){if(!e.contains(n)&&(s===void 0&&(s=!1),!i||s||n.canMove()||n.canCopy()))if(r===void 0&&(r=Sf(t)),n instanceof _){if(e.add(n,t.Cd(r,n,n.location)),n instanceof ut&&(n.placeholder!==null||r.dragsMembers))for(s=n.memberParts;s.next();)$o(t,e,s.value,i,r,r.groupsAlwaysMove);for(s=n.linksConnected;s.next();){var h=s.value;if(!e.contains(h)){var u=h.fromNode,p=h.toNode;u!==null&&e.contains(u)&&p!==null&&e.contains(p)&&$o(t,e,h,i,r)}}if(r.dragsTree)for(n=n.ou();n.next();)$o(t,e,n.value,i,r)}else if(n instanceof U)for(e.add(n,t.Cd(r,n)),n=n.labelNodes;n.next();)$o(t,e,n.value,i,r);else n instanceof St||e.add(n,t.Cd(r,n,n.location))}function vf(t,e,n,i,r){if(e!==null&&e.count!==0){var s=T.alloc(),h=T.alloc();h.assign(n),isNaN(h.x)&&(h.x=0),isNaN(h.y)&&(h.y=0),(n=t.cr)||Gu(t,e);for(var u=Yt(),p=Yt(),d=e.iterator,g=T.alloc();d.next();){var c=d.key,y=d.value;if(c.Rc()){var S=R0(t,c,e);S!==null?u.push(new am(c,y,S)):(!r||c.canMove())&&(S=y.point,s.assign(S),t.computeMove(c,s.add(h),i,g),c.location=g,y.shifted===void 0&&(y.shifted=new T),y.shifted.assign(g.ge(S)))}else d.key instanceof U&&p.push(d.ra)}for(T.free(g),r=u.length,d=0;d<r;d++)c=u[d],s.assign(c.info.point),c.su.shifted===void 0&&(c.su.shifted=new T),c.node.location=s.add(c.su.shifted);for(r=T.alloc(),d=T.alloc(),c=p.length,y=0;y<c;y++){var v=p[y];if(S=v.key,S instanceof U)if(S.suspendsRouting){S.bf=null,g=S.fromNode;var L=S.toNode;if(t.draggedLink!==null&&i.dragsLink)if(L=v.value.point,S.dragComputation===null)e.add(S,t.Cd(i,S,h)),sr(S,h.x-L.x,h.y-L.y);else{v=T.allocAt(0,0),(g=S.i(0))&&g.w()&&v.assign(g);var N=g=T.alloc().assign(v).add(h);i.isGridSnapEnabled&&(i.isGridSnapRealtime||t.lastInput.up)&&(N=T.alloc(),Pf(t,S,g,N,i)),g.assign(S.dragComputation(S,g,N)).ge(v),e.add(S,t.Cd(i,S,g)),sr(S,g.x-L.x,g.y-L.y),T.free(v),T.free(g),N!==g&&T.free(N)}else g!==null&&(r.assign(g.location),N=e.I(g),N!==null&&r.ge(N.point)),L!==null&&(d.assign(L.location),N=e.I(L),N!==null&&d.ge(N.point)),g!==null&&L!==null?r.$a(d)?(g=v.value.point,L=s,L.assign(r),L.ge(g),e.add(S,t.Cd(i,S,r)),sr(S,L.x,L.y)):(S.suspendsRouting=!1,S.ab()):(v=v.value.point,g=g!==null?r:L!==null?d:h,e.add(S,t.Cd(i,S,g)),sr(S,g.x-v.x,g.y-v.y))}else(S.fromNode===null||S.toNode===null)&&(g=v.value.point,e.add(S,t.Cd(i,S,h)),sr(S,h.x-g.x,h.y-g.y))}T.free(s),T.free(h),T.free(r),T.free(d),At(u),At(p),n||(rn(t),nl(t,e))}}I.prototype.computeMove=function(t,e,n,i){if(i===void 0&&(i=new T),i.assign(e),t===null)return i;var r=e,s=n.isGridSnapEnabled;s&&(n.isGridSnapRealtime||this.lastInput.up)&&(r=T.alloc(),Pf(this,t,e,r,n)),n=t.dragComputation!==null?t.dragComputation(t,e,r):r;var h=t.minLocation,u=h.x;isNaN(u)&&(u=s?Math.round(1e3*t.location.x)/1e3:t.location.x),h=h.y,isNaN(h)&&(h=s?Math.round(1e3*t.location.y)/1e3:t.location.y);var p=t.maxLocation,d=p.x;return isNaN(d)&&(d=s?Math.round(1e3*t.location.x)/1e3:t.location.x),p=p.y,isNaN(p)&&(p=s?Math.round(1e3*t.location.y)/1e3:t.location.y),i.h(Math.max(u,Math.min(n.x,d)),Math.max(h,Math.min(n.y,p))),r!==e&&T.free(r),i};function Sf(t){var e=t.toolManager.findTool("Dragging");return e!==null?e.dragOptions:t.um}function Pf(t,e,n,i,r){if(r===void 0&&(r=Sf(t)),i.assign(n),e!==null){var s=t.grid;e=r.gridSnapCellSize,t=e.width,e=e.height;var h=r.gridSnapOrigin,u=h.x;if(h=h.y,r=r.gridSnapCellSpot,s!==null){var p=s.gridCellSize;isNaN(t)&&(t=p.width),isNaN(e)&&(e=p.height),s=s.gridOrigin,isNaN(u)&&(u=s.x),isNaN(h)&&(h=s.y)}s=T.allocAt(0,0),s.ii(0,0,t,e,r),O.jo(n.x,n.y,u+s.x,h+s.y,t,e,i),T.free(s)}}function Gu(t,e){if(e!==null)for(t.cr=!0,t=e.iterator;t.next();)e=t.key,e instanceof U&&(e.suspendsRouting=!0)}function nl(t,e){if(e!==null){for(e=e.iterator;e.next();){var n=e.key;n instanceof U&&(n.suspendsRouting=!1,Cg(n)&&n.ab())}t.cr=!1}}function R0(t,e,n){return e=e.containingGroup,e!==null&&(t=R0(t,e,n),t!==null||(t=n.I(e),t!==null))?t:null}a=I.prototype,a.Cd=function(t,e,n){if(n===void 0)return new jr(Zi);var i=t.isGridSnapEnabled;return t.groupsSnapMembers||e.containingGroup===null||(i=!1),i?new jr(new T(Math.round(1e3*n.x)/1e3,Math.round(1e3*n.y)/1e3)):new jr(n.copy())};function wf(t,e,n){if(e.diagram!==null&&e.diagram!==t&&X("Cannot share a Layer with another Diagram: "+e+" of "+e.diagram),n===null?e.diagram!==null&&X("Cannot add an existing Layer to this Diagram again: "+e):(n.diagram!==t&&X("Existing Layer must be in this Diagram: "+n+" not in "+n.diagram),e===n&&X("Cannot move a Layer before or after itself: "+e)),e.diagram!==t){e=e.name,t=t.Va,n=t.count;for(var i=0;i<n;i++)t.L(i).name===e&&X("Cannot add Layer with the name '"+e+"'; a Layer with the same name is already present in this Diagram.")}}a.el=function(t){wf(this,t,null),t.Je(this);var e=this.Va,n=e.count-1;if(!t.isTemporary)for(;0<=n&&e.L(n).isTemporary;)n--;return e.Cb(n+1,t),this.$b!==null&&this.bb(me,"layers",this,null,t,null,n+1),this.N(),this.Wa(),this},a.qw=function(t,e){wf(this,t,e),t.Je(this);var n=this.Va,i=n.indexOf(t);0<=i&&(n.remove(t),this.$b!==null&&this.bb(Me,"layers",this,t,null,i,null));var r=n.count,s;for(s=0;s<r;s++)if(n.L(s)===e){n.Cb(s,t);break}return this.$b!==null&&this.bb(me,"layers",this,null,t,null,s),this.N(),0>i&&this.Wa(),this},a.Vx=function(t,e){wf(this,t,e),t.Je(this);var n=this.Va,i=n.indexOf(t);0<=i&&(n.remove(t),this.$b!==null&&this.bb(Me,"layers",this,t,null,i,null));var r=n.count,s;for(s=0;s<r;s++)if(n.L(s)===e){n.Cb(s+1,t);break}return this.$b!==null&&this.bb(me,"layers",this,null,t,null,s+1),this.N(),0>i&&this.Wa(),this},a.Cz=function(t){if(t.diagram!==this&&X("Cannot remove a Layer from another Diagram: "+t+" of "+t.diagram),t.name!==""){var e=this.Va,n=e.indexOf(t);if(e.remove(t)){for(e=t.La.copy().iterator;e.next();){var i=e.value,r=i.layerName;r!==t.name?i.layerName=r:i.layerName=""}this.$b!==null&&this.bb(Me,"layers",this,t,null,n,null),this.N(),this.Wa()}}},a.Aj=function(t){for(var e=this.layers;e.next();){var n=e.value;if(n.name===t)return n}return null},a.sw=function(t){return this.Ze===null&&(this.Ze=new Q),this.Ze.add(t),this.model.Og(t),this},a.Ez=function(t){this.Ze!==null&&(this.Ze.remove(t),this.Ze.count===0&&(this.Ze=null)),this.model.Rj(t)},a.Og=function(t){return this.lg===null&&(this.lg=new Q),this.lg.add(t),this},a.Rj=function(t){this.lg!==null&&(this.lg.remove(t),this.lg.count===0&&(this.lg=null))},a.ur=function(t){if(this.skipsUndoManager||this.model.skipsUndoManager||this.model.undoManager.tu(t),t.change!==Oi&&(this.isModified=!0),this.lg!==null)for(var e=this.lg,n=e.length,i=0;i<n;i++)e.L(i)(t)},a.bb=function(t,e,n,i,r,s,h){s===void 0&&(s=null),h===void 0&&(h=null);var u=new _t;u.diagram=this,u.change=t,u.propertyName=e,u.object=n,u.oldValue=i,u.oldParam=s,u.newValue=r,u.newParam=h,this.ur(u)},a.g=function(t,e,n,i,r){this.bb(Ht,t,this,e,n,i,r)},I.prototype.changeState=function(t,e){if(t!==null&&t.diagram===this){var n=this.skipsModelSourceBindings;try{this.skipsModelSourceBindings=!0;var i=t.change;if(i===Ht){var r=t.object;if(Xt(r,t.propertyName,t.I(e)),r instanceof nt){var s=r.part;s!==null&&s.Qb()}this.isModified=!0}else if(i===me){var h=t.object,u=t.newParam,p=t.newValue;if(h instanceof Y)if(typeof u=="number"&&p instanceof nt){e?h.kc(u):h.Cb(u,p);var d=h.part;d!==null&&d.Qb()}else typeof u=="number"&&p instanceof ye&&(p.isRow?km(h,u,e?void 0:p):Nm(h,u,e?void 0:p));else if(h instanceof qe){var g=t.oldParam===!0;typeof u=="number"&&p instanceof ot&&(e?(p.isSelected=!1,p.isHighlighted=!1,p.Qb(),h.kc(g?u:-1,p,g)):h.bi(u,p,g))}else h instanceof I?typeof u=="number"&&p instanceof qe&&(e?this.Va.lb(u):(p.Je(this),this.Va.Cb(u,p))):X("unknown ChangedEvent.Insert object: "+t.toString());this.isModified=!0}else if(i===Me){var c=t.object,y=t.oldParam,S=t.oldValue;if(c instanceof Y)typeof y=="number"&&S instanceof nt?e?c.Cb(y,S):c.kc(y):typeof y=="number"&&S instanceof ye&&(S.isRow?km(c,y,e?S:void 0):Nm(c,y,e?S:void 0));else if(c instanceof qe){var v=t.newParam===!0;typeof y=="number"&&S instanceof ot&&(e?0>c.La.indexOf(S)&&c.bi(y,S,v):(S.isSelected=!1,S.isHighlighted=!1,S.Qb(),c.kc(v?y:-1,S,v)))}else c instanceof I?typeof y=="number"&&S instanceof qe&&(e?(S.Je(this),this.Va.Cb(y,S)):this.Va.lb(y)):X("unknown ChangedEvent.Remove object: "+t.toString());this.isModified=!0}else i!==Oi&&X("unknown ChangedEvent: "+t.toString())}finally{this.skipsModelSourceBindings=n}}},I.prototype.Ca=function(t){return this.undoManager.Ca(t)},I.prototype.cb=function(t){return this.undoManager.cb(t)},I.prototype.xf=function(){return this.undoManager.xf()},I.prototype.commit=function(t,e){e===void 0&&(e="");var n=this.skipsUndoManager;e===null&&(this.skipsUndoManager=!0,e=""),this.undoManager.Ca(e);var i=!1;try{t(this),i=!0}finally{i?this.undoManager.cb(e):this.undoManager.xf(),this.skipsUndoManager=n}},I.prototype.updateAllTargetBindings=function(t){this.partManager.updateAllTargetBindings(t)},I.prototype.Lo=function(){this.partManager.Lo()};function V0(t,e,n){var i=t.animationManager;if(t.wb||t.$c)t.wa=n,bo(t),t.N(),_o(t),i.zb&&(Mu(i)||i.Sd.add(i.H,"scale",e,t.wa));else if(t.Ha===null)t.wa=n,bo(t);else{t.wb=!0;var r=t.viewportBounds.copy(),s=t.Aa,h=t.ya;r.width=t.Aa/e,r.height=t.ya/e;var u=t.zoomPoint.x,p=t.zoomPoint.y,d=t.contentAlignment;isNaN(u)&&(d.Sc()?d.tf(Ma)?u=0:d.tf(ka)&&(u=s-1):u=d.pb()?d.x*(s-1):s/2),isNaN(p)&&(d.Sc()?d.tf(La)?p=0:d.tf(Na)&&(p=h-1):p=d.pb()?d.y*(h-1):h/2),t.scaleComputation===null||t.animationManager.defaultAnimation.isAnimating||(n=t.scaleComputation(t,n)),n<t.minScale&&(n=t.minScale),n>t.maxScale&&(n=t.maxScale),s=T.allocAt(t.pa.x+u/e-u/n,t.pa.y+p/e-p/n),t.position=s,T.free(s),t.wa=n,bo(t),t.onViewportBoundsChanged(r,t.viewportBounds,e,!1),t.wb=!1,Ai(t,!1),i.zb&&(Mu(i)||i.Sd.add(i.H,"scale",e,t.wa)),t.N(),_o(t)}}I.prototype.onViewportBoundsChanged=function(t,e,n,i){if(!t.C(e)){i===void 0&&(i=!1),i||_o(this),Br(this);var r=this.layout;r===null||!r.isViewportSized||this.autoScale!==Qn||i||t.width===e.width&&t.height===e.height||r.D(),r=this.currentTool,this.Bk===!0&&r instanceof $t&&(this.lastInput.documentPoint=this.hs(this.lastInput.viewPoint),Qc(r,this)),this.wb||this.invalidateViewport(t,e),Qo(this),this.gd.scale=n,this.gd.position.x=t.x,this.gd.position.y=t.y,this.gd.bounds.assign(t),this.gd.xw.width=Math.round(t.width*n),this.gd.xw.height=Math.round(t.height*n),this.gd.gx.width=this.Aa,this.gd.gx.height=this.ya,this.gd.Yw=i,this.P("ViewportBoundsChanged",this.gd,t),this.isVirtualized&&this.links.each(function(s){s.isAvoiding&&s.actualBounds.Qc(e)&&s.ab()})}};function Qo(t,e){var n=t.Vd;if(n!==null&&n.visible){for(var i=ht.alloc(),r=1,s=1,h=n.R.s,u=h.length,p=0;p<u;p++){var d=h[p],g=Math.abs(d.interval);2>g||($f(d.figure)?s=s*g/O.Nw(s,g):r=r*g/O.Nw(r,g))}if(h=n.gridCellSize,i.h(s*h.width,r*h.height),e!==void 0)r=e.width,s=e.height,t=e.x,h=e.y;else{if(e=E.alloc(),t=t.viewportBounds,e.h(t.x,t.y,t.width,t.height),!e.w()){E.free(e);return}r=e.width,s=e.height,t=e.x,h=e.y,E.free(e)}n.width=r+2*i.width,n.height=s+2*i.height,e=T.alloc(),O.jo(t,h,0,0,i.width,i.height,e),e.offset(-i.width,-i.height),ht.free(i),n.part.location=e,T.free(e)}}I.prototype.clearSelection=function(t){t===void 0&&(t=!1);var e=this.selection;if(e.count!==0){t||this.P("ChangingSelection",e);for(var n=e.Da(),i=n.length,r=0;r<i;r++)n[r].isSelected=!1;e.ja(),e.clear(),e.freeze(),t||this.P("ChangedSelection",e)}},I.prototype.select=function(t){t!==null&&t.diagram===this&&(!t.isSelected||1<this.selection.count)&&(this.P("ChangingSelection",this.selection),this.clearSelection(!0),t.isSelected=!0,this.P("ChangedSelection",this.selection))},I.prototype.Jz=function(t){if(this.P("ChangingSelection",this.selection),this.clearSelection(!0),ue(t))for(var e=t.length,n=0;n<e;n++){var i=t[n];i instanceof ot||X("Diagram.selectCollection given something that is not a Part: "+i),i.isSelected=!0}else for(t=t.iterator;t.next();)e=t.value,e instanceof ot||X("Diagram.selectCollection given something that is not a Part: "+e),e.isSelected=!0;this.P("ChangedSelection",this.selection)},I.prototype.clearHighlighteds=function(){var t=this.highlighteds;if(0<t.count){for(var e=t.Da(),n=e.length,i=0;i<n;i++)e[i].isHighlighted=!1;t.ja(),t.clear(),t.freeze()}},a=I.prototype,a.bz=function(t){t!==null&&t.diagram===this&&(!t.isHighlighted||1<this.highlighteds.count)&&(this.clearHighlighteds(),t.isHighlighted=!0)},a.cz=function(t){t=new H().addAll(t);for(var e=this.highlighteds.copy().Bo(t).iterator;e.next();)e.value.isHighlighted=!1;for(t=t.iterator;t.next();)e=t.value,e instanceof ot||X("Diagram.highlightCollection given something that is not a Part: "+e),e.isHighlighted=!0},a.scroll=function(t,e,n){n===void 0&&(n=1);var i=e==="up"||e==="down",r=0;if(t==="pixel")r=n;else if(t==="line")r=n*(i?this.scrollVerticalLineChange:this.scrollHorizontalLineChange);else if(t==="page")t=i?this.viewportBounds.height:this.viewportBounds.width,t*=this.scale,t!==0&&(r=n*Math.max(t-(i?this.scrollVerticalLineChange:this.scrollHorizontalLineChange),0));else{if(t==="document"){r=this.documentBounds,n=this.viewportBounds,i=T.alloc(),e==="up"?this.position=i.h(n.x,r.y):e==="left"?this.position=i.h(r.x,n.y):e==="down"?this.position=i.h(n.x,r.bottom-n.height):e==="right"&&(this.position=i.h(r.right-n.width,n.y)),T.free(i);return}X("scrolling unit must be 'pixel', 'line', 'page', or 'document', not: "+t)}r/=this.scale,n=this.position.copy(),e==="up"?n.y=this.position.y-r:e==="down"?n.y=this.position.y+r:e==="left"?n.x=this.position.x-r:e==="right"?n.x=this.position.x+r:X("scrolling direction must be 'up', 'down', 'left', or 'right', not: "+e),this.position=n},a.Su=function(t){var e=this.viewportBounds;e.Ce(t)||(t=t.center,t.x-=e.width/2,t.y-=e.height/2,this.position=t)},a.vr=function(t){var e=this.viewportBounds;t=t.center,t.x-=e.width/2,t.y-=e.height/2,this.position=t},a.Io=function(t){var e=this.Bb;e.reset(),this.wa!==1&&e.scale(this.wa);var n=this.pa;return(n.x!==0||n.y!==0)&&isFinite(n.x)&&isFinite(n.y)&&e.translate(-n.x,-n.y),t.copy().transform(this.Bb)},a.Rz=function(t){var e=this.Bb,n=t.x,i=t.y,r=n+t.width,s=i+t.height,h=e.m11,u=e.m12,p=e.m21,d=e.m22,g=e.dx,c=e.dy,y=n*h+i*p+g;e=n*u+i*d+c;var S=r*h+i*p+g;return t=r*u+i*d+c,i=n*h+s*p+g,n=n*u+s*d+c,h=r*h+s*p+g,r=r*u+s*d+c,s=Math.min(y,S),y=Math.max(y,S),S=Math.min(e,t),e=Math.max(e,t),s=Math.min(s,i),y=Math.max(y,i),S=Math.min(S,n),e=Math.max(e,n),s=Math.min(s,h),y=Math.max(y,h),S=Math.min(S,r),e=Math.max(e,r),new E(s,S,y-s,e-S)},a.hs=function(t){var e=this.Bb;e.reset(),this.wa!==1&&e.scale(this.wa);var n=this.pa;return(n.x!==0||n.y!==0)&&isFinite(n.x)&&isFinite(n.y)&&e.translate(-n.x,-n.y),Ue(t.copy(),this.Bb)};function Y0(t){var e=t.isModified;t.nw!==e&&(t.nw=e,t.P("Modified"))}function ov(t){return t=Iu.get(t),t!==null?new t:new Ct}I.prototype.doModelChanged=function(t){var e=this;if(t.model===this.model){var n=t.change,i=t.propertyName;if(n===Oi&&i[0]==="S")if(i==="StartingFirstTransaction"){var r=this;t=this.toolManager,t.mouseDownTools.each(function(p){p.diagram=r}),t.mouseMoveTools.each(function(p){p.diagram=r}),t.mouseUpTools.each(function(p){p.diagram=r}),this.$c||this.Nf||(this.nk=!0,this.Dm&&(this.Zf=!0))}else i==="StartingUndo"||i==="StartingRedo"?(t=this.animationManager,t.defaultAnimation.isAnimating&&!this.skipsUndoManager&&t.wc(),this.P("ChangingSelection",this.selection)):i==="StartedTransaction"&&(t=this.animationManager,t.defaultAnimation.isAnimating&&!this.skipsUndoManager&&t.wc());else if(this.$){this.$=!1;try{if(t.modelChange===""&&n===Oi){(i==="FinishedUndo"||i==="FinishedRedo")&&(this.P("ChangedSelection",this.selection),rn(this));var s=this.animationManager;i==="RolledBackTransaction"&&s.wc(),this.yw(),this.nk=!0,this.kd(),this.undoManager.transactionLevel!==0&&this.undoManager.transactionLevel!==1||hf(s),i==="CommittedTransaction"&&this.undoManager.isJustDiscarded&&(this.pe=Math.min(this.pe,this.undoManager.historyIndex-1)),i!=="CommittedTransaction"&&i!=="RolledBackTransaction"||!this.undoManager.isPendingUnmodified||setTimeout(function(){e.isModified=!1},1);var h=t.isTransactionFinished;if(h&&(Y0(this),this.Rr.clear(),Jy(this.animationManager)),!this.mt&&h&&this.lastInput.targetDiagram){this.mt=!0;var u=this;On(function(){u.currentTool.standardMouseOver(),u.mt=!1},10)}}}finally{this.$=!0}}}};function X0(t,e){e=e.R.s;for(var n=e.length,i=0;i<n;i++)Lf(t,e[i])}function Lf(t,e){if(e instanceof Pn){var n=e.element;if(n!==null&&n instanceof HTMLImageElement){n.ng instanceof H&&n.ng.add(t);var i=e.qg;if(i!==null&&i.Lp===!0&&e.diagram!==null&&e.diagram.wn.add(e),n.Fm)if(n=n.getAttribute("src")||"",i=t.zg.I(n),i===null)i=[],i.push(e),t.zg.add(n,i);else{for(t=0;t<i.length;t++)if(i[t]===e)return;i.push(e)}}}}function Mf(t,e){if(e instanceof Pn){var n=e.element;if(n!==null&&n instanceof HTMLImageElement&&n.Fm){var i=n.getAttribute("src")||"",r=t.zg.I(i);if(r!==null){for(var s=0;s<r.length;s++)if(r[s]===e){r.splice(s,1),r.length===0&&(t.zg.remove(i),n.Yp&&n.removeEventListener("load",n.Yp),n.rp&&n.removeEventListener("error",n.rp),delete n.Yp,delete n.rp,n.ng instanceof H&&n.ng.remove(t),ih(i));break}}}}}I.prototype.Kd=function(){this.partManager.Kd()},I.prototype.nj=function(t,e){this.Nd.nj(t,e)},I.prototype.pj=function(t,e){this.Nd.pj(t,e)},I.prototype.findPartForKey=function(t){return this.partManager.findPartForKey(t)},I.prototype.Pb=function(t){return this.partManager.Pb(t)},I.prototype.findLinkForKey=function(t){return this.partManager.findLinkForKey(t)},a=I.prototype,a.Dc=function(t){return this.partManager.Dc(t)},a.Wh=function(t){return this.partManager.Wh(t)},a.Cc=function(t){return this.partManager.Cc(t)},a.Br=function(t){for(var e=[],n=0;n<arguments.length;++n)e[n]=arguments[n];return this.partManager.Br.apply(this.partManager,e instanceof Array?e:f(m(e)))},a.Ar=function(t){for(var e=[],n=0;n<arguments.length;++n)e[n]=arguments[n];return this.partManager.Ar.apply(this.partManager,e instanceof Array?e:f(m(e)))};function bo(t){var e=t.pa,n=t.wa;t.lw.h(e.x,e.y,Math.max(t.Aa,0)/n,Math.max(t.ya,0)/n),Br(t)}function kf(t,e){t.Li=!1;var n=t.mp;n.C(e)||(n=n.copy(),t.mp.assign(e),Ai(t,!1),t.P("DocumentBoundsChanged",void 0,n),_o(t),t.N())}a.Ta=function(){if(this.Li){var t=E.alloc();kf(this,this.computeBounds(t)),E.free(t)}},a.My=function(){for(var t=new H,e=this.nodes;e.next();){var n=e.value;n.isTopLevel&&t.add(n)}for(e=this.links;e.next();)n=e.value,n.isTopLevel&&t.add(n);return t.iterator},a.Ly=function(){return this.Nh.iterator},a.lz=function(t){rn(this),t&&Ou(this,!0),this.$c?Nf(this,!1):(this.nk=!0,Zo(this))};function Ou(t,e){for(var n=t.Nh.iterator;n.next();)U0(t,n.value,e);t.layout&&(e?t.layout.isValidLayout=!1:t.layout.D())}function U0(t,e,n){if(e!==null){for(var i=e.Mk.iterator;i.next();)U0(t,i.value,n);e.layout!==null&&(n?e.layout.isValidLayout=!1:e.layout.D())}}function Nf(t,e){if(t.hh&&!t.Es){var n=t.$;t.$=!0;var i=t.undoManager.transactionLevel,r=t.layout,s=t.animationManager;try{i===0&&(t.undoManager.isInternalTransaction=!0,t.Ca("Layout")),1>=i&&!s.defaultAnimation.isAnimating&&!s.zb&&(e||Jo(s,"Layout")),t.hh=!1;for(var h=t.Nh.iterator;h.next();)K0(t,h.value,e,i);r.isValidLayout||(!e||r.isRealtime||r.isRealtime===null||i===0?(r.doLayout(t),rn(t),r.isValidLayout=!0):t.hh=!0)}finally{e=t.undoManager.isInternalTransaction,i===0&&(t.cb("Layout"),t.undoManager.isInternalTransaction=!1),!e||i!==0&&i!==1||hf(s),t.$=n}}}function K0(t,e,n,i){if(e!==null){for(var r=e.Mk.iterator;r.next();)K0(t,r.value,n,i);r=e.layout,r===null||r.isValidLayout||(!n||r.isRealtime||i===0?(e.ah=!e.location.w(),r.doLayout(e),e.D(32),cf(t,e),r.isValidLayout=!0):t.hh=!0)}}a.Sy=function(){for(var t=new Q,e=this.nodes;e.next();){var n=e.value;n.isTopLevel&&n.Vg()===null&&t.add(n)}return t.iterator};function rv(t){function e(r){var s=r.toLowerCase(),h=new Q;n.add(r,h),n.add(s,h),i.add(r,r),i.add(s,r)}var n=new pt,i=new pt;e("InitialAnimationStarting"),e("AnimationStarting"),e("AnimationFinished"),e("BackgroundSingleClicked"),e("BackgroundDoubleClicked"),e("BackgroundContextClicked"),e("ClipboardChanged"),e("ClipboardPasted"),e("DocumentBoundsChanged"),e("ExternalObjectsDropped"),e("GainedFocus"),e("InitialLayoutCompleted"),e("LayoutCompleted"),e("LinkDrawn"),e("LinkRelinked"),e("LinkReshaped"),e("LostFocus"),e("Modified"),e("ObjectSingleClicked"),e("ObjectDoubleClicked"),e("ObjectContextClicked"),e("PartCreated"),e("PartResized"),e("PartRotated"),e("SelectionMoved"),e("SelectionCopied"),e("SelectionDeleting"),e("SelectionDeleted"),e("SelectionGrouped"),e("SelectionUngrouped"),e("ChangingSelection"),e("ChangedSelection"),e("SubGraphCollapsed"),e("SubGraphExpanded"),e("TextEdited"),e("TreeCollapsed"),e("TreeExpanded"),e("ViewportBoundsChanged"),e("InvalidateDraw"),t.Dv=n,t.Cv=i}function H0(t,e){var n=t.Cv.I(e);return n!==null?n:t.Cv.I(e.toLowerCase())}function Tf(t,e){var n=t.Dv.I(e);if(n!==null||(n=t.Dv.I(e.toLowerCase()),n!==null))return n;X("Unknown DiagramEvent name: "+e)}a.oj=function(t,e){return t=Tf(this,t),t!==null&&t.add(e),this},a.zl=function(t,e){t=Tf(this,t),t!==null&&t.remove(e)},a.P=function(t,e,n){var i=Tf(this,t),r=new Os;if(r.diagram=this,t=H0(this,t),t!==null&&(r.name=t),e!==void 0&&(r.subject=e),n!==void 0&&(r.parameter=n),e=i.length,e===1)i.L(0)(r);else if(e!==0)for(i=i.Da(),n=0;n<e;n++)(0,i[n])(r)};function W0(t){if(t.animationManager.isTicking)return!1;var e=t.currentTool;return e===t.toolManager.findTool("Dragging")?!t.cr||e.isComplexRoutingRealtime:!0}a.Hj=function(t,e){return Cf(this,!1,null,e||null).Hj(t.x,t.y,t.width,t.height)},I.prototype.computeOccupiedArea=function(t){return this.isVirtualized?this.viewportBounds.copy():this.Li?A0(this,t):t.assign(this.documentBounds)};function Cf(t,e,n,i){var r=t.Jh;if(r===null&&(t.Jh=r=new Dl(t.avoidanceCellSize)),r.Kr||r.group!==n||r.ux!==i){if(r.Zw=Math.max(r.fs+1,Math.floor(t.avoidanceLimit/t.avoidanceCellSize.width)),r.$w=Math.max(r.fs+1,Math.floor(t.avoidanceLimit/t.avoidanceCellSize.height)),n!==null&&(n=J0(t,n)),n===null){e=E.alloc(),t.computeOccupiedArea(e),e.vc(100,100),r.initialize(e);for(var s=t.nodes;s.next();){var h=s.value,u=h.layer;u!==null&&u.visible&&!u.isTemporary&&Ff(t,h,i,e)}E.free(e)}else{for(0<n.memberParts.count&&(e=t.computePartsBounds(n.memberParts,!1),e.vc(20,20),r.initialize(e)),e=E.alloc(),s=n.memberParts;s.next();)h=s.value,h instanceof _&&Ff(t,h,i,e);E.free(e)}r.group=n,r.ux=i,r.Kr=!1}else e&&vx(r);return r}function J0(t,e){return e.avoidable&&!e.isLinkLabel?e:e.containingGroup!==null?J0(t,e.containingGroup):null}function Ff(t,e,n,i){if(e!==n&&e.isVisible()){if(e.avoidable&&!e.isLinkLabel){e=e.getAvoidableRect(i),t=t.Jh;var r=e.x,s=e.y;if(hh(t,r,s))for(n=(s-t.Bd)/t.nc|0,i=Math.min((r+e.width-t.Ad)/t.mc|0,t.Ph),e=Math.min((s+e.height-t.Bd)/t.nc|0,t.Qh),r=(r-t.Ad)/t.mc|0;r<=i;r++)if(s=t.Wb[r],s.fill)s.fill(hr,n,e+1);else for(var h=n;h<=e;h++)s[h]=hr}else if(e instanceof ut)for(e=e.memberParts;e.next();)r=e.value,r instanceof _&&Ff(t,r,n,i)}}function Bf(t,e){t.Jh===null||t.Jh.Kr||e!==void 0&&(!e.avoidable||e.isLinkLabel)||(t.Jh.Kr=!0)}I.prototype.xr=function(t){this.Qo.assign(t),this.computeAutoScrollPosition(this.Qo).$a(this.position)?this.gg():Z0(this)};function Z0(t){t.$j===-1&&(t.$j=On(function(){if(t.$j!==-1&&(t.gg(),t.lastInput.event!==null)){var e=t.computeAutoScrollPosition(t.Qo);e.$a(t.position)||(t.position=e,t.lastInput.documentPoint=t.hs(t.Qo),t.doMouseMove(),t.Li=!0,e=E.alloc(),t.computeBounds(e),e.Vc(t.documentBounds),kf(t,e),E.free(e),t.Zc=!0,t.kd(),Z0(t))}},t.Po))}I.prototype.gg=function(){this.$j!==-1&&(it.clearTimeout(this.$j),this.$j=-1)},I.prototype.computeAutoScrollPosition=function(t){var e=this.position,n=this.Ro;if(0>=n.top&&0>=n.left&&0>=n.right&&0>=n.bottom)return e;var i=this.viewportBounds,r=this.scale;i=E.allocAt(0,0,i.width*r,i.height*r);var s=T.allocAt(0,0);if(t.x>=i.x&&t.x<i.x+n.left&&this.allowHorizontalScroll){var h=Math.max(this.scrollHorizontalLineChange,1);h|=0,s.x-=h,t.x<i.x+n.left/2&&(s.x-=h),t.x<i.x+n.left/4&&(s.x-=4*h)}else t.x<=i.x+i.width&&t.x>i.x+i.width-n.right&&this.allowHorizontalScroll&&(h=Math.max(this.scrollHorizontalLineChange,1),h|=0,s.x+=h,t.x>i.x+i.width-n.right/2&&(s.x+=h),t.x>i.x+i.width-n.right/4&&(s.x+=4*h));return t.y>=i.y&&t.y<i.y+n.top&&this.allowVerticalScroll?(h=Math.max(this.scrollVerticalLineChange,1),h|=0,s.y-=h,t.y<i.y+n.top/2&&(s.y-=h),t.y<i.y+n.top/4&&(s.y-=4*h)):t.y<=i.y+i.height&&t.y>i.y+i.height-n.bottom&&this.allowVerticalScroll&&(h=Math.max(this.scrollVerticalLineChange,1),h|=0,s.y+=h,t.y>i.y+i.height-n.bottom/2&&(s.y+=h),t.y>i.y+i.height-n.bottom/4&&(s.y+=4*h)),s.$a(Zi)||(e=new T(e.x+s.x/r,e.y+s.y/r)),E.free(i),T.free(s),e},a=I.prototype,a.Tr=function(){return null},a.Bu=function(){return null},a.Zx=function(t,e){this.Mx.add(t,e)},a.bu=function(t){(this.jw=t)||this.nodes.each(function(e){e instanceof ut&&(e.tp=null)})};function _0(t,e,n){function i(){var g=+new Date;for(s=!0,h.reset();h.next();)if(!h.value[0].Hk){s=!1;break}s||g-d>p?e(n,r,u):it.requestAnimationFrame(i)}for(var r=n.callback,s=!0,h=t.zg.iterator;h.next();)if(!h.value[0].Hk){s=!1;break}if(typeof r!="function"||s)return e(n,r,t);var u=t,p=n.callbackTimeout||300,d=+new Date;return it.requestAnimationFrame(function(){i()}),null}a.nz=function(t){return yi?(t===void 0&&(t={}),t.returnType="Image",this.ax(t)):null},a.ax=function(t){return t===void 0&&(t={}),_0(this,this.oz,t)},a.oz=function(t,e,n){var i=$0(n,t,"canvas",null);if(i===null)return null;n=i.Z.canvas;var r=null;if(n!==null)switch(r=t.returnType,r===void 0?r="string":r=r.toLowerCase(),r){case Xa+"data":r=i.getImageData(0,0,n.width,n.height);break;case Xa:i=(t.document||document).createElement("img"),i.src=n.toDataURL(t.type,t.details),r=i;break;case"blob":return typeof e!="function"&&X('Error: Diagram.makeImageData called with "returnType: toBlob", but no required "callback" function property defined.'),typeof n.toBlob=="function"?(n.toBlob(e,t.type,t.details),"toBlob"):typeof n.msToBlob=="function"?(e(n.msToBlob()),"msToBlob"):(e(null),null);default:r=n.toDataURL(t.type,t.details)}return typeof e=="function"?(e(r),null):r};function $0(t,e,n,i){if(t.animationManager.wc(),t.kd(),t.Ha===null)return null;typeof e!="object"&&X("properties argument must be an Object.");var r=e.size||null,s=e.scale||null;e.scale!==void 0&&isNaN(e.scale)&&(s="NaN");var h=e.maxSize;e.maxSize===void 0&&(h=n==="SVG"?new ht(1/0,1/0):new ht(2e3,2e3));var u=e.position||null,p=e.parts||null,d=e.padding===void 0?1:e.padding,g=e.background||null,c=e.omitTemporary;c===void 0&&(c=!0);var y=e.document||document,S=e.elementFinished||null,v=e.showTemporary;v===void 0&&(v=!c),e=e.showGrid,e===void 0&&(e=v),r!==null&&isNaN(r.width)&&isNaN(r.height)&&(r=null),typeof d=="number"?d=new Ft(d):d instanceof Ft||X("MakeImage padding must be a Margin or a number."),d.left=Math.max(d.left,0),d.right=Math.max(d.right,0),d.top=Math.max(d.top,0),d.bottom=Math.max(d.bottom,0),t.Yb.Mc(!0),c=new li(null,y);var L=c.context;if(!(r||s||p||u))return c.width=t.Aa+Math.ceil(d.left+d.right),c.height=t.ya+Math.ceil(d.top+d.bottom),n==="SVG"?i===null?null:(i.resize(c.width,c.height,c.width,c.height),i.ownerDocument=y,i.fo=S,Du(t,i.context,d,new ht(c.width,c.height),t.wa,t.pa,p,g,v,e),i.context):(t.vm=!1,Du(t,L,d,new ht(c.width,c.height),t.wa,t.pa,p,g,v,e),t.vm=!0,c.context);var N=t.jp,M=t.documentBounds.copy();if(M.av(t.ub),v)for(var B=t.Va.s,F=B.length,j=0;j<F;j++){var D=B[j];if(D.visible&&D.isTemporary){D=D.La.s;for(var R=D.length,W=0;W<R;W++){var tt=D[W];tt.isInDocumentBounds&&tt.isVisible()&&(tt=tt.actualBounds,tt.w()&&M.Vc(tt))}}}if(B=new T(M.x,M.y),p!==null){for(F=new E(0,0,0,0),j=!0,D=p.iterator,D.reset();D.next();)R=D.value,R instanceof ot&&(W=R.layer,W!==null&&!W.visible||W!==null&&!v&&W.isTemporary||!R.isVisible()||(R=R.actualBounds,R.w()&&(j?(j=!1,F.assign(R)):F.Vc(R))));M.width=F.width,M.height=F.height,B.x=F.x,B.y=F.y}return u!==null&&u.w()&&(B=u,s||(s=N)),F=u=0,d!==null&&(u=d.left+d.right,F=d.top+d.bottom),j=D=0,r!==null&&(D=r.width,j=r.height,isFinite(D)&&(D=Math.max(0,D-u)),isFinite(j)&&(j=Math.max(0,j-F))),r!==null&&s!==null?(s==="NaN"&&(s=N),r.w()?(r=D,M=j):isNaN(j)?(r=D,M=M.height*s):(r=M.width*s,M=j)):r!==null?r.w()?(s=Math.min(D/M.width,j/M.height),r=D,M=j):isNaN(j)?(s=D/M.width,r=D,M=M.height*s):(s=j/M.height,r=M.width*s,M=j):s!==null?s==="NaN"&&h.w()?(s=Math.min((h.width-u)/M.width,(h.height-F)/M.height),s>N?(s=N,r=M.width,M=M.height):(r=h.width,M=h.height)):(r=M.width*s,M=M.height*s):(s=N,r=M.width,M=M.height),d!==null?(r+=u,M+=F):d=new Ft(0),h!==null&&(N=h.width,h=h.height,isNaN(N)&&(N=2e3),isNaN(h)&&(h=2e3),isFinite(N)&&(r=Math.min(r,N)),isFinite(h)&&(M=Math.min(M,h))),c.width=Math.ceil(r),c.height=Math.ceil(M),n==="SVG"?i===null?null:(i.resize(c.width,c.height,c.width,c.height),i.ownerDocument=y,i.fo=S,Du(t,i.context,d,new ht(Math.ceil(r),Math.ceil(M)),s,B,p,g,v,e),i.context):(t.vm=!1,Du(t,L,d,new ht(Math.ceil(r),Math.ceil(M)),s,B,p,g,v,e),t.vm=!0,c.context)}Z.Object.defineProperties(I.prototype,{div:{get:function(){return this.Ka},set:function(t){if(this.Ka!==t){var e=this.Ka;e!==null?(e.H=void 0,e.goDiagram=void 0,e.go=void 0,e.innerHTML="",this.Ha!==null&&(e=this.Ha.Sa,this.removeEventListener(e,"pointermove",this.Nj,!1),this.removeEventListener(e,"pointerdown",this.Mj,!1),this.removeEventListener(e,"pointerup",this.Pj,!1),this.removeEventListener(e,"pointerout",this.Oj,!1),this.removeEventListener(e,"pointercancel",this.Lj,!1),this.Ha.Fw()),this.Tk&&(this.Tk.disconnect(),this.Tk=null),e=this.toolManager,e!==null&&(e.mouseDownTools.each(function(n){n.cancelWaitAfter()}),e.mouseMoveTools.each(function(n){n.cancelWaitAfter()}),e.mouseUpTools.each(function(n){n.cancelWaitAfter()})),e.cancelWaitAfter(),this.currentTool.doCancel(),this.Ha=null,this.removeEventListener(it,"resize",this.iv,!1),this.removeEventListener(it,"wheel",this.Jj,!0),za===this&&(za=null)):this.Nf=!1,this.Ka=null,t!==null&&((e=t.H)&&(e.div=null),Af(this,t),this.redraw())}}},uw:{get:function(){return this.lq}},ci:{get:function(){return this.Nf}},draggedLink:{get:function(){return this.Gs},set:function(t){this.Gs!==t&&(this.Gs=t,t!==null&&(this.qt=t.fromPort,this.rt=t.toPort))}},hx:{get:function(){return this.qt},set:function(t){this.qt=t}},ix:{get:function(){return this.rt},set:function(t){this.rt=t}},animationManager:{get:function(){return this.Nd}},undoManager:{get:function(){return this.$b.undoManager}},skipsUndoManager:{get:function(){return this.Gg},set:function(t){this.Gg=t,this.$b.skipsUndoManager=t}},delaysLayout:{get:function(){return this.Es},set:function(t){this.Es=t}},opacity:{get:function(){return this.tb},set:function(t){var e=this.tb;e!==t&&((0>t||1<t)&&Rt(t,"0 <= value <= 1",I,"opacity"),this.tb=t,this.g("opacity",e,t),this.N())}},validCycle:{get:function(){return this.St},set:function(t){var e=this.St;e!==t&&(this.St=t,this.g("validCycle",e,t))}},layers:{get:function(){return this.Va.iterator}},isModelReadOnly:{get:function(){var t=this.$b;return t===null?!1:t.isReadOnly},set:function(t){var e=this.$b;e!==null&&(e.isReadOnly=t)}},isReadOnly:{get:function(){return this.sg},set:function(t){var e=this.sg;e!==t&&(this.sg=t,this.g("isReadOnly",e,t))}},isEnabled:{get:function(){return this.wd},set:function(t){var e=this.wd;e!==t&&(this.wd=t,this.g("isEnabled",e,t))}},allowClipboard:{get:function(){return this.ns},set:function(t){var e=this.ns;e!==t&&(this.ns=t,this.g("allowClipboard",e,t))}},allowCopy:{get:function(){return this.si},set:function(t){var e=this.si;e!==t&&(this.si=t,this.g("allowCopy",e,t))}},allowDelete:{get:function(){return this.ti},set:function(t){var e=this.ti;e!==t&&(this.ti=t,this.g("allowDelete",e,t))}},allowDragOut:{get:function(){return this.os},set:function(t){var e=this.os;e!==t&&(this.os=t,this.g("allowDragOut",e,t))}},allowDrop:{get:function(){return this.ps},set:function(t){var e=this.ps;e!==t&&(this.ps=t,this.g("allowDrop",e,t))}},allowTextEdit:{get:function(){return this.Ci},set:function(t){var e=this.Ci;e!==t&&(this.Ci=t,this.g("allowTextEdit",e,t))}},allowGroup:{get:function(){return this.ui},set:function(t){var e=this.ui;e!==t&&(this.ui=t,this.g("allowGroup",e,t))}},allowUngroup:{get:function(){return this.Di},set:function(t){var e=this.Di;e!==t&&(this.Di=t,this.g("allowUngroup",e,t))}},allowInsert:{get:function(){return this.rs},set:function(t){var e=this.rs;e!==t&&(this.rs=t,this.g("allowInsert",e,t))}},allowLink:{get:function(){return this.vi},set:function(t){var e=this.vi;e!==t&&(this.vi=t,this.g("allowLink",e,t))}},allowRelink:{get:function(){return this.xi},set:function(t){var e=this.xi;e!==t&&(this.xi=t,this.g("allowRelink",e,t))}},allowMove:{get:function(){return this.wi},set:function(t){var e=this.wi;e!==t&&(this.wi=t,this.g("allowMove",e,t))}},allowReshape:{get:function(){return this.yi},set:function(t){var e=this.yi;e!==t&&(this.yi=t,this.g("allowReshape",e,t))}},allowResize:{get:function(){return this.zi},set:function(t){var e=this.zi;e!==t&&(this.zi=t,this.g("allowResize",e,t))}},allowRotate:{get:function(){return this.Ai},set:function(t){var e=this.Ai;e!==t&&(this.Ai=t,this.g("allowRotate",e,t))}},allowSelect:{get:function(){return this.Bi},set:function(t){var e=this.Bi;e!==t&&(this.Bi=t,this.g("allowSelect",e,t))}},allowUndo:{get:function(){return this.ss},set:function(t){var e=this.ss;e!==t&&(this.ss=t,this.g("allowUndo",e,t))}},allowZoom:{get:function(){return this.us},set:function(t){var e=this.us;e!==t&&(this.us=t,this.g("allowZoom",e,t))}},hasVerticalScrollbar:{get:function(){return this.Km},set:function(t){var e=this.Km;e!==t&&(this.Km=t,_o(this),this.N(),this.g("hasVerticalScrollbar",e,t),Ai(this,!1))}},hasHorizontalScrollbar:{get:function(){return this.Jm},set:function(t){var e=this.Jm;e!==t&&(this.Jm=t,_o(this),this.N(),this.g("hasHorizontalScrollbar",e,t),Ai(this,!1))}},allowHorizontalScroll:{get:function(){return this.qs},set:function(t){var e=this.qs;e!==t&&(this.qs=t,this.g("allowHorizontalScroll",e,t),Ai(this,!1))}},allowVerticalScroll:{get:function(){return this.ts},set:function(t){var e=this.ts;e!==t&&(this.ts=t,this.g("allowVerticalScroll",e,t),Ai(this,!1))}},scrollHorizontalLineChange:{get:function(){return this.Et},set:function(t){var e=this.Et;e!==t&&(0>t&&Rt(t,">= 0",I,"scrollHorizontalLineChange"),this.Et=t,this.g("scrollHorizontalLineChange",e,t))}},scrollVerticalLineChange:{get:function(){return this.It},set:function(t){var e=this.It;e!==t&&(0>t&&Rt(t,">= 0",I,"scrollVerticalLineChange"),this.It=t,this.g("scrollVerticalLineChange",e,t))}},lastInput:{get:function(){return this.Ri},set:function(t){this.Ri=t}},previousInput:{get:function(){return this.Bg},set:function(t){this.Bg=t}},firstInput:{get:function(){return this.wp},set:function(t){this.wp=t}},currentCursor:{get:function(){return this.Bs},set:function(t){if(t===""&&(t=this.ip),this.Bs!==t){var e=this.Ha,n=this.Ka;if(e!==null&&n!==null){this.Bs=t;var i=e.style.cursor;e.style.cursor=t,n.style.cursor=t,e.style.cursor===i&&(e.style.cursor="-webkit-"+t,n.style.cursor="-webkit-"+t,e.style.cursor===i&&(e.style.cursor="-moz-"+t,n.style.cursor="-moz-"+t,e.style.cursor===i&&(e.style.cursor=t,n.style.cursor=t)))}}}},defaultCursor:{get:function(){return this.ip},set:function(t){t===""&&(t="auto");var e=this.ip;e!==t&&(this.ip=t,this.g("defaultCursor",e,t))}},click:{get:function(){return this.jh},set:function(t){var e=this.jh;e!==t&&(this.jh=t,this.g("click",e,t))}},doubleClick:{get:function(){return this.ph},set:function(t){var e=this.ph;e!==t&&(this.ph=t,this.g("doubleClick",e,t))}},contextClick:{get:function(){return this.lh},set:function(t){var e=this.lh;e!==t&&(this.lh=t,this.g("contextClick",e,t))}},mouseOver:{get:function(){return this.Ch},set:function(t){var e=this.Ch;e!==t&&(this.Ch=t,this.g("mouseOver",e,t))}},mouseHover:{get:function(){return this.Ah},set:function(t){var e=this.Ah;e!==t&&(this.Ah=t,this.g("mouseHover",e,t))}},mouseHold:{get:function(){return this.zh},set:function(t){var e=this.zh;e!==t&&(this.zh=t,this.g("mouseHold",e,t))}},mouseDragOver:{get:function(){return this.lt},set:function(t){var e=this.lt;e!==t&&(this.lt=t,this.g("mouseDragOver",e,t))}},mouseDrop:{get:function(){return this.xh},set:function(t){var e=this.xh;e!==t&&(this.xh=t,this.g("mouseDrop",e,t))}},handlesDragDropForTopLevelParts:{get:function(){return this.Rs},set:function(t){var e=this.Rs;e!==t&&(this.Rs=t,this.g("handlesDragDropForTopLevelParts",e,t))}},mouseEnter:{get:function(){return this.yh},set:function(t){var e=this.yh;e!==t&&(this.yh=t,this.g("mouseEnter",e,t))}},mouseLeave:{get:function(){return this.Bh},set:function(t){var e=this.Bh;e!==t&&(this.Bh=t,this.g("mouseLeave",e,t))}},toolTip:{get:function(){return this.Mh},set:function(t){var e=this.Mh;e!==t&&(this.Mh=t,this.g("toolTip",e,t))}},contextMenu:{get:function(){return this.mh},set:function(t){var e=this.mh;e!==t&&(this.mh=t,this.g("contextMenu",e,t))}},commandHandler:{get:function(){return this.mb},set:function(t){this.mb!==t&&(this.mb=t,t.Je(this))}},toolManager:{get:function(){return this.ie},set:function(t){this.ie!==t&&(this.ie=t,t.diagram=this)}},defaultTool:{get:function(){return this.nb},set:function(t){var e=this.nb;e!==t&&(this.nb=t,t.diagram=this,this.currentTool===e&&(this.currentTool=t))}},currentTool:{get:function(){return this.gb},set:function(t){var e=this.gb;e&&(e.isActive&&e.doDeactivate(),e.cancelWaitAfter(),e.doStop()),t===null&&(t=this.defaultTool),t!==null&&(this.gb=t,t.diagram=this,t.doStart())}},selection:{get:function(){return this.bw}},maxSelectionCount:{get:function(){return this.gt},set:function(t){var e=this.gt;if(e!==t)if(0<=t&&!isNaN(t)){if(this.gt=t,this.g("maxSelectionCount",e,t),!this.undoManager.isUndoingRedoing&&(t=this.selection.count-t,0<t)){this.P("ChangingSelection",this.selection),e=this.selection.Da();for(var n=0;n<t;n++)e[n].isSelected=!1;this.P("ChangedSelection",this.selection)}}else Rt(t,">= 0",I,"maxSelectionCount")}},nodeSelectionAdornmentTemplate:{get:function(){return this.nt},set:function(t){var e=this.nt;e!==t&&(this.nt=t,this.g("nodeSelectionAdornmentTemplate",e,t))}},groupSelectionAdornmentTemplate:{get:function(){return this.Qs},set:function(t){var e=this.Qs;e!==t&&(this.Qs=t,this.g("groupSelectionAdornmentTemplate",e,t))}},linkSelectionAdornmentTemplate:{get:function(){return this.dt},set:function(t){var e=this.dt;e!==t&&(this.dt=t,this.g("linkSelectionAdornmentTemplate",e,t))}},highlighteds:{get:function(){return this.Jv}},isModified:{get:function(){var t=this.undoManager;return t.isEnabled?t.currentTransaction!==null?!0:this.Om&&this.pe!==t.historyIndex:this.Om},set:function(t){if(this.Om!==t){this.Om=t;var e=this.undoManager;!t&&e.isEnabled&&(this.pe=e.historyIndex),t||Y0(this)}}},model:{get:function(){return this.$b},set:function(t){var e=this.$b;if(e!==t){this.currentTool.doCancel(),e&&e.undoManager!==t.undoManager&&e.undoManager.isInTransaction&&X("Do not replace a Diagram.model while a transaction is in progress."),this.animationManager.wc(!0);var n=D0(this,!0);this.Nf=!1,this.Dm=!0,this.pe=-2,this.Zf=!1;var i=this.wb;this.wb=!0,Jo(this.animationManager,"Model"),e&&(this.Ze!==null&&this.Ze.each(function(s){e.Rj(s)}),e.Rj(this.Gc)),this.$b=t,this.partManager=ov(this.$b.type);for(var r=0;r<n.length;r++)this.add(n[r]);t.Og(this.Db),this.partManager.addAllModeledParts(),t.Rj(this.Db),t.Og(this.Gc),this.Ze!==null&&this.Ze.each(function(s){t.Og(s)}),this.wb=i,this.Wa(),this.wb||this.N(),e&&t.undoManager.copyProperties(e.undoManager)}}},$:{get:function(){return this.Nv},set:function(t){this.Nv=t}},Rr:{get:function(){return this.Lx}},skipsModelSourceBindings:{get:function(){return this.cw},set:function(t){this.cw=t}},es:{get:function(){return this.Kt},set:function(t){this.Kt=t}},nodeTemplate:{get:function(){return this.wg.I("")},set:function(t){var e=this.wg.I("");e!==t&&(this.wg.add("",t),this.g("nodeTemplate",e,t),this.undoManager.isUndoingRedoing||this.Kd())}},nodeTemplateMap:{get:function(){return this.wg},set:function(t){var e=this.wg;e!==t&&(this.wg=t,this.g("nodeTemplateMap",e,t),this.undoManager.isUndoingRedoing||this.Kd())}},groupTemplate:{get:function(){return this.Ki.I("")},set:function(t){var e=this.Ki.I("");e!==t&&(this.Ki.add("",t),this.g("groupTemplate",e,t),this.undoManager.isUndoingRedoing||this.Kd())}},groupTemplateMap:{get:function(){return this.Ki},set:function(t){var e=this.Ki;e!==t&&(this.Ki=t,this.g("groupTemplateMap",e,t),this.undoManager.isUndoingRedoing||this.Kd())}},linkTemplate:{get:function(){return this.wh.I("")},set:function(t){var e=this.wh.I("");e!==t&&(this.wh.add("",t),this.g("linkTemplate",e,t),this.undoManager.isUndoingRedoing||this.Kd())}},linkTemplateMap:{get:function(){return this.wh},set:function(t){var e=this.wh;e!==t&&(this.wh=t,this.g("linkTemplateMap",e,t),this.undoManager.isUndoingRedoing||this.Kd())}},isMouseCaptured:{get:function(){return this.Mv},set:function(t){var e=this.Ha;e!==null&&(e=e.Sa,e instanceof SVGElement||(t?(this.lastInput.bubbles=!1,this.removeEventListener(e,"pointermove",this.Nj,!1),this.removeEventListener(e,"pointerdown",this.Mj,!1),this.removeEventListener(e,"pointerup",this.Pj,!1),this.removeEventListener(e,"pointerout",this.Oj,!1),this.removeEventListener(e,"pointercancel",this.Lj,!1),this.addEventListener(it,"pointermove",this.Nj,!0),this.addEventListener(it,"pointerdown",this.Mj,!0),this.addEventListener(it,"pointerup",this.Pj,!0),this.addEventListener(it,"pointerout",this.Oj,!0),this.addEventListener(it,"pointercancel",this.Lj,!0),this.removeEventListener(e,"wheel",this.Jj,!1),this.addEventListener(it,"wheel",this.Jj,!0),this.addEventListener(it,"selectstart",this.preventDefault,!1)):(this.removeEventListener(it,"pointermove",this.Nj,!0),this.removeEventListener(it,"pointerdown",this.Mj,!0),this.removeEventListener(it,"pointerup",this.Pj,!0),this.removeEventListener(it,"pointerout",this.Oj,!0),this.removeEventListener(it,"pointercancel",this.Lj,!0),this.addEventListener(e,"pointermove",this.Nj,!1),this.addEventListener(e,"pointerdown",this.Mj,!1),this.addEventListener(e,"pointerup",this.Pj,!1),this.addEventListener(e,"pointerout",this.Oj,!1),this.addEventListener(e,"pointercancel",this.Lj,!1),this.removeEventListener(it,"wheel",this.Jj,!0),this.removeEventListener(it,"selectstart",this.preventDefault,!1),this.addEventListener(e,"wheel",this.Jj,!1)),this.Mv=t))}},position:{get:function(){return this.pa},set:function(t){var e=T.alloc().assign(this.pa);if(!e.C(t)){var n=this.viewportBounds.copy();this.pa.assign(t),y0(this.animationManager,e,this.pa),this.wb||this.Ha===null&&!this.Qn.w()?bo(this):(this.wb=!0,t=this.scale,df(this,this.mp,this.Aa/t,this.ya/t,this.dk,!1),this.wb=!1),this.wb||this.onViewportBoundsChanged(n,this.viewportBounds,this.wa,!1)}T.free(e)}},initialPosition:{get:function(){return this.Ts},set:function(t){this.Ts.C(t)||(this.Ts=t.J())}},initialScale:{get:function(){return this.Us},set:function(t){this.Us!==t&&(this.Us=t)}},grid:{get:function(){return this.Vd===null&&(this.Vd=I0(this)),this.Vd},set:function(t){var e=this.Vd;if(e!==t){e===null&&(e=this.Vd=I0(this)),t.type!==Y.Grid&&X("Diagram.grid must be a Panel of type Panel.Grid");var n=e.panel;n!==null&&n.remove(e),this.Vd=t,t.name="GRID",n!==null&&n.add(t),Qo(this),this.N(),this.g("grid",e,t)}}},viewportBounds:{get:function(){return this.lw}},viewSize:{get:function(){return this.Qn},set:function(t){var e=this.viewSize;e.C(t)||(this.Qn=t=t.J(),this.ya=this.Aa=0,t.w()?(this.Aa=t.width,this.ya=t.height):this.Ka!==null&&(this.Aa=this.Ka.clientWidth||1,this.ya=this.Ka.clientHeight||1),bo(this),this.Wa(),this.g("viewSize",e,t),this.redraw())}},fixedBounds:{get:function(){return this.Os},set:function(t){var e=this.Os;e.C(t)||(t.width!==-1/0&&t.height!==1/0&&t.height!==-1/0||X("fixedBounds width/height must not be Infinity"),this.Os=t=t.J(),this.Wa(),this.g("fixedBounds",e,t))}},scrollMargin:{get:function(){return this.ej},set:function(t){typeof t=="number"&&(t=new Ft(t));var e=this.ej;e.C(t)||(this.ej=t=t.J(),this.g("scrollMargin",e,t),this.Ao())}},scrollMode:{get:function(){return this.fj},set:function(t){var e=this.fj;e!==t&&(this.fj=t,t===us&&Ai(this,!1),this.g("scrollMode",e,t),this.N())}},scrollsPageOnFocus:{get:function(){return this.Jt},set:function(t){var e=this.Jt;e!==t&&(this.Jt=t,this.g("scrollsPageOnFocus",e,t))}},positionComputation:{get:function(){return this.ut},set:function(t){var e=this.ut;e!==t&&(this.ut=t,Ai(this,!1),this.g("positionComputation",e,t))}},scaleComputation:{get:function(){return this.Bt},set:function(t){var e=this.Bt;e!==t&&(this.Bt=t,V0(this,this.scale,this.scale),this.g("scaleComputation",e,t))}},documentBounds:{get:function(){return this.mp}},isVirtualized:{get:function(){return this.bt},set:function(t){var e=this.bt;e!==t&&(this.bt=t,this.g("isVirtualized",e,t))}},scale:{get:function(){return this.wa},set:function(t){var e=this.wa;e!==t&&V0(this,e,t)}},defaultScale:{get:function(){return this.jp},set:function(t){this.jp=t}},autoScale:{get:function(){return this.ih},set:function(t){var e=this.ih;e!==t&&(this.ih=t,this.g("autoScale",e,t),t!==Qn&&Ai(this,!1))}},initialAutoScale:{get:function(){return this.rg},set:function(t){var e=this.rg;e!==t&&(this.rg=t,this.g("initialAutoScale",e,t))}},initialViewportSpot:{get:function(){return this.Vs},set:function(t){var e=this.Vs;e!==t&&(t.pb()||X("initialViewportSpot must be a specific Spot: "+t),this.Vs=t,this.g("initialViewportSpot",e,t))}},initialDocumentSpot:{get:function(){return this.Ss},set:function(t){var e=this.Ss;e!==t&&(t.pb()||X("initialViewportSpot must be a specific Spot: "+t),this.Ss=t,this.g("initialDocumentSpot",e,t))}},minScale:{get:function(){return this.jt},set:function(t){var e=this.jt;e!==t&&(0<t?(this.jt=t,this.g("minScale",e,t),t>this.scale&&(this.scale=t)):Rt(t,"> 0",I,"minScale"))}},maxScale:{get:function(){return this.ft},set:function(t){var e=this.ft;e!==t&&(0<t?(this.ft=t,this.g("maxScale",e,t),t<this.scale&&(this.scale=t)):Rt(t,"> 0",I,"maxScale"))}},zoomPoint:{get:function(){return this.Vt},set:function(t){this.Vt.C(t)||(this.Vt=t=t.J())}},contentAlignment:{get:function(){return this.dk},set:function(t){var e=this.dk;e.C(t)||(this.dk=t=t.J(),this.g("contentAlignment",e,t),Ai(this,!1))}},initialContentAlignment:{get:function(){return this.Ip},set:function(t){var e=this.Ip;e.C(t)||(this.Ip=t=t.J(),this.g("initialContentAlignment",e,t))}},padding:{get:function(){return this.ub},set:function(t){typeof t=="number"&&(t=new Ft(t));var e=this.ub;e.C(t)||(this.ub=t=t.J(),this.Wa(),this.g("padding",e,t))}},partManager:{get:function(){return this.Hc},set:function(t){var e=this.Hc;e!==t&&(t.diagram!==null&&X("Cannot share PartManagers between Diagrams: "+t.toString()),e&&e.Je(null),this.Hc=t,t.Je(this))}},nodes:{get:function(){return this.partManager.nodes.iterator}},links:{get:function(){return this.partManager.links.iterator}},parts:{get:function(){return this.partManager.parts.iterator}},layout:{get:function(){return this.Jc},set:function(t){var e=this.Jc;e!==t&&(this.Jc=t,t.diagram=this,t.group=null,this.hh=!0,this.g("layout",e,t),this.Kb())}},isTreePathToChildren:{get:function(){return this.at},set:function(t){var e=this.at;if(e!==t&&(this.at=t,this.g("isTreePathToChildren",e,t),!this.undoManager.isUndoingRedoing))for(t=this.nodes;t.next();)wl(t.value)}},treeCollapsePolicy:{get:function(){return this.Qt},set:function(t){var e=this.Qt;e!==t&&(t!==Rs&&t!==Gf&&t!==Of&&X("Unknown Diagram.treeCollapsePolicy: "+t),this.Qt=t,this.g("treeCollapsePolicy",e,t))}},Ge:{get:function(){return this.Lv},set:function(t){this.Lv=t}},avoidanceCellSize:{get:function(){return this.vv},set:function(t){this.Jh=null,this.vv=new ht(Math.max(1,t.width),Math.max(1,t.height))}},avoidanceLimit:{get:function(){return this.wv},set:function(t){this.wv=Math.max(1,t)}},autoScrollInterval:{get:function(){return this.Po},set:function(t){var e=this.Po;e!==t&&(this.Po=t,this.g("autoScrollInterval",e,t))}},autoScrollRegion:{get:function(){return this.Ro},set:function(t){typeof t=="number"&&(t=new Ft(t));var e=this.Ro;e.C(t)||(this.Ro=t=t.J(),this.Wa(),this.g("autoScrollRegion",e,t))}}}),Z.Object.defineProperties(I,{licenseKey:{get:function(){return If.ec()},set:function(t){If.add(t.replace(/\s/g,""))}},version:{get:function(){return sv}}}),I.prototype.makeImageData=I.prototype.ax,I.prototype.makeImage=I.prototype.nz,I.prototype.cacheGroupExternalLinks=I.prototype.bu,I.prototype.addRenderer=I.prototype.Zx,I.prototype.makeSVG=I.prototype.Bu,I.prototype.makeSvg=I.prototype.Tr,I.prototype.stopAutoScroll=I.prototype.gg,I.prototype.doAutoScroll=I.prototype.xr,I.prototype.isUnoccupied=I.prototype.Hj,I.prototype.raiseDiagramEvent=I.prototype.P,I.prototype.removeDiagramListener=I.prototype.zl,I.prototype.addDiagramListener=I.prototype.oj,I.prototype.findTreeRoots=I.prototype.Sy,I.prototype.layoutDiagram=I.prototype.lz,I.prototype.findTopLevelGroups=I.prototype.Ly,I.prototype.findTopLevelNodesAndLinks=I.prototype.My,I.prototype.ensureBounds=I.prototype.Ta,I.prototype.findLinksByExample=I.prototype.Ar,I.prototype.findNodesByExample=I.prototype.Br,I.prototype.findLinkForData=I.prototype.Cc,I.prototype.findNodeForData=I.prototype.Wh,I.prototype.findPartForData=I.prototype.Dc,I.prototype.findLinkForKey=I.prototype.findLinkForKey,I.prototype.findNodeForKey=I.prototype.Pb,I.prototype.findPartForKey=I.prototype.findPartForKey,I.prototype.rebuildParts=I.prototype.Kd,I.prototype.transformViewToDoc=I.prototype.hs,I.prototype.transformRectDocToView=I.prototype.Rz,I.prototype.transformDocToView=I.prototype.Io,I.prototype.centerRect=I.prototype.vr,I.prototype.scrollToRect=I.prototype.Su,I.prototype.scroll=I.prototype.scroll,I.prototype.highlightCollection=I.prototype.cz,I.prototype.highlight=I.prototype.bz,I.prototype.selectCollection=I.prototype.Jz,I.prototype.select=I.prototype.select,I.prototype.updateAllRelationshipsFromData=I.prototype.Lo,I.prototype.updateAllTargetBindings=I.prototype.updateAllTargetBindings,I.prototype.commit=I.prototype.commit,I.prototype.rollbackTransaction=I.prototype.xf,I.prototype.commitTransaction=I.prototype.cb,I.prototype.startTransaction=I.prototype.Ca,I.prototype.raiseChanged=I.prototype.g,I.prototype.raiseChangedEvent=I.prototype.bb,I.prototype.removeChangedListener=I.prototype.Rj,I.prototype.addChangedListener=I.prototype.Og,I.prototype.removeModelChangedListener=I.prototype.Ez,I.prototype.addModelChangedListener=I.prototype.sw,I.prototype.findLayer=I.prototype.Aj,I.prototype.removeLayer=I.prototype.Cz,I.prototype.addLayerAfter=I.prototype.Vx,I.prototype.addLayerBefore=I.prototype.qw,I.prototype.addLayer=I.prototype.el,I.prototype.moveParts=I.prototype.moveParts,I.prototype.copyParts=I.prototype.wj,I.prototype.removeParts=I.prototype.Zr,I.prototype.remove=I.prototype.remove,I.prototype.add=I.prototype.add,I.prototype.clearDelayedGeometries=I.prototype.yw,I.prototype.setProperties=I.prototype.Ml,I.prototype.attach=I.prototype.au,I.prototype.set=I.prototype.set,I.prototype.resetInputOptions=I.prototype.nx,I.prototype.setInputOption=I.prototype.Kz,I.prototype.getInputOption=I.prototype.pl,I.prototype.resetRenderingHints=I.prototype.ox,I.prototype.setRenderingHint=I.prototype.tx,I.prototype.getRenderingHint=I.prototype.Ee,I.prototype.maybeUpdate=I.prototype.kd,I.prototype.requestUpdate=I.prototype.Kb,I.prototype.delayInitialization=I.prototype.qy,I.prototype.isUpdateRequested=I.prototype.hz,I.prototype.invalidateDocumentBounds=I.prototype.Wa,I.prototype.findObjectsNear=I.prototype.bg,I.prototype.findPartsNear=I.prototype.Hy,I.prototype.findObjectsIn=I.prototype.pf,I.prototype.findPartsIn=I.prototype.Mw,I.prototype.findObjectsAt=I.prototype.Xh,I.prototype.findPartsAt=I.prototype.Gy,I.prototype.findObjectAt=I.prototype.dc,I.prototype.findPartAt=I.prototype.nl,I.prototype.focusObject=I.prototype.Ty,I.prototype.alignDocument=I.prototype.ay,I.prototype.zoomToRect=I.prototype.Tz,I.prototype.zoomToFit=I.prototype.zoomToFit,I.prototype.diagramScroll=I.prototype.Ew,I.prototype.focus=I.prototype.focus;var Iu=new pt,Q0=null,yi=it.document!==void 0,Va=null,il="",Qn=new J(I,"None",0),Ya=new J(I,"Uniform",1),Au=new J(I,"UniformToFill",2),jf=new J(I,"CycleAll",10),b0=new J(I,"CycleNotDirected",11),q0=new J(I,"CycleNotDirectedFast",12),tm=new J(I,"CycleNotUndirected",13),em=new J(I,"CycleDestinationTree",14),nm=new J(I,"CycleSourceTree",15),us=new J(I,"DocumentScroll",1),Df=new J(I,"InfiniteScroll",2),Rs=new J(I,"TreeParentCollapsed",21),Gf=new J(I,"AllParentsCollapsed",22),Of=new J(I,"AnyParentsCollapsed",23),If=new Q,sv="2.2.21",Xa="image",im=null,om=!1;function av(){if(yi){var t=it.document.createElement("canvas"),e=t.getContext("2d"),n=Tt("7ca11abfd022028846");e[n]=Tt("398c3597c01238");for(var i=["5da73c80a36455d6038e4972187c3cae51fd22",vn.Dx+"4ae6247590da4bb21c324ba3a84e385776",ct.xF+"fb236cdfda5de14c134ba1a95a2d4c7cc6f93c1387",O.za],r=1;5>r;r++)e[Tt("7ca11abfd7330390")](Tt(i[r-1]),10,15*r);for(e[n]=Tt("39f046ebb36e4b"),n=1;5>n;n++)e[Tt("7ca11abfd7330390")](Tt(i[n-1]),10,15*n);(i.length!==4||i[0][0]!=="5"||i[3][0]!=="7")&&(ct.prototype.Gd=ct.prototype.vw),im=t}}I.className="Diagram",I.fromDiv=function(t){var e=t;return typeof t=="string"&&(e=it.document.getElementById(t)),e instanceof HTMLDivElement&&e.H instanceof I?e.H:null},I.inherit=function(t,e){function n(){}if(Object.getPrototypeOf(t).prototype)throw Error(`Used go.Diagram.inherit defining already defined class 
`+t);n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t},I.useDOM=function(t){yi=t?it.document!==void 0:!1},I.isUsingDOM=function(){return yi},I.None=Qn,I.Uniform=Ya,I.UniformToFill=Au,I.CycleAll=jf,I.CycleNotDirected=b0,I.CycleNotDirectedFast=q0,I.CycleNotUndirected=tm,I.CycleDestinationTree=em,I.CycleSourceTree=nm,I.DocumentScroll=us,I.InfiniteScroll=Df,I.TreeParentCollapsed=Rs,I.AllParentsCollapsed=Gf,I.AnyParentsCollapsed=Of;function rm(){this.Qx=null,this.j="zz@orderNum",this._tk==="63ad05bbe23a1786468a4c741b6d2"?this.md=this.j=!0:this.md=null}function ol(t,e){if(e.Yb.setTransform(e.jc,0,0,e.jc,0,0),e.Yb.Nc(),t.md===null)t:{e="f";var n=it[Tt("76a715b2f73f148a")][Tt("72ba13b5")];if(t.md=!0,yi){var i=I[Tt("76a115b6ed251eaf4692")];if(i)for(var r=If.iterator;r.next()&&(i=r.value,i=Tt(i).split(Tt("39e9")),!(6>i.length));){var s=Tt(i[1]).split(".");if(i[4]!=="7da71ca0")break;var h=Tt(vn[Tt("6cae19")]).split(".");if(s[0]>h[0]||s[0]===h[0]&&s[1]>=h[1]){var u=it[Tt("74a900bae4370f8b51")][Tt("6fbb13a1c2311e8a57")].toLowerCase();if(h=u[Tt("73a612b6fb191d")](Tt("3aad1ab6e022098b4dc4")),s=Tt(i[2]),-1<h&&(u=u[Tt("73a612b6fb191d")](s.toLowerCase()+"/"),t.md=!(-1<u&&u<h),!t.md))break;for(h=n[Tt("76ad18b4f73e")],u=n[Tt("73a612b6fb191d")](Tt("35e7"))+2;u<h;u++)e+=n[u];if(h=e[Tt("73a612b6fb191d")](s),0>h&&s!==Tt("7da71ca0ad381e90")&&(h=e[Tt("73a612b6fb191d")](Tt("76a715b2ef3e149757"))),0>h&&(h=e[Tt("73a612b6fb191d")](Tt("76a715b2ef3e149757"))),0>h&&(h=n[Tt("73a612b6fb191d")](Tt("7baa19a6f76c1988428554"))),t.md=!(0<=h&&h<e[Tt("73a612b6fb191d")](Tt("35"))||e[Tt("73a612b6fb191d")](Tt("35"))===-1),!t.md||n[Tt("73a612b6fb191d")](Tt("7fb002b6ed25128b4da25b2e"))&&n[Tt("73a612b6fb191d")](Tt("75ba1beee63a1e875799507d"))&&(t.md=!(-1<n[Tt("73a612b6fb191d")](s)),!t.md))break;if(s[0]==="#"){h=it.document.createElement("div");for(var p=i[0].replace(/[A-Za-z]/g,"");4>p.length;)p+="9";if(u=p,p=p.substr(p.length-4),i="",i+=["gsh","gsf"][parseInt(p.substr(0,1),10)%2],i+=["Header","Background","Display","Feedback"][parseInt(p.substr(0,1),10)%4],h[Tt("79a417a0f0181a8946")]=i,it.document[Tt("78a712aa")]){it.document[Tt("78a712aa")][Tt("7bb806b6ed32388c4a875b")](h),p=it.getComputedStyle(h).getPropertyValue(Tt("78a704b7e62456904c9b12701b6532a8"));var d=it.getComputedStyle(h).getPropertyValue(Tt("75b817b0ea2202"));if(it.document[Tt("78a712aa")][Tt("68ad1bbcf533388c4a875b")](h),p){if(h=it[Tt("77a902b0eb1b1e804a8a")],d==="0."+parseInt(u,10)%100||p.indexOf(parseInt(s[1]+s[2],16))!==-1&&p.indexOf(parseInt(s[3]+s[4],16))!==-1){t.md=!1;break}else if(h&&h(Tt("32ae19a1e0331fc94084537c067a67fa59f1386b89d006")).matches)for(i="."+i,s=0;s<document.styleSheets.length;s++){h=document.styleSheets[s].rules||document.styleSheets[s].cssRules;for(var g in h)if(i===h[g].selectorText){t.md=!1;break t}}}}else t.md=null,t.md=!1}}}else{for(g=n[Tt("76ad18b4f73e")],r=n[Tt("73a612b6fb191d")](Tt("35e7"))+2;r<g;r++)e+=n[r];n=e[Tt("73a612b6fb191d")](Tt("7da71ca0ad381e90")),t.md=!(0<=n&&n<e[Tt("73a612b6fb191d")](Tt("35")))}}}return 0<t.md&&t!==t.Qx}function Af(t,e){if(yi){if(e!=null||X("Diagram setup requires an argument DIV."),t.Ka!==null&&X("Diagram has already completed setup."),typeof e=="string"?t.Ka=it.document.getElementById(e):e instanceof HTMLDivElement?t.Ka=e:X("No DIV or DIV id supplied: "+e),t.Ka===null&&X("Invalid DIV id; could not get element with id: "+e),t.Ka.H!==void 0&&X("Invalid div id; div already has a Diagram associated with it."),!t.Tk&&it.ResizeObserver){var n=mi(function(){t.Kb()},250);t.Tk=new it.ResizeObserver(function(){n()}),t.Tk.observe(t.Ka)}it.getComputedStyle(t.Ka,null).position==="static"&&(t.Ka.style.position="relative"),e=5;var i="rgba(2"+e+"5, 255, 255, 0)";e--,t.Ka.style["-webkit-tap-highlight-color"]=i,t.Ka.innerHTML="",t.Ka.H=t,t.Ka.goDiagram=t,t.Ka.go=it.go;var r=t.dr?new Fo(t):new li(t);if(r.style!==void 0&&(r.style.position="absolute",r.style.top="0px",r.style.left="0px",it.getComputedStyle(t.Ka,null).getPropertyValue("direction")==="rtl"&&(t.Qm=!0),r.style.zIndex="2",r.style.userSelect="none",r.style.MozUserSelect="none",r.style.touchAction="none",r.style.webkitUserSelect="none",r.style.iA="none"),t.Ha=r,t.Yb=r.context,i=t.Yb,t.jc=t.computePixelRatio(),t.viewSize.w()||(t.Aa=t.Ka.clientWidth||1,t.ya=t.Ka.clientHeight||1),E0(t,t.Aa,t.ya),t.Ka.insertBefore(r.Sa,t.Ka.firstChild),r=new li(null),r.width=1,r.height=1,t.Ev=r,t.Ix=r.context,yi){r=_e("div");var s=_e("div");r.style.position="absolute",r.style.overflow="auto",r.style.width=t.Aa+"px",r.style.height=t.ya+"px",r.style.zIndex="1",s.style.position="absolute",s.style.width="1px",s.style.height="1px",t.Ka.appendChild(r),r.appendChild(s),r.onscroll=Qy,r.addEventListener("pointerdown",by),r.H=t,r.Ox=!0,r.Px=!0,t.Gt=r,t.Dt=s}t.Ao=mi(function(){t.Kh=null,t.N()},300),t.iv=mi(function(){pf(t)},250),t.preventDefault=function(h){return h.preventDefault(),!1},t.Jj=function(h){if(t.isEnabled){var u=Es(t,h,!0);u.bubbles=!0;var p=0,d=0;u.delta=0,h.deltaX!==void 0?(h.deltaX!==0&&(p=0<h.deltaX?1:-1),h.deltaY!==0&&(d=0<h.deltaY?1:-1),u.delta=Math.abs(h.deltaX)>Math.abs(h.deltaY)?-p:-d):h.wheelDeltaX!==void 0?(h.wheelDeltaX!==0&&(p=0<h.wheelDeltaX?-1:1),h.wheelDeltaY!==0&&(d=0<h.wheelDeltaY?-1:1),u.delta=Math.abs(h.wheelDeltaX)>Math.abs(h.wheelDeltaY)?-p:-d):h.wheelDelta!==void 0&&h.wheelDelta!==0&&(u.delta=0<h.wheelDelta?1:-1),t.doMouseWheel(),ls(u,h)}},t.sz=function(h){t.isEnabled&&(t.Bk=!1,Es(t,h,!0),h=t.currentTool,h.cancelWaitAfter(),h.standardMouseOver())},t.Mj=function(h){if(t.isEnabled){t.Bk=!0;var u=t.tt;u[h.pointerId]===void 0&&(u[h.pointerId]=h),u=t.cj;var p=!1;if(u[0]!==null&&u[0].pointerId===h.pointerId)u[0]=h;else if(u[1]!==null&&u[1].pointerId===h.pointerId)u[1]=h,p=!0;else if(u[0]===null)u[0]=h;else if(u[1]===null)u[1]=h,p=!0;else{h.preventDefault();return}(u=h.pointerType==="touch"||h.pointerType==="pen")&&(t.Mt=!1,t.Pp=!0);var d=p;p=bh(t,h,!0,!1,!0,d),qh(t,h,p),p.targetDiagram=gf(h,h.target),p.targetObject=null,d||p.clone(t.wp),d=t.Qv,u=u?25:10,h.timeStamp-t.Pv<t.Tx&&!(Math.abs(d.x-h.screenX)>u||Math.abs(d.y-h.screenY)>u)?t.Rp++:t.Rp=1,p.clickCount=t.Rp,t.Pv=h.timeStamp,t.Qv.eg(h.screenX,h.screenY),t.doMouseDown(),h.button===1?h.preventDefault():ls(p,h)}},t.Nj=function(h){if(t.isEnabled){t.Bk=!0;var u=t.cj;if(u[0]!==null&&u[0].pointerId===h.pointerId)u[0]=h;else{if(u[1]!==null&&u[1].pointerId===h.pointerId){u[1]=h;return}if(u[0]===null)u[0]=h;else return}if(u[0].pointerId===h.pointerId){u=bh(t,h,!1,!1,!1,u[1]!==null);var p=it.document.elementFromPoint(h.clientX,h.clientY)||null;p!==null&&p.shadowRoot!==void 0&&p.shadowRoot!==null&&(p=p.shadowRoot.elementFromPoint(h.clientX,h.clientY));var d=t,g=h;p&&p.H&&(g=h,d=p.H),u.targetDiagram=d,qh(t,g,u),u.targetObject=null,t.doMouseMove(),ls(u,h)}}},t.Pj=function(h){if(t.isEnabled){t.Bk=!0;var u=h.pointerType==="touch"||h.pointerType==="pen",p=t.tt;if(u&&t.Mt)delete p[h.pointerId],h.preventDefault();else if(p=t.cj,p[0]!==null&&p[0].pointerId===h.pointerId){p[0]=null,p=bh(t,h,!1,!0,!0,!1);var d=it.document.elementFromPoint(h.clientX,h.clientY)||null;d!==null&&d.shadowRoot!==void 0&&d.shadowRoot!==null&&(d=d.shadowRoot.elementFromPoint(h.clientX,h.clientY)),d!==null&&d.H instanceof I&&d.H!==t&&qh(d.H,h,p),d===null&&(d=h.target),qh(t,h,p),p.clickCount=t.Rp,p.targetDiagram=gf(h,d),p.targetObject=null,t.doMouseUp(),ls(p,h),u&&(t.Pp=!1)}else p[1]!==null&&p[1].pointerId===h.pointerId&&(p[1]=null)}},t.Oj=function(h){if(t.isEnabled){t.Bk=!1;var u=t.tt;u[h.pointerId]&&delete u[h.pointerId],u=t.cj,u[0]!==null&&u[0].pointerId===h.pointerId&&(u[0]=null),u[1]!==null&&u[1].pointerId===h.pointerId&&(u[1]=null),bh(t,h,!1,!1,!0,!1),h.pointerType!=="touch"&&h.pointerType!=="pen"&&(h=t.currentTool,h.cancelWaitAfter(),h.standardMouseOver())}},t.Lj=function(h){var u=t.cj;u[0]!==null&&u[0].pointerId===h.pointerId?(u[0]=null,t.Pp=!1):u[1]!==null&&u[1].pointerId===h.pointerId&&(u[1]=null),bh(t,h,!1,!1,!0,!1)},t.Hs=i.Z["d"+sm[1]+sm[2]+"wI"+Xa.slice(1,5)]["b"+Mv.slice(1,e)](i.Z,im,e,e),i.Mc(!0),$y(t)}}rm.className="DiagramHelper";function jr(t){this.j=t===void 0?new T:t,this.m=new T}Z.Object.defineProperties(jr.prototype,{point:{get:function(){return this.j},set:function(t){this.j=t}},shifted:{get:function(){return this.m},set:function(t){this.m=t}}});var sm="DraggingInfo";jr.className="DraggingInfo";function am(t,e,n){this.node=t,this.info=e,this.su=n}am.className="DraggingNodeInfoPair";function Ua(){this.reset()}Ua.prototype.reset=function(){this.isGridSnapEnabled=!1,this.isGridSnapRealtime=!0,this.gridSnapCellSize=new ht(NaN,NaN).freeze(),this.gridSnapCellSpot=Qe,this.gridSnapOrigin=new T(NaN,NaN).freeze(),this.groupsSnapMembers=this.dragsTree=this.dragsLink=!1,this.dragsMembers=this.groupsAlwaysMove=!0},Ua.className="DraggingOptions";function zu(t,e){if(typeof t=="string"||it.Element&&t instanceof Element)var n=I.call(this,t)||this;else n=I.call(this)||this,e=t;return hm(n),e&&n.Ml(e),n}z(zu,I);function hm(t){t.allowDragOut=!0,t.allowMove=!1,t.isReadOnly=!0,t.contentAlignment=Mo,t.layout=new Be}zu.prototype.reset=function(){I.prototype.reset.call(this),hm(this)},zu.className="Palette";function No(t,e){if(typeof t=="string"||it.Element&&t instanceof Element)var n=I.call(this,t)||this;else n=I.call(this)||this,e=t;var i=n;n.animationManager.isEnabled=!1,n.wb=!0,n.W=null,n.Jm=!1,n.Km=!1,n.F=!0,n.u=!0,n.ga=0,n.m=!1,n.Wk=null,n.tx("drawShadows",!1),t=new ot;var r=new dt;return r.stroke="magenta",r.strokeWidth=2,r.fill="transparent",r.name="BOXSHAPE",t.selectable=!0,t.selectionAdorned=!1,t.selectionObjectName="BOXSHAPE",t.locationObjectName="BOXSHAPE",t.resizeObjectName="BOXSHAPE",t.cursor="move",t.add(r),n.j=t,n.allowCopy=!1,n.allowDelete=!1,n.allowSelect=!0,n.autoScrollRegion=new Ft(0,0,0,0),n.pa.h(0,0),n.toolManager.fb("Dragging",new Vs,n.toolManager.mouseMoveTools),n.click=function(){var s=i.observed;if(s!==null){var h=s.viewportBounds,u=i.lastInput.documentPoint;s.position=new T(u.x-h.width/2,u.y-h.height/2)}},n.Cf=function(){i.Wa(),rl(i)},n.Md=function(){i.observed!==null&&(i.Wa(),i.N())},n.Fa=function(){1>i.updateDelay?i.N():i.m||(i.m=!0,setTimeout(function(){return i.redraw()},i.updateDelay))},n.Bf=function(){i.observed!==null&&rl(i)},n.autoScale=Ya,n.wb=!1,e&&Object.assign(n,e),n}z(No,I),No.prototype.computePixelRatio=function(){return 1},No.prototype.redraw=function(){if(this.m&&1<=this.updateDelay){this.m=!1;var t=this.Ha,e=this.Yb;if(t!==null&&e!==null){if(el(this),this.Wk===null){var n=new li(null);n.width=t.width,n.height=t.height,this.Wk=n}try{this.Ha=this.Wk,this.Yb=this.Ha.context,this.Yb.Mc(!0),this.Yb.setTransform(1,0,0,1,0,0),this.Yb.clearRect(0,0,this.Ha.width,this.Ha.height),lm(this)}finally{this.Ha=t,this.Yb=e}}}I.prototype.redraw.call(this)},No.prototype.tc=function(){if(this.Ka===null&&X("No div specified"),this.Ha===null&&X("No canvas specified"),!(this.Ha instanceof Fo)&&(mg(this.box),this.Zc)){var t=this.observed;if(t!==null&&!t.animationManager.defaultAnimation.isAnimating&&t.ci){el(this);var e=this.Ha;t=this.Yb,t.Mc(!0),t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,e.width,e.height),1>this.updateDelay?lm(this):this.Wk!==null&&(t.drawImage(this.Wk.Sa,0,0),e=this.Bb,e.reset(),this.scale!==1&&e.scale(this.scale),this.position.x===0&&this.position.y===0||e.translate(-this.position.x,-this.position.y),t.scale(this.jc,this.jc),t.transform(e.m11,e.m12,e.m21,e.m22,e.dx,e.dy)),e=this.Va.s;for(var n=e.length,i=0;i<n;i++)e[i].tc(t,this);this.Zc=this.Ni=!1}}};function lm(t){var e=t.observed;if(e!==null){var n=t.drawsTemporaryLayers,i=t.drawsGrid&&n,r=e.grid;i&&r!==null&&r.visible&&!isNaN(r.width)&&!isNaN(r.height)&&(r=E.alloc().assign(t.viewportBounds).Vc(e.viewportBounds),Qo(e,r),E.free(r),rn(e));var s=t.Bb;s.reset(),t.scale!==1&&s.scale(t.scale),t.position.x===0&&t.position.y===0||s.translate(-t.position.x,-t.position.y),r=t.Yb,r.scale(t.jc,t.jc),r.transform(s.m11,s.m12,s.m21,s.m22,s.dx,s.dy),e=e.Va.s,s=e.length;for(var h=0;h<s;h++){var u=e[h],p=t;if(u.visible&&u.opacity!==0){var d=u.diagram.grid.part;if(!n&&u.isTemporary)i&&d.layer===u&&(u=Aa(u,r),d.tc(r,p),r.globalAlpha=u);else{for(var g=Aa(u,r),c=p.scale,y=E.alloc(),S=u.La.s,v=S.length,L=0;L<v;L++){var N=S[L];(i||N!==d)&&u.Th(r,N,p,null,c,y,!1)}E.free(y),r.globalAlpha=g}}}}}function rl(t){var e=t.box;if(e!==null){var n=t.observed;if(n!==null){t.Zc=!0,n=n.viewportBounds;var i=e.selectionObject,r=ht.alloc();r.h(n.width,n.height),i.desiredSize=r,ht.free(r),t=2/t.scale,i instanceof dt&&(i.strokeWidth=t),e.location=new T(n.x-t/2,n.y-t/2),e.isSelected=!0}}}No.prototype.computeBounds=function(){var t=this.observed;if(t===null)return mu;var e=t.documentBounds.copy();return e.Vc(t.viewportBounds),e},No.prototype.invalidateViewport=function(){this.Zc!==!0&&(this.Zc=!0,this.Kb())},No.prototype.onViewportBoundsChanged=function(t,e,n,i){this.wb||(Br(this),this.N(),_o(this),this.Wa(),rl(this),this.gd.scale=n,this.gd.position.x=t.x,this.gd.position.y=t.y,this.gd.bounds.assign(t),this.gd.Yw=i,this.P("ViewportBoundsChanged",this.gd,t))},Z.Object.defineProperties(No.prototype,{observed:{get:function(){return this.W},set:function(t){var e=this.W;if(t instanceof No&&X("Overview.observed Diagram may not be an Overview itself: "+t),e!==t){if(e!==null&&(this.remove(this.box),e.zl("ViewportBoundsChanged",this.Cf),e.zl("DocumentBoundsChanged",this.Md),e.zl("InvalidateDraw",this.Fa),e.zl("AnimationFinished",this.Bf)),this.W=t,t!==null&&(t.oj("ViewportBoundsChanged",this.Cf),t.oj("DocumentBoundsChanged",this.Md),t.oj("InvalidateDraw",this.Fa),t.oj("AnimationFinished",this.Bf),this.add(this.box)),this.Wa(),t===null){this.Wk=null;var n=this.Ha,i=this.Yb;n&&i&&(i.setTransform(1,0,0,1,0,0),i.clearRect(0,0,n.width,n.height))}else this.Fa(null),rl(this),this.N();this.g("observed",e,t)}}},box:{get:function(){return this.j},set:function(t){var e=this.j;e!==t&&(this.j=t,this.remove(e),this.add(this.j),rl(this),this.g("box",e,t))}},drawsTemporaryLayers:{get:function(){return this.F},set:function(t){this.F!==t&&(this.F=t,this.redraw())}},drawsGrid:{get:function(){return this.u},set:function(t){this.u!==t&&(this.u=t,this.redraw())}},updateDelay:{get:function(){return this.ga},set:function(t){0>t&&(t=0),this.ga!==t&&(this.ga=t)}}}),No.className="Overview";function Vs(){Qt.call(this),this.j=null}z(Vs,Qt),Vs.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;if(t===null||!t.allowMove||!t.allowSelect)return!1;var e=t.observed;if(e===null)return!1;var n=t.lastInput;return!n.left||t.currentTool!==this&&(!this.isBeyondDragSize()||n.isTouchEvent&&n.timestamp-t.firstInput.timestamp<this.delay)?!1:(this.findDraggablePart()===null&&(n=e.viewportBounds,this.j=new T(n.width/2,n.height/2),t=t.firstInput.documentPoint,e.position=new T(t.x-this.j.x,t.y-this.j.y)),!0)},Vs.prototype.doActivate=function(){this.j=null,Qt.prototype.doActivate.call(this)},Vs.prototype.doUpdateCursor=function(){var t=this.diagram,e=t.box;e!==null&&e.cursor&&(t.currentCursor=e.cursor)},Vs.prototype.moveParts=function(){var t=this.diagram,e=t.observed;if(e!==null){var n=t.box;if(n!==null){if(this.j===null){var i=t.firstInput.documentPoint;n=n.location,this.j=new T(i.x-n.x,i.y-n.y)}t=t.lastInput.documentPoint,e.position=new T(t.x-this.j.x,t.y-this.j.y)}}},Vs.className="OverviewDraggingTool";function Ot(){ce(this),this.H=za,this.Fa=this.u=this.m=!0,this.F=this.W=this.mb=this.ga=!1,this.Xi=this.j=null,this.Db=1.05,this.ct=NaN,this.Ov=null,this.Wt=NaN,this.Ut=mu,this.gb=!0,this.Rf=null,this.nb=200}Ot.prototype.toString=function(){return"CommandHandler"},Ot.prototype.Je=function(t){this.H=t},Ot.prototype.doKeyDown=function(){var t=this.diagram,e=t.lastInput,n=Ji?e.meta:e.control,i=e.shift,r=e.alt,s=e.key;!n||s!=="C"&&s!=="Insert"?n&&s==="X"||i&&s==="Del"?this.canCutSelection()&&this.cutSelection():n&&s==="V"||i&&s==="Insert"?this.canPasteSelection()&&this.pasteSelection():n&&s==="Y"||r&&i&&s==="Backspace"?this.canRedo()&&this.redo():n&&s==="Z"||r&&s==="Backspace"?this.canUndo()&&this.undo():s==="Del"||s==="Backspace"?this.canDeleteSelection()&&this.deleteSelection():n&&s==="A"?this.canSelectAll()&&this.selectAll():s==="Esc"?this.canStopCommand()&&this.stopCommand():s==="Up"?t.allowVerticalScroll&&(n?t.scroll("pixel","up"):t.scroll("line","up")):s==="Down"?t.allowVerticalScroll&&(n?t.scroll("pixel","down"):t.scroll("line","down")):s==="Left"?t.allowHorizontalScroll&&(n?t.scroll("pixel","left"):t.scroll("line","left")):s==="Right"?t.allowHorizontalScroll&&(n?t.scroll("pixel","right"):t.scroll("line","right")):s==="PageUp"?i&&t.allowHorizontalScroll?t.scroll("page","left"):t.allowVerticalScroll&&t.scroll("page","up"):s==="PageDown"?i&&t.allowHorizontalScroll?t.scroll("page","right"):t.allowVerticalScroll&&t.scroll("page","down"):s==="Home"?n&&t.allowVerticalScroll?t.scroll("document","up"):!n&&t.allowHorizontalScroll&&t.scroll("document","left"):s==="End"?n&&t.allowVerticalScroll?t.scroll("document","down"):!n&&t.allowHorizontalScroll&&t.scroll("document","right"):s===" "?this.canScrollToPart()&&this.scrollToPart():s==="Subtract"?this.canDecreaseZoom()&&this.decreaseZoom():s==="Add"?this.canIncreaseZoom()&&this.increaseZoom():n&&s==="0"?this.canResetZoom()&&this.resetZoom():i&&s==="Z"?this.canZoomToFit()&&this.zoomToFit():n&&!i&&s==="G"?this.canGroupSelection()&&this.groupSelection():n&&i&&s==="G"?this.canUngroupSelection()&&this.ungroupSelection():s==="F2"||e.event&&e.event.key==="F2"?this.canEditTextBlock()&&this.editTextBlock():s==="ContextMenu"||e.event&&e.event.key==="ContextMenu"?this.canShowContextMenu()&&this.showContextMenu():e.bubbles=!0:this.canCopySelection()&&this.copySelection()},Ot.prototype.doKeyUp=function(){this.diagram.lastInput.bubbles=!0},Ot.prototype.stopCommand=function(){var t=this.diagram,e=t.currentTool;e instanceof $t&&t.allowSelect&&t.clearSelection(),e!==null&&e.doCancel()},Ot.prototype.canStopCommand=function(){return!0},Ot.prototype.selectAll=function(){var t=this.diagram;t.N();try{t.currentCursor="wait",t.P("ChangingSelection",t.selection);for(var e=t.parts;e.next();)e.value.isSelected=!0;for(var n=t.nodes;n.next();)n.value.isSelected=!0;for(var i=t.links;i.next();)i.value.isSelected=!0}finally{t.P("ChangedSelection",t.selection),t.currentCursor=""}},Ot.prototype.canSelectAll=function(){return this.diagram.allowSelect},Ot.prototype.deleteSelection=function(){var t=this.diagram;try{t.currentCursor="wait",t.P("ChangingSelection",t.selection),t.Ca("Delete"),t.P("SelectionDeleting",t.selection);for(var e=new H,n=t.selection.iterator;n.next();)Ar(e,n.value,!0,this.deletesTree?1/0:0,this.deletesConnectedLinks?null:!1,function(i){return i.canDelete()});t.Zr(e,!0),t.P("SelectionDeleted",e)}finally{t.cb("Delete"),t.P("ChangedSelection",t.selection),t.currentCursor=""}},Ot.prototype.canDeleteSelection=function(){var t=this.diagram;return!(t.isReadOnly||t.isModelReadOnly||!t.allowDelete||t.selection.count===0)},Ot.prototype.copySelection=function(){var t=this.diagram,e=new H;for(t=t.selection.iterator;t.next();)Ar(e,t.value,!0,this.copiesTree?1/0:0,this.copiesConnectedLinks,function(n){return n.canCopy()});this.copyToClipboard(e)},Ot.prototype.canCopySelection=function(){var t=this.diagram;return!!(t.allowCopy&&t.allowClipboard&&t.selection.count!==0)},Ot.prototype.cutSelection=function(){this.copySelection(),this.deleteSelection()},Ot.prototype.canCutSelection=function(){var t=this.diagram;return!!(!t.isReadOnly&&!t.isModelReadOnly&&t.allowCopy&&t.allowDelete&&t.allowClipboard&&t.selection.count!==0)},Ot.prototype.copyToClipboard=function(t){var e=this.diagram,n=null;if(t===null)Va=null,il="";else{n=e.model;var i=!1,r=!1,s=null;try{n.sl()&&(i=n.vj,n.vj=this.copiesParentKey),n.Fj()&&(r=n.uj,n.uj=this.copiesGroupKey),s=e.wj(t,null,!0)}finally{n.sl()&&(n.vj=i),n.Fj()&&(n.uj=r),n=new Q,n.addAll(s),Va=n,il=e.model.dataFormat}}e.P("ClipboardChanged",n)},Ot.prototype.pasteFromClipboard=function(){var t=new H,e=Va;if(e===null)return t;var n=this.diagram;if(il!==n.model.dataFormat)return t;var i=n.model,r=!1,s=!1,h=null;try{i.sl()&&(r=i.vj,i.vj=this.copiesParentKey),i.Fj()&&(s=i.uj,i.uj=this.copiesGroupKey),h=n.wj(e,n,!1)}finally{for(i.sl()&&(i.vj=r),i.Fj()&&(i.uj=s),e=h.iterator;e.next();)n=e.value,i=e.key,n.location.w()||(i.location.w()?n.location=i.location:!n.position.w()&&i.position.w()&&(n.position=i.position)),t.add(n)}return t},Ot.prototype.pasteSelection=function(t){t===void 0&&(t=null);var e=this.diagram;try{e.currentCursor="wait",e.P("ChangingSelection",e.selection),e.Ca("Paste");var n=this.pasteFromClipboard();0<n.count&&e.clearSelection(!0);for(var i=n.iterator;i.next();)i.value.isSelected=!0;if(t!==null){var r=e.computePartsBounds(e.selection);if(r.w()){var s=this.computeEffectiveCollection(e.selection,e.um);vf(e,s,new T(t.x-r.centerX,t.y-r.centerY),e.um,!1)}}e.P("ClipboardPasted",n)}finally{e.cb("Paste"),e.P("ChangedSelection",e.selection),e.currentCursor=""}},Ot.prototype.canPasteSelection=function(){var t=this.diagram;return!(t.isReadOnly||t.isModelReadOnly||!t.allowInsert||!t.allowClipboard||Va===null||Va.count===0||il!==t.model.dataFormat)},Ot.prototype.undo=function(){this.diagram.undoManager.undo()},Ot.prototype.canUndo=function(){var t=this.diagram;return t.isReadOnly||t.isModelReadOnly?!1:t.allowUndo&&t.undoManager.canUndo()},Ot.prototype.redo=function(){this.diagram.undoManager.redo()},Ot.prototype.canRedo=function(){var t=this.diagram;return t.isReadOnly||t.isModelReadOnly?!1:t.allowUndo&&t.undoManager.canRedo()},Ot.prototype.decreaseZoom=function(t){t===void 0&&(t=1/this.zoomFactor);var e=this.diagram;e.autoScale===Qn&&(t=e.scale*t,t<e.minScale||t>e.maxScale||(e.scale=t))},Ot.prototype.canDecreaseZoom=function(t){t===void 0&&(t=1/this.zoomFactor);var e=this.diagram;return e.autoScale!==Qn?!1:(t=e.scale*t,t<e.minScale||t>e.maxScale?!1:e.allowZoom)},Ot.prototype.increaseZoom=function(t){t===void 0&&(t=this.zoomFactor);var e=this.diagram;e.autoScale===Qn&&(t=e.scale*t,t<e.minScale||t>e.maxScale||(e.scale=t))},Ot.prototype.canIncreaseZoom=function(t){t===void 0&&(t=this.zoomFactor);var e=this.diagram;return e.autoScale!==Qn?!1:(t=e.scale*t,t<e.minScale||t>e.maxScale?!1:e.allowZoom)},Ot.prototype.resetZoom=function(t){t===void 0&&(t=this.defaultScale);var e=this.diagram;t<e.minScale||t>e.maxScale||(e.scale=t)},Ot.prototype.canResetZoom=function(t){t===void 0&&(t=this.defaultScale);var e=this.diagram;return t<e.minScale||t>e.maxScale?!1:e.allowZoom},Ot.prototype.zoomToFit=function(){var t=this.diagram,e=t.animationManager;e.wc(),t.redraw();var n=t.position,i=t.scale;Jo(e,"Zoom To Fit"),this.isZoomToFitRestoreEnabled&&i===this.Wt&&!isNaN(this.ct)&&t.documentBounds.C(this.Ut)?(t.scale=this.ct,t.position=this.Ov,this.Wt=NaN,this.Ut=mu):(this.ct=i,this.Ov=n.copy(),t.zoomToFit(),this.Wt=t.scale,this.Ut=t.documentBounds.copy()),hf(e)},Ot.prototype.canZoomToFit=function(){return this.diagram.allowZoom},Ot.prototype.scrollToPart=function(t){t===void 0&&(t=null);var e=this.diagram;if(e.Ta(),t===null){try{this.Rf!==null&&(this.Rf.next()?t=this.Rf.value:this.Rf=null)}catch{this.Rf=null}t===null&&(0<e.highlighteds.count?this.Rf=e.highlighteds.iterator:0<e.selection.count&&(this.Rf=e.selection.iterator),this.Rf!==null&&this.Rf.next()&&(t=this.Rf.value))}if(t!==null){var n=e.animationManager;Jo(n,"Scroll To Part");var i=this.scrollToPartPause;if(0<i){var r=Ys(this,t,[t]);if(r.length===1)e.Ca(),e.vr(t.actualBounds),e.cb("Scroll To Part");else{var s=function(){e.Ca();for(var p=r.pop();0<r.length&&p instanceof _&&p.isTreeExpanded&&(!(p instanceof ut)||p.isSubGraphExpanded);)p=r.pop();0<r.length?(p instanceof ot&&e.Su(p.actualBounds),p instanceof _&&!p.isTreeExpanded&&(p.isTreeExpanded=!0),p instanceof ut&&!p.isSubGraphExpanded&&(p.isSubGraphExpanded=!0)):(p instanceof ot&&e.vr(p.actualBounds),e.zl("LayoutCompleted",h)),e.cb("Scroll To Part")},h=function(){On(s,(n.isEnabled?n.duration:0)+i)};e.oj("LayoutCompleted",h),s()}}else{var u=e.position.copy();e.vr(t.actualBounds),u.$a(e.position)&&n.wc()}}};function Ys(t,e,n){if(e.isVisible())return n;if(e instanceof St)Ys(t,e.adornedPart,n);else if(e instanceof U){var i=e.fromNode;i!==null&&Ys(t,i,n),e=e.toNode,e!==null&&Ys(t,e,n)}else e instanceof _&&(i=e.labeledLink,i!==null&&Ys(t,i,n),i=e.cg(),i!==null&&(i.isTreeExpanded||i.wasTreeExpanded||n.push(i),Ys(t,i,n))),e=e.containingGroup,e!==null&&(e.isSubGraphExpanded||e.wasSubGraphExpanded||n.push(e),Ys(t,e,n));return n}Ot.prototype.canScrollToPart=function(t){return t===void 0&&(t=null),t!==null&&!(t instanceof ot)?!1:(t=this.diagram,t.selection.count===0&&t.highlighteds.count===0?!1:t.allowHorizontalScroll&&t.allowVerticalScroll)},Ot.prototype.collapseTree=function(t){t===void 0&&(t=null);var e=this.diagram;try{e.Ca("Collapse Tree"),Jo(e.animationManager,"Collapse Tree");var n=new Q;if(t!==null&&t.isTreeExpanded)t.collapseTree(),n.add(t);else if(t===null)for(var i=e.selection.iterator;i.next();){var r=i.value;r instanceof _&&r.isTreeExpanded&&(r.collapseTree(),n.add(r))}e.P("TreeCollapsed",n)}finally{e.cb("Collapse Tree")}},Ot.prototype.canCollapseTree=function(t){t===void 0&&(t=null);var e=this.diagram;if(e.isReadOnly)return!1;if(t!==null){if(!(t instanceof _&&t.isTreeExpanded))return!1;if(0<t.ko().count)return!0}else for(t=e.selection.iterator;t.next();)if(e=t.value,e instanceof _&&e.isTreeExpanded&&0<e.ko().count)return!0;return!1},Ot.prototype.expandTree=function(t){t===void 0&&(t=null);var e=this.diagram;try{e.Ca("Expand Tree"),Jo(e.animationManager,"Expand Tree");var n=new Q;if(t!==null&&!t.isTreeExpanded)t.expandTree(),n.add(t);else if(t===null)for(var i=e.selection.iterator;i.next();){var r=i.value;r instanceof _&&!r.isTreeExpanded&&(r.expandTree(),n.add(r))}e.P("TreeExpanded",n)}finally{e.cb("Expand Tree")}},Ot.prototype.canExpandTree=function(t){t===void 0&&(t=null);var e=this.diagram;if(e.isReadOnly)return!1;if(t!==null){if(!(t instanceof _)||t.isTreeExpanded)return!1;if(0<t.ko().count)return!0}else for(t=e.selection.iterator;t.next();)if(e=t.value,e instanceof _&&!e.isTreeExpanded&&0<e.ko().count)return!0;return!1},Ot.prototype.groupSelection=function(){var t=this.diagram,e=t.model;if(e.Gj()){var n=this.archetypeGroupData;if(n!==null){var i=null;try{t.currentCursor="wait",t.P("ChangingSelection",t.selection),t.Ca("Group");for(var r=new Q,s=t.selection.iterator;s.next();){var h=s.value;h.Rc()&&h.canGroup()&&r.add(h)}for(var u=new Q,p=r.iterator;p.next();){var d=p.value;s=!1;for(var g=r.iterator;g.next();)if(d.Hd(g.value)){s=!0;break}s||u.add(d)}if(0<u.count){var c=u.first().containingGroup;if(c!==null)for(;c!==null;){r=!1;for(var y=u.iterator;y.next();)if(!y.value.Hd(c)){r=!0;break}if(r)c=c.containingGroup;else break}if(n instanceof ut)ui(n),i=n.copy(),i!==null&&t.add(i);else if(e.yu(n)){var S=e.copyNodeData(n);Bt(S)&&(e.hf(S),i=t.Wh(S))}if(i!==null){c!==null&&this.isValidMember(c,i)&&(i.containingGroup=c);for(var v=u.iterator;v.next();){var L=v.value;this.isValidMember(i,L)&&(L.containingGroup=i)}t.clearSelection(!0),i.isSelected=!0}}t.P("SelectionGrouped",i)}finally{t.cb("Group"),t.P("ChangedSelection",t.selection),t.currentCursor=""}}}},Ot.prototype.canGroupSelection=function(){var t=this.diagram;if(t.isReadOnly||t.isModelReadOnly||!t.allowInsert||!t.allowGroup||!t.model.Gj()||this.archetypeGroupData===null)return!1;for(t=t.selection.iterator;t.next();){var e=t.value;if(e.Rc()&&e.canGroup())return!0}return!1};function zf(t){var e=Yt();for(t=t.iterator;t.next();){var n=t.value;n instanceof U||e.push(n)}t=new H,n=e.length;for(var i=0;i<n;i++){for(var r=e[i],s=!0,h=0;h<n;h++)if(r.Hd(e[h])){s=!1;break}s&&t.add(r)}return At(e),t}Ot.prototype.isValidMember=function(t,e){if(e===null||t===e||e instanceof U)return!1;if(t!==null){if(t===e||t.Hd(e))return!1;var n=t.memberValidation;if(n!==null&&!n(t,e)||t.data===null&&e.data!==null||t.data!==null&&e.data===null)return!1}return n=this.memberValidation,n!==null?n(t,e):!0},Ot.prototype.ungroupSelection=function(t){t===void 0&&(t=null);var e=this.diagram,n=e.model;if(n.Gj())try{e.currentCursor="wait",e.P("ChangingSelection",e.selection),e.Ca("Ungroup");var i=new Q;if(t!==null)i.add(t);else for(var r=e.selection.iterator;r.next();){var s=r.value;s instanceof ut&&s.canUngroup()&&i.add(s)}var h=new Q;if(0<i.count){e.clearSelection(!0);for(var u=i.iterator;u.next();){var p=u.value;p.expandSubGraph();var d=p.containingGroup,g=d!==null&&d.data!==null?n.ua(d.data):void 0;h.addAll(p.memberParts);for(var c=h.iterator;c.next();){var y=c.value;if(y.isSelected=!0,!(y instanceof U)){var S=y.data;S!==null?n.Go(S,g):y.containingGroup=d}}e.remove(p)}}e.P("SelectionUngrouped",i,h)}finally{e.cb("Ungroup"),e.P("ChangedSelection",e.selection),e.currentCursor=""}},Ot.prototype.canUngroupSelection=function(t){t===void 0&&(t=null);var e=this.diagram;if(e.isReadOnly||e.isModelReadOnly||!e.allowDelete||!e.allowUngroup||!e.model.Gj())return!1;if(t!==null){if(!(t instanceof ut))return!1;if(t.canUngroup())return!0}else for(t=e.selection.iterator;t.next();)if(e=t.value,e instanceof ut&&e.canUngroup())return!0;return!1},Ot.prototype.addTopLevelParts=function(t,e){var n=!0;for(t=zf(t).iterator;t.next();){var i=t.value;i.containingGroup!==null&&(!e||this.isValidMember(null,i)?i.containingGroup=null:n=!1)}return n},Ot.prototype.collapseSubGraph=function(t){t===void 0&&(t=null);var e=this.diagram;try{e.Ca("Collapse SubGraph"),Jo(e.animationManager,"Collapse SubGraph");var n=new Q;if(t!==null&&t.isSubGraphExpanded)t.collapseSubGraph(),n.add(t);else if(t===null)for(var i=e.selection.iterator;i.next();){var r=i.value;r instanceof ut&&r.isSubGraphExpanded&&(r.collapseSubGraph(),n.add(r))}e.P("SubGraphCollapsed",n)}finally{e.cb("Collapse SubGraph")}},Ot.prototype.canCollapseSubGraph=function(t){t===void 0&&(t=null);var e=this.diagram;if(e.isReadOnly)return!1;if(t!==null)return!!(t instanceof ut&&t.isSubGraphExpanded);for(t=e.selection.iterator;t.next();)if(e=t.value,e instanceof ut&&e.isSubGraphExpanded)return!0;return!1},Ot.prototype.expandSubGraph=function(t){t===void 0&&(t=null);var e=this.diagram;try{e.Ca("Expand SubGraph"),Jo(e.animationManager,"Expand SubGraph");var n=new Q;if(t!==null&&!t.isSubGraphExpanded)t.expandSubGraph(),n.add(t);else if(t===null)for(var i=e.selection.iterator;i.next();){var r=i.value;r instanceof ut&&!r.isSubGraphExpanded&&(r.expandSubGraph(),n.add(r))}e.P("SubGraphExpanded",n)}finally{e.cb("Expand SubGraph")}},Ot.prototype.canExpandSubGraph=function(t){t===void 0&&(t=null);var e=this.diagram;if(e.isReadOnly)return!1;if(t!==null)return t instanceof ut&&!t.isSubGraphExpanded;for(t=e.selection.iterator;t.next();)if(e=t.value,e instanceof ut&&!e.isSubGraphExpanded)return!0;return!1},Ot.prototype.editTextBlock=function(t){t===void 0&&(t=null);var e=this.diagram,n=e.toolManager.findTool("TextEditing");if(n!==null){if(t===null){t=null;for(var i=e.selection.iterator;i.next();){var r=i.value;if(r.canEdit()){t=r;break}}if(t===null)return;t=t.ml(function(s){return s instanceof Gt&&s.editable})}t!==null&&(e.currentTool=null,n.textBlock=t,e.currentTool=n)}},Ot.prototype.canEditTextBlock=function(t){t===void 0&&(t=null);var e=this.diagram;if(e.isReadOnly||e.isModelReadOnly||!e.allowTextEdit||e.toolManager.findTool("TextEditing")===null)return!1;if(t!==null){if(!(t instanceof Gt))return!1;if(t=t.part,t!==null&&t.canEdit())return!0}else for(e=e.selection.iterator;e.next();)if(t=e.value,t.canEdit()&&(t=t.ml(function(n){return n instanceof Gt&&n.editable}),t!==null))return!0;return!1},Ot.prototype.showContextMenu=function(t){var e=this.diagram,n=e.toolManager.findTool("ContextMenu");if(n!==null&&(t===void 0&&(t=0<e.selection.count?e.selection.first():e),t=n.findObjectWithContextMenu(t),t!==null)){var i=e.lastInput,r=null;t instanceof nt?r=t.ia(Dt):e.viewportBounds.ba(i.documentPoint)||(r=e.viewportBounds,r=new T(r.x+r.width/2,r.y+r.height/2)),r!==null&&(i.viewPoint=e.Io(r),i.documentPoint=r,i.left=!1,i.right=!0,i.up=!0),e.currentTool=n,f0(n,!1,t)}},Ot.prototype.canShowContextMenu=function(t){var e=this.diagram,n=e.toolManager.findTool("ContextMenu");return n===null?!1:(t===void 0&&(t=0<e.selection.count?e.selection.first():e),n.findObjectWithContextMenu(t)!==null)},Ot.prototype.computeEffectiveCollection=function(t,e){var n=this.diagram,i=n.toolManager.findTool("Dragging"),r=n.currentTool===i;if(e===void 0&&(e=r?i.dragOptions:n.um),i=new pt,t===null)return i;for(var s=t.iterator;s.next();)$o(n,i,s.value,r,e);if(n.draggedLink!==null&&e.dragsLink)return i;for(s=t.iterator;s.next();)t=s.value,t instanceof U&&(e=t.fromNode,e===null||i.contains(e)?(e=t.toNode,e===null||i.contains(e)||i.remove(t)):i.remove(t));return i},Z.Object.defineProperties(Ot.prototype,{diagram:{get:function(){return this.H}},copiesClipboardData:{get:function(){return this.m},set:function(t){this.m=t}},copiesConnectedLinks:{get:function(){return this.u},set:function(t){this.u=t}},deletesConnectedLinks:{get:function(){return this.Fa},set:function(t){this.Fa=t}},copiesTree:{get:function(){return this.ga},set:function(t){this.ga=t}},deletesTree:{get:function(){return this.mb},set:function(t){this.mb=t}},copiesParentKey:{get:function(){return this.W},set:function(t){this.W=t}},copiesGroupKey:{get:function(){return this.F},set:function(t){this.F=t}},archetypeGroupData:{get:function(){return this.j},set:function(t){this.j=t}},memberValidation:{get:function(){return this.Xi},set:function(t){this.Xi=t}},defaultScale:{get:function(){return this.diagram.defaultScale},set:function(t){this.diagram.defaultScale=t}},zoomFactor:{get:function(){return this.Db},set:function(t){1<t||X("zoomFactor must be larger than 1.0, not: "+t),this.Db=t}},isZoomToFitRestoreEnabled:{get:function(){return this.gb},set:function(t){this.gb=t}},scrollToPartPause:{get:function(){return this.nb},set:function(t){this.nb=t}}}),Ot.className="CommandHandler",G0=function(){return new Ot};function nt(){ce(this),this.o=30723,this.tb=1,this.Xb=this.ye=null,this.pa=new T(NaN,NaN).freeze(),this.Xc=os,this.Bb=new ct,this.gh=new ct,this.Hb=null,this.wa=this.pk=1,this.Gb=0,this.vg=Sa,this.qc=new E(NaN,NaN,NaN,NaN).freeze(),this.Eb=new E(NaN,NaN,NaN,NaN).freeze(),this.ac=new E(0,0,NaN,NaN).freeze(),this.aa=this.xn=this.yn=null,this.Xj=this.Fb=He,this.mg=this.Cn=0,this.Dn=this.yg=this.hb=this.nh=this.A=this.Ra=null}var ne,te,$i,Re,Je,vi,sl,al,hl,ll;nt.prototype.cloneProtected=function(t){t.o=this.o|6144,t.tb=this.tb,t.Xb=this.Xb,t.pa.assign(this.pa),t.Xc=this.Xc.J(),this.Hb!==null?t.Hb=this.Hb.copy():t.Hb=null,t.wa=this.wa,t.Gb=this.Gb,t.vg=this.vg.J(),t.qc.assign(this.qc),t.Eb.assign(this.Eb),t.ac.assign(this.ac),t.xn=this.xn,this.aa!==null&&(t.aa=this.aa.copy()),t.Fb=this.Fb.J(),t.Xj=this.Xj.J(),t.Cn=this.Cn,t.mg=this.mg,this.Ra!==null&&(t.Ra=this.Ra.copy()),this.A!==null&&(t.A=this.A.hc?this.A:this.A.copy()),this.nh!==null&&(t.nh=wo(this.nh)),this.hb!==null&&(t.hb=this.hb.copy())},nt.prototype.pw=function(t){var e=this.nh;if(ue(e)){for(var n=0;n<e.length;n++)if(e[n]===t)return}else this.nh=e=[];e.push(t)},nt.prototype.lf=function(t){t.yn=null,t.yg=null,t.v()},nt.prototype.clone=function(){var t=new this.constructor;if(this.cloneProtected(t),this.nh!==null)for(var e=0;e<this.nh.length;e++){var n=this.nh[e];t[n]=this[n]}return t},nt.prototype.copy=function(){return this.clone()},a=nt.prototype,a.ob=function(t){t.classType===U?t.name.indexOf("Orient")===0?this.segmentOrientation=t:X("Unknown Link enum value for GraphObject.segmentOrientation property: "+t):t.classType===nt&&(this.stretch=t)},a.toString=function(){return oo(this.constructor)+"#"+$e(this)},a.dh=function(){this.A!==null&&(this.A.hc=!0)};function xe(t){t.A===null?t.A=new Us:t.A.hc&&(t.A=t.A.copy())}a.Pc=function(){if(this.aa===null){var t=new pl;t.Ji=Ke,t.lj=Ke,t.Hi=10,t.jj=10,t.Ii=0,t.kj=0,this.aa=t}},a.bb=function(t,e,n,i,r,s,h){var u=this.part;if(u!==null&&(u.Qj(t,e,n,i,r,s,h),n===this&&t===Ht&&Xs(this)&&ps(this,u,e),s=this.diagram,this.animationTriggers===null||s===null||!s.ci||s.undoManager.isUndoingRedoing||s.animationManager.bm||(t=this.animationTriggers.get(e),t!==null&&s.animationManager.isEnabled&&!s.animationManager.isTicking&&(this.Dn===null&&(this.Dn=new pt),h=s.undoManager.transactionLevel===0,t.startCondition===uf?h=!0:t.startCondition===F0&&(h=!1),h?(s=new be,Zy(t,s),h=this.Dn.get(t),h!==null&&h.stop(),this.Dn.add(t,s),s.Rt=this,s.hw=t,s.add(this,e,i,r),s.start()):(Jo(s.animationManager,"Trigger"),s.animationManager.defaultAnimation.add(this,e,i,r)))),this instanceof Y&&n===u&&(u.o&16777216)!==0&&u.data!==null))for(n=this.R.s,i=n.length,r=0;r<i;r++)u=n[r],u instanceof Y&&cs(u,function(p){p.data!==null&&(p.o&16777216)!==0&&p.Ja(e)})};function ps(t,e,n){var i=t.Tg();if(i!==null)for(var r=t.localBindings.iterator;r.next();){var s=r.value,h=null;if(s.sourceName!==null){if(h=Yx(s,i,t),h===null)continue;s.Mo(t,h,n,null)}else if(s.isToModel){var u=e.diagram;u===null||u.skipsModelSourceBindings||s.Mo(t,u.model.modelData,n,i)}else{if(u=i.data,u===null)continue;var p=e.diagram;p===null||p.skipsModelSourceBindings||s.Mo(t,u,n,i)}h===t&&(u=i.zr(s.li),u!==null&&s.gv(u,h,n))}}a.zr=function(t){return this.bindingId===t?this:null},a.g=function(t,e,n){this.bb(Ht,t,this,e,n)},a.se=function(t,e,n,i){var r=this.qc;if(r.h(t,e,n,i),this.wa!==1||this.Gb!==0){this.Hb===null&&(this.Hb=new ct);var s=this.Hb;s.reset(),this.Hn(s,t,e,n,i),s.Jo(r)}};function um(t,e,n,i){return t.pickable===!1?!1:(i.multiply(t.transform),n?t.Qc(e,i):t.Rg(e,i))}a.Lw=function(t,e,n){if(this.pickable===!1)return!1;var i=this.naturalBounds;return e=t.mf(e),n?ve(t.x,t.y,0,0,0,i.height)<=e||ve(t.x,t.y,0,i.height,i.width,i.height)<=e||ve(t.x,t.y,i.width,i.height,i.width,0)<=e||ve(t.x,t.y,i.width,0,0,0)<=e:t.qd(0,0)<=e&&t.qd(0,i.height)<=e&&t.qd(i.width,0)<=e&&t.qd(i.width,i.height)<=e},a.he=function(){return!0},a.ba=function(t){var e=T.alloc();e.assign(t),this.transform.Ea(e);var n=this.actualBounds;if(!n.w())return T.free(e),!1;var i=this.diagram;if(i!==null&&i.Pp){var r=i.pl("extraTouchThreshold"),s=i.pl("extraTouchArea"),h=s/2,u=this.naturalBounds;i=this.qf()*i.scale;var p=1/i;if(u.width*i<r&&u.height*i<r)return t=Di(n.x-h*p,n.y-h*p,n.width+s*p,n.height+s*p,e.x,e.y),T.free(e),t}return r=!1,(this instanceof St||this instanceof dt?Di(n.x-5,n.y-5,n.width+10,n.height+10,e.x,e.y):n.ba(e))&&(this.hb&&!this.hb.ba(e)?r=!1:this.areaBackground!==null&&n.ba(e)||this.Xb!==null&&this.ac.ba(t)?r=!0:r=this.Sg(t)),T.free(e),r},a.Sg=function(t){var e=this.naturalBounds;return Di(0,0,e.width,e.height,t.x,t.y)},a.Ce=function(t){if(this.angle===0)return this.actualBounds.Ce(t);var e=this.naturalBounds;e=E.allocAt(0,0,e.width,e.height);var n=this.transform,i=!1,r=T.allocAt(t.x,t.y);return e.ba(n.Gd(r))&&(r.h(t.x,t.bottom),e.ba(n.Gd(r))&&(r.h(t.right,t.bottom),e.ba(n.Gd(r))&&(r.h(t.right,t.y),e.ba(n.Gd(r))&&(i=!0)))),T.free(r),E.free(e),i},a.Rg=function(t,e){if(e===void 0)return t.Ce(this.actualBounds);var n=this.naturalBounds,i=!1,r=T.allocAt(0,0);return t.ba(e.Ea(r))&&(r.h(0,n.height),t.ba(e.Ea(r))&&(r.h(n.width,n.height),t.ba(e.Ea(r))&&(r.h(n.width,0),t.ba(e.Ea(r))&&(i=!0)))),T.free(r),i},a.Qc=function(t,e){if(e===void 0&&(e=this.transform,this.angle===0))return t.Qc(this.actualBounds);var n=this.naturalBounds,i=T.allocAt(0,0),r=T.allocAt(0,n.height),s=T.allocAt(n.width,n.height),h=T.allocAt(n.width,0),u=!1;if(t.ba(e.Ea(i))||t.ba(e.Ea(r))||t.ba(e.Ea(s))||t.ba(e.Ea(h)))u=!0;else{n=E.allocAt(0,0,n.width,n.height);var p=T.allocAt(t.x,t.y);n.ba(e.Gd(p))?u=!0:(p.h(t.x,t.bottom),n.ba(e.Gd(p))?u=!0:(p.h(t.right,t.bottom),n.ba(e.Gd(p))?u=!0:(p.h(t.right,t.y),n.ba(e.Gd(p))&&(u=!0)))),T.free(p),E.free(n),!u&&(O.Jr(t,i,r)||O.Jr(t,r,s)||O.Jr(t,s,h)||O.Jr(t,h,i))&&(u=!0)}return T.free(i),T.free(r),T.free(s),T.free(h),u},a.ia=function(t,e){if(e===void 0&&(e=new T),t instanceof rt){var n=this.naturalBounds;e.h(t.x*n.width+t.offsetX,t.y*n.height+t.offsetY)}else e.set(t);return this.de.Ea(e),e},a.$h=function(t){t===void 0&&(t=new E);var e=this.naturalBounds,n=this.de,i=T.allocAt(0,0).transform(n);return t.h(i.x,i.y,0,0),i.h(e.width,0).transform(n),De(t,i.x,i.y,0,0),i.h(e.width,e.height).transform(n),De(t,i.x,i.y,0,0),i.h(0,e.height).transform(n),De(t,i.x,i.y,0,0),T.free(i),t},a.Zh=function(){var t=this.de;return t.m11===1&&t.m12===0?t=0:(t=180*Math.atan2(t.m12,t.m11)/Math.PI,0>t&&(t+=360)),t},a.qf=function(){if((this.o&4096)===0)return this.pk;var t=this.wa;return this.panel!==null?t*this.panel.qf():t},a.Fr=function(t,e){return e===void 0&&(e=new T),e.assign(t),this.de.Gd(e),e},a.Gr=function(t,e,n){return this.Cj(t.x,t.y,e.x,e.y,n)},a.Cj=function(t,e,n,i,r){var s=this.transform,h=1/(s.m11*s.m22-s.m12*s.m21),u=s.m22*h,p=-s.m12*h,d=-s.m21*h,g=s.m11*h,c=h*(s.m21*s.dy-s.m22*s.dx),y=h*(s.m12*s.dx-s.m11*s.dy);return this.areaBackground!==null?(s=this.actualBounds,O.sf(s.left,s.top,s.right,s.bottom,t,e,n,i,r)):(h=t*u+e*d+c,t=t*p+e*g+y,e=n*u+i*d+c,n=n*p+i*g+y,r.h(0,0),i=this.naturalBounds,n=O.sf(0,0,i.width,i.height,h,t,e,n,r),r.transform(s),n)},nt.prototype.measure=function(t,e,n,i){if(Co(this)!==!1){var r=this.vg,s=r.right+r.left;r=r.top+r.bottom,t=Math.max(t-s,0),e=Math.max(e-r,0),n=Math.max((n||0)-s,0),i=Math.max((i||0)-r,0),s=this.angle,r=this.desiredSize;var h=0;this instanceof dt&&(h=this.strokeWidth),s===90||s===270?(t=isFinite(r.height)?r.height+h:t,e=isFinite(r.width)?r.width+h:e):(t=isFinite(r.width)?r.width+h:t,e=isFinite(r.height)?r.height+h:e),r=n||0,h=i||0;var u=this instanceof Y;switch(zi(this,!0)){case te:h=r=0,u&&(e=t=1/0);break;case ne:isFinite(t)&&t>n&&(r=t),isFinite(e)&&e>i&&(h=e);break;case Re:isFinite(t)&&t>n&&(r=t),h=0,u&&(e=1/0);break;case Je:isFinite(e)&&e>i&&(h=e),r=0,u&&(t=1/0)}u=this.maxSize;var p=this.minSize;r>u.width&&p.width<u.width&&(r=u.width),h>u.height&&p.height<u.height&&(h=u.height),n=Math.max(r/this.scale,p.width),i=Math.max(h/this.scale,p.height),u.width<n&&(n=Math.min(p.width,n)),u.height<i&&(i=Math.min(p.height,i)),t=Math.min(u.width,t),e=Math.min(u.height,e),t=Math.max(n,t),e=Math.max(i,e),(s===90||s===270)&&(s=t,t=e,e=s,s=n,n=i,i=s),this.qc.ja(),this.vl(t,e,n,i),this.qc.freeze(),this.qc.w()||X("Non-real measuredBounds has been set. Object "+this+", measuredBounds: "+this.qc.toString()),bn(this,!1)}},nt.prototype.vl=function(){},nt.prototype.ei=function(){return!1},nt.prototype.arrange=function(t,e,n,i,r){this.Ak();var s=E.alloc();s.assign(this.Eb),this.Eb.ja(),Si(this)===!1?this.Eb.h(t,e,n,i):this.Qg(t,e,n,i),this.Eb.freeze(),r===void 0?this.hb=null:this.hb=r,n=!1,r!==void 0?n=!0:(r=this.panel,r===null||r.type!==Y.TableRow&&r.type!==Y.TableColumn||(r=r.panel),r!==null&&(r=r.ac,i=this.measuredBounds,this.areaBackground!==null&&(i=this.Eb),n=e+i.height,i=t+i.width,n=!(0<=t+.05&&i<=r.width+.05&&0<=e+.05&&n<=r.height+.05),this instanceof Gt&&(t=this.naturalBounds,this.eq>t.height||this.yb>t.width))&&(n=!0)),this.o=n?this.o|256:this.o&-257,this.Eb.w()||X("Non-real actualBounds has been set. Object "+this+", actualBounds: "+this.Eb.toString()),this.wl(s,this.Eb),ds(this,!1),E.free(s)},a=nt.prototype,a.Qg=function(){};function Ef(t,e,n,i,r){if(t.Eb.h(e,n,i,r),!t.desiredSize.w()){var s=t.qc;n=t.vg,e=n.right+n.left;var h=n.top+n.bottom;switch(n=s.width+e,s=s.height+h,i+=e,r+=h,e=zi(t,!0),n===i&&s===r&&(e=te),e){case te:(n>i||s>r)&&(bn(t,!0),t.measure(n>i?i:n,s>r?r:s,0,0));break;case ne:bn(t,!0),t.measure(i,r,0,0);break;case Re:bn(t,!0),t.measure(i,s,0,0);break;case Je:bn(t,!0),t.measure(n,r,0,0)}}}a.wl=function(t,e){var n=this.part;n!==null&&n.diagram!==null&&(n.selectionObject!==this&&n.resizeObject!==this&&n.rotateObject!==this||vg(n,!0),this.N(),Ce(t,e)||(n.Yg(),this.nn(n)))},a.nn=function(t){this.portId!==null&&(vg(t,!0),t instanceof _&&ox(t,this))},a.tc=function(t,e){if(this.visible){var n=this.opacity;if(n!==0){var i=this instanceof Y&&(this.type===Y.TableRow||this.type===Y.TableColumn),r=this.Eb;if(i||r.width!==0&&r.height!==0&&!isNaN(r.x)&&!isNaN(r.y)){var s=1;if(n!==1&&(s=t.globalAlpha,t.globalAlpha=s*n),i){r=this.Eb,i=this.ac;var h=this.areaBackground,u=this.Xb;h===null&&u===null||t.Nc(),h!==null&&(En(this,t,h,!0,!0,i,r),h instanceof kt&&h.type===Vn?(t.beginPath(),t.rect(r.x,r.y,r.width,r.height),t.nf(h)):t.fillRect(r.x,r.y,r.width,r.height)),u!==null&&(En(this,t,u,!0,!1,i,r),u instanceof kt&&u.type===Vn?(t.beginPath(),t.rect(r.x,r.y,r.width,r.height),t.nf(u)):t.fillRect(r.x,r.y,r.width,r.height)),this.Uh(t,e)}else if(!this.Gw(t,e)){i=this.transform,h=this.panel,(this.o&4096)!==0&&Eu(this);var p=this.part;u=!1;var d=0;if(p&&e.Ee("drawShadows")&&(u=p.isShadowed)){var g=p.shadowOffset;d=Math.max(g.y,g.x)*e.scale*e.jc}g=this.ei();var c;if(!(c=e.Oi||!g)){var y=this.naturalBounds;c=this.gh;var S=c.m11,v=c.m21,L=c.dx,N=c.m12,M=c.m22,B=c.dy,F,j=F=0;c=F*S+j*v+L;var D=F*N+j*M+B;F=y.width+d,j=0;var R=F*S+j*v+L;F=F*N+j*M+B,j=Math.min(c,R);var W=Math.min(D,F),tt=Math.max(c+0,R)-j,q=Math.max(D+0,F)-W;c=j,D=W,F=y.width+d,j=y.height+d,R=F*S+j*v+L,F=F*N+j*M+B,j=Math.min(c,R),W=Math.min(D,F),tt=Math.max(c+tt,R)-j,q=Math.max(D+q,F)-W,c=j,D=W,F=0,j=y.height+d,R=F*S+j*v+L,F=F*N+j*M+B,j=Math.min(c,R),W=Math.min(D,F),tt=Math.max(c+tt,R)-j,q=Math.max(D+q,F)-W,c=j,D=W,d=e.viewportBounds,y=d.x,S=d.y,c=!(c>d.width+y||y>tt+c||D>d.height+S||S>q+D)}if(c){if(c=(this.o&256)!==0,t.clipInsteadOfFill&&(c=!1),this instanceof Gt&&(t.font=this.font),c){if(D=h.he()?h.naturalBounds:h.actualBounds,this.hb!==null?(y=this.hb,tt=y.x,q=y.y,d=y.width,y=y.height):(tt=Math.max(r.x,D.x),q=Math.max(r.y,D.y),d=Math.min(r.right,D.right)-tt,y=Math.min(r.bottom,D.bottom)-q),tt>r.width+r.x||r.x>D.width+D.x){n!==1&&(t.globalAlpha=s);return}t.save(),t.beginPath(),t.rect(tt,q,d,y),t.clip()}if(g){if(!p.isVisible()){n!==1&&(t.globalAlpha=s);return}u&&(D=p.shadowOffset,t.$u(D.x*e.scale*this.scale*e.jc,D.y*e.scale*this.scale*e.jc,p.shadowBlur),er(t),t.shadowColor=p.shadowColor)}u&&this.shadowVisible===!0?er(t):u&&this.shadowVisible===!1&&Bo(t),p=this.naturalBounds,this.areaBackground!==null&&(t.Nc(),En(this,t,this.areaBackground,!0,!0,p,r),this.areaBackground instanceof kt&&this.areaBackground.type===Vn?(t.beginPath(),t.rect(r.x,r.y,r.width,r.height),t.nf(this.areaBackground)):t.fillRect(r.x,r.y,r.width,r.height)),t.transform(i.m11,i.m12,i.m21,i.m22,i.dx,i.dy),u&&(h!==null&&(h.o&512)!==0||h!==null&&(h.type===Y.Auto||h.type===Y.Spot)&&h.vb()!==this)&&this.shadowVisible===null&&Bo(t),this.Xb!==null&&(t.Nc(),pm(this,t,p,r)),u&&(this.Xb!==null||this.areaBackground!==null||h!==null&&(h.o&512)!==0||h!==null&&(h.type===Y.Auto||h.type===Y.Spot)&&h.vb()!==this)?(Ru(this,!0),this.shadowVisible===null&&Bo(t)):Ru(this,!1),this.Uh(t,e),u&&(this.o&512)!==0&&er(t),g&&u&&Bo(t),c&&(t.restore(),t.Mc(this instanceof Y)),i.Mr()||(e=1/(i.m11*i.m22-i.m12*i.m21),t.transform(i.m22*e,-i.m12*e,-i.m21*e,i.m11*e,e*(i.m21*i.dy-i.m22*i.dx),e*(i.m12*i.dx-i.m11*i.dy)))}}n!==1&&(t.globalAlpha=s)}}}};function pm(t,e,n,i){var r=t.naturalBounds,s=0,h=0,u=r.width;r=r.height;var p=t.Iv();t instanceof dt&&(r=t.sa.bounds,s=r.x,h=r.y,u=r.width,r=r.height),En(t,e,t.Xb,!0,!1,n,i),t.Xb instanceof kt&&t.Xb.type===Vn?(e.beginPath(),e.rect(s-p/2,h-p/2,u+p,r+p),e.nf(t.Xb)):e.fillRect(s-p/2,h-p/2,u+p,r+p)}a.Gw=function(){return!1},a.Uh=function(){};function En(t,e,n,i,r,s,h){if(n!==null){var u=1,p=1;if(typeof n=="string")i?e.fillStyle=n:e.strokeStyle=n;else if(n.type===nr)i?e.fillStyle=n.color:e.strokeStyle=n.color;else{var d=0;if(t instanceof dt&&(d=t.strokeWidth),u=s.width,p=s.height,r?(u=h.width,p=h.height):i||(u+=d,p+=d),(s=e instanceof gs)&&n.le&&(n.type===ba||n.ck===u&&n.ys===p))var g=n.le;else{var c=0,y=0,S=0,v=0,L=0,N=0;if(N=L=0,r?(L=h.x,N=h.y):i||(L-=d/2,N-=d/2),c=n.start.x*u+n.start.offsetX,y=n.start.y*p+n.start.offsetY,S=n.end.x*u+n.end.offsetX,v=n.end.y*p+n.end.offsetY,c+=L,S+=L,y+=N,v+=N,n.type===Do)g=e.createLinearGradient(c,y,S,v);else if(n.type===Vn)N=isNaN(n.endRadius)?Math.max(u,p)/2:n.endRadius,isNaN(n.startRadius)?(L=0,N=Math.max(u,p)/2):L=n.startRadius,g=e.createRadialGradient(c,y,L,S,v,N);else if(n.type===ba)try{g=e.createPattern(n.pattern,"repeat")}catch{g=null}if(n.type!==ba&&(r=n.colorStops,r!==null))for(r=r.iterator;r.next();)g.addColorStop(r.key,r.value);if(s&&(n.le=g,g!==null&&(n.ck=u,n.ys=p),g===null&&n.type===ba&&n.ck!==-1)){n.ck=-1;var M=t.diagram;M!==null&&n.ck===-1&&On(function(){M.redraw()},600)}}i?e.fillStyle=g:e.strokeStyle=g}}}a.dg=function(t){if(t instanceof Y)t:{if(this!==t&&t!==null)for(var e=this.panel;e!==null;){if(e===t){t=!0;break t}e=e.panel}t=!1}else t=!1;return t},a.vf=function(){if(!this.visible)return!1;var t=this.panel;return t!==null?t.vf():!0},a.uf=function(){for(var t=this instanceof Y?this:this.panel;t!==null&&t.isEnabled;)t=t.panel;return t===null};function Eu(t){if((t.o&2048)!==0){var e=t.Bb;if(e.reset(),!t.Eb.w()||!t.qc.w()){Ha(t,!1);return}if(e.translate(t.Eb.x-t.qc.x,t.Eb.y-t.qc.y),t.scale!==1||t.angle!==0){var n=t.naturalBounds;t.Hn(e,n.x,n.y,n.width,n.height)}Ha(t,!1),Dr(t,!0)}(t.o&4096)!==0&&(e=t.panel,e===null?(t.gh.set(t.Bb),t.pk=t.scale,Dr(t,!1)):e.de!==null&&(n=t.gh,n.reset(),e.he()?n.multiply(e.gh):e.panel!==null&&n.multiply(e.panel.gh),n.multiply(t.Bb),t.pk=t.scale*e.pk,Dr(t,!1)))}a.Hn=function(t,e,n,i,r){if(this.wa!==1&&t.scale(this.wa),this.Gb!==0){var s=T.alloc();s.ii(e,n,i,r,Dt),t.rotate(this.Gb,s.x,s.y),T.free(s)}},a.v=function(t){if(!Co(this)){t===void 0&&(t=!1),bn(this,!0),ds(this,!0);var e=this.panel;e===null||t||e.v()}},a.Ej=function(){Co(this)||(bn(this,!0),ds(this,!0))};function Ka(t){if(!Si(t)){var e=t.panel;e!==null?e.v():t.ei()&&(e=t.diagram,e!==null&&(e.qe.add(t),t instanceof _&&t.sd(),e.Kb())),ds(t,!0)}}a.Ak=function(){(this.o&2048)===0&&(Ha(this,!0),Dr(this,!0))},a.wu=function(){Dr(this,!0)},a.N=function(){var t=this.part;t!==null&&t.N()};function zi(t,e){var n=t.stretch,i=t.panel;return i!==null&&i.type===Y.Table?ul(t,i.getRowDefinition(t.row),i.getColumnDefinition(t.column),e):i!==null&&i.type===Y.Auto&&i.vb()===t?To(t,ne,e):n===vi?i!==null?i.type===Y.Spot&&i.vb()===t?To(t,ne,e):(n=i.defaultStretch,n===vi?To(t,te,e):To(t,n,e)):To(t,te,e):To(t,n,e)}function ul(t,e,n,i){var r=t.stretch;if(r!==vi)return To(t,r,i);var s=r=null;switch(e.stretch){case Je:s=!0;break;case ne:s=!0}switch(n.stretch){case Re:r=!0;break;case ne:r=!0}return e=t.panel.defaultStretch,r===null&&(r=e===Re||e===ne),s===null&&(s=e===Je||e===ne),r===!0&&s===!0?To(t,ne,i):r===!0?To(t,Re,i):s===!0?To(t,Je,i):To(t,te,i)}function To(t,e,n){if(n)return e;if(e===te||(n=t.desiredSize,n.w()))return te;if(t=t.angle,!isNaN(n.width))if(t!==90&&t!==270){if(e===Re)return te;if(e===ne)return Je}else{if(e===Je)return te;if(e===ne)return Re}if(!isNaN(n.height))if(t!==90&&t!==270){if(e===Je)return te;if(e===ne)return Re}else{if(e===Re)return te;if(e===ne)return Je}return e}function Ru(t,e){t.o=e?t.o|512:t.o&-513}function Xs(t){return(t.o&1024)!==0}function Rf(t,e){t.o=e?t.o|1024:t.o&-1025}function Ha(t,e){t.o=e?t.o|2048:t.o&-2049}function Dr(t,e){t.o=e?t.o|4096:t.o&-4097}function Co(t){return(t.o&8192)!==0}function bn(t,e){t.o=e?t.o|8192:t.o&-8193}function Si(t){return(t.o&16384)!==0}function ds(t,e){t.o=e?t.o|16384:t.o&-16385}a.gi=function(t){this.ye=t},a.Xu=function(){},a.Wu=function(t){return this.pa=t,Ka(this),!0},a.Ll=function(t,e){(this.pa.x!==t||this.pa.y!==e)&&(this.pa.h(t,e),this.Ak())},a.Iv=function(){return 0};function fs(t){var e=t.part;if(e instanceof _&&(t.portId!==null||t===e.port)){var n=e.diagram;n===null||n.undoManager.isUndoingRedoing||ox(e,t)}}function dm(t){var e=t.diagram;e===null||e.undoManager.isUndoingRedoing||(t instanceof Y?t instanceof _?t.sd():t.Ql(t,function(n){fs(n)}):fs(t))}a.bind=function(t,e,n,i){var r=null;return typeof t=="string"?r=new ie(t,e,n,i):r=t,r.pd=this,t=this.Tg(),t!==null&&Tm(t)&&X("Cannot add a Binding to a template that has already been copied: "+r),this.localBindings===null&&(this.localBindings=new Q),this.localBindings.add(r),this},a.set=function(t){return Object.assign(this,t),this},a.au=function(t){return Vf(this,t),this},a.apply=function(t){return t(this),this},a.Ml=function(t){return tl(this,t),this},a.Ky=function(){return this.Tg()},a.Tg=function(){for(var t=this instanceof Y?this:this.panel;t!==null;){if(t.allBindings!==null)return t;t=t.panel}return null},a.dv=function(t){return t.pd=this,this.animationTriggers===null&&(this.animationTriggers=new pt),this.animationTriggers.add(t.propertyName,t),this};function qn(t,e){for(var n=1;n<arguments.length;++n);n=arguments;var i=null,r=null;if(typeof t=="function")r=t;else if(typeof t=="string"){var s=Wa.I(t);typeof s=="function"?(n=wo(arguments),i=s(n),Bt(i)||X('GraphObject.make invoked object builder "'+t+'", but it did not return an Object')):r=it.go[t]}if(i===null&&(r!=null&&r.constructor||X("GraphObject.make requires a class function or GoJS class name or name of an object builder, not: "+t),i=new r),r=1,i instanceof I&&1<n.length){s=i;var h=n[1];(typeof h=="string"||h instanceof HTMLDivElement)&&(Af(s,h),r++)}for(;r<n.length;r++)s=n[r],s===void 0?X("Undefined value at argument "+r+" for object being constructed by GraphObject.make: "+i):Vf(i,s);return i}function Vf(t,e){if(typeof e=="string")if(t instanceof Gt)t.text=e;else if(t instanceof dt)t.figure=e;else if(t instanceof Pn)t.source=e;else if(t instanceof Y)e=Pi.I(e),e!==null&&(t.type=e);else if(t instanceof kt){var n=Mr(kt,e);n!==null?t.type=n:X("Unknown Brush type as an argument to GraphObject.make: "+e)}else t instanceof K?(e=Mr(K,e),e!==null&&(t.type=e)):t instanceof wt&&(e=Mr(wt,e),e!==null&&(t.type=e));else if(e instanceof nt)t instanceof Y||X("A GraphObject can only be added to a Panel, not to: "+t),t.add(e);else if(e instanceof ye){var i;e.isRow&&typeof t.getRowDefinition=="function"?i=t.getRowDefinition(e.index):e.isRow||typeof t.getColumnDefinition!="function"||(i=t.getColumnDefinition(e.index)),i instanceof ye?(t=i,e.isRow?t.height=e.height:t.width=e.width,t.minimum=e.minimum,t.maximum=e.maximum,t.alignment=e.alignment,t.stretch=e.stretch,t.sizing=e.sizing,t.Sf=e.separatorPadding===null?null:e.separatorPadding.J(),t.separatorStroke=e.separatorStroke,t.separatorStrokeWidth=e.separatorStrokeWidth,t.gj=null,e.separatorDashArray&&(t.gj=wo(e.separatorDashArray)),t.background=e.background,t.coversSeparators=e.coversSeparators,t.Rd=e.Rd):X("A RowColumnDefinition can only be added to an object that implements getRowDefinition/getColumnDefinition, not to: "+t)}else if(e instanceof J)typeof t.ob=="function"&&t.ob(e);else if(e instanceof fe)t.type=e;else if(e instanceof ie)t instanceof nt||t instanceof ye?t.bind(e):X("A Binding can only be applied to a GraphObject or RowColumnDefinition, not to: "+t);else if(e instanceof ho)t instanceof nt?t.dv(e):X("An AnimationTrigger can only be applied to a GraphObject, not to: "+t);else if(e instanceof Fe)t instanceof K&&t.type===K.m?t.figures.add(e):X("A PathFigure can only be added to a Path Geometry, not to: "+t);else if(e instanceof wt)t instanceof Fe?t.segments.add(e):X("A PathSegment can only be added to a PathFigure, not to: "+t);else if(e instanceof Ut)t instanceof I||t instanceof ut?t.layout=e:X("A Layout can only be assigned to a Diagram or a Group, not to: "+t);else if(Array.isArray(e))for(n=0;n<e.length;n++)Vf(t,e[n]);else if(typeof e=="object"&&e!==null)if(t instanceof kt){n=new In;for(var r in e)i=parseFloat(r),isNaN(i)?n[r]=e[r]:t.addColorStop(i,e[r]);tl(t,n)}else if(t instanceof ye){e.row!==void 0?(r=e.row,(r==null||r===1/0||isNaN(r)||0>r)&&X("Must specify non-negative integer row for RowColumnDefinition "+e+", not: "+r),t.isRow=!0,t.index=r):e.column!==void 0&&(r=e.column,(r==null||r===1/0||isNaN(r)||0>r)&&X("Must specify non-negative integer column for RowColumnDefinition "+e+", not: "+r),t.isRow=!1,t.index=r),r=new In;for(n in e)n!=="row"&&n!=="column"&&(r[n]=e[n]);tl(t,r)}else tl(t,e);else X('Unknown initializer "'+e+'" for object being constructed by GraphObject.make: '+t)}function qo(t,e){Wa.add(t,e)}function Vu(t,e,n){n===void 0&&(n=null);var i=t[1];if(typeof n=="function"?n(i):typeof i=="string")return t.splice(1,1),i;if(e===void 0)throw Error("no "+(typeof n=="function"?"satisfactory":"string")+" argument for GraphObject builder "+t[0]);return e}Z.Object.defineProperties(nt.prototype,{bindingId:{get:function(){return this.A!==null?this.A.To:-1},set:function(t){this.bindingId!==t&&(this.A===null&&(this.A=new Us),this.A.To=t)}},localBindings:{get:function(){return this.A!==null?this.A.Bf:null},set:function(t){this.localBindings!==t&&(this.A===null&&(this.A=new Us),this.A.Bf=t)}},srcBindings:{get:function(){return this.A!==null?this.A.No:null},set:function(t){this.srcBindings!==t&&(this.A===null&&(this.A=new Us),this.A.No=t)}},shadowVisible:{get:function(){return this.A!==null?this.A.oi:null},set:function(t){var e=this.shadowVisible;e!==t&&(xe(this),this.A.oi=t,this.N(),this.g("shadowVisible",e,t))}},enabledChanged:{get:function(){return this.A!==null?this.A.Gc:null},set:function(t){var e=this.enabledChanged;e!==t&&(xe(this),this.A.Gc=t,this.g("enabledChanged",e,t))}},segmentOrientation:{get:function(){return this.Ra!==null?this.Ra.Iq:hn},set:function(t){var e=this.segmentOrientation;e!==t&&(this.Ra===null&&(this.Ra=new Gr),this.Ra.Iq=t,this.v(),this.g("segmentOrientation",e,t),t===hn&&(this.angle=0))}},segmentIndex:{get:function(){return this.Ra!==null?this.Ra.u:-1/0},set:function(t){t=Math.round(t);var e=this.segmentIndex;e!==t&&(this.Ra===null&&(this.Ra=new Gr),this.Ra.u=t,this.v(),this.g("segmentIndex",e,t))}},segmentFraction:{get:function(){return this.Ra!==null?this.Ra.m:0},set:function(t){isNaN(t)||0>t?t=0:1<t&&(t=1);var e=this.segmentFraction;e!==t&&(this.Ra===null&&(this.Ra=new Gr),this.Ra.m=t,this.v(),this.g("segmentFraction",e,t))}},segmentOffset:{get:function(){return this.Ra!==null?this.Ra.F:Zi},set:function(t){var e=this.segmentOffset;e.C(t)||(t=t.J(),this.Ra===null&&(this.Ra=new Gr),this.Ra.F=t,this.v(),this.g("segmentOffset",e,t))}},stretch:{get:function(){return this.A!==null?this.A.Wf:vi},set:function(t){var e=this.stretch;e!==t&&(xe(this),this.A.Wf=t,this.v(),this.g("stretch",e,t))}},name:{get:function(){return this.A!==null?this.A.va:""},set:function(t){var e=this.name;e!==t&&(xe(this),this.A.va=t,this.part!==null&&(this.part.Dh=null),this.g("name",e,t))}},opacity:{get:function(){return this.tb},set:function(t){var e=this.tb;e!==t&&((0>t||1<t)&&Rt(t,"0 <= value <= 1",nt,"opacity"),this.tb=t,this.g("opacity",e,t),t=this.diagram,e=this.part,t!==null&&e!==null&&t.N(Zs(e,e.actualBounds)))}},visible:{get:function(){return(this.o&1)!==0},set:function(t){var e=(this.o&1)!==0;e!==t&&(this.o^=1,this.g("visible",e,t),e=this.panel,e!==null?e.v():this.ei()&&this.Tb(t),this.N(),dm(this))}},pickable:{get:function(){return(this.o&2)!==0},set:function(t){var e=(this.o&2)!==0;e!==t&&(this.o^=2,this.g("pickable",e,t))}},fromLinkableDuplicates:{get:function(){return(this.o&4)!==0},set:function(t){var e=(this.o&4)!==0;e!==t&&(this.o^=4,this.g("fromLinkableDuplicates",e,t))}},fromLinkableSelfNode:{get:function(){return(this.o&8)!==0},set:function(t){var e=(this.o&8)!==0;e!==t&&(this.o^=8,this.g("fromLinkableSelfNode",e,t))}},toLinkableDuplicates:{get:function(){return(this.o&16)!==0},set:function(t){var e=(this.o&16)!==0;e!==t&&(this.o^=16,this.g("toLinkableDuplicates",e,t))}},toLinkableSelfNode:{get:function(){return(this.o&32)!==0},set:function(t){var e=(this.o&32)!==0;e!==t&&(this.o^=32,this.g("toLinkableSelfNode",e,t))}},isPanelMain:{get:function(){return(this.o&64)!==0},set:function(t){var e=(this.o&64)!==0;e!==t&&(this.o^=64,this.v(),this.g("isPanelMain",e,t))}},isActionable:{get:function(){return(this.o&128)!==0},set:function(t){var e=(this.o&128)!==0;e!==t&&(this.o^=128,this.g("isActionable",e,t))}},areaBackground:{get:function(){return this.A!==null?this.A.nb:null},set:function(t){var e=this.areaBackground;e!==t&&(t!==null&&Ws(t,"GraphObject.areaBackground"),t instanceof kt&&t.freeze(),xe(this),this.A.nb=t,this.N(),this.g("areaBackground",e,t))}},background:{get:function(){return this.Xb},set:function(t){var e=this.Xb;e!==t&&(t!==null&&Ws(t,"GraphObject.background"),t instanceof kt&&t.freeze(),this.Xb=t,this.N(),this.g("background",e,t))}},part:{get:function(){if(this.ei())return this;if(this.yg!==null)return this.yg;var t;for(t=this.panel;t;){if(t instanceof ot)return this.yg=t;t=t.panel}return null}},svg:{get:function(){return this.dr},set:function(t){this.dr=t}},panel:{get:function(){return this.ye}},layer:{get:function(){var t=this.part;return t!==null?t.layer:null}},diagram:{get:function(){var t=this.part;return t!==null?t.diagram:null}},position:{get:function(){return this.pa},set:function(t){var e=t.x,n=t.y,i=this.pa,r=i.x;i=i.y,(r===e||isNaN(r)&&isNaN(e))&&(i===n||isNaN(i)&&isNaN(n))?this.Xu():(t=t.copy(),this.Wu(t,r,i)&&this.g("position",new T(r,i),t))}},actualBounds:{get:function(){return this.Eb}},scale:{get:function(){return this.wa},set:function(t){var e=this.wa;e!==t&&(0>=t&&X("GraphObject.scale for "+this+" must be greater than zero, not: "+t),this.wa=t,this.v(),this.g("scale",e,t))}},angle:{get:function(){return this.Gb},set:function(t){var e=this.Gb;e!==t&&(t%=360,0>t&&(t+=360),e!==t&&(this.Gb=t,dm(this),this.v(),this.g("angle",e,t)))}},desiredSize:{get:function(){return this.Xc},set:function(t){var e=t.width,n=t.height,i=this.Xc,r=i.width,s=i.height;(r===e||isNaN(r)&&isNaN(e))&&(s===n||isNaN(s)&&isNaN(n))||(this.Xc=t=t.J(),this.v(),this instanceof dt&&this.lc(),this.g("desiredSize",i,t),Xs(this)&&(t=this.part,t!==null&&(ps(this,t,"width"),ps(this,t,"height"))))}},width:{get:function(){return this.Xc.width},set:function(t){var e=this.Xc.width;e===t||isNaN(e)&&isNaN(t)||(e=this.Xc,this.Xc=t=new ht(t,this.Xc.height).freeze(),this.v(),this instanceof dt&&this.lc(),this.g("desiredSize",e,t),Xs(this)&&(t=this.part,t!==null&&ps(this,t,"width")))}},height:{get:function(){return this.Xc.height},set:function(t){var e=this.Xc.height;e===t||isNaN(e)&&isNaN(t)||(e=this.Xc,this.Xc=t=new ht(this.Xc.width,t).freeze(),this.v(),this instanceof dt&&this.lc(),this.g("desiredSize",e,t),Xs(this)&&(t=this.part,t!==null&&ps(this,t,"height")))}},minSize:{get:function(){return this.A!==null?this.A.u:Nr},set:function(t){var e=this.minSize;e.C(t)||(t=t.copy(),isNaN(t.width)&&(t.width=0),isNaN(t.height)&&(t.height=0),t.freeze(),xe(this),this.A.u=t,this.v(),this.g("minSize",e,t))}},maxSize:{get:function(){return this.A!==null?this.A.m:Cr},set:function(t){var e=this.maxSize;e.C(t)||(t=t.copy(),isNaN(t.width)&&(t.width=1/0),isNaN(t.height)&&(t.height=1/0),t.freeze(),xe(this),this.A.m=t,this.v(),this.g("maxSize",e,t))}},measuredBounds:{get:function(){return this.qc}},naturalBounds:{get:function(){return this.ac}},margin:{get:function(){return this.vg},set:function(t){typeof t=="number"&&(t=new Ft(t));var e=this.vg;e.C(t)||(this.vg=t=t.J(),this.v(),this.g("margin",e,t))}},transform:{get:function(){return(this.o&2048)!==0&&Eu(this),this.Bb}},de:{get:function(){return(this.o&4096)!==0&&Eu(this),this.gh}},animationTriggers:{get:function(){return this.A!==null?this.A.gb:null},set:function(t){this.animationTriggers!==t&&(xe(this),this.A.gb=t)}},reshapingBehavior:{get:function(){return this.A!==null?this.A.mi:te},set:function(t){this.reshapingBehavior!==t&&(xe(this),this.A.mi=t)}},alignment:{get:function(){return this.Fb},set:function(t){var e=this.Fb;e.C(t)||(t.Ec()&&!t.Rb()&&X("GraphObject.alignment for "+this+" must be a real Spot or Spot.Default, not: "+t),this.Fb=t=t.J(),Ka(this),this.g("alignment",e,t))}},column:{get:function(){return this.mg},set:function(t){t=Math.round(t);var e=this.mg;e!==t&&(0>t&&Rt(t,">= 0",nt,"column"),this.mg=t,this.v(),this.g("column",e,t))}},columnSpan:{get:function(){return this.A!==null?this.A.Db:1},set:function(t){t=Math.round(t);var e=this.columnSpan;e!==t&&(1>t&&Rt(t,">= 1",nt,"columnSpan"),xe(this),this.A.Db=t,this.v(),this.g("columnSpan",e,t))}},row:{get:function(){return this.Cn},set:function(t){t=Math.round(t);var e=this.Cn;e!==t&&(0>t&&Rt(t,">= 0",nt,"row"),this.Cn=t,this.v(),this.g("row",e,t))}},rowSpan:{get:function(){return this.A!==null?this.A.ni:1},set:function(t){t=Math.round(t);var e=this.rowSpan;e!==t&&(1>t&&Rt(t,">= 1",nt,"rowSpan"),xe(this),this.A.ni=t,this.v(),this.g("rowSpan",e,t))}},spanAllocation:{get:function(){return this.A!==null?this.A.pi:null},set:function(t){var e=this.spanAllocation;e!==t&&(xe(this),this.A.pi=t,this.v(),this.g("spanAllocation",e,t))}},alignmentFocus:{get:function(){return this.Xj},set:function(t){var e=this.Xj;e.C(t)||(this.Xj=t=t.J(),this.v(),this.g("alignmentFocus",e,t))}},portId:{get:function(){return this.xn},set:function(t){var e=this.xn;if(e!==t){var n=this.part;n===null||n instanceof _||X("Cannot set portID on a Link: "+t),e!==null&&n!==null&&Lg(n,this),this.xn=t,t!==null&&n!==null&&(n.Fe=!0,ax(n,this)),this.g("portId",e,t)}}},toSpot:{get:function(){return this.aa!==null?this.aa.lj:Ke},set:function(t){var e=this.toSpot;e.C(t)||(t=t.J(),this.Pc(),this.aa.lj=t,this.g("toSpot",e,t),fs(this))}},toEndSegmentLength:{get:function(){return this.aa!==null?this.aa.jj:10},set:function(t){var e=this.toEndSegmentLength;e!==t&&(0>t&&Rt(t,">= 0",nt,"toEndSegmentLength"),this.Pc(),this.aa.jj=t,this.g("toEndSegmentLength",e,t),fs(this))}},toShortLength:{get:function(){return this.aa!==null?this.aa.kj:0},set:function(t){var e=this.toShortLength;e!==t&&(this.Pc(),this.aa.kj=t,this.g("toShortLength",e,t),fs(this))}},toLinkable:{get:function(){return this.aa!==null?this.aa.kr:null},set:function(t){var e=this.toLinkable;e!==t&&(this.Pc(),this.aa.kr=t,this.g("toLinkable",e,t))}},toMaxLinks:{get:function(){return this.aa!==null?this.aa.lr:1/0},set:function(t){var e=this.toMaxLinks;e!==t&&(0>t&&Rt(t,">= 0",nt,"toMaxLinks"),this.Pc(),this.aa.lr=t,this.g("toMaxLinks",e,t))}},fromSpot:{get:function(){return this.aa!==null?this.aa.Ji:Ke},set:function(t){var e=this.fromSpot;e.C(t)||(t=t.J(),this.Pc(),this.aa.Ji=t,this.g("fromSpot",e,t),fs(this))}},fromEndSegmentLength:{get:function(){return this.aa!==null?this.aa.Hi:10},set:function(t){var e=this.fromEndSegmentLength;e!==t&&(0>t&&Rt(t,">= 0",nt,"fromEndSegmentLength"),this.Pc(),this.aa.Hi=t,this.g("fromEndSegmentLength",e,t),fs(this))}},fromShortLength:{get:function(){return this.aa!==null?this.aa.Ii:0},set:function(t){var e=this.fromShortLength;e!==t&&(this.Pc(),this.aa.Ii=t,this.g("fromShortLength",e,t),fs(this))}},fromLinkable:{get:function(){return this.aa!==null?this.aa.Bp:null},set:function(t){var e=this.fromLinkable;e!==t&&(this.Pc(),this.aa.Bp=t,this.g("fromLinkable",e,t))}},fromMaxLinks:{get:function(){return this.aa!==null?this.aa.Cp:1/0},set:function(t){var e=this.fromMaxLinks;e!==t&&(0>t&&Rt(t,">= 0",nt,"fromMaxLinks"),this.Pc(),this.aa.Cp=t,this.g("fromMaxLinks",e,t))}},cursor:{get:function(){return this.A!==null?this.A.j:""},set:function(t){var e=this.cursor;e!==t&&(xe(this),this.A.j=t,this.g("cursor",e,t))}},click:{get:function(){return this.A!==null?this.A.jh:null},set:function(t){var e=this.click;e!==t&&(xe(this),this.A.jh=t,this.g("click",e,t))}},doubleClick:{get:function(){return this.A!==null?this.A.ph:null},set:function(t){var e=this.doubleClick;e!==t&&(xe(this),this.A.ph=t,this.g("doubleClick",e,t))}},contextClick:{get:function(){return this.A!==null?this.A.lh:null},set:function(t){var e=this.contextClick;e!==t&&(xe(this),this.A.lh=t,this.g("contextClick",e,t))}},mouseEnter:{get:function(){return this.A!==null?this.A.yh:null},set:function(t){var e=this.mouseEnter;e!==t&&(xe(this),this.A.yh=t,this.g("mouseEnter",e,t))}},mouseLeave:{get:function(){return this.A!==null?this.A.Bh:null},set:function(t){var e=this.mouseLeave;e!==t&&(xe(this),this.A.Bh=t,this.g("mouseLeave",e,t))}},mouseOver:{get:function(){return this.A!==null?this.A.Ch:null},set:function(t){var e=this.mouseOver;e!==t&&(xe(this),this.A.Ch=t,this.g("mouseOver",e,t))}},mouseHover:{get:function(){return this.A!==null?this.A.Ah:null},set:function(t){var e=this.mouseHover;e!==t&&(xe(this),this.A.Ah=t,this.g("mouseHover",e,t))}},mouseHold:{get:function(){return this.A!==null?this.A.zh:null},set:function(t){var e=this.mouseHold;e!==t&&(xe(this),this.A.zh=t,this.g("mouseHold",e,t))}},mouseDragEnter:{get:function(){return this.A!==null?this.A.Md:null},set:function(t){var e=this.mouseDragEnter;e!==t&&(xe(this),this.A.Md=t,this.g("mouseDragEnter",e,t))}},mouseDragLeave:{get:function(){return this.A!==null?this.A.Cf:null},set:function(t){var e=this.mouseDragLeave;e!==t&&(xe(this),this.A.Cf=t,this.g("mouseDragLeave",e,t))}},mouseDrop:{get:function(){return this.A!==null?this.A.xh:null},set:function(t){var e=this.mouseDrop;e!==t&&(xe(this),this.A.xh=t,this.g("mouseDrop",e,t))}},actionDown:{get:function(){return this.A!==null?this.A.W:null},set:function(t){var e=this.actionDown;e!==t&&(xe(this),this.A.W=t,this.g("actionDown",e,t))}},actionMove:{get:function(){return this.A!==null?this.A.ga:null},set:function(t){var e=this.actionMove;e!==t&&(xe(this),this.A.ga=t,this.g("actionMove",e,t))}},actionUp:{get:function(){return this.A!==null?this.A.Fa:null},set:function(t){var e=this.actionUp;e!==t&&(xe(this),this.A.Fa=t,this.g("actionUp",e,t))}},actionCancel:{get:function(){return this.A!==null?this.A.F:null},set:function(t){var e=this.actionCancel;e!==t&&(xe(this),this.A.F=t,this.g("actionCancel",e,t))}},toolTip:{get:function(){return this.A!==null?this.A.Mh:null},set:function(t){var e=this.toolTip;e!==t&&(xe(this),this.A.Mh=t,this.g("toolTip",e,t))}},contextMenu:{get:function(){return this.A!==null?this.A.mh:null},set:function(t){var e=this.contextMenu;e!==t&&(xe(this),this.A.mh=t,this.g("contextMenu",e,t))}}}),nt.prototype.trigger=nt.prototype.dv,nt.prototype.findBindingPanel=nt.prototype.Tg,nt.prototype.findTemplateBinder=nt.prototype.Ky,nt.prototype.setProperties=nt.prototype.Ml,nt.prototype.apply=nt.prototype.apply,nt.prototype.attach=nt.prototype.au,nt.prototype.set=nt.prototype.set,nt.prototype.isEnabledObject=nt.prototype.uf,nt.prototype.isVisibleObject=nt.prototype.vf,nt.prototype.isContainedBy=nt.prototype.dg,nt.prototype.getNearestIntersectionPoint=nt.prototype.Gr,nt.prototype.getLocalPoint=nt.prototype.Fr,nt.prototype.getDocumentScale=nt.prototype.qf,nt.prototype.getDocumentAngle=nt.prototype.Zh,nt.prototype.getDocumentBounds=nt.prototype.$h,nt.prototype.getDocumentPoint=nt.prototype.ia,nt.prototype.intersectsRect=nt.prototype.Qc,nt.prototype.containedInRect=nt.prototype.Rg,nt.prototype.containsRect=nt.prototype.Ce,nt.prototype.containsPoint=nt.prototype.ba,nt.prototype.raiseChanged=nt.prototype.g,nt.prototype.raiseChangedEvent=nt.prototype.bb,nt.prototype.addCopyProperty=nt.prototype.pw;var Wa=null;nt.className="GraphObject",Wa=new pt,qo("Button",function(){function t(n,i){return n.diagram.dc(n.documentPoint,function(r){for(;r.panel!==null&&!r.isActionable;)r=r.panel;return r},function(r){return r===i})!==null}var e=qn(Y,Y.Auto,{isActionable:!0,enabledChanged:function(n,i){if(n instanceof Y){var r=n.eb("ButtonBorder");r!==null&&(r.fill=i?n._buttonFillNormal:n._buttonFillDisabled)}},cursor:"pointer",_buttonFillNormal:"#F5F5F5",_buttonStrokeNormal:"#BDBDBD",_buttonFillOver:"#E0E0E0",_buttonStrokeOver:"#9E9E9E",_buttonFillPressed:"#BDBDBD",_buttonStrokePressed:"#9E9E9E",_buttonFillDisabled:"#E5E5E5"},qn(dt,{name:"ButtonBorder",figure:"RoundedRectangle",spot1:new rt(0,0,2.76142374915397,2.761423749153969),spot2:new rt(1,1,-2.76142374915397,-2.761423749153969),parameter1:2,parameter2:2,fill:"#F5F5F5",stroke:"#BDBDBD"}));return e.mouseEnter=function(n,i){if(i.uf()&&i instanceof Y&&(n=i.eb("ButtonBorder"),n instanceof dt)){var r=i._buttonFillOver;i._buttonFillNormal=n.fill,n.fill=r,r=i._buttonStrokeOver,i._buttonStrokeNormal=n.stroke,n.stroke=r}},e.mouseLeave=function(n,i){i.uf()&&i instanceof Y&&(n=i.eb("ButtonBorder"),n instanceof dt&&(n.fill=i._buttonFillNormal,n.stroke=i._buttonStrokeNormal))},e.actionDown=function(n,i){if(i.uf()&&i instanceof Y&&i._buttonFillPressed!==null&&n.button===0){var r=i.eb("ButtonBorder");if(r instanceof dt){n=n.diagram;var s=n.skipsUndoManager;n.skipsUndoManager=!0;var h=i._buttonFillPressed;i._buttonFillOver=r.fill,r.fill=h,h=i._buttonStrokePressed,i._buttonStrokeOver=r.stroke,r.stroke=h,n.skipsUndoManager=s}}},e.actionUp=function(n,i){if(i.uf()&&i instanceof Y&&i._buttonFillPressed!==null&&n.button===0){var r=i.eb("ButtonBorder");if(r instanceof dt){var s=n.diagram,h=s.skipsUndoManager;s.skipsUndoManager=!0,t(n,i)?(r.fill=i._buttonFillOver,r.stroke=i._buttonStrokeOver):(r.fill=i._buttonFillNormal,r.stroke=i._buttonStrokeNormal),s.skipsUndoManager=h}}},e.actionCancel=function(n,i){if(i.uf()&&i instanceof Y&&i._buttonFillPressed!==null){var r=i.eb("ButtonBorder");if(r instanceof dt){var s=n.diagram,h=s.skipsUndoManager;s.skipsUndoManager=!0,t(n,i)?(r.fill=i._buttonFillOver,r.stroke=i._buttonStrokeOver):(r.fill=i._buttonFillNormal,r.stroke=i._buttonStrokeNormal),s.skipsUndoManager=h}}},e.actionMove=function(n,i){if(i.uf()&&i instanceof Y&&i._buttonFillPressed!==null){var r=n.diagram;if(r.firstInput.button===0&&(r.currentTool.standardMouseOver(),t(n,i)&&(n=i.eb("ButtonBorder"),n instanceof dt))){var s=r.skipsUndoManager;r.skipsUndoManager=!0;var h=i._buttonFillPressed;n.fill!==h&&(n.fill=h),h=i._buttonStrokePressed,n.stroke!==h&&(n.stroke=h),r.skipsUndoManager=s}}},e}),qo("TreeExpanderButton",function(){var t=qn("Button",{_treeExpandedFigure:"MinusLine",_treeCollapsedFigure:"PlusLine"},qn(dt,{name:"ButtonIcon",figure:"MinusLine",stroke:"#424242",strokeWidth:2,desiredSize:Tr},new ie("figure","isTreeExpanded",function(e,n){return n=n.panel,e?n._treeExpandedFigure:n._treeCollapsedFigure}).wo()),{visible:!1},new ie("visible","isTreeLeaf",function(e){return!e}).wo());return t.click=function(e,n){if(n=n.part,n instanceof St&&(n=n.adornedPart),n instanceof _){var i=n.diagram;if(i!==null){if(i=i.commandHandler,n.isTreeExpanded){if(!i.canCollapseTree(n))return}else if(!i.canExpandTree(n))return;e.handled=!0,n.isTreeExpanded?i.collapseTree(n):i.expandTree(n)}}},t}),qo("SubGraphExpanderButton",function(){var t=qn("Button",{_subGraphExpandedFigure:"MinusLine",_subGraphCollapsedFigure:"PlusLine"},qn(dt,{name:"ButtonIcon",figure:"MinusLine",stroke:"#424242",strokeWidth:2,desiredSize:Tr},new ie("figure","isSubGraphExpanded",function(e,n){return n=n.panel,e?n._subGraphExpandedFigure:n._subGraphCollapsedFigure}).wo()));return t.click=function(e,n){if(n=n.part,n instanceof St&&(n=n.adornedPart),n instanceof ut){var i=n.diagram;if(i!==null){if(i=i.commandHandler,n.isSubGraphExpanded){if(!i.canCollapseSubGraph(n))return}else if(!i.canExpandSubGraph(n))return;e.handled=!0,n.isSubGraphExpanded?i.collapseSubGraph(n):i.expandSubGraph(n)}}},t}),qo("ToolTip",function(){return qn(St,Y.Auto,{isShadowed:!0,shadowColor:"rgba(0, 0, 0, .4)",shadowOffset:new T(0,3),shadowBlur:5},qn(dt,{name:"Border",figure:"RoundedRectangle",parameter1:1,parameter2:1,fill:"#F5F5F5",stroke:"#F0F0F0",spot1:new rt(0,0,4,6),spot2:new rt(1,1,-4,-4)}))}),qo("ContextMenu",function(){return qn(St,Y.Vertical,{background:"#F5F5F5",isShadowed:!0,shadowColor:"rgba(0, 0, 0, .4)",shadowOffset:new T(0,3),shadowBlur:5},new ie("background","",function(t){return t.adornedPart!==null&&t.placeholder!==null?null:"#F5F5F5"}))}),qo("ContextMenuButton",function(){var t=qn("Button");t.stretch=Re;var e=t.eb("ButtonBorder");return e instanceof dt&&(e.figure="Rectangle",e.strokeWidth=0,e.spot1=new rt(0,0,2,3),e.spot2=new rt(1,1,-2,-2)),t}),qo("PanelExpanderButton",function(t){var e=Vu(t,"COLLAPSIBLE"),n=qn("Button",{_buttonExpandedFigure:"M0 0 M0 6 L4 2 8 6 M8 8",_buttonCollapsedFigure:"M0 0 M0 2 L4 6 8 2 M8 8",_buttonFillNormal:"rgba(0, 0, 0, 0)",_buttonStrokeNormal:null,_buttonFillOver:"rgba(0, 0, 0, .2)",_buttonStrokeOver:null,_buttonFillPressed:"rgba(0, 0, 0, .4)",_buttonStrokePressed:null},qn(dt,{name:"ButtonIcon",strokeWidth:2},new ie("geometryString","visible",function(i){return i?n._buttonExpandedFigure:n._buttonCollapsedFigure}).wo(e)));return t=n.eb("ButtonBorder"),t instanceof dt&&(t.stroke=null,t.fill="rgba(0, 0, 0, 0)"),n.click=function(i,r){var s=r.diagram;if(s!==null&&!s.isReadOnly){var h=r.Tg();h===null&&(h=r.part),h!==null&&(r=h.eb(e),r!==null&&(i.handled=!0,s.Ca("Collapse/Expand Panel"),r.visible=!r.visible,s.cb("Collapse/Expand Panel")))}},n}),qo("CheckBoxButton",function(t){var e=Vu(t);return t=qn("Button",{desiredSize:new ht(14,14)},qn(dt,{name:"ButtonIcon",geometryString:"M0 0 M0 8.85 L4.9 13.75 16.2 2.45 M16.2 16.2",strokeWidth:2,stretch:ne,geometryStretch:$i,visible:!1},e!==""?new ie("visible",e).bx():[])),t.click=function(n,i){if(i instanceof Y){var r=n.diagram;if(!(r===null||r.isReadOnly||e!==""&&r.model.isReadOnly)){n.handled=!0;var s=i.eb("ButtonIcon");r.Ca("checkbox"),s.visible=!s.visible,typeof i._doClick=="function"&&i._doClick(n,i),r.cb("checkbox")}}},t}),qo("CheckBox",function(t){t=Vu(t),t=qn("CheckBoxButton",t,{name:"Button",isActionable:!1,margin:new Ft(0,1,0,0)});var e=qn(Y,"Horizontal",t,{isActionable:!0,cursor:t.cursor,margin:1,_buttonFillNormal:t._buttonFillNormal,_buttonStrokeNormal:t._buttonStrokeNormal,_buttonFillOver:t._buttonFillOver,_buttonStrokeOver:t._buttonStrokeOver,_buttonFillPressed:t._buttonFillPressed,_buttonStrokePressed:t._buttonStrokePressed,_buttonFillDisabled:t._buttonFillDisabled,mouseEnter:t.mouseEnter,mouseLeave:t.mouseLeave,actionDown:t.actionDown,actionUp:t.actionUp,actionCancel:t.actionCancel,actionMove:t.actionMove,click:t.click,_buttonClick:t.click});return t.mouseEnter=null,t.mouseLeave=null,t.actionDown=null,t.actionUp=null,t.actionCancel=null,t.actionMove=null,t.click=null,e}),nt.None=te=new J(nt,"None",0),nt.Default=vi=new J(nt,"Default",0),nt.Vertical=Je=new J(nt,"Vertical",4),nt.Horizontal=Re=new J(nt,"Horizontal",5),nt.Fill=ne=new J(nt,"Fill",3),nt.Uniform=$i=new J(nt,"Uniform",1),nt.UniformToFill=sl=new J(nt,"UniformToFill",2),nt.FlipVertical=al=new J(nt,"FlipVertical",1),nt.FlipHorizontal=hl=new J(nt,"FlipHorizontal",2),nt.FlipBoth=ll=new J(nt,"FlipBoth",3),nt.make=qn,nt.getBuilders=function(){var t=new pt,e;for(e in Wa)if(e!==e.toLowerCase()){var n=Wa.I(e);typeof n=="function"&&t.add(e,n)}return t.freeze(),t},nt.defineBuilder=qo,nt.build=function(t,e){var n=Wa.I(t);if(typeof n=="function"&&(n=n(null),n instanceof nt))return e&&n.set(e),n;X('GraphObject.build invoked object builder "'+t+'", but it did not return an Object')},nt.takeBuilderArgument=Vu;function Us(){this.hc=!1,this.va="",this.To=-1,this.mb=this.No=this.Bf=null,this.j="",this.gb=this.pi=this.Gc=this.mh=this.Mh=this.F=this.Fa=this.ga=this.W=this.xh=this.Cf=this.Md=this.zh=this.Ah=this.Ch=this.Bh=this.yh=this.lh=this.ph=this.jh=null,this.u=Nr,this.m=Cr,this.Wf=vi,this.Db=this.ni=1,this.mi=te,this.ie=this.oi=this.nb=null,this.Hc="category"}Us.prototype.copy=function(){var t=new Us;return t.va=this.va,t.To=this.To,t.Bf=this.Bf,t.mb=this.mb,t.j=this.j,t.jh=this.jh,t.ph=this.ph,t.lh=this.lh,t.yh=this.yh,t.Bh=this.Bh,t.Ch=this.Ch,t.Ah=this.Ah,t.zh=this.zh,t.Md=this.Md,t.Cf=this.Cf,t.xh=this.xh,t.W=this.W,t.ga=this.ga,t.Fa=this.Fa,t.F=this.F,t.Mh=this.Mh,t.mh=this.mh,t.Gc=this.Gc,t.pi=this.pi,t.gb=this.gb,t.u=this.u.J(),t.m=this.m.J(),t.Wf=this.Wf,t.ni=this.ni,t.Db=this.Db,t.mi=this.mi,t.nb=this.nb,t.oi=this.oi,t.ie=this.ie,t.Hc=this.Hc,t};function Gr(){this.u=-1/0,this.m=0,this.F=Zi,this.Iq=hn,this.j=this.W="None"}Gr.prototype.copy=function(){var t=new Gr;return t.u=this.u,t.m=this.m,t.F=this.F.J(),t.Iq=this.Iq,t.W=this.W,t.j=this.j,t},Gr.className="LinkElementSettings";function pl(){this.lj=this.Ji=He,this.kj=this.Ii=this.jj=this.Hi=NaN,this.kr=this.Bp=null,this.lr=this.Cp=1/0}pl.prototype.copy=function(){var t=new pl;return t.Ji=this.Ji.J(),t.lj=this.lj.J(),t.Hi=this.Hi,t.jj=this.jj,t.Ii=this.Ii,t.kj=this.kj,t.Bp=this.Bp,t.kr=this.kr,t.Cp=this.Cp,t.lr=this.lr,t},pl.className="LinkSettings";function Ks(){this.Ua=[1,0,0,1,0,0]}Ks.prototype.copy=function(){var t=new Ks;return t.Ua[0]=this.Ua[0],t.Ua[1]=this.Ua[1],t.Ua[2]=this.Ua[2],t.Ua[3]=this.Ua[3],t.Ua[4]=this.Ua[4],t.Ua[5]=this.Ua[5],t},Ks.prototype.translate=function(t,e){this.Ua[4]+=this.Ua[0]*t+this.Ua[2]*e,this.Ua[5]+=this.Ua[1]*t+this.Ua[3]*e},Ks.prototype.scale=function(t,e){this.Ua[0]*=t,this.Ua[1]*=t,this.Ua[2]*=e,this.Ua[3]*=e},Ks.className="STransform";function Ja(t){this.type=t,this.r2=this.y2=this.x2=this.r1=this.y1=this.x1=0,this.Aw=[],this.pattern=null}Ja.prototype.addColorStop=function(t,e){this.Aw.push({offset:t,color:e})},Ja.className="SGradient";function Fo(t,e){this.ownerDocument=t=e===void 0?it.document:e,this.uz="http://www.w3.org/2000/svg",t!==void 0&&(this.Sa=this.Ub("svg",{width:"1px",height:"1px",viewBox:"0 0 1 1"}),this.Sa.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns","http://www.w3.org/2000/svg"),this.Sa.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink")),this.fo=null,this.context=new Hs(this)}Fo.prototype.resize=function(t,e,n,i){return this.width!==t||this.height!==e?(this.style.width=n+"px",this.style.height=i+"px",this.Sa.setAttributeNS(null,"width",n+"px"),this.Sa.setAttributeNS(null,"height",i+"px"),this.Sa.setAttributeNS(null,"viewBox","0 0 "+n+" "+i),this.context.Sv.firstElementChild.setAttributeNS(null,"width",n+"px"),this.context.Sv.firstElementChild.setAttributeNS(null,"height",i+"px"),!0):!1},Fo.prototype.Ub=function(t,e,n){if(t=this.ownerDocument.createElementNS(this.uz,t),Bt(e))for(var i in e)t.setAttributeNS(i==="href"?"http://www.w3.org/1999/xlink":"",i,e[i]);return n!==void 0&&(t.textContent=n),t},Fo.prototype.getBoundingClientRect=function(){return this.Sa.getBoundingClientRect()},Fo.prototype.focus=function(){this.Sa.focus()},Fo.prototype.Fw=function(){this.ownerDocument=null},Z.Object.defineProperties(Fo.prototype,{width:{get:function(){return this.Sa.width.baseVal.value},set:function(t){this.Sa.width=t}},height:{get:function(){return this.Sa.height.baseVal.value},set:function(t){this.Sa.height=t}},style:{get:function(){return this.Sa.style}}}),Fo.className="SVGSurface";function Hs(t){this.gs=t,this.svg=t.Sa,this.stack=[],this.jd=[],this.fillStyle="#000000",this.font="10px sans-serif",this.globalAlpha=1,this.lineCap="butt",this.lineDashOffset=0,this.lineJoin="miter",this.lineWidth=1,this.miterLimit=10,this.shadowBlur=0,this.shadowColor="rgba(0, 0, 0, 0)",this.shadowOffsetY=this.shadowOffsetX=0,this.strokeStyle="#000000",this.textAlign="start",this.clipInsteadOfFill=!1,this.Fg=this.Sq=this.Rq=0,this.Pr=null,this.path=[],this.Ws=!1,this.Ig=null,this.hj=0,this.De=new Ks,tr(this,1,0,0,1,0,0);var e=Lo++,n=this.Ub("clipPath",{id:"mainClip"+e});n.appendChild(this.Ub("rect",{x:0,y:0,width:t.width,height:t.height})),this.Sv=n,this.gs.Sa.appendChild(n),this.jd[0].setAttributeNS(null,"clip-path","url(#mainClip"+e+")"),this.wz={}}a=Hs.prototype,a.arc=function(t,e,n,i,r,s,h,u){var p=2*Math.PI,d=p-1e-6,g=n*Math.cos(i),c=n*Math.sin(i),y=t+g,S=e+c,v=s?0:1;i=s?i-r:r-i,(1e-6<Math.abs(h-y)||1e-6<Math.abs(u-S))&&this.path.push(["L",y,+S]),0>i&&(i=i%p+p),i>d?(this.path.push(["A",n,n,0,1,v,t-g,e-c]),this.path.push(["A",n,n,0,1,v,y,S])):1e-6<i&&this.path.push(["A",n,n,0,+(i>=Math.PI),v,t+n*Math.cos(r),e+n*Math.sin(r)])},a.beginPath=function(){this.path=[]},a.bezierCurveTo=function(t,e,n,i,r,s){this.path.push(["C",t,e,n,i,r,s])},a.clearRect=function(){},a.clip=function(){this.addPath("clipPath",this.path,this.De)},a.closePath=function(){this.path.push(["z"])},a.createLinearGradient=function(t,e,n,i){var r=new Ja("linear");return r.x1=t,r.y1=e,r.x2=n,r.y2=i,r},a.createPattern=function(t){var e="";t instanceof HTMLCanvasElement&&(e=t.toDataURL()),t instanceof HTMLImageElement&&(e=t.getAttribute("src"));var n=this.wz;if(n[e])return"url(#"+n[e]+")";var i="PATTERN"+Lo++,r={x:0,y:0,width:t.width,height:t.height,href:e};return t=this.Ub("pattern",{width:t.width,height:t.height,id:i,patternUnits:"userSpaceOnUse"}),t.appendChild(this.Ub(Xa,r)),this.svg.appendChild(t),n[e]=i,"url(#"+i+")"},a.createRadialGradient=function(t,e,n,i,r,s){var h=new Ja("radial");return h.x1=t,h.y1=e,h.r1=n,h.x2=i,h.y2=r,h.r2=s,h},a.drawImage=function(t,e,n,i,r,s,h,u,p){var d="";t instanceof HTMLCanvasElement&&(d=t.toDataURL()),t instanceof HTMLImageElement&&(d=t.getAttribute("src"));var g=t instanceof HTMLImageElement?t.naturalWidth:t.width,c=t instanceof HTMLImageElement?t.naturalHeight:t.height;i===void 0&&(s=e,h=n,u=i=g,p=r=c),i=i||0,r=r||0,s=s||0,h=h||0,u=u||0,p=p||0,t={x:0,y:0,width:g||i,height:c||r,href:d},O.ca(i,u)&&O.ca(r,p)?d.toLowerCase().indexOf(".svg")===-1&&d.toLowerCase().indexOf("data:image/svg")===-1&&(t.preserveAspectRatio="xMidYMid slice"):t.preserveAspectRatio="none",d="",u/=i,p/=r,(s!==0||h!==0)&&(d+=" translate("+s+", "+h+")"),(u!==1||p!==1)&&(d+=" scale("+u+", "+p+")"),(e!==0||n!==0)&&(d+=" translate("+-e+", "+-n+")"),(e!==0||n!==0||i!==g||r!==c)&&(s="CLIP"+Lo++,h=this.Ub("clipPath",{id:s}),h.appendChild(this.Ub("rect",{x:e,y:n,width:i,height:r})),this.svg.appendChild(h),t["clip-path"]="url(#"+s+")"),dl(this,Xa,t,this.De,d),this.addElement(Xa,t)},a.fill=function(){this.addPath("fill",this.path,this.De)},a.nf=function(){this.clipInsteadOfFill?this.clip():this.fill()},a.fillRect=function(t,e,n,i){t=[t,e,n,i],t={x:t[0],y:t[1],width:t[2],height:t[3]},dl(this,"fill",t,this.De),this.addElement("rect",t)},a.fillText=function(t,e,n){t=[t,e,n],e=this.textAlign,e==="left"?e="start":e==="right"?e="end":e==="center"&&(e="middle"),e={x:t[1],y:t[2],style:"font: "+this.font,"text-anchor":e},dl(this,"fill",e,this.De),this.addElement("text",e,t[0])},a.lineTo=function(t,e){this.path.push(["L",t,e])},a.moveTo=function(t,e){this.path.push(["M",t,e])},a.quadraticCurveTo=function(t,e,n,i){this.path.push(["Q",t,e,n,i])},a.rect=function(t,e,n,i){this.path.push(["M",t,e],["L",t+n,e],["L",t+n,e+i],["L",t,e+i],["z"])},a.restore=function(){this.De=this.stack.pop(),this.path=this.stack.pop();var t=this.stack.pop();this.fillStyle=t.fillStyle,this.font=t.font,this.globalAlpha=t.globalAlpha,this.lineCap=t.lineCap,this.lineDashOffset=t.lineDashOffset,this.lineJoin=t.lineJoin,this.lineWidth=t.lineWidth,this.miterLimit=t.miterLimit,this.shadowBlur=t.shadowBlur,this.shadowColor=t.shadowColor,this.shadowOffsetX=t.shadowOffsetX,this.shadowOffsetY=t.shadowOffsetY,this.strokeStyle=t.strokeStyle,this.textAlign=t.textAlign},a.save=function(){this.stack.push({fillStyle:this.fillStyle,font:this.font,globalAlpha:this.globalAlpha,lineCap:this.lineCap,lineDashOffset:this.lineDashOffset,lineJoin:this.lineJoin,lineWidth:this.lineWidth,miterLimit:this.miterLimit,shadowBlur:this.shadowBlur,shadowColor:this.shadowColor,shadowOffsetX:this.shadowOffsetX,shadowOffsetY:this.shadowOffsetY,strokeStyle:this.strokeStyle,textAlign:this.textAlign});for(var t=[],e=0;e<this.path.length;e++)t.push(this.path[e]);this.stack.push(t),this.stack.push(this.De.copy())},a.setTransform=function(t,e,n,i,r,s){t===1&&e===0&&n===0&&i===1&&r===0&&s===0||tr(this,t,e,n,i,r,s)},a.scale=function(t,e){this.De.scale(t,e)},a.translate=function(t,e){this.De.translate(t,e)},a.transform=function(){},a.Nc=function(){},a.stroke=function(){this.addPath("stroke",this.path,this.De)},a.ki=function(){this.clipInsteadOfFill||this.stroke()},a.Ub=function(t,e,n){return this.gs.Ub(t,e,n)},a.addElement=function(t,e,n){return t=this.Ub(t,e,n),0<this.jd.length?this.jd[this.jd.length-1].appendChild(t):this.svg.appendChild(t),this.Pr=t};function dl(t,e,n,i,r){t.globalAlpha!==1&&(n.opacity=t.globalAlpha),e==="fill"?(t.fillStyle instanceof Ja?n.fill=fm(t,t.fillStyle):/^rgba\(/.test(t.fillStyle)?(t=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(t.fillStyle),n.fill="rgb("+t[1]+","+t[2]+","+t[3]+")",n["fill-opacity"]=t[4]):n.fill=t.fillStyle,n.stroke="none"):e==="stroke"&&(n.fill="none",t.strokeStyle instanceof Ja?n.stroke=fm(t,t.strokeStyle):/^rgba\(/.test(t.strokeStyle)?(e=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(t.strokeStyle),n.stroke="rgb("+e[1]+","+e[2]+","+e[3]+")",n["stroke-opacity"]=e[4]):n.stroke=t.strokeStyle,n["stroke-width"]=t.lineWidth,n["stroke-linecap"]=t.lineCap,n["stroke-linejoin"]=t.lineJoin,n["stroke-miterlimit"]=t.miterLimit),i=i.Ua,i="matrix("+i[0]+", "+i[1]+", "+i[2]+", "+i[3]+", "+i[4]+", "+i[5]+")",r!==void 0&&(i+=r),n.transform=i}function fm(t,e){var n="GRAD"+Lo++;if(e.type==="linear")var i=t.Ub("linearGradient",{x1:e.x1,x2:e.x2,y1:e.y1,y2:e.y2,id:n,gradientUnits:"userSpaceOnUse"});else if(e.type==="radial")i=t.Ub("radialGradient",{x1:e.x1,x2:e.x2,y1:e.y1,y2:e.y2,r1:e.r1,r2:e.r2,id:n});else throw Error("invalid gradient");var r=e.Aw;e=r.length;for(var s=[],h=0;h<e;h++){var u=r[h],p=u.color;u={offset:u.offset,"stop-color":p},/^rgba\(/.test(p)&&(p=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(p),u["stop-color"]="rgb("+p[1]+","+p[2]+","+p[3]+")",u["stop-opacity"]=p[4]),s.push(u)}for(s.sort(function(d,g){return d.offset>g.offset?1:-1}),r=0;r<e;r++)i.appendChild(t.Ub("stop",s[r]));return t.svg.appendChild(i),"url(#"+n+")"}a.addPath=function(t,e,n){for(var i=[],r=0;r<e.length;r++){var s=wo(e[r]),h=[s.shift()];if(h[0]==="A")h.push(s.shift()+","+s.shift(),s.shift(),s.shift()+","+s.shift(),s.shift()+","+s.shift());else for(;s.length;)h.push(s.shift()+","+s.shift());i.push(h.join(" "))}e={d:i.join(" ")},t==="stroke"&&this.Ws&&(e["stroke-dasharray"]=this.Ig.toString(),e["stroke-dashoffset"]=this.hj),dl(this,t,e,n),t==="clipPath"?(t="CLIP"+Lo++,n=this.Ub("clipPath",{id:t}),n.appendChild(this.Ub("path",e)),this.svg.appendChild(n),0<this.jd.length&&this.jd[this.jd.length-1].setAttributeNS(null,"clip-path","url(#"+t+")")):this.addElement("path",e)};function tr(t,e,n,i,r,s,h){var u=new Ks;u.Ua=[e,n,i,r,s,h],e={},dl(t,"g",e,u),u=t.addElement("g",e),t.jd.push(u)}a.Ol=function(t){if(this.shadowOffsetX!==0||this.shadowOffsetY!==0||this.shadowBlur!==0){var e="SHADOW"+Lo++,n=this.addElement("filter",{id:e,x:"-100%",y:"-100%",width:"300%",height:"300%"},null),i=t.computePixelRatio();t=this.Ub("feGaussianBlur",{in:"SourceAlpha",result:"blur",stdDeviation:this.shadowBlur/2/i});var r=this.Ub("feFlood",{in:"blur",result:"flood","flood-color":this.shadowColor}),s=this.Ub("feComposite",{in:"flood",in2:"blur",operator:"in",result:"comp"});i=this.Ub("feOffset",{in:"comp",result:"offsetBlur",dx:this.shadowOffsetX/i,dy:this.shadowOffsetY/i});var h=this.Ub("feMerge",{});h.appendChild(this.Ub("feMergeNode",{in:"offsetBlur"})),h.appendChild(this.Ub("feMergeNode",{in:"SourceGraphic"})),n.appendChild(t),n.appendChild(r),n.appendChild(s),n.appendChild(i),n.appendChild(h),0<this.jd.length&&this.jd[this.jd.length-1].setAttributeNS(null,"filter","url(#"+e+")")}},a.$u=function(t,e,n){this.Rq=t,this.Sq=e,this.Fg=n};function Bo(t){t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0}function er(t){t.shadowOffsetX=t.Rq,t.shadowOffsetY=t.Sq,t.shadowBlur=t.Fg}a.yr=function(t,e){this.Ws=!0,this.Ig=t,this.hj=e},a.wr=function(){this.Ws=!1},a.Mc=function(){},a.sx=function(){},Hs.prototype.rotate=function(){},Hs.prototype.getImageData=function(){return null},Hs.prototype.measureText=function(){return null},Hs.className="SVGContext",I.prototype.Tr=function(t){var e=new Fo(this,it.document);t===void 0&&(t=new In);var n=this;return _0(this,function(i,r){return i=$0(n,i,"SVG",e),i=i!==null?i.svg:null,typeof r=="function"?(r(i),null):i},t)},I.prototype.makeSvg=I.prototype.Tr,I.prototype.Bu=function(t){return this.Tr(t)},I.prototype.makeSVG=I.prototype.Bu,nt.prototype.Gw=function(t,e){if(!(t instanceof Hs))return!1;var n=null,i=t.Pr,r=this.transform,s=this.panel;(this.o&4096)!==0&&Eu(this);var h=this.Eb,u=(this.o&256)!==0;t.clipInsteadOfFill&&(u=!1);var p=!1;if(this instanceof Gt&&(t.font=this.font),u){if(p=s.he()?s.naturalBounds:s.actualBounds,this.hb!==null){var d=this.hb,g=d.x,c=d.y,y=d.width;d=d.height}else g=Math.max(h.x,p.x),c=Math.max(h.y,p.y),y=Math.min(h.right,p.right)-g,d=Math.min(h.bottom,p.bottom)-c;if(g>h.width+h.x||h.x>p.width+p.x||c>h.height+h.y||h.y>p.height+p.y)return!0;p=!0,tr(t,1,0,0,1,0,0),t.save(),t.beginPath(),t.rect(g,c,y,d),t.clip()}return this.ei()&&!this.isVisible()||(t.De.Ua=[1,0,0,1,0,0],(this instanceof Gt&&1<this.lineCount||this instanceof dt&&1<this.geometry.figures.length)&&tr(t,1,0,0,1,0,0),g=!1,this.ei()&&this.isShadowed&&e.Ee("drawShadows")&&(c=this.shadowOffset,t.$u(c.x*e.scale*this.scale*e.jc,c.y*e.scale*this.scale*e.jc,this.shadowBlur),er(t),t.shadowColor=this.shadowColor),c=!1,this.part&&e.Ee("drawShadows")&&(c=this.part.isShadowed),t.clipInsteadOfFill&&(c=!1),this.shadowVisible===!0?(er(t),g===!1&&c&&(tr(t,1,0,0,1,0,0),t.Ol(e),g=!0)):this.shadowVisible===!1&&Bo(t),y=this.naturalBounds,this.areaBackground!==null&&(En(this,t,this.areaBackground,!0,!0,y,h),g===!1&&c&&(tr(t,1,0,0,1,0,0),t.Ol(e),g=!0),this.areaBackground instanceof kt&&this.areaBackground.type===Vn?(t.beginPath(),t.rect(h.x,h.y,h.width,h.height),t.nf(this.areaBackground)):t.fillRect(h.x,h.y,h.width,h.height)),d=!1,this instanceof Y?tr(t,r.m11,r.m12,r.m21,r.m22,r.dx,r.dy):(t.De.Ua=[r.m11,r.m12,r.m21,r.m22,r.dx,r.dy],g===!1&&c&&(d=!0)),this.background!==null&&(g===!1&&c&&(tr(t,1,0,0,1,0,0),t.Ol(e),g=!0),pm(this,t,y,h)),c&&(this.background!==null||this.areaBackground!==null||s!==null&&(s.o&512)!==0||s!==null&&(s.type===Y.Auto||s.type===Y.Spot)&&s.vb()!==this)?(Ru(this,!0),this.shadowVisible===null&&Bo(t),d=!1):Ru(this,!1),d&&g===!1&&(tr(t,1,0,0,1,0,0),t.Ol(e),g=!0),this.Uh(t,e),c&&(this.o&512)!==0&&er(t),this.ei()&&c&&Bo(t),u&&(t.restore(),p&&t.jd.pop()),this instanceof Y&&(n=t.jd.pop()),g===!0&&t.jd.pop(),(this instanceof Gt&&1<this.lineCount||this instanceof dt&&1<this.geometry.figures.length)&&(n=t.jd.pop()),t.gs.fo!==null&&(n===null&&(i===t.Pr?(tr(t,1,0,0,1,0,0),n=t.jd.pop()):n=t.Pr),t.gs.fo(this,n)),this.svg=n),!0};function li(t,e,n){this.ownerDocument=e=e===void 0?it.document:e,this.fo=null,e=e.createElement("canvas"),e.tabIndex=0,this.Sa=e,this.Sa.innerHTML="This text is displayed if your browser does not support the Canvas HTML element.",this.context=new gs(e,n),e.H=t}li.prototype.resize=function(t,e,n,i){return this.width!==t||this.height!==e?(this.width=t,this.height=e,this.style.width=n+"px",this.style.height=i+"px",!0):!1},li.prototype.toDataURL=function(t,e){return this.Sa.toDataURL(t,e)},li.prototype.getBoundingClientRect=function(){return this.Sa.getBoundingClientRect()},li.prototype.focus=function(){this.Sa.focus()},li.prototype.Fw=function(){this.ownerDocument=this.Sa.H=null},Z.Object.defineProperties(li.prototype,{width:{get:function(){return this.Sa.width},set:function(t){this.Sa.width=t}},height:{get:function(){return this.Sa.height},set:function(t){this.Sa.height=t}},style:{get:function(){return this.Sa.style}}}),li.className="CanvasSurface";function gs(t,e){this.Z=t.getContext?t.getContext("2d",e):null,this.Z===null&&X("Browser does not support HTML Canvas Element"),this.vs=this.xs=this.ws="",this.fm=!1,this.Fg=this.Sq=this.Rq=0,this.hl=new ct}a=gs.prototype,a.sx=function(t){this.Z.imageSmoothingEnabled=t},a.arc=function(t,e,n,i,r,s){this.Z.arc(t,e,n,i,r,s)},a.beginPath=function(){this.Z.beginPath()},a.bezierCurveTo=function(t,e,n,i,r,s){this.Z.bezierCurveTo(t,e,n,i,r,s)},a.clearRect=function(t,e,n,i){this.Nc(),this.Z.clearRect(t,e,n,i)},a.clip=function(){this.Z.clip()},a.closePath=function(){this.Z.closePath()},a.createLinearGradient=function(t,e,n,i){return this.Z.createLinearGradient(t,e,n,i)},a.createPattern=function(t,e){return this.Z.createPattern(t,e)},a.createRadialGradient=function(t,e,n,i,r,s){return this.Z.createRadialGradient(t,e,n,i,r,s)},a.drawImage=function(t,e,n,i,r,s,h,u,p){i===void 0?this.Z.drawImage(t,e,n):this.Z.drawImage(t,e,n,i,r,s,h,u,p)},a.fill=function(){this.Z.fill()},a.fillRect=function(t,e,n,i){this.Z.fillRect(t,e,n,i)},a.fillText=function(t,e,n){this.Z.fillText(t,e,n)},a.getImageData=function(t,e,n,i){return this.Z.getImageData(t,e,n,i)},a.lineTo=function(t,e){this.Z.lineTo(t,e)},a.measureText=function(t){return this.Z.measureText(t)},a.moveTo=function(t,e){this.Z.moveTo(t,e)},a.quadraticCurveTo=function(t,e,n,i){this.Z.quadraticCurveTo(t,e,n,i)},a.rect=function(t,e,n,i){this.Z.rect(t,e,n,i)},a.restore=function(){this.Z.restore()},a.save=function(){this.Nc(),this.Z.save()},gs.prototype.rotate=function(t){this.hl.rotate(57.2958*t,0,0)},a=gs.prototype,a.setTransform=function(t,e,n,i,r,s){this.hl.setTransform(t,e,n,i,r,s)},a.scale=function(t,e){this.hl.scale(t,e)},a.translate=function(t,e){this.hl.translate(t,e)},a.stroke=function(){this.Z.stroke()},a.transform=function(t,e,n,i,r,s){if(t!==1||e!==0||n!==0||i!==1||r!==0||s!==0){var h=this.hl,u=h.m11*t+h.m21*e;t=h.m12*t+h.m22*e,e=h.m11*n+h.m21*i,n=h.m12*n+h.m22*i,h.dx=h.m11*r+h.m21*s+h.dx,h.dy=h.m12*r+h.m22*s+h.dy,h.m11=u,h.m12=t,h.m21=e,h.m22=n}},a.Nc=function(){var t=this.hl;this.Z.setTransform(t.m11,t.m12,t.m21,t.m22,t.dx,t.dy)},a.nf=function(t){if(t instanceof kt&&t.type===Vn){var e=t.ck;t=t.ys,t>e?(this.scale(e/t,1),this.translate((t-e)/2,0)):e>t&&(this.scale(1,t/e),this.translate(0,(e-t)/2)),this.fm?this.clip():this.fill(),t>e?(this.translate(-(t-e)/2,0),this.scale(1/(e/t),1)):e>t&&(this.translate(0,-(e-t)/2),this.scale(1,1/(t/e)))}else this.fm?this.clip():this.fill()},a.ki=function(){this.fm||this.stroke()},a.$u=function(t,e,n){this.Rq=t,this.Sq=e,this.Fg=n},a.yr=function(t,e){var n=this.Z;n.setLineDash!==void 0&&(n.setLineDash(t),n.lineDashOffset=e)},a.wr=function(){var t=this.Z;t.setLineDash!==void 0&&(t.setLineDash(hv),t.lineDashOffset=0)},a.Mc=function(t){t&&(this.ws=""),this.vs=this.xs=""},Z.Object.defineProperties(gs.prototype,{fillStyle:{get:function(){return this.Z.fillStyle},set:function(t){this.vs!==t&&(this.vs=this.Z.fillStyle=t)}},font:{get:function(){return this.Z.font},set:function(t){this.ws!==t&&(this.ws=this.Z.font=t)}},globalAlpha:{get:function(){return this.Z.globalAlpha},set:function(t){this.Z.globalAlpha=t}},lineCap:{get:function(){return this.Z.lineCap},set:function(t){this.Z.lineCap=t}},lineDashOffset:{get:function(){return this.Z.lineDashOffset},set:function(t){this.Z.lineDashOffset=t}},lineJoin:{get:function(){return this.Z.lineJoin},set:function(t){this.Z.lineJoin=t}},lineWidth:{get:function(){return this.Z.lineWidth},set:function(t){this.Z.lineWidth=t}},miterLimit:{get:function(){return this.Z.miterLimit},set:function(t){this.Z.miterLimit=t}},shadowBlur:{get:function(){return this.Z.shadowBlur},set:function(t){this.Z.shadowBlur=t}},shadowColor:{get:function(){return this.Z.shadowColor},set:function(t){this.Z.shadowColor=t}},shadowOffsetX:{get:function(){return this.Z.shadowOffsetX},set:function(t){this.Z.shadowOffsetX=t}},shadowOffsetY:{get:function(){return this.Z.shadowOffsetY},set:function(t){this.Z.shadowOffsetY=t}},strokeStyle:{get:function(){return this.Z.strokeStyle},set:function(t){this.xs!==t&&(this.xs=this.Z.strokeStyle=t)}},textAlign:{get:function(){return this.Z.textAlign},set:function(t){this.Z.textAlign=t}},imageSmoothingEnabled:{get:function(){return this.Z.imageSmoothingEnabled},set:function(t){this.Z.imageSmoothingEnabled=t}},clipInsteadOfFill:{get:function(){return this.fm},set:function(t){this.fm=t}}});var hv=Object.freeze([]);gs.className="CanvasSurfaceContext";function fl(){this.F=this.m=this.u=this.j=0}fl.className="ColorNumbers";function kt(t,e){Qa||(Wf(),Qa=!0),ce(this),this._isFrozen=!1,t===void 0?(this.qa=nr,this.bk="black"):typeof t=="string"?(this.qa=nr,this.bk=t):(this.qa=t,this.bk="black"),t=this.qa,t===Do?(this.Dd=Mo,this.qk=Gs):this.qk=t===Vn?this.Dd=Dt:this.Dd=Ke,this.Xq=0,this.qp=NaN,this.le=this.vq=this.ke=null,this.ys=this.ck=0,e&&Object.assign(this,e)}kt.prototype.copy=function(){var t=new kt;return t.qa=this.qa,t.bk=this.bk,t.Dd=this.Dd.J(),t.qk=this.qk.J(),t.Xq=this.Xq,t.qp=this.qp,this.ke!==null&&(t.ke=this.ke.copy()),t.vq=this.vq,t},a=kt.prototype,a.freeze=function(){return this._isFrozen=!0,this.ke!==null&&this.ke.freeze(),this},a.ja=function(){return Object.isFrozen(this)&&X("cannot thaw constant: "+this),this._isFrozen=!1,this.ke!==null&&this.ke.ja(),this},a.ob=function(t){t.classType===kt&&(this.type=t)},a.toString=function(){var t="Brush(";if(this.type===nr)t+=this.color;else if(t=this.type===Do?t+"Linear ":this.type===Vn?t+"Radial ":this.type===ba?t+"Pattern ":t+"(unknown) ",t+=this.start+" "+this.end,this.colorStops!==null)for(var e=this.colorStops.iterator;e.next();)t+=" "+e.key+":"+e.value;return t+")"},a.addColorStop=function(t,e){return this._isFrozen&&yt(this),(typeof t!="number"||!isFinite(t)||1<t||0>t)&&Rt(t,"0 <= loc <= 1",kt,"addColorStop:loc"),this.ke===null&&(this.ke=new pt),this.ke.add(t,e),this.qa===nr&&(this.type=Do),this.le=null,this},a.mz=function(t,e){if(this._isFrozen&&yt(this),t=t===void 0||typeof t!="number"?.2:t,e=e===void 0?qa:e,this.type===nr)jo(this.color),this.color=_a(t,e);else if((this.type===Do||this.type===Vn)&&this.colorStops!==null)for(var n=this.colorStops.iterator;n.next();)jo(n.value),this.addColorStop(n.key,_a(t,e));return this};function gm(t,e,n){return e=e===void 0||typeof e!="number"?.2:e,n=n===void 0?qa:n,jo(t),_a(e,n)}a.py=function(t,e){if(this._isFrozen&&yt(this),t=t===void 0||typeof t!="number"?.2:t,e=e===void 0?qa:e,this.type===nr)jo(this.color),this.color=_a(-t,e);else if((this.type===Do||this.type===Vn)&&this.colorStops!==null)for(var n=this.colorStops.iterator;n.next();)jo(n.value),this.addColorStop(n.key,_a(-t,e));return this};function cm(t,e,n){return e=e===void 0||typeof e!="number"?.2:e,n=n===void 0?qa:n,jo(t),_a(-e,n)}function Yf(t,e,n){jo(t),t=Et.j;var i=Et.u,r=Et.m,s=Et.F;return jo(e),n===void 0&&(n=.5),"rgba("+Math.round((Et.j-t)*n+t)+", "+Math.round((Et.u-i)*n+i)+", "+Math.round((Et.m-r)*n+r)+", "+Math.round((Et.F-s)*n+s)+")"}a.Xw=function(){if(this.type===nr)return Za(this.color);if((this.type===Do||this.type===Vn)&&this.colorStops!==null){var t=this.colorStops;if(this.type===Vn)return Za(t.first().value);if(t.get(.5)!==null)return Za(t.get(.5));if(t.count===2)return t=t.Da(),Za(Yf(t[0].value,t[1].value));for(var e=t.iterator,n=-1,i=-1,r=1,s=1;e.next();){var h=e.key,u=Math.abs(.5-e.key);r>s&&u<r?(n=h,r=u):s>=r&&u<s&&(i=h,s=u)}return n>i&&(s=n,n=i,i=s,s=r),r=i-n,Za(Yf(t.get(n),t.get(i),1-s/r))}return!1};function Za(t){return t?t instanceof kt?t.Xw():(jo(t),128>(299*Et.j+587*Et.u+114*Et.m)/1e3):!1}function _a(t,e){switch(e){case qa:e=100*Uf(Et.j);var n=100*Uf(Et.u),i=100*Uf(Et.m);return sn.j=.4124564*e+.3575761*n+.1804375*i,sn.u=.2126729*e+.7151522*n+.072175*i,sn.m=.0193339*e+.119192*n+.9503041*i,sn.F=Et.F,e=Hf(sn.j/$a[0]),n=Hf(sn.u/$a[1]),i=Hf(sn.m/$a[2]),lo.j=116*n-16,lo.u=500*(e-n),lo.m=200*(n-i),lo.F=sn.F,lo.j=Math.min(100,Math.max(0,lo.j+100*t)),t=(lo.j+16)/116,e=t-lo.m/200,sn.j=$a[0]*mm(lo.u/500+t),sn.u=$a[1]*(lo.j>Yu*Jf?Math.pow(t,3):lo.j/Yu),sn.m=$a[2]*mm(e),sn.F=lo.F,t=-.969266*sn.j+1.8760108*sn.u+.041556*sn.m,e=.0556434*sn.j+-.2040259*sn.u+1.0572252*sn.m,Et.j=255*Kf((3.2404542*sn.j+-1.5371385*sn.u+-.4985314*sn.m)/100),Et.u=255*Kf(t/100),Et.m=255*Kf(e/100),Et.F=sn.F,Et.j=Math.round(Et.j),255<Et.j?Et.j=255:0>Et.j&&(Et.j=0),Et.u=Math.round(Et.u),255<Et.u?Et.u=255:0>Et.u&&(Et.u=0),Et.m=Math.round(Et.m),255<Et.m?Et.m=255:0>Et.m&&(Et.m=0),"rgba("+Et.j+", "+Et.u+", "+Et.m+", "+Et.F+")";case xm:return Xf(),Rn.m=Math.min(100,Math.max(0,Rn.m+100*t)),"hsla("+Rn.j+", "+Rn.u+"%, "+Rn.m+"%, "+Rn.F+")";default:X("Unknown color space: "+e)}}function jo(t){Qa||(Wf(),Qa=!0);var e=Zf;if(e!==null){e.clearRect(0,0,1,1),e.fillStyle="#000000";var n=e.fillStyle;e.fillStyle=t,e.fillStyle!==n?(e.fillRect(0,0,1,1),t=e.getImageData(0,0,1,1).data,Et.j=t[0],Et.u=t[1],Et.m=t[2],Et.F=t[3]/255):(e.fillStyle="#FFFFFF",e.fillStyle=t,Et.j=0,Et.u=0,Et.m=0,Et.F=1)}}function Xf(){var t=Et.j/255,e=Et.u/255,n=Et.m/255,i=Math.max(t,e,n),r=Math.min(t,e,n),s=i-r;if(r=(i+r)/2,s===0)var h=t=0;else{switch(i){case t:h=(e-n)/s%6;break;case e:h=(n-t)/s+2;break;case n:h=(t-e)/s+4}h*=60,0>h&&(h+=360),t=s/(1-Math.abs(2*r-1))}Rn.j=Math.round(h),Rn.u=Math.round(100*t),Rn.m=Math.round(100*r),Rn.F=Et.F}function Uf(t){return t/=255,.04045>=t?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Kf(t){return .0031308>=t?12.92*t:1.055*Math.pow(t,1/2.4)-.055}function Hf(t){return t>Jf?Math.pow(t,1/3):(Yu*t+16)/116}function mm(t){var e=t*t*t;return e>Jf?e:(116*t-16)/Yu}function Ws(t,e){typeof t!="string"&&(t instanceof kt||X("Value for "+e+" must be a color string or a Brush, not "+t))}function Wf(){Zf=yi?new li(null,void 0,{willReadFrequently:!0}).context:null}Z.Object.defineProperties(kt.prototype,{type:{get:function(){return this.qa},set:function(t){this._isFrozen&&yt(this,t),this.qa=t,this.start.Ec()&&(t===Do?this.start=Mo:t===Vn&&(this.start=Dt)),this.end.Ec()&&(t===Do?this.end=Gs:t===Vn&&(this.end=Dt)),this.le=null}},color:{get:function(){return this.bk},set:function(t){this._isFrozen&&yt(this,t),this.bk=t,this.le=null}},start:{get:function(){return this.Dd},set:function(t){this._isFrozen&&yt(this,t),this.Dd=t.J(),this.le=null}},end:{get:function(){return this.qk},set:function(t){this._isFrozen&&yt(this,t),this.qk=t.J(),this.le=null}},startRadius:{get:function(){return this.Xq},set:function(t){this._isFrozen&&yt(this,t),0>t&&Rt(t,">= zero",kt,"startRadius"),this.Xq=t,this.le=null}},endRadius:{get:function(){return this.qp},set:function(t){this._isFrozen&&yt(this,t),0>t&&Rt(t,">= zero",kt,"endRadius"),this.qp=t,this.le=null}},colorStops:{get:function(){return this.ke},set:function(t){this._isFrozen&&yt(this,t),this.ke=t,this.le=null}},pattern:{get:function(){return this.vq},set:function(t){this._isFrozen&&yt(this,t),this.vq=t,this.le=null}}}),kt.prototype.isDark=kt.prototype.Xw,kt.prototype.darkenBy=kt.prototype.py,kt.prototype.lightenBy=kt.prototype.mz,kt.prototype.addColorStop=kt.prototype.addColorStop;var Jf=216/24389,Yu=24389/27,$a=[95.047,100,108.883],Zf=null,Et=new fl,Rn=new fl,sn=new fl,lo=new fl,Qa=!1;kt.className="Brush";var nr;kt.Solid=nr=new J(kt,"Solid",0);var Do;kt.Linear=Do=new J(kt,"Linear",1);var Vn;kt.Radial=Vn=new J(kt,"Radial",2);var ba;kt.Pattern=ba=new J(kt,"Pattern",4);var qa;kt.Lab=qa=new J(kt,"Lab",5);var xm;kt.HSL=xm=new J(kt,"HSL",6),kt.randomColor=function(t,e){t===void 0&&(t=128),e===void 0&&(e=Math.max(t,255));var n=Math.abs(e-t);e=Math.floor(t+Math.random()*n).toString(16);var i=Math.floor(t+Math.random()*n).toString(16);return t=Math.floor(t+Math.random()*n).toString(16),2>e.length&&(e="0"+e),2>i.length&&(i="0"+i),2>t.length&&(t="0"+t),"#"+e+i+t},kt.isValidColor=function(t){if(t==="black")return!0;if(t==="")return!1;Qa||(Wf(),Qa=!0);var e=Zf;if(e===null)return!0;e.fillStyle="#000000";var n=e.fillStyle;return e.fillStyle=t,e.fillStyle!==n?!0:(e.fillStyle="#FFFFFF",n=e.fillStyle,e.fillStyle=t,e.fillStyle!==n)},kt.lighten=function(t){return gm(t)},kt.lightenBy=gm,kt.darken=function(t){return cm(t)},kt.darkenBy=cm,kt.mix=Yf,kt.isDark=Za;function fe(){this.va="Base"}fe.prototype.measure=function(){},fe.prototype.pz=function(t,e,n,i,r){t.measure(e,n,i,r)},fe.prototype.arrange=function(){},fe.prototype.ey=function(t,e,n,i,r,s){t.arrange(e,n,i,r,s)},fe.prototype.Az=function(t){t.Ej()},fe.prototype.tc=function(){},Z.Object.defineProperties(fe.prototype,{name:{get:function(){return this.va},set:function(t){this.va=t}},classType:{get:function(){return Y}}}),fe.prototype.remeasureObject=fe.prototype.Az,fe.prototype.arrangeElement=fe.prototype.ey,fe.prototype.measureElement=fe.prototype.pz,fe.className="PanelLayout";function Xu(){this.va="Base"}z(Xu,fe),Xu.prototype.measure=function(t,e,n,i,r,s,h){var u=i.length;t=Go(t);for(var p=0;p<u;p++){var d=i[p];if(d.visible||d===t){var g=d.margin,c=g.right+g.left;g=g.top+g.bottom,d.measure(e,n,s,h);var y=d.measuredBounds;c=Math.max(y.width+c,0),g=Math.max(y.height+g,0),y=d.position.x;var S=d.position.y;isFinite(y)||(y=0),isFinite(S)||(S=0),d instanceof dt&&d.isGeometryPositioned&&(d=d.strokeWidth/2,y-=d,S-=d),De(r,y,S,c,g)}}},Xu.prototype.arrange=function(t,e,n){var i=e.length,r=t.padding;for(t=n.x-r.left,n=n.y-r.top,r=0;r<i;r++){var s=e[r],h=s.measuredBounds,u=s.margin,p=s.position.x,d=s.position.y;if(p=isNaN(p)?-t:p-t,d=isNaN(d)?-n:d-n,s instanceof dt&&s.isGeometryPositioned){var g=s.strokeWidth/2;p-=g,d-=g}s.visible&&s.arrange(p+u.left,d+u.top,h.width,h.height)}};function Uu(){this.va="Base"}z(Uu,fe),Uu.prototype.measure=function(t,e,n,i,r,s,h){var u=i.length;e=Yt(),s=Go(t);for(var p=0;p<u;p++){var d=i[p];if(d.visible||d===s){var g=zi(d,!1);if(g!==te&&g!==Re)e.push(d);else{d.measure(1/0,n,0,h),g=d.margin,d=d.measuredBounds;var c=Math.max(d.height+g.top+g.bottom,0);r.width+=Math.max(d.width+g.right+g.left,0),r.height=Math.max(r.height,c)}}}for(i=e.length,t.desiredSize.height?n=Math.min(t.desiredSize.height,t.maxSize.height):r.height!==0&&(n=Math.min(r.height,t.maxSize.height)),t=0;t<i;t++)p=e[t],(p.visible||p===s)&&(g=p.margin,u=g.right+g.left,g=g.top+g.bottom,p.measure(1/0,n,0,h),p=p.measuredBounds,g=Math.max(p.height+g,0),r.width+=Math.max(p.width+u,0),r.height=Math.max(r.height,g));At(e)},Uu.prototype.arrange=function(t,e,n){for(var i=e.length,r=t.padding,s=r.top,h=t.isOpposite,u=h?n.width:r.left,p=0;p<i;p++){var d=s,g=e[p];if(g.visible){var c=g.measuredBounds,y=g.margin,S=y.top+y.bottom,v=s+r.bottom,L=c.height,N=zi(g,!1);(isNaN(g.desiredSize.height)&&N===ne||N===Je)&&(L=Math.max(n.height-S-v,0)),S=L+S+v,v=g.alignment,v.Rb()&&(v=t.defaultAlignment),v.pb()||(v=Dt),h&&(u-=c.width+y.left+y.right),g.arrange(u+v.offsetX+y.left,d+v.offsetY+y.top+(n.height*v.y-S*v.y),c.width,L),h||(u+=c.width+y.left+y.right)}}};function Ku(){this.va="Base"}z(Ku,fe),Ku.prototype.measure=function(t,e,n,i,r,s){var h=i.length;n=Yt();for(var u=Go(t),p=0;p<h;p++){var d=i[p];if(d.visible||d===u){var g=zi(d,!1);if(g!==te&&g!==Je)n.push(d);else{var c=d.margin;g=c.right+c.left,c=c.top+c.bottom,d.measure(e,1/0,s,0),d=d.measuredBounds,$(r,Math.max(r.width,Math.max(d.width+g,0)),r.height+Math.max(d.height+c,0))}}}if(i=n.length,i!==0){for(t.desiredSize.width?e=Math.min(t.desiredSize.width,t.maxSize.width):r.width!==0&&(e=Math.min(r.width,t.maxSize.width)),t=0;t<i;t++)p=n[t],(p.visible||p===u)&&(d=p.margin,h=d.right+d.left,d=d.top+d.bottom,p.measure(e,1/0,s,0),p=p.measuredBounds,d=Math.max(p.height+d,0),r.width=Math.max(r.width,Math.max(p.width+h,0)),r.height+=d);At(n)}},Ku.prototype.arrange=function(t,e,n){for(var i=e.length,r=t.padding,s=r.left,h=t.isOpposite,u=h?n.height:r.top,p=0;p<i;p++){var d=s,g=e[p];if(g.visible){var c=g.measuredBounds,y=g.margin,S=y.left+y.right,v=s+r.right,L=c.width,N=zi(g,!1);(isNaN(g.desiredSize.width)&&N===ne||N===Re)&&(L=Math.max(n.width-S-v,0)),S=L+S+v,v=g.alignment,v.Rb()&&(v=t.defaultAlignment),v.pb()||(v=Dt),h&&(u-=c.height+y.bottom+y.top),g.arrange(d+v.offsetX+y.left+(n.width*v.x-S*v.x),u+v.offsetY+y.top,L,c.height),h||(u+=c.height+y.bottom+y.top)}}};function Hu(){this.va="Base"}z(Hu,fe),Hu.prototype.measure=function(t,e,n,i,r,s,h){var u=i.length,p=t.vb(),d=p.margin,g=d.right+d.left,c=d.top+d.bottom;p.measure(e,n,s,h);var y=p.measuredBounds;s=y.width,h=y.height;var S=Math.max(s+g,0),v=Math.max(h+c,0),L=t.isClipping,N=E.allocAt(-d.left,-d.top,S,v),M=E.allocAt(0,0,s,h);_f(p,M,!0),s=M.width,h=M.height;for(var B=!0,F=Go(t),j=0;j<u;j++){var D=i[j],R=e,W=n;if(D!==p&&(D.visible||D===F)){switch(d=D.margin,S=d.right+d.left,v=d.top+d.bottom,y=zi(D,!1),y){case ne:R=s,W=h;break;case Re:R=s;break;case Je:W=h}D.measure(R,W,0,0),y=D.measuredBounds,S=Math.max(y.width+S,0),v=Math.max(y.height+v,0),R=D.alignment,R.Rb()&&(R=t.defaultAlignment),R.pb()||(R=Dt);var tt=D.alignmentFocus;tt.Rb()&&(tt=Dt),W=null,D instanceof Y&&D.Me!==""&&(W=D.eb(D.Me),W===D&&(W=null));var q=M.x,b=M.y;if(W!==null){for(D.arrange(0,0,y.width,y.height),d=W.actualBounds,d=T.allocAt(d.x+(tt.x*d.width-tt.offsetX),d.y+(tt.y*d.height-tt.offsetY)),W=W.panel;W!==D;)W.transform.Ea(d),W=W.panel;q+=R.x*s+R.offsetX-d.x,b+=R.y*h+R.offsetY-d.y,T.free(d)}else q+=R.x*s+R.offsetX-(tt.x*y.width+tt.offsetX)-d.left,b+=R.y*h+R.offsetY-(tt.y*y.height+tt.offsetY)-d.top;B?(B=!1,r.h(q,b,S,v)):De(r,q,b,S,v)}}switch(B?r.assign(N):L?r.uu(M.x,M.y,M.width,M.height):De(r,N.x,N.y,N.width,N.height),E.free(N),E.free(M),y=p.stretch,y===vi&&(y=zi(p,!1)),y){case te:return;case ne:if(!isFinite(e)&&!isFinite(n))return;break;case Re:if(!isFinite(e))return;break;case Je:if(!isFinite(n))return}for(y=p.measuredBounds,s=y.width,h=y.height,S=Math.max(s+g,0),v=Math.max(h+c,0),d=p.margin,M=E.allocAt(-d.left,-d.top,S,v),_f(p,M,!0),s=M.width,h=M.height,e=0;e<u;e++)n=i[e],n===p||!n.visible&&n!==F||(d=n.margin,S=d.right+d.left,v=d.top+d.bottom,y=n.measuredBounds,S=Math.max(y.width+S,0),v=Math.max(y.height+v,0),g=n.alignment,g.Rb()&&(g=t.defaultAlignment),g.pb()||(g=Dt),n=n.alignmentFocus,n.Rb()&&(n=Dt),B?(B=!1,r.h(g.x*s+g.offsetX-(n.x*y.width+n.offsetX)-d.left,g.y*h+g.offsetY-(n.y*y.height+n.offsetY)-d.top,S,v)):De(r,g.x*s+g.offsetX-(n.x*y.width+n.offsetX)-d.left,g.y*h+g.offsetY-(n.y*y.height+n.offsetY)-d.top,S,v));B?r.assign(N):L?r.uu(M.x,M.y,M.width,M.height):De(r,N.x,N.y,N.width,N.height),E.free(M)},Hu.prototype.arrange=function(t,e,n){var i=e.length,r=t.vb(),s=r.measuredBounds,h=s.width,u=s.height,p=t.padding;s=p.left,p=p.top;var d=s-n.x,g=p-n.y;for(r.arrange(d,g,h,u),h=E.allocAt(0,0,h,u),_f(r,h,!1),u=0;u<i;u++){var c=e[u];if(c!==r){d=c.measuredBounds;var y=d.width,S=d.height;g=c.alignment,g.Rb()&&(g=t.defaultAlignment),g.pb()||(g=Dt);var v=c.alignmentFocus;if(v.Rb()&&(v=Dt),d=null,c instanceof Y&&c.Me!==""&&(d=c.eb(c.Me),d===c&&(d=null)),d!==null){var L=d.actualBounds;for(v=T.allocAt(L.x+(v.x*L.width-v.offsetX),L.y+(v.y*L.height-v.offsetY)),d=d.panel;d!==c;)d.transform.Ea(v),d=d.panel;d=g.x*h.width+g.offsetX-v.x,g=g.y*h.height+g.offsetY-v.y,T.free(v)}else d=g.x*h.width+g.offsetX-(v.x*y+v.offsetX),g=g.y*h.height+g.offsetY-(v.y*S+v.offsetY);d+=h.x-n.x,g+=h.y-n.y,c.visible&&c.arrange(s+d,p+g,y,S)}}E.free(h)};function _f(t,e,n){var i=null;if(t instanceof Y&&t.Me!==""&&(i=t.eb(t.Me),i===t&&(i=null)),i!==null)for(n&&t.arrange(0,0,e.width,e.height),e.assign(i.actualBounds),i=i.panel;i!==t;)i.transform.Jo(e),i=i.panel}function Wu(){this.va="Base"}z(Wu,fe),Wu.prototype.measure=function(t,e,n,i,r,s,h){var u=i.length,p=t.vb(),d=p.margin,g=e,c=n,y=d.right+d.left,S=d.top+d.bottom;p.measure(e,n,s,h),d=p.measuredBounds;var v=0,L=null;p instanceof dt&&(L=p,v=L.strokeWidth*L.scale);var N=Math.max(d.width+y,0);d=Math.max(d.height+S,0);var M=bf(p),B=M.x*N+M.offsetX;M=M.y*d+M.offsetY;var F=qf(p),j=F.x*N+F.offsetX;for(F=F.y*d+F.offsetY,isFinite(e)&&(g=Math.max(Math.abs(B-j)-v,0)),isFinite(n)&&(c=Math.max(Math.abs(M-F)-v,0)),v=ht.alloc(),v.h(0,0),t=Go(t),F=0;F<u;F++)M=i[F],M===p||!M.visible&&M!==t||(d=M.margin,N=d.right+d.left,B=d.top+d.bottom,M.measure(g,c,0,0),d=M.measuredBounds,N=Math.max(d.width+N,0),d=Math.max(d.height+B,0),v.h(Math.max(N,v.width),Math.max(d,v.height)));if(u===1)r.width=N,r.height=d,ht.free(v);else{switch(M=bf(p),F=qf(p),u=i=0,F.x!==M.x&&F.y!==M.y&&(i=v.width/Math.abs(F.x-M.x),u=v.height/Math.abs(F.y-M.y)),ht.free(v),v=0,L!==null&&(v=L.strokeWidth*L.scale,rg(L)===$i&&(i=u=Math.max(i,u))),i+=Math.abs(M.offsetX)+Math.abs(F.offsetX)+v,u+=Math.abs(M.offsetY)+Math.abs(F.offsetY)+v,L=p.stretch,L===vi&&(L=zi(p,!1)),L){case te:h=s=0;break;case ne:isFinite(e)&&(i=e),isFinite(n)&&(u=n);break;case Re:isFinite(e)&&(i=e),h=0;break;case Je:s=0,isFinite(n)&&(u=n)}p.Ej(),p.measure(i,u,s,h),r.width=p.measuredBounds.width+y,r.height=p.measuredBounds.height+S}},Wu.prototype.arrange=function(t,e){var n=e.length,i=t.vb(),r=i.measuredBounds,s=E.alloc();s.h(0,0,1,1);var h=i.margin,u=h.left;h=h.top;var p=t.padding,d=p.left;p=p.top,i.arrange(d+u,p+h,r.width,r.height);var g=bf(i),c=qf(i),y=g.y*r.height+g.offsetY,S=c.x*r.width+c.offsetX;for(c=c.y*r.height+c.offsetY,s.x=g.x*r.width+g.offsetX,s.y=y,De(s,S,c,0,0),s.x+=u+d,s.y+=h+p,r=0;r<n;r++)u=e[r],u!==i&&(d=u.measuredBounds,h=u.margin,p=Math.max(d.width+h.right+h.left,0),g=Math.max(d.height+h.top+h.bottom,0),y=u.alignment,y.Rb()&&(y=t.defaultAlignment),y.pb()||(y=Dt),p=s.width*y.x+y.offsetX-p*y.x+h.left+s.x,h=s.height*y.y+y.offsetY-g*y.y+h.top+s.y,u.visible&&(Di(s.x,s.y,s.width,s.height,p,h,d.width,d.height)?u.arrange(p,h,d.width,d.height):u.arrange(p,h,d.width,d.height,new E(s.x,s.y,s.width,s.height))));E.free(s)};function Ju(){this.va="Base",this.name="Table"}z(Ju,fe),Ju.prototype.measure=function(t,e,n,i,r){for(var s=i.length,h=Yt(),u=Yt(),p=0;p<s;p++){var d=i[p],g=d instanceof Y?d:null;if(g===null||g.type!==Y.TableRow&&g.type!==Y.TableColumn||!d.visible)h.push(d);else{u.push(g);for(var c=g.R.s,y=c.length,S=0;S<y;S++){var v=c[S];g.type===Y.TableRow?v.row=d.row:g.type===Y.TableColumn&&(v.column=d.column),h.push(v)}}}s=h.length,s===0&&(t.getRowDefinition(0),t.getColumnDefinition(0));for(var L=[],N=0;N<s;N++){var M=h[N];M.visible&&(bn(M,!0),ds(M,!0),L[M.row]||(L[M.row]=[]),L[M.row][M.column]||(L[M.row][M.column]=[]),L[M.row][M.column].push(M))}At(h);var B=Yt(),F=Yt(),j=Yt(),D={count:0},R={count:0},W=e,tt=n,q=t.rowDefs,b=t.colDefs,V=null;s=q.length;for(var ft=0;ft<s;ft++)V=q[ft],V!==void 0&&(V.actual=0);s=b.length;for(var at=0;at<s;at++)V=b[at],V!==void 0&&(V.actual=0);for(var Mt=L.length,Vt=0,Se=0;Se<Mt;Se++)L[Se]&&(Vt=Math.max(Vt,L[Se].length));var Ne=Math.min(t.topIndex,Mt-1),tn=Math.min(t.leftIndex,Vt-1),Pe=0;Mt=L.length;for(var fr=Go(t),oe=0;oe<Mt;oe++)if(L[oe]){Vt=L[oe].length;var Xi=t.getRowDefinition(oe);Xi.actual=0;for(var en=Xi.ic=0;en<Vt;en++)if(L[oe][en]){var gr=t.getColumnDefinition(en);B[en]===void 0&&(gr.actual=0,gr.ic=0,B[en]=!0);for(var Un=L[oe][en],fi=Un.length,Bn=0;Bn<fi;Bn++){var Ln=Un[Bn];if(Ln.visible||Ln===fr){var Zr=1<Ln.rowSpan||1<Ln.columnSpan;Zr&&(oe<Ne||en<tn||F.push(Ln));var Ui=Ln.margin,wh=Ui.right+Ui.left,jn=Ui.top+Ui.bottom,nn=ul(Ln,Xi,gr,!1),eu=Ln.desiredSize,sa=!isNaN(eu.height),qi=!isNaN(eu.width)&&sa;if(Zr||nn===te||qi||oe<Ne||en<tn||(D[en]!==void 0||nn!==ne&&nn!==Re||(D[en]=-1,D.count++),R[oe]!==void 0||nn!==ne&&nn!==Je||(R[oe]=-1,R.count++),j.push(Ln)),Ln.measure(1/0,1/0,0,0),!(oe<Ne||en<tn)){var Mn=Ln.measuredBounds,ws=Math.max(Mn.width+wh,0),Dn=Math.max(Mn.height+jn,0);if(Ln.rowSpan===1&&(nn===te||nn===Re)){V=t.getRowDefinition(oe);var _r=V.Oc();Pe=Math.max(Dn-V.actual,0),Pe+_r>tt&&(Pe=Math.max(tt-_r,0));var dd=V.ma===0;V.ic=V.ic+Pe,V.actual=V.ma+Pe,tt=Math.max(tt-(Pe+(dd?_r:0)),0)}if(Ln.columnSpan===1&&(nn===te||nn===Je)){V=t.getColumnDefinition(en);var nu=V.Oc();Pe=Math.max(ws-V.actual,0),Pe+nu>W&&(Pe=Math.max(W-nu,0));var Pc=V.ma===0;V.ic=V.ic+Pe,V.actual=V.ma+Pe,W=Math.max(W-(Pe+(Pc?nu:0)),0)}Zr&&Ln.Ej()}}}}}At(B);var vo=0,Ao=0;s=t.columnCount;for(var aa=0;aa<s;aa++){var $r=b[aa];$r!==void 0&&(vo+=isNaN($r.zc)?$r.ic:$r.zc,$r.ic!==0&&(vo+=$r.Oc()))}s=t.rowCount;for(var Lh=0;Lh<s;Lh++){var Qr=q[Lh];Qr!==void 0&&(Ao+=isNaN(Qr.zc)?Qr.ic:Qr.zc,Qr.ic!==0&&(Ao+=Qr.Oc()))}W=Math.max(e-vo,0);var So=tt=Math.max(n-Ao,0),cr=W;s=j.length;for(var kn=0;kn<s;kn++){var to=j[kn],fd=t.getRowDefinition(to.row),zo=t.getColumnDefinition(to.column),Mh=to.measuredBounds,Ki=to.margin,Ls=Ki.right+Ki.left,eo=Ki.top+Ki.bottom;D[to.column]=zo.ic===0&&D[to.column]!==void 0?Math.max(Mh.width+Ls,D[to.column]):null,R[to.row]=fd.ic===0&&R[to.row]!==void 0?Math.max(Mh.height+eo,R[to.row]):null}var ha=0,kh=0,Ti;for(Ti in R)Ti!=="count"&&(ha+=R[Ti]);for(Ti in D)Ti!=="count"&&(kh+=D[Ti]);for(var je=ht.alloc(),iu=0;iu<s;iu++){var fn=j[iu];if(fn.visible||fn===fr){var re=t.getRowDefinition(fn.row),gn=t.getColumnDefinition(fn.column),Eo=0;isFinite(gn.width)?Eo=gn.width:(isFinite(W)&&D[fn.column]!==null?kh===0?Eo=gn.actual+W:Eo=D[fn.column]/kh*cr:D[fn.column]!==null?Eo=W:Eo=gn.actual||W,Eo=Math.max(0,Eo-gn.Oc()));var mr=0;switch(isFinite(re.height)?mr=re.height:(isFinite(tt)&&R[fn.row]!==null?ha===0?mr=re.actual+tt:mr=R[fn.row]/ha*So:R[fn.row]!==null?mr=tt:mr=re.actual||tt,mr=Math.max(0,mr-re.Oc())),je.h(Math.max(gn.minimum,Math.min(Eo,gn.maximum)),Math.max(re.minimum,Math.min(mr,re.maximum))),nn=ul(fn,re,gn,!1),nn){case Re:je.height=Math.max(je.height,re.actual+tt);break;case Je:je.width=Math.max(je.width,gn.actual+W)}var Ms=fn.margin,wc=Ms.right+Ms.left,gd=Ms.top+Ms.bottom;fn.Ej(),fn.measure(je.width,je.height,gn.minimum,re.minimum);var Nh=fn.measuredBounds,ks=Math.max(Nh.width+wc,0),la=Math.max(Nh.height+gd,0);isFinite(W)&&(ks=Math.min(ks,je.width)),isFinite(tt)&&(la=Math.min(la,je.height));var Nn=0;Nn=re.actual,re.actual=Math.max(re.actual,la),re.ic=Math.max(re.ic,la),Pe=re.actual-Nn,tt=Math.max(tt-Pe,0),R[fn.row]===null&&(So=Math.max(So-Pe,0)),Nn=gn.actual,gn.actual=Math.max(gn.actual,ks),gn.ic=Math.max(gn.ic,ks),Pe=gn.actual-Nn,W=Math.max(W-Pe,0),D[fn.column]===null&&(cr=Math.max(cr-Pe,0))}}At(j);var Ro=ht.alloc(),Hi=Yt(),ii=Yt();if(s=F.length,s!==0){for(var br=0;br<Mt;br++)if(L[br]){Vt=L[br].length;var Th=t.getRowDefinition(br);Hi[br]=Th.actual;for(var qr=0;qr<Vt;qr++)if(L[br][qr]){var cd=t.getColumnDefinition(qr);ii[qr]=cd.actual}}}for(var Ch=0;Ch<s;Ch++){var bt=F[Ch];if(bt.visible||bt===fr){var Ci=t.getRowDefinition(bt.row),gi=t.getColumnDefinition(bt.column);switch(je.h(Math.max(gi.minimum,Math.min(e,gi.maximum)),Math.max(Ci.minimum,Math.min(n,Ci.maximum))),nn=ul(bt,Ci,gi,!1),nn){case ne:ii[gi.index]!==0&&(je.width=Math.min(je.width,ii[gi.index])),Hi[Ci.index]!==0&&(je.height=Math.min(je.height,Hi[Ci.index]));break;case Re:ii[gi.index]!==0&&(je.width=Math.min(je.width,ii[gi.index]));break;case Je:Hi[Ci.index]!==0&&(je.height=Math.min(je.height,Hi[Ci.index]))}isFinite(gi.width)&&(je.width=gi.width),isFinite(Ci.height)&&(je.height=Ci.height),Ro.h(0,0);for(var md=gi.minimum,Gn=Ci.minimum,xr=1;xr<bt.rowSpan&&!(bt.row+xr>=t.rowCount);xr++)V=t.getRowDefinition(bt.row+xr),Pe=0,Pe=nn===ne||nn===Je?Math.max(V.minimum,Hi[bt.row+xr]===0?V.maximum:Math.min(Hi[bt.row+xr],V.maximum)):Math.max(V.minimum,isNaN(V.zc)?V.maximum:Math.min(V.zc,V.maximum)),Ro.height+=Pe,Gn+=V.minimum;for(var ci=1;ci<bt.columnSpan&&!(bt.column+ci>=t.columnCount);ci++)V=t.getColumnDefinition(bt.column+ci),Pe=0,Pe=nn===ne||nn===Re?Math.max(V.minimum,ii[bt.column+ci]===0?V.maximum:Math.min(ii[bt.column+ci],V.maximum)):Math.max(V.minimum,isNaN(V.zc)?V.maximum:Math.min(V.zc,V.maximum)),Ro.width+=Pe,md+=V.minimum;je.width+=Ro.width,je.height+=Ro.height;var Fh=bt.margin,ts=Fh.right+Fh.left,ou=Fh.top+Fh.bottom;bt.measure(je.width,je.height,md,Gn);for(var Bh=bt.measuredBounds,no=Math.max(Bh.width+ts,0),Ns=Math.max(Bh.height+ou,0),es=0,jh=0;jh<bt.rowSpan&&!(bt.row+jh>=t.rowCount);jh++)V=t.getRowDefinition(bt.row+jh),es+=V.total||0;if(es<Ns){var yr=Ns-es,Po=Ns-es;if(bt.spanAllocation!==null)for(var vr=bt.spanAllocation,Vo=0;Vo<bt.rowSpan&&!(0>=yr)&&!(bt.row+Vo>=t.rowCount);Vo++){V=t.getRowDefinition(bt.row+Vo);var Sr=V.ma||0,Ts=vr(bt,V,Po);V.actual=Math.min(V.maximum,Sr+Ts),V.ma!==Sr&&(yr-=V.ma-Sr)}for(;0<yr;){var Wi=V.ma||0;if(isNaN(V.height)&&V.maximum>Wi&&(V.actual=Math.min(V.maximum,Wi+yr),V.ma!==Wi&&(yr-=V.ma-Wi)),V.index===0)break;V=t.getRowDefinition(V.index-1)}}for(var ua=0,Pr=0;Pr<bt.columnSpan&&!(bt.column+Pr>=t.columnCount);Pr++)V=t.getColumnDefinition(bt.column+Pr),ua+=V.total||0;if(ua<no){var pa=no-ua,Lc=no-ua;if(bt.spanAllocation!==null)for(var Yo=bt.spanAllocation,Cs=0;Cs<bt.columnSpan&&!(0>=pa)&&!(bt.column+Cs>=t.columnCount);Cs++){V=t.getColumnDefinition(bt.column+Cs);var ru=V.ma||0,Mc=Yo(bt,V,Lc);V.actual=Math.min(V.maximum,ru+Mc),V.ma!==ru&&(pa-=V.ma-ru)}for(;0<pa;){var xd=V.ma||0;if(isNaN(V.width)&&V.maximum>xd&&(V.actual=Math.min(V.maximum,xd+pa),V.ma!==xd&&(pa-=V.ma-xd)),V.index===0)break;V=t.getColumnDefinition(V.index-1)}}}}At(F),ht.free(Ro),ht.free(je),Hi!==void 0&&At(Hi),ii!==void 0&&At(ii);var da=0,fa=0,yd=t.desiredSize,Ny=t.maxSize;nn=zi(t,!0);var su=Ao=vo=0,au=0;s=t.columnCount;for(var vd=0;vd<s;vd++)b[vd]!==void 0&&(V=t.getColumnDefinition(vd),isFinite(V.width)?(su+=V.width,su+=V.Oc()):np(V)===xl?(su+=V.ma,su+=V.Oc()):V.ma!==0&&(vo+=V.ma,vo+=V.Oc()));isFinite(yd.width)?da=Math.min(yd.width,Ny.width):da=nn!==te&&isFinite(e)?e:vo,da=Math.max(da,t.minSize.width),da=Math.max(da-su,0);for(var Ev=vo===0?1:Math.max(da/vo,1),Sd=0;Sd<s;Sd++)b[Sd]!==void 0&&(V=t.getColumnDefinition(Sd),isFinite(V.width)||np(V)===xl||(V.actual=V.ma*Ev),V.position=r.width,V.ma!==0&&(r.width+=V.ma,r.width+=V.Oc()));s=t.rowCount;for(var Pd=0;Pd<s;Pd++)q[Pd]!==void 0&&(V=t.getRowDefinition(Pd),isFinite(V.height)?(au+=V.height,au+=V.Oc()):np(V)===xl?(au+=V.ma,au+=V.Oc()):V.ma!==0&&(Ao+=V.ma,Ao+=V.Oc()));isFinite(yd.height)?fa=Math.min(yd.height,Ny.height):fa=nn!==te&&isFinite(n)?n:Ao,fa=Math.max(fa,t.minSize.height),fa=Math.max(fa-au,0);for(var Rv=Ao===0?1:Math.max(fa/Ao,1),wd=0;wd<s;wd++)q[wd]!==void 0&&(V=t.getRowDefinition(wd),isFinite(V.height)||np(V)===xl||(V.actual=V.ma*Rv),V.position=r.height,V.ma!==0&&(r.height+=V.ma,r.height+=V.Oc()));s=u.length;for(var kc=0;kc<s;kc++){var hu=u[kc],Nc=0,Tc=0;hu.type===Y.TableRow?(Nc=r.width,V=t.getRowDefinition(hu.row),Tc=V.actual):(V=t.getColumnDefinition(hu.column),Nc=V.actual,Tc=r.height),hu.measuredBounds.h(0,0,Nc,Tc),bn(hu,!1)}At(u),t.inRowsCols=L},Ju.prototype.arrange=function(t,e,n){var i=e.length,r=t.padding,s=r.left;r=r.top;var h=t.inRowsCols;if(h!==null){for(var u,p,d=h.length,g=0,c=0;c<d;c++)h[c]&&(g=Math.max(g,h[c].length));p=t.rowDefs,u=t.colDefs;var y=c=0,S=Math.min(t.topIndex,d-1);if(0<p.length){for(;S!==d&&(p[S]===void 0||p[S].ma===0);)S++;S=Math.max(Math.min(S,d-1),0),c=-p[S].position}var v=Math.min(t.leftIndex,g-1);if(0<u.length){for(;v!==g&&(u[v]===void 0||u[v].ma===0);)v++;v=Math.max(Math.min(v,g-1),0),y=-u[v].position}for(var L=0,N=0;L!==d&&p[L]===void 0;)L++;for(;N!==d&&u[N]===void 0;)N++;g=t.part,t.getRowDefinition(L),t.getColumnDefinition(N);for(var M=0;M<e.length;M++){var B=e[M];if(B instanceof Y&&B.visible&&(B.type===Y.TableRow||B.type===Y.TableColumn)){if(B.type===Y.TableRow){u=t.getRowDefinition(B.row);var F=t.getColumnDefinition(N)}else u=t.getRowDefinition(L),F=t.getColumnDefinition(B.column);p=u.position+c+r,u.ma!==0&&(p+=u.bo(Math.max(L,S))),u=F.position+y+s,F.ma!==0&&(u+=F.bo(Math.max(N,v))),F=B.measuredBounds,B.Ak(),B.actualBounds.ja();var j=B.actualBounds,D=E.allocAt(j.x,j.y,j.width,j.height);j.x=B.type===Y.TableRow?s:u,j.y=B.type===Y.TableColumn?r:p,j.width=F.width,j.height=F.height,B.actualBounds.freeze(),ds(B,!1),Ce(D,j)||g===null||(g.Yg(),B.nn(g)),E.free(D)}}for(M=ht.alloc(),B=0;B<d;B++)if(h[B]){for(g=h[B].length,F=t.getRowDefinition(B),p=F.position+c+r,F.ma!==0&&(p+=F.bo(Math.max(L,S))),j=0;j<g;j++)if(h[B][j]){D=t.getColumnDefinition(j),u=D.position+y+s,D.ma!==0&&(u+=D.bo(Math.max(N,v)));for(var R=h[B][j],W=R.length,tt=0;tt<W;tt++){var q=R[tt],b=q.measuredBounds;M.h(0,0);for(var V=1;V<q.rowSpan&&!(B+V>=t.rowCount);V++){var ft=t.getRowDefinition(B+V);ft.ma!==0&&(M.height+=ft.total)}for(V=1;V<q.columnSpan&&!(j+V>=t.columnCount);V++)ft=t.getColumnDefinition(j+V),ft.ma!==0&&(M.width+=ft.total);var at=D.ma+M.width,Mt=F.ma+M.height;V=u,ft=p;var Vt=at,Se=Mt,Ne=u,tn=p,Pe=at,fr=Mt;u+at>n.width&&(Pe=Math.max(n.width-u,0)),p+Mt>n.height&&(fr=Math.max(n.height-p,0));var oe=q.alignment;if(oe.Rb()){oe=t.defaultAlignment,oe.pb()||(oe=Dt);var Xi=oe.x,en=oe.y,gr=oe.offsetX;oe=oe.offsetY;var Un=D.alignment,fi=F.alignment;Un.pb()&&(Xi=Un.x,gr=Un.offsetX),fi.pb()&&(en=fi.y,oe=fi.offsetY)}else Xi=oe.x,en=oe.y,gr=oe.offsetX,oe=oe.offsetY;(isNaN(Xi)||isNaN(en))&&(en=Xi=.5,oe=gr=0),Un=b.width,fi=b.height;var Bn=q.margin,Ln=Bn.left+Bn.right,Zr=Bn.top+Bn.bottom,Ui=ul(q,F,D,!1);!isNaN(q.desiredSize.width)||Ui!==ne&&Ui!==Re||(Un=Math.max(at-Ln,0)),!isNaN(q.desiredSize.height)||Ui!==ne&&Ui!==Je||(fi=Math.max(Mt-Zr,0)),at=q.maxSize,Mt=q.minSize,Un=Math.min(at.width,Un),fi=Math.min(at.height,fi),Un=Math.max(Mt.width,Un),fi=Math.max(Mt.height,fi),at=fi+Zr,V+=Vt*Xi-(Un+Ln)*Xi+gr+Bn.left,ft+=Se*en-at*en+oe+Bn.top,q.visible&&(Di(Ne,tn,Pe,fr,V,ft,b.width,b.height)?q.arrange(V,ft,Un,fi):q.arrange(V,ft,Un,fi,new E(Ne,tn,Pe,fr)))}}}for(ht.free(M),t=0;t<i;t++)n=e[t],s=n instanceof Y?n:null,s===null||s.type!==Y.TableRow&&s.type!==Y.TableColumn||(s=n.actualBounds,n.naturalBounds.ja(),n.naturalBounds.h(0,0,s.width,s.height),n.naturalBounds.freeze())}};function Zu(){this.va="Base"}z(Zu,fe),Zu.prototype.measure=function(){},Zu.prototype.arrange=function(){};function _u(){this.va="Base"}z(_u,fe),_u.prototype.measure=function(){},_u.prototype.arrange=function(){};function $u(){this.va="Base"}z($u,fe),$u.prototype.measure=function(t,e,n,i,r,s,h){1<i.length&&X("Viewbox Panel cannot contain more than one GraphObject."),i=i[0],i.wa=1,i.Ej(),i.measure(1/0,1/0,s,h);var u=i.measuredBounds,p=i.margin,d=p.right+p.left;if(p=p.top+p.bottom,isFinite(e)||isFinite(n)){var g=i.scale,c=u.width;u=u.height;var y=Math.max(e-d,0),S=Math.max(n-p,0),v=1;t.viewboxStretch===$i?c!==0&&u!==0&&(v=Math.min(y/c,S/u)):c!==0&&u!==0&&(v=Math.max(y/c,S/u)),v===0&&(v=1e-4),i.wa*=v,g!==i.scale&&(bn(i,!0),i.measure(1/0,1/0,s,h))}u=i.measuredBounds,r.width=isFinite(e)?e:Math.max(u.width+d,0),r.height=isFinite(n)?n:Math.max(u.height+p,0)},$u.prototype.arrange=function(t,e,n){e=e[0];var i=e.measuredBounds,r=e.margin,s=Math.max(i.width+(r.right+r.left),0);r=Math.max(i.height+(r.top+r.bottom),0);var h=e.alignment;h.Rb()&&(h=t.defaultAlignment),h.pb()||(h=Dt),e.arrange(n.width*h.x-s*h.x+h.offsetX,n.height*h.y-r*h.y+h.offsetY,i.width,i.height)};function gl(){this.va="Base"}z(gl,fe),gl.prototype.measure=function(){},gl.prototype.arrange=function(){},gl.prototype.tc=function(t,e,n){n=t.qf()*n.scale,0>=n&&(n=1);var i=t.gridCellSize,r=i.width;i=i.height;var s=t.naturalBounds,h=t.actualBounds,u=s.width,p=s.height,d=Math.ceil(u/r),g=Math.ceil(p/i),c=t.gridOrigin,y=c.x;c=c.y,e.save(),e.beginPath(),e.rect(0,0,u,p),e.clip();for(var S=[],v=t.R.s,L=v.length,N=0;N<L;N++){var M=v[N],B=[];if(S.push(B),M.visible){var F=M.interval;if(!(0>F)){M=$f(M.figure);for(var j=0;j<L;j++)if(j!==N){var D=v[j];D.visible&&$f(D.figure)===M&&(D=D.interval,D>F&&B.push(D))}}}}for(v=t.R.s,L=v.length,N=0;N<L;N++){var R=v[N];if(R.visible&&(B=R.interval||1,M=Math.abs(B),!(2>r*M*n))){if(F=R.segmentIndex,(!isFinite(F)||isNaN(F))&&(F=0),0>F&&(F=M-Math.min(-F,M)),F=Math.round(F%M),M=R.opacity,j=1,M!==1){if(M===0)continue;j=e.globalAlpha,e.globalAlpha=j*M}D=S[N];var W=!1,tt=R.strokeDashArray;if(tt!==null&&(W=!0,e.yr(tt,R.strokeDashOffset)),R.figure==="LineV"&&R.stroke!==null&&0<R.strokeWidth){for(e.lineWidth=R.strokeWidth,En(t,e,R.stroke,!1,!1,s,h),e.beginPath(),tt=R=Math.floor((y-r)/r);tt<=R+d;tt++){var q=tt*r+y;0<=q&&q<=u&&Qu(tt,B,F,D)&&(e.moveTo(q,0),e.lineTo(q,p))}e.stroke()}else if(R.figure==="LineH"&&R.stroke!==null&&0<R.strokeWidth){for(e.lineWidth=R.strokeWidth,En(t,e,R.stroke,!1,!1,s,h),e.beginPath(),tt=R=Math.floor((c-i)/i);tt<=R+g;tt++)q=tt*i+c,0<=q&&q<=p&&Qu(tt,B,F,D)&&(e.moveTo(0,q),e.lineTo(u,q));e.stroke()}else if(R.figure==="BarV"&&R.fill!==null)for(En(t,e,R.fill,!0,!1,s,h),R=R.width,isNaN(R)&&(R=r),q=tt=Math.floor((y-r)/r);q<=tt+d;q++){var b=q*r+y;0<=b+R&&b<=u&&Qu(q,B,F,D)&&e.fillRect(b,0,R,p)}else if(R.figure==="BarH"&&R.fill!==null)for(En(t,e,R.fill,!0,!1,s,h),R=R.height,isNaN(R)&&(R=i),q=tt=Math.floor((c-i)/i);q<=tt+g;q++)b=q*i+c,0<=b+R&&b<=p&&Qu(q,B,F,D)&&e.fillRect(0,b,u,R);W&&e.wr(),M!==1&&(e.globalAlpha=j)}}e.restore(),e.Mc(!1)};function Qu(t,e,n,i){if(0>e)return t%e===n;if(t%e!==n)return!1;e=i.length;for(var r=0;r<e;r++)if(t%i[r]===n)return!1;return!0}function bu(){this.va="Base"}z(bu,fe),bu.prototype.measure=function(t,e,n,i,r){var s=i.length;if(t instanceof St||t instanceof U){var h=null,u=null;if(t instanceof U&&(h=t),t instanceof St&&(u=t,h=u.adornedPart,t.j===null&&(t.j=[])),h instanceof U){var p=h;if(s===0)$(t.naturalBounds,0,0),t.measuredBounds.h(0,0,0,0);else{var d=t instanceof St?null:h.path;e=h.routeBounds,n=t.Yf,n.h(0,0,e.width,e.height);var g=p.points,c=h.pointsCount;u!==null?u.tl(!1):h!==null&&h.tl(!1),u=e.width;var y=e.height,S=t.j;if(S.length=0,d!==null){ym(t,u,y,d);var v=d.measuredBounds;n.Vc(v),S.push(v)}v=ct.alloc();for(var L=T.alloc(),N=T.alloc(),M=0;M<s;M++){var B=i[M];if(B!==d)if(B.isPanelMain&&B instanceof dt){ym(t,u,y,B);var F=B.measuredBounds;n.Vc(F),S.push(F)}else if(2>c)B.measure(1/0,1/0,0,0),F=B.measuredBounds,n.Vc(F),S.push(F);else{var j=B.segmentIndex,D=B.segmentFraction,R=B.alignmentFocus;R.Ec()&&(R=Dt);var W=B.segmentOrientation,tt=B.segmentOffset;if(isNaN(j)){var q=p.sa;F=Yt(),q.qu(D,F);var b=T.allocAt(F[0],F[1]);if(b.add(p.i(0)),q.type===K.j?b.offset(-q.startX,-q.startY):(q=q.figures.first(),q!==null&&b.offset(-q.startX,-q.startY)),q=F[2],W!==hn){var V=p.computeAngle(B,W,q);B.Gb=V}V=b.x-e.x;var ft=b.y-e.y;T.free(b),At(F)}else if(j<-c||j>=c)F=T.alloc(),p.hg(),p.computeMidPoint(F),q=p.midAngle,W!==hn&&(V=p.computeAngle(B,W,q),B.Gb=V),V=F.x-e.x,ft=F.y-e.y,T.free(F);else{if(V=0,0<=j?(ft=g.L(j),F=j<c-1?g.L(j+1):ft):(V=c+j,ft=g.L(V),F=0<V?g.L(V-1):ft),ft.$a(F)){0<=j?(q=0<j?g.L(j-1):ft,V=j<c-2?g.L(j+2):F):(q=V<c-1?g.L(V+1):ft,V=1<V?g.L(V-2):F),b=q.mf(ft);var at=F.mf(V);q=b>at+10?0<=j?q.Za(ft):ft.Za(q):at>b+10?0<=j?F.Za(V):V.Za(F):0<=j?q.Za(V):V.Za(q)}else q=0<=j?ft.Za(F):F.Za(ft);W!==hn&&(V=p.computeAngle(B,W,q),B.Gb=V),V=ft.x+(F.x-ft.x)*D-e.x,ft=ft.y+(F.y-ft.y)*D-e.y}B.measure(1/0,1/0,0,0),F=B.measuredBounds,b=B.naturalBounds;var Mt=0;B instanceof dt&&(Mt=B.strokeWidth),at=b.width+Mt;var Vt=b.height+Mt;v.reset(),v.translate(-F.x,-F.y),v.scale(B.scale,B.scale),v.rotate(W===hn?B.angle:q,at/2,Vt/2),W!==Tl&&W!==Fl||v.rotate(90,at/2,Vt/2),W!==Cl&&W!==Bl||v.rotate(-90,at/2,Vt/2),W===Np&&(45<q&&135>q||225<q&&315>q)&&v.rotate(-q,at/2,Vt/2),b=new E(0,0,at,Vt),L.hi(b,R),v.Ea(L),R=-L.x+Mt/2*B.scale,B=-L.y+Mt/2*B.scale,N.assign(tt),Mt=isNaN(tt.x);var Se=isNaN(tt.y);if(Mt||Se){at=at/2+3,Vt=Vt/2+3;var Ne=45<=q&&135>=q,tn=225<=q&&315>=q;W===hn&&(Ne||tn)?(N.x=Se?at:tt.y,N.y=Mt?Vt:tt.x,Ne?0<=j||isNaN(j)&&.5>D||!Mt||(N.y=-Vt):tn&&((0<=j||isNaN(j)&&.5>D)&&Mt&&(N.y=-Vt),Se&&(N.x=-at))):(Mt&&(N.x=0<=j||isNaN(j)&&.5>D?at:-at),Se&&(N.y=-Vt),N.rotate(q))}else N.rotate(q);V+=N.x,ft+=N.y,b.set(F),b.h(V+R,ft+B,F.width,F.height),S.push(b),n.Vc(b)}}if(h!==null)for(i=h.labelNodes;i.next();)i.value.measure(1/0,1/0);t.Yf=n,t.position.h(e.x+n.x,e.y+n.y),$(r,n.width||0,n.height||0),ct.free(v),T.free(L),T.free(N)}}}},bu.prototype.arrange=function(t,e){var n=e.length;if(t instanceof St||t instanceof U){var i=t,r=null;t instanceof St&&(r=t,i=r.adornedPart);var s=t instanceof St?null:i.path,h=t.j;if(h.length!==0){var u=0;if(s!==null&&u<h.length){var p=h[u];u++,s.arrange(p.x-t.Yf.x,p.y-t.Yf.y,p.width,p.height)}for(p=0;p<n;p++){var d=e[p];if(d!==s&&u<h.length){var g=h[u];u++,d.arrange(g.x-t.Yf.x,g.y-t.Yf.y,g.width,g.height)}}}if(e=i.points,n=e.count,2<=n&&t instanceof U)for(s=t.labelNodes;s.next();){var c=t;h=s.value,u=h.segmentIndex,p=h.segmentFraction;var y=h.alignmentFocus;if(d=h.segmentOrientation,g=h.segmentOffset,isNaN(u)){var S=c.sa,v=Yt();S.qu(p,v);var L=T.allocAt(v[0],v[1]);L.add(c.i(0)),S.type===K.j||(S=S.figures.first()),L.offset(-S.startX,-S.startY),S=v[2],d!==hn&&(c=c.computeAngle(h,d,S),h.angle=c),c=L.x;var N=L.y;T.free(L),At(v)}else if(u<-n||u>=n)v=T.alloc(),S=c,N=v,S.hg(),S.computeMidPoint(N),S=c.midAngle,d!==hn&&(c=c.computeAngle(h,d,S),h.angle=c),c=v.x,N=v.y,T.free(v);else{if(L=0,0<=u?(v=e.s[u],N=u<n-1?e.s[u+1]:v):(L=n+u,v=e.s[L],N=0<L?e.s[L-1]:v),v.$a(N)){0<=u?(S=0<u?e.s[u-1]:v,L=u<n-2?e.s[u+2]:N):(S=L<n-1?e.s[L+1]:v,L=1<L?e.s[L-2]:N);var M=S.mf(v),B=N.mf(L);S=M>B+10?0<=u?S.Za(v):v.Za(S):B>M+10?0<=u?N.Za(L):L.Za(N):0<=u?S.Za(L):L.Za(S)}else S=0<=u?v.Za(N):N.Za(v);d!==hn&&(c=c.computeAngle(h,d,S),h.angle=c),c=v.x+(N.x-v.x)*p,N=v.y+(N.y-v.y)*p}if(y.Or())h.location=new T(c,N);else{y.Ec()&&(y=Dt),v=ct.alloc(),v.reset(),v.scale(h.scale,h.scale),v.rotate(h.angle,0,0);var F=h.naturalBounds;L=E.allocAt(0,0,F.width,F.height),M=T.alloc(),M.hi(L,y),v.Ea(M),y=-M.x,B=-M.y;var j=F.width,D=F.height;F=T.alloc(),F.assign(g);var R=isNaN(g.x),W=isNaN(g.y);if(R||W){j=j/2+3,D=D/2+3;var tt=45<=S&&135>=S,q=225<=S&&315>=S;d===hn&&(tt||q)?(F.x=W?j:g.y,F.y=R?D:g.x,tt?0<=u||isNaN(u)&&.5>p||!R||(F.y=-D):q&&((0<=u||isNaN(u)&&.5>p)&&R&&(F.y=-D),W&&(F.x=-j))):(R&&(F.x=0<=u||isNaN(u)&&.5>p?j:-j),W&&(F.y=-D),F.rotate(S))}else F.rotate(S);c+=F.x,N+=F.y,v.Jo(L),y+=L.x,B+=L.y,u=T.allocAt(c+y,N+B),h.move(u),T.free(u),T.free(F),T.free(M),E.free(L),ct.free(v)}}r!==null?r.tl(!1):i.tl(!1),i=Jm(t),t.location.h(t.position.x+i.x,t.position.y+i.y),T.free(i)}};function ym(t,e,n,i){if(Co(i)!==!1){var r=i.strokeWidth;r===0&&t instanceof St&&t.type===Y.Link&&t.adornedObject instanceof dt&&(r=t.adornedObject.strokeWidth),r*=i.wa,t instanceof U&&t.sa!==null?(t=t.geometry.bounds,i.se(t.x-r/2,t.y-r/2,t.width+r,t.height+r)):t instanceof St&&t.adornedPart.sa!==null?(t=t.adornedPart.sa.bounds,i.se(t.x-r/2,t.y-r/2,t.width+r,t.height+r)):i.se(-(r/2),-(r/2),e+r,n+r),r=i.desiredSize,r.w()||i.sa===null?i.ac.h(0,0,r.width,r.height):i.ac.assign(i.sa.bounds),bn(i,!1)}}function cl(){this.va="Base"}z(cl,fe),cl.prototype.measure=function(t,e,n,i,r,s,h){var u=t.vb();t.graduatedBounds=[];var p=u.margin,d=p.right+p.left,g=p.top+p.bottom;u.measure(e,n,s,h);var c=u.measuredBounds,y=new E(-p.left,-p.top,Math.max(c.width+d,0),Math.max(c.height+g,0));t.graduatedBounds.push(y),r.assign(y);for(var S=u.geometry,v=u.strokeWidth,L=S.flattenedSegments,N=S.flattenedLengths,M=S.flattenedTotalLength,B=L.length,F=0,j=0,D=Yt(),R=0;R<B;R++){var W=L[R],tt=[];j=F=0;for(var q=W.length,b=0;b<q;b+=2){var V=W[b],ft=W[b+1];if(b!==0){var at=180*Math.atan2(ft-j,V-F)/Math.PI;0>at&&(at+=360),tt.push(at)}F=V,j=ft}D.push(tt)}if(t.graduatedIntervals===null){for(var Mt=[],Vt=t.R.s,Se=Vt.length,Ne=0;Ne<Se;Ne++){var tn=Vt[Ne],Pe=[];if(Mt.push(Pe),tn.visible){var fr=tn.interval;if(!(0>fr)){for(var oe=0;oe<Se;oe++)if(oe!==Ne){var Xi=Vt[oe];if(Xi.visible&&tn.constructor===Xi.constructor){var en=Xi.interval;en>fr&&Pe.push(en)}}}}}t.graduatedIntervals=Mt}var gr=t.graduatedIntervals,Un=t.R.s,fi=Un.length,Bn=0,Ln=0,Zr=M;t.graduatedMarks=[];for(var Ui,wh=0;wh<fi;wh++){var jn=Un[wh];if(Ui=[],jn.visible&&jn!==u){var nn=Math.abs(jn.interval),eu=t.graduatedTickUnit;if(!(2>eu*nn*M/t.graduatedRange&&jn.graduatedSkip===null)){var sa=N[0][0],qi=0,Mn=0;Ln=M*jn.graduatedStart-1e-4,Zr=M*jn.graduatedEnd+1e-4;var ws=eu*nn,Dn=t.graduatedTickBase;if(Dn<t.graduatedMin){var _r=(t.graduatedMin-Dn)/ws;_r=_r%1===0?_r:Math.floor(_r+1),Dn+=_r*ws}else Dn>t.graduatedMin+ws&&(Dn-=Math.floor((Dn-t.graduatedMin)/ws)*ws);for(var dd=gr[wh],nu=Dn,Pc=1e-6*t.graduatedMax,vo=1;Dn<=t.graduatedMax+Pc;vo++){t:{for(var Ao=dd.length,aa=0;aa<Ao;aa++){var $r=(Dn-t.graduatedTickBase)%(dd[aa]*t.graduatedTickUnit),Lh=1e-6*t.graduatedTickUnit;if($r<Lh&&$r>-Lh){var Qr=!1;break t}}Qr=!0}if(Qr&&(Dn>t.graduatedMax&&(Dn=t.graduatedMax),jn.graduatedSkip===null||jn instanceof Gt&&!jn.graduatedSkip(Dn,jn)||jn instanceof dt&&!jn.graduatedSkip(Dn,jn))&&(Bn=(Dn-t.graduatedMin)*M/t.graduatedRange,Bn>M&&(Bn=M),Ln<=Bn&&Bn<=Zr)){for(var So=D[qi][Mn],cr=N[qi][Mn];qi<N.length;){for(;Bn>sa&&Mn<N[qi].length-1;)Mn++,So=D[qi][Mn],cr=N[qi][Mn],sa+=cr;if(Bn<=sa)break;qi++,Mn=0,So=D[qi][Mn],cr=N[qi][Mn],sa+=cr}var kn=L[qi],to=kn[2*Mn],fd=kn[2*Mn+1],zo=(Bn-(sa-cr))/cr,Mh=new T(to+(kn[2*Mn+2]-to)*zo+v/2-S.bounds.x,fd+(kn[2*Mn+3]-fd)*zo+v/2-S.bounds.y);Mh.scale(u.scale,u.scale);t:{var Ki=So,Ls=D[qi];if(!(.5005>zo&&.4995<zo)){var eo=Ki;if(.5>zo?0<Mn?eo=Ls[Mn-1]:O.ca(kn[0],kn[kn.length-2])&&O.ca(kn[1],kn[kn.length-1])&&(eo=Ls[Ls.length-1]):.5<zo&&(Mn+1<Ls.length?eo=Ls[Mn+1]:O.ca(kn[0],kn[kn.length-2])&&O.ca(kn[1],kn[kn.length-1])&&(eo=Ls[0])),Ki!==eo){var ha=Math.abs(Ki-eo);if(180<ha&&(Ki<eo?Ki+=360:eo+=360,ha=Math.abs(Ki-eo)),5e-4>zo||.9995<zo){So=(Ki+eo)/2%360;break t}if(10>ha){var kh=1-Math.abs(.5-zo);So=(Ki*kh+eo*(1-kh))%360;break t}}}So=Ki}if(jn instanceof Gt){var Ti="";jn.graduatedFunction!==null?(Ti=jn.graduatedFunction(Dn,jn),Ti=Ti!=null?Ti.toString():""):Ti=(+Dn.toFixed(2)).toString(),Ti!==""&&Ui.push({yl:Mh,angle:So,text:Ti})}else Ui.push({yl:Mh,angle:So})}Dn=nu+vo*ws}}}t.graduatedMarks.push(Ui)}At(D);var je=t.graduatedMarks;if(je!==null)for(var iu=i.length,fn=0;fn<iu;fn++){var re=i[fn],gn=je[fn];if(re.visible&&re!==u&&gn.length!==0){if(re instanceof dt){var Eo=t,mr=r,Ms=re.alignmentFocus;Ms.Ec()&&(Ms=Mo);var wc=re.angle;re.Gb=0,re.measure(1/0,1/0,0,0),re.Gb=wc;var gd=re.measuredBounds,Nh=gd.width,ks=gd.height,la=E.allocAt(0,0,Nh,ks),Nn=T.alloc();Nn.hi(la,Ms),E.free(la);for(var Ro=-Nn.x,Hi=-Nn.y,ii=new E,br=gn.length,Th=0;Th<br;Th++)for(var qr=gn[Th],cd=qr.yl.x,Ch=qr.yl.y,bt=qr.angle,Ci=0;4>Ci;Ci++){switch(Ci){case 0:Nn.h(Ro,Hi);break;case 1:Nn.h(Ro+Nh,Hi);break;case 2:Nn.h(Ro,Hi+ks);break;case 3:Nn.h(Ro+Nh,Hi+ks)}Nn.rotate(bt+re.angle),Nn.offset(cd,Ch),Th===0&&Ci===0?ii.h(Nn.x,Nn.y,0,0):ii.Ke(Nn),Nn.offset(-cd,-Ch),Nn.rotate(-bt-re.angle)}T.free(Nn),Eo.graduatedBounds!==null&&Eo.graduatedBounds.push(ii),De(mr,ii.x,ii.y,ii.width,ii.height)}else if(re instanceof Gt){var gi=t,md=r;gi.temporaryTextBlock===null&&(gi.temporaryTextBlock=new Gt);var Gn=gi.temporaryTextBlock;Gm(Gn,re);var xr=re.alignmentFocus;xr.Ec()&&(xr=Mo);for(var ci=re.segmentOrientation,Fh=re.segmentOffset,ts=new E,ou=0,Bh=0,no=0,Ns=0,es=0,jh=gn.length,yr=0;yr<jh;yr++){var Po=gn[yr];ou=Po.yl.x,Bh=Po.yl.y,no=Po.angle,es=Ns=re.angle,ci!==hn&&(es=ci===Nl||ci===kp?no+re.angle:no,Ns=U.computeAngle(ci,es)),Gn.Gb=Ns,Gn.text=Po.text||"",Gn.measure(1/0,1/0,0,0);var vr=Gn.measuredBounds,Vo=Gn.naturalBounds,Sr=Vo.width,Ts=Vo.height,Wi=ct.alloc();Wi.reset(),Wi.translate(-vr.x,-vr.y),Wi.scale(Gn.scale,Gn.scale),Wi.rotate(es,Sr/2,Ts/2),ci!==Tl&&ci!==Fl||Wi.rotate(90,Sr/2,Ts/2),ci!==Cl&&ci!==Bl||Wi.rotate(-90,Sr/2,Ts/2),ci===Np&&(45<no&&135>no||225<no&&315>no)&&Wi.rotate(-no,Sr/2,Ts/2);var ua=E.allocAt(0,0,Sr,Ts),Pr=T.alloc();Pr.hi(ua,xr),Wi.Ea(Pr);var pa=-Pr.x,Lc=-Pr.y,Yo=T.alloc();Yo.assign(Fh),isNaN(Yo.x)&&(Yo.x=Sr/2+3),isNaN(Yo.y)&&(Yo.y=-(Ts/2+3)),Yo.rotate(no),ou+=Yo.x+pa,Bh+=Yo.y+Lc;var Cs=new E(ou,Bh,vr.width,vr.height),ru=new E(vr.x,vr.y,vr.width,vr.height),Mc=new E(Vo.x,Vo.y,Vo.width,Vo.height);Po.kz=Ns,Po.lineCount=Gn.lineCount,Po.lines=[Gn.yb,Gn.th,Gn.Qe,Gn.xe,Gn.Ic,Gn.Vb,Gn.ne],Po.actualBounds=Cs,Po.measuredBounds=ru,Po.naturalBounds=Mc,yr===0?ts.assign(Cs):ts.Vc(Cs),T.free(Yo),T.free(Pr),E.free(ua),ct.free(Wi)}gi.graduatedBounds!==null&&gi.graduatedBounds.push(ts),De(md,ts.x,ts.y,ts.width,ts.height)}bn(re,!1)}}},cl.prototype.arrange=function(t,e,n){if(t.graduatedBounds!==null){var i=t.vb(),r=t.graduatedMarks;if(r!==null){var s=t.graduatedBounds,h=0,u=s[h];h++,i!==null&&i.arrange(u.x-n.x,u.y-n.y,u.width,u.height);for(var p=e.length,d=0;d<p;d++){var g=e[d];u=r[d],g.visible&&g!==i&&u.length!==0&&(u=s[h],h++,g.arrange(u.x-n.x,u.y-n.y,u.width,u.height))}t.graduatedBounds=null}}},cl.prototype.tc=function(t,e,n){var i=n.Oi;n.Oi=!0;var r=t.naturalBounds,s=r.width;r=r.height,e.save(),e.beginPath(),e.rect(-1,-1,s+1,r+1),e.clip(),s=t.vb(),s.tc(e,n),r=t.qf()*n.scale,0>=r&&(r=1);for(var h=s.actualBounds,u=t.R.s,p=t.graduatedMarks,d=u.length,g=0;g<d;g++){var c=u[g],y=p[g],S=y.length;if(c.visible&&c!==s&&y.length!==0){if(c instanceof dt){if(!(2>t.graduatedTickUnit*c.interval*s.geometry.flattenedTotalLength/t.graduatedRange*r&&c.graduatedSkip===null)){var v=c.measuredBounds,L=c.strokeWidth*c.scale,N=c.alignmentFocus;N.Ec()&&(N=Mo);for(var M=0;M<S;M++){var B=y[M].yl,F=y[M].angle,j=N,D=c.Bb;D.reset(),D.translate(B.x+h.x,B.y+h.y),D.rotate(F+c.angle,0,0),D.translate(-v.width*j.x+j.offsetX+L/2,-v.height*j.y+j.offsetY+L/2),D.scale(c.scale,c.scale),Ha(c,!1),c.gh.set(c.Bb),c.pk=c.scale,Dr(c,!1),c.tc(e,n),c.Bb.reset()}}}else if(c instanceof Gt)for(t.temporaryTextBlock===null&&(t.temporaryTextBlock=new Gt),v=t.temporaryTextBlock,Gm(v,c),L=0;L<S;L++)N=y[L],N.actualBounds&&N.measuredBounds&&N.naturalBounds&&(v.bc=N.text||"",v.Gb=N.kz||0,v.ad=N.lineCount||0,M=N.lines,M!==void 0&&(v.yb=M[0],v.th=M[1],v.Qe=M[2],v.xe=M[3],v.Ic=M[4],v.Vb=M[5],v.ne=M[6]),N.naturalBounds&&(v.ac=N.naturalBounds),N.actualBounds&&(M=N.actualBounds,v.arrange(M.x,M.y,M.width,M.height)),M=N.actualBounds,v.arrange(M.x,M.y,M.width,M.height),B=N.measuredBounds,N=N.naturalBounds,F=v.Bb,F.reset(),F.translate(M.x+h.x,M.y+h.y),F.translate(-B.x,-B.y),v.Hn(F,N.x,N.y,N.width,N.height),Ha(v,!1),v.gh.set(v.Bb),v.pk=v.scale,Dr(v,!1),v.yg=c.part,v.ye=c.panel,v.tc(e,n),v.ye=null,v.yg=null)}}n.Oi=i,e.restore(),e.Mc(!0)};function Y(t,e){if(nt.call(this),this.qa=null,t===void 0)this.qa=Y.Position;else if(typeof t=="string"){var n=Pi.I(t);n!==null&&(this.qa=n)}else t instanceof fe?this.qa=t:t&&(this.qa=Y.Position,e=t);this.qa===null&&X("Panel type not specified or PanelLayout not loaded: "+t),this.o=this.o|4194304|(this.qa===Y.Grid?1048576:0),this.R=new Q,this.ub=Sa,this.rm=He,this.Hf=vi,this.Kg=null,this.Me="",this.Yf=new E(NaN,NaN,NaN,NaN),this.T=this.F=null,this.Rn=$i,this.Gm=gu,this.Hm=Zi,this.qb=this.oa=null,this.Wm=NaN,this.Wd=this.sh=null,e&&Object.assign(this,e)}z(Y,nt),Y.prototype.cloneProtected=function(t){nt.prototype.cloneProtected.call(this,t),t.qa=this.qa,t.ub=this.ub.J(),t.rm=this.rm.J(),t.Hf=this.Hf,t.Me=this.Me,t.Yf.assign(this.Yf),this.T!==null&&(t.T=this.T.copy(t)),t.Rn=this.Rn,t.Gm=this.Gm.J(),t.Hm=this.Hm.J(),this.oa!==null&&(t.oa=this.oa.copy()),t.qb=this.qb,t.Wm=this.Wm,t.sh=this.sh},Y.prototype.lf=function(t){nt.prototype.lf.call(this,t),t.R=this.R;for(var e=t.R.s,n=e.length,i=0;i<n;i++)e[i].ye=t;t.Kg=null},Y.prototype.copy=function(){var t=nt.prototype.copy.call(this);if(t!==null){for(var e=this.R.s,n=e.length,i=0;i<n;i++){var r=e[i].copy();r.gi(t),r.yg=null;var s=t.R,h=s.count;if(s.Cb(h,r),s=t.part,s!==null){s.Dh=null,r.portId!==null&&s instanceof _&&(s.Fe=!0);var u=t.diagram;u!==null&&u.undoManager.isUndoingRedoing||s.bb(me,"elements",t,null,r,null,h)}}return t}return null},a=Y.prototype,a.toString=function(){return"Panel("+this.type.name+")#"+$e(this)},a.nn=function(t){nt.prototype.nn.call(this,t);for(var e=this.R.s,n=e.length,i=0;i<n;i++)e[i].nn(t)},a.Uh=function(t,e){if(this.qa===Y.Grid)t.Nc(),this.qa.tc(this,t,e);else if(this.qa===Y.Graduated)t.Nc(),this.qa.tc(this,t,e);else{if(this.qa===Y.Table){t.Nc(),t.lineCap="butt";var n=0<this.rowCount?this.rowDefs:null,i=0<this.columnCount?this.colDefs:null;n!==null&&qu(this,t,!0,n,!0),i!==null&&qu(this,t,!1,i,!0),n!==null&&vm(this,t,!0,n),i!==null&&vm(this,t,!1,i),n!==null&&qu(this,t,!0,n,!1),i!==null&&qu(this,t,!1,i,!1)}(n=this.isClipping&&this.qa===Y.Spot)&&t.save(),i=this.vb();for(var r=this.R.s,s=r.length,h=0;h<s;h++){var u=r[h];n&&u===i&&(t.clipInsteadOfFill=!0),u.tc(t,e),n&&u===i&&(t.clipInsteadOfFill=!1)}n&&(t.restore(),t.Mc(!0))}};function vm(t,e,n,i){for(var r=i.length,s=t.actualBounds,h=t.naturalBounds,u=!0,p=0;p<r;p++){var d=i[p];if(d!==void 0&&d.actual!==0)if(u)u=!1;else{if(n){if(d.position>s.height)continue}else if(d.position>s.width)continue;var g=d.separatorStrokeWidth;isNaN(g)&&(g=n?t.defaultRowSeparatorStrokeWidth:t.defaultColumnSeparatorStrokeWidth);var c=d.separatorStroke;if(c===null&&(c=n?t.defaultRowSeparatorStroke:t.defaultColumnSeparatorStroke),g!==0&&c!==null){En(t,e,c,!1,!1,h,s),c=!1;var y=d.separatorDashArray;y===null&&(y=n?t.defaultRowSeparatorDashArray:t.defaultColumnSeparatorDashArray),y!==null&&(c=!0,e.yr(y,0)),e.beginPath(),y=d.position+g,n?y>s.height&&(g-=y-s.height):y>s.width&&(g-=y-s.width),d=d.position+g/2,e.lineWidth=g,g=t.ub,n?(d+=g.top,y=s.width-g.right,e.moveTo(g.left,d),e.lineTo(y,d)):(d+=g.left,y=s.height-g.bottom,e.moveTo(d,g.top),e.lineTo(d,y)),e.stroke(),c&&e.wr()}}}}function qu(t,e,n,i,r){for(var s=i.length,h=t.actualBounds,u=t.naturalBounds,p=Sm(t,!0),d=Sm(t,!1),g=0;g<s;g++){var c=i[g];if(c!==void 0&&c.background!==null&&c.coversSeparators!==r&&c.actual!==0){var y=n?h.height:h.width;if(!(c.position>y)){var S=c.Oc(),v=c.separatorStrokeWidth;isNaN(v)&&(v=n?t.defaultRowSeparatorStrokeWidth:t.defaultColumnSeparatorStrokeWidth);var L=c.separatorStroke;L===null&&(L=n?t.defaultRowSeparatorStroke:t.defaultColumnSeparatorStroke),(L===null||c.index===(n?p:d))&&(v=0),S-=v,v=c.position+v,S+=c.actual,v+S>y&&(S=y-v),0>=S||(y=t.ub,En(t,e,c.background,!0,!1,u,h),n?e.fillRect(y.left,v+y.top,h.width-(y.left+y.right),S):e.fillRect(v+y.left,y.top,S,h.height-(y.top+y.bottom)))}}}}function Sm(t,e){for(var n=e?t.rowCount:t.columnCount,i=0;i<n;i++){var r=e?t.rowDefs[i]:t.colDefs[i];if(r!==void 0)return r.index}return 0}function $f(t){return t==="LineV"||t==="BarV"}a.Cj=function(t,e,n,i,r){var s=this.he(),h=this.transform,u=1/(h.m11*h.m22-h.m12*h.m21),p=h.m22*u,d=-h.m12*u,g=-h.m21*u,c=h.m11*u,y=u*(h.m21*h.dy-h.m22*h.dx),S=u*(h.m12*h.dx-h.m11*h.dy);if(this.areaBackground!==null)return h=this.actualBounds,O.sf(h.left,h.top,h.right,h.bottom,t,e,n,i,r);if(this.background!==null)return s=t*p+e*g+y,u=t*d+e*c+S,t=n*p+i*g+y,p=n*d+i*c+S,r.h(0,0),n=this.naturalBounds,s=O.sf(0,0,n.width,n.height,s,u,t,p,r),r.transform(h),s;s||(p=1,g=d=0,c=1,S=y=0),u=t*p+e*g+y,t=t*d+e*c+S,p=n*p+i*g+y,n=n*d+i*c+S,r.h(p,n),i=(p-u)*(p-u)+(n-t)*(n-t),d=!1,c=this.R.s,S=c.length,g=T.alloc(),y=null,e=1/0;var v=null,L=this.isClipping&&this.qa===Y.Spot;L&&(v=T.alloc(),y=this.vb(),(d=y.Cj(u,t,p,n,v))&&(e=(u-v.x)*(u-v.x)+(t-v.y)*(t-v.y)));for(var N=0;N<S;N++){var M=c[N];M.visible&&M!==y&&M.Cj(u,t,p,n,g)&&(d=!0,M=(u-g.x)*(u-g.x)+(t-g.y)*(t-g.y),M<i&&(i=M,r.set(g)))}return L&&(e>i&&r.set(v),T.free(v)),T.free(g),s&&r.transform(h),d},a.v=function(t){if(!Co(this)){nt.prototype.v.call(this,t),t=null,(this.qa===Y.Auto||this.qa===Y.Link)&&(t=this.vb());for(var e=this.R.s,n=e.length,i=0;i<n;i++){var r=e[i];if((r===t||r.isPanelMain)&&r.v(!0),!r.desiredSize.w()){var s=zi(r,!1);(r instanceof an||r instanceof Y||r instanceof Gt||s!==te)&&r.v(!0)}}}},a.Ej=function(){if(!Co(this)){bn(this,!0),ds(this,!0);for(var t=this.R.s,e=t.length,n=0;n<e;n++)t[n].Ej()}},a.Ak=function(){if((this.o&2048)===0){Ha(this,!0),Dr(this,!0);for(var t=this.R.s,e=t.length,n=0;n<e;n++)t[n].wu()}},a.wu=function(){Dr(this,!0);for(var t=this.R.s,e=t.length,n=0;n<e;n++)t[n].wu()},a.vl=function(t,e,n,i){var r=this.Yf;r.h(0,0,0,0);var s=this.desiredSize,h=this.minSize;n===void 0&&(n=h.width,i=h.height),n=Math.max(n,h.width),i=Math.max(i,h.height);var u=this.maxSize;isNaN(s.width)||(t=Math.min(s.width,u.width)),isNaN(s.height)||(e=Math.min(s.height,u.height)),t=Math.max(n,t),e=Math.max(i,e);var p=this.ub;t=Math.max(t-p.left-p.right,0),e=Math.max(e-p.top-p.bottom,0);var d=this.R.s;d.length!==0&&this.qa.measure(this,t,e,d,r,n,i),t=r.width+p.left+p.right,p=r.height+p.top+p.bottom,isFinite(s.width)&&(t=s.width),isFinite(s.height)&&(p=s.height),t=Math.min(u.width,t),p=Math.min(u.height,p),t=Math.max(h.width,t),p=Math.max(h.height,p),t=Math.max(n,t),p=Math.max(i,p),$(r,t,p),$(this.naturalBounds,t,p),this.se(0,0,t,p)},a.vb=function(){if(this.Kg===null){var t=this.R.s,e=t.length;if(e===0)return null;for(var n=0;n<e;n++){var i=t[n];if(i.isPanelMain===!0)return this.Kg=i}this.Kg=t[0]}return this.Kg};function Go(t){return t.part!==null?t.part.locationObject:null}a.Qg=function(t,e,n,i){var r=this.R.s;if(this.actualBounds.h(t,e,n,i),r.length!==0){if(!this.desiredSize.w()){t=zi(this,!0);var s=this.measuredBounds;e=s.width,s=s.height;var h=this.vg,u=h.left+h.right;switch(h=h.top+h.bottom,e===n&&s===i&&(t=te),t){case te:(e>n||s>i)&&(this.v(),this.measure(e>n?n:e,s>i?i:s,0,0));break;case ne:this.v(!0),this.measure(n+u,i+h,0,0);break;case Re:this.v(!0),this.measure(n+u,s+h,0,0);break;case Je:this.v(!0),this.measure(e+u,i+h,0,0)}}this.qa.arrange(this,r,this.Yf)}},a.Sg=function(t){var e=this.naturalBounds,n=Go(this);if(Di(0,0,e.width,e.height,t.x,t.y)){e=this.R.s;for(var i=e.length,r=T.allocAt(0,0);i--;){var s=e[i];if((s.visible||s===n)&&(Ue(r.set(t),s.transform),s.ba(r)))return T.free(r),!0}return T.free(r),!(this.Xb===null&&this.areaBackground===null)}return!1},a.zr=function(t){if(this.bindingId===t)return this;for(var e=this.R.s,n=e.length,i=0;i<n;i++){var r=e[i].zr(t);if(r!==null)return r}return null},a.Ql=function(t,e){if(e(this,t),t instanceof Y){t=t.R.s;for(var n=t.length,i=0;i<n;i++)this.Ql(t[i],e)}};function cs(t,e){Pm(t,t,e)}function Pm(t,e,n){n(e),e=e.R.s;for(var i=e.length,r=0;r<i;r++){var s=e[r];s instanceof Y&&Pm(t,s,n)}}function lv(t,e){wm(t,t,e)}function wm(t,e,n){if(n(e),e instanceof Y){e=e.R.s;for(var i=e.length,r=0;r<i;r++)wm(t,e[r],n)}}a.ml=function(t){return Lm(this,this,t)};function Lm(t,e,n){if(n(e))return e;if(e instanceof Y){e=e.R.s;for(var i=e.length,r=0;r<i;r++){var s=Lm(t,e[r],n);if(s!==null)return s}}return null}a.eb=function(t){if(this.name===t)return this;var e=this.R.s,n=e.length;this.sh===null&&this.itemTemplateMap===null||(n=ml(this));for(var i=0;i<n;i++){var r=e[i];if(r instanceof Y){var s=r.eb(t);if(s!==null)return s}if(r.name===t)return r}return null};function Mm(t){t=t.R.s;for(var e=t.length,n=0,i=0;i<e;i++){var r=t[i];r instanceof Y?n=Math.max(n,Mm(r)):r instanceof dt&&(n=Math.max(n,r.Xf/2*r.strokeMiterLimit*r.qf()))}return n}a.he=function(){return!(this.type===Y.TableRow||this.type===Y.TableColumn)},a.dc=function(t,e,n){if(this.pickable===!1||(e===void 0&&(e=null),n===void 0&&(n=null),Si(this)))return null;var i=this.naturalBounds,r=1/this.qf(),s=this.he(),h=s?t:Ue(T.allocAt(t.x,t.y),this.transform),u=this.diagram,p=10,d=5;if(u!==null&&(p=u.pl("extraTouchArea"),d=p/2),Di(-(d*r),-(d*r),i.width+p*r,i.height+p*r,h.x,h.y)){if(!this.isAtomic){r=this.R.s;var g=r.length;if(u=T.alloc(),d=(p=this.isClipping&&this.qa===Y.Spot)?this.vb():null,p&&(d.he()?Ue(u.set(t),d.transform):u.set(t),!d.ba(u)))return T.free(u),s||T.free(h),null;for(var c=Go(this);g--;){var y=r[g];if((y.visible||y===c)&&(y.he()?Ue(u.set(t),y.transform):u.set(t),!p||y!==d)){var S=null;if(y instanceof Y?S=y.dc(u,e,n):y.pickable===!0&&y.ba(u)&&(S=y),S!==null&&(e!==null&&(S=e(S)),S!==null&&(n===null||n(S))))return T.free(u),s||T.free(h),S}}T.free(u)}return this.background===null&&this.areaBackground===null?(s||T.free(h),null):(t=Di(0,0,i.width,i.height,h.x,h.y)?this:null,s||T.free(h),t)}return s||T.free(h),null},a.Xh=function(t,e,n,i){if(this.pickable===!1)return!1;e===void 0&&(e=null),n===void 0&&(n=null);var r=this.naturalBounds,s=this.he(),h=s?t:Ue(T.allocAt(t.x,t.y),this.transform);if(r=Di(0,0,r.width,r.height,h.x,h.y),this.type===Y.TableRow||this.type===Y.TableColumn||r){if(!this.isAtomic){for(var u=this.R.s,p=u.length,d=T.alloc(),g=Go(this);p--;){var c=u[p];if(c.visible||c===g){c.he()?Ue(d.set(t),c.transform):d.set(t);var y=c;c=c instanceof Y?c:null,(c!==null?c.Xh(d,e,n,i):y.ba(d))&&y.pickable!==!1&&(e!==null&&(y=e(y)),y===null||n!==null&&!n(y)||i.add(y))}}T.free(d)}return s||T.free(h),r&&(this.background!==null||this.areaBackground!==null)}return s||T.free(h),!1},a.pf=function(t,e,n,i,r,s){if(this.pickable===!1)return!1;e===void 0&&(e=null),n===void 0&&(n=null);var h=s;if(s===void 0&&(h=ct.alloc(),h.reset()),h.multiply(this.transform),this.Rg(t,h))return Qf(this,e,n,r),s===void 0&&ct.free(h),!0;if(this.Qc(t,h)){if(!this.isAtomic)for(var u=Go(this),p=this.R.s,d=p.length;d--;){var g=p[d];if(g.visible||g===u){var c=g.actualBounds,y=this.naturalBounds;c.x>y.width||c.y>y.height||0>c.x+c.width||0>c.y+c.height||(c=g,g=g instanceof Y?g:null,y=ct.alloc(),y.set(h),(g!==null?g.pf(t,e,n,i,r,y):um(c,t,i,y))&&(e!==null&&(c=e(c)),c===null||n!==null&&!n(c)||r.add(c)),ct.free(y))}}return s===void 0&&ct.free(h),i}return s===void 0&&ct.free(h),!1};function Qf(t,e,n,i){for(var r=t.R.s,s=r.length;s--;){var h=r[s];if(h.visible){var u=h.actualBounds,p=t.naturalBounds;u.x>p.width||u.y>p.height||0>u.x+u.width||0>u.y+u.height||(h instanceof Y&&Qf(h,e,n,i),e!==null&&(h=e(h)),h===null||n!==null&&!n(h)||i.add(h))}}}a.bg=function(t,e,n,i,r,s){if(this.pickable===!1)return!1;n===void 0&&(n=null),i===void 0&&(i=null);var h=this.naturalBounds,u=this.he(),p=u?t:Ue(T.allocAt(t.x,t.y),this.transform),d=u?e:Ue(T.allocAt(e.x,e.y),this.transform),g=p.mf(d),c=0<p.x&&p.x<h.width&&0<p.y&&p.y<h.height||ve(p.x,p.y,0,0,0,h.height)<=g||ve(p.x,p.y,0,h.height,h.width,h.height)<=g||ve(p.x,p.y,h.width,h.height,h.width,0)<=g||ve(p.x,p.y,h.width,0,0,0)<=g;if(h=p.qd(0,0)<=g&&p.qd(0,h.height)<=g&&p.qd(h.width,0)<=g&&p.qd(h.width,h.height)<=g,u||(T.free(p),T.free(d)),c){if(!this.isAtomic){p=T.alloc(),d=T.alloc(),g=Go(this);for(var y=this.R.s,S=y.length;S--;){var v=y[S];if(v.visible||v===g){var L=v.actualBounds,N=this.naturalBounds;(!u||!(L.x>N.width||L.y>N.height||0>L.x+L.width||0>L.y+L.height))&&(v.he()?(L=v.transform,Ue(p.set(t),L),Ue(d.set(e),L)):(p.set(t),d.set(e)),L=v,v=v instanceof Y?v:null,(v!==null?v.bg(p,d,n,i,r,s):L.Lw(p,d,r))&&(n!==null&&(L=n(L)),L===null||i!==null&&!i(L)||s.add(L)))}}T.free(p),T.free(d)}return r?c:h}return!1};function bf(t){var e=null;return t instanceof dt&&(e=t.spot1,e===He&&(e=null),t=t.geometry,t!==null&&e===null&&(e=t.spot1)),e===null&&(e=Qe),e}function qf(t){var e=null;return t instanceof dt&&(e=t.spot2,e===He&&(e=null),t=t.geometry,t!==null&&e===null&&(e=t.spot2)),e===null&&(e=ro),e}a.add=function(t){for(var e=[],n=0;n<arguments.length;++n)e[n]=arguments[n];for(n=0;n<e.length;n++)this.Cb(this.R.count,e[n]);return this},a.L=function(t){return this.R.L(t)},a.Cb=function(t,e){e instanceof ot&&X("Cannot add a Part to a Panel: "+e+"; use a Panel instead"),(this===e||this.dg(e))&&(this===e&&X("Cannot make a Panel contain itself: "+this.toString()),X("Cannot make a Panel indirectly contain itself: "+this.toString()+" already contains "+e.toString()));var n=e.panel;if(n!==null&&n!==this&&X("Cannot add a GraphObject that already belongs to another Panel to this Panel: "+e.toString()+", already contained by "+n.toString()+", cannot be shared by this Panel: "+this.toString()),this.qa!==Y.Grid||e instanceof dt||X("Can only add Shapes to a Grid Panel, not: "+e),this.qa!==Y.Graduated||e instanceof dt||e instanceof Gt||X("Can only add Shapes or TextBlocks to a Graduated Panel, not: "+e),e.gi(this),e.yg=null,this.itemArray!==null){var i=e.data;i!==null&&typeof i=="object"&&(this.Wd===null&&(this.Wd=new pt),this.Wd.add(i,e))}var r=this.R;if(i=-1,n===this){for(var s=-1,h=this.R.s,u=h.length,p=0;p<u;p++)if(h[p]===e){s=p;break}if(s!==-1){if(s===t||s+1>=r.count&&t>=r.count)return;r.lb(s),i=s}else X("element "+e.toString()+" has panel "+n.toString()+" but is not contained by it.")}(0>t||t>r.count)&&(t=r.count),r.Cb(t,e),(t===0||e.isPanelMain)&&(this.Kg=null),Co(this)||this.v(),e.v(!1),e.portId!==null?this.Fe=!0:e instanceof Y&&e.Fe===!0&&(this.Fe=!0),this.graduatedIntervals=null,this.uf()||ep(this,e,!1),n=this.part,n!==null&&(n.Dh=null,n.Pf=NaN,this.Fe&&n instanceof _&&(n.Fe=!0),n.Fe&&n instanceof _&&(n.sc=null),r=this.diagram,r!==null&&r.undoManager.isUndoingRedoing||(i!==-1&&n.bb(Me,"elements",this,e,null,i,null),n.bb(me,"elements",this,null,e,null,t)))};function tg(t,e){t.o=e?t.o|16777216:t.o&-16777217}a.remove=function(t){for(var e=this.R.s,n=e.length,i=-1,r=0;r<n;r++)if(e[r]===t){i=r;break}i!==-1&&this.kc(i,!0)},a.lb=function(t){0<=t&&this.kc(t,!0)},a.kc=function(t,e){var n=this.R,i=n.L(t);if(i.yg=null,i.gi(null),this.Wd!==null){var r=i.data;typeof r=="object"&&this.Wd.remove(r)}n.lb(t),bn(this,!1),this.v(),this.Kg===i&&(this.Kg=null),this.graduatedIntervals=null;var s=this.part;s!==null&&(s.Dh=null,s.Pf=NaN,s.Qb(),s instanceof _&&(i instanceof Y?i.Ql(i,function(h,u){Lg(s,u,e)}):Lg(s,i,e)),n=this.diagram,n!==null&&n.undoManager.isUndoingRedoing||s.bb(Me,"elements",this,i,null,t,null))},Y.prototype.getRowDefinition=function(t){0>t&&Rt(t,">= 0",Y,"getRowDefinition:idx"),t=Math.round(t);var e=this.rowDefs;if(e[t]===void 0){var n=new ye;n.gi(this),n.isRow=!0,n.index=t,e[t]=n,this.bb(me,"rowdefs",this,null,n,null,t)}return e[t]},Y.prototype.Gz=function(t){if(0>t&&Rt(t,">= 0",Y,"removeRowDefinition:idx"),this.rowCount!==0){t=Math.round(t);var e=this.rowDefs,n=e[t];if(n){e[t]=void 0;for(var i=e.length-1;0<=i&&e[i--]===void 0;)e.length--;this.bb(Me,"rowdefs",this,n,null,t,null),this.v()}}};function km(t,e,n){var i=t.rowDefs;if(!(0>e)){if(i[e]=n instanceof ye?n:void 0,!n)for(e=i.length-1;0<=e&&i[e--]===void 0;)i.length--;t.v()}}Y.prototype.getColumnDefinition=function(t){0>t&&Rt(t,">= 0",Y,"getColumnDefinition:idx"),t=Math.round(t);var e=this.colDefs;if(e[t]===void 0){var n=new ye;n.gi(this),n.isRow=!1,n.index=t,e[t]=n,this.bb(me,"coldefs",this,null,n,null,t)}return e[t]},a=Y.prototype,a.Bz=function(t){if(0>t&&Rt(t,">= 0",Y,"removeColumnDefinition:idx"),this.columnCount!==0){t=Math.round(t);var e=this.colDefs,n=e[t];if(n){e[t]=void 0;for(var i=e.length-1;0<=i&&e[i--]===void 0;)e.length--;this.bb(Me,"coldefs",this,n,null,t,null),this.v()}}};function Nm(t,e,n){var i=t.colDefs;if(!(0>e)){if(i[e]=n instanceof ye?n:void 0,!n)for(e=i.length-1;0<=e&&i[e--]===void 0;)i.length--;t.v()}}a.Iy=function(t){if(0>t||this.type!==Y.Table||this.rowCount===0)return-1;for(var e=0,n=this.rowDefs,i=n.length,r=this.topIndex;r<i;r++){var s=n[r];if(s!==void 0&&(e+=s.total,t<e))break}return r},a.Ay=function(t){if(0>t||this.type!==Y.Table||this.columnCount===0)return-1;for(var e=0,n=this.colDefs,i=n.length,r=this.leftIndex;r<i;r++){var s=n[r];if(s!==void 0&&(e+=s.total,t<e))break}return r},a.Zy=function(t,e){if(e===void 0&&(e=new T(NaN,NaN)),this.type!==Y.Graduated)return e.h(NaN,NaN),e;t=Math.min(Math.max(t,this.graduatedMin),this.graduatedMax);var n=this.vb();return n.geometry.pu((t-this.graduatedMin)/this.graduatedRange,e),n.transform.Ea(e)},a.$y=function(t){if(this.type!==Y.Graduated)return NaN;var e=this.vb();return e.transform.Gd(t),e.geometry.Pw(t)*this.graduatedRange+this.graduatedMin};function Tm(t){return t=t.allBindings,t!==null&&t._isFrozen}function ui(t){var e=t.allBindings;if(e===null)t.data!==null&&X("Template cannot have .data be non-null: "+t),t.allBindings=e=new Q;else if(e._isFrozen)return;var n=new Q;tg(t,!1),t.Ql(t,function(d,g){g.dh();var c=g.localBindings;if(c!==null)for(Rf(g,!1),c=c.iterator;c.next();){var y=c.value;y.mode===El&&Rf(g,!0);var S=y.sourceName;S!==null&&(S==="/"&&tg(d,!0),S=Yx(y,d,g),S!==null&&(n.add(S),S.srcBindings===null&&(S.srcBindings=new Q),S.srcBindings.add(y))),e.add(y)}if(g instanceof Y&&g.type===Y.Table){if(0<g.rowCount){for(d=g.rowDefs,c=d.length,y=0;y<c;y++)if(S=d[y],S!==void 0&&S.Rd!==null)for(var v=S.Rd.iterator;v.next();){var L=v.value;L.pd=S,L.Nn=2,L.bl=S.index,e.add(L)}}if(0<g.columnCount){for(g=g.colDefs,d=g.length,c=0;c<d;c++)if(y=g[c],y!==void 0&&y.Rd!==null)for(S=y.Rd.iterator;S.next();)v=S.value,v.pd=y,v.Nn=1,v.bl=y.index,e.add(v)}}});for(var i=n.iterator;i.next();){var r=i.value;if(r.srcBindings!==null){Rf(r,!0);for(var s=r.srcBindings.iterator;s.next();){var h=s.value;r.localBindings===null&&(r.localBindings=new Q),r.localBindings.add(h)}}r.srcBindings=null}for(i=e.iterator;i.next();)if(r=i.value,s=r.pd,s!==null){r.pd=null;var u=r.targetProperty,p=u.indexOf(".");0<p&&s instanceof Y&&(h=u.substring(0,p),u=u.substr(p+1),p=s.eb(h),p!==null?(s=p,r.targetProperty=u):Ve('Warning: unable to find GraphObject named "'+h+'" for Binding: '+r.toString())),s instanceof ye?(h=$e(s.panel),r.li=h===void 0?-1:h,s.panel.bindingId=r.li):s instanceof nt?(h=$e(s),r.li=h===void 0?-1:h,s.bindingId=r.li):X("Unknown type of binding target: "+s)}e.freeze(),t instanceof ot&&t.Rc()&&t.Ta()}a.ny=function(t){t===void 0&&(t=!1);var e=this.copy();return lv(e,function(n){n instanceof Y&&(n.allBindings=null,n.qb=null);var i=n.localBindings;i!==null&&(n.localBindings=null,i.each(function(r){n.bind(r.copy())})),i=n.animationTriggers,i!==null&&(n.animationTriggers=null,i.each(function(r){n.dv(r.value.copy())}))}),t&&ui(e),e},a.Ja=function(t){var e=this.allBindings;if(e!==null)for(t===void 0&&(t=""),e=e.iterator;e.next();){var n=e.value,i=n.sourceProperty;if((t===""||i===""||i===t)&&(i=n.targetProperty,n.converter!==null||i!=="")){i=this.data;var r=n.sourceName;if(r!==null){if(r==="")i=this;else if(r==="/")i=this;else if(r===".")i=this;else if(r==="..")i=this;else if(i=this.eb(r),i===null)continue}else if(n.isToModel)if(i=this.diagram,i!==null)i=i.model.modelData;else continue;var s=this,h=n.li;if(h!==-1){if(s=this.zr(h),s===null)continue}else n.pd!==null&&(s=n.pd);if(r==="/"?i=s.part:r==="."?i=s:r===".."&&(i=s.panel),r=n.Nn,r!==0){if(!(s instanceof Y))continue;r===1?s=s.getColumnDefinition(n.bl):r===2&&(s=s.getRowDefinition(n.bl))}s!==void 0&&n.gv(s,i)}}},a.Kw=function(t){return t==null||this.Wd===null?null:this.Wd.I(t)};function uv(t,e){t=t.R.s;for(var n=t.length,i=e.length,r=0,s=null;r<n&&(s=t[r],!(s instanceof Y&&s.data!==null));)r++,s=t[r];if(n-r!==i)return!0;if(s===null)return 0<i;for(var h=0;r<n&&h<i;){if(s=t[r],!(s instanceof Y)||s.data!==e[h])return!0;r++,h++}return!1}function ml(t){if(t.type===Y.Spot||t.type===Y.Auto)return Math.min(t.R.length,1);if(t.type===Y.Link){t=t.R;for(var e=t.length,n=0;n<e;n++){var i=t.L(n);if(!(i instanceof dt&&i.isPanelMain))break}return n}return t.type===Y.Table&&0<t.R.length&&(t=t.R.L(0),t.isPanelMain&&t instanceof Y&&(t.type===Y.TableRow||t.type===Y.TableColumn))?1:0}a.Lu=function(){for(var t=ml(this);this.R.length>t;)this.kc(this.R.length-1,!1);Cm(this,this.itemArray)};function Cm(t,e){var n=ml(t);if(e===null||e.length===0)for(;t.R.length>n;)t.kc(t.R.length-1,!1);else if(t.R.length<=n){n=e.length;for(var i=0;i<n;i++)tp(t,e[i],i,!0)}else{i=n;for(var r=0;r<e.length;r++,i++){var s=e[r],h=i<t.R.length?t.R.L(i):null;if(h instanceof Y){if(h.data!==s){var u=ng(t,h.data),p=ng(t,s),d=p!==u;d||(u=ig(t,u),d=ig(t,p)!==u),d?(t.kc(i,!1),tp(t,s,r,!1)):h.data=s}}else tp(t,s,r,!1)}for(;i<t.R.length;)t.kc(i,!1);t.Kg=null,eg(t,n,0),Co(t)||t.v(),t.graduatedIntervals=null,t.uf()||ep(t,t,!1),e=t.part,e!==null&&(e.Dh=null,e.Pf=NaN,t.Fe&&e instanceof _&&(e.Fe=!0),e.Fe&&e instanceof _&&(e.sc=null))}}function tp(t,e,n,i){if(!(e==null||0>n)){var r=ng(t,e);if(r=ig(t,r),r!==null){if(ui(r),r=r.copy(),(r.o&16777216)!==0){var s=t.Tg();s!==null&&tg(s,!0)}typeof e=="object"&&(t.Wd===null&&(t.Wd=new pt),t.Wd.add(e,r)),s=n+ml(t),t.Cb(s,r),i&&(r.qb=e,eg(t,s,n),r.qb=null),r.data=e}}}function eg(t,e,n){for(t=t.R;e<t.length;){var i=t.L(e);if(i instanceof Y){var r=e,s=n;i.type===Y.TableRow?i.row=r:i.type===Y.TableColumn&&(i.column=r),i.itemIndex=s}e++,n++}}function ng(t,e){if(e===null)return"";if(t=t.itemCategoryProperty,typeof t=="function")t=t(e);else if(typeof t=="string"&&typeof e=="object"){if(t==="")return"";t=ee(e,t)}else return"";if(t===void 0)return"";if(typeof t=="string")return t;X("Panel.getCategoryForItemData found a non-string category for "+e+": "+t)}function ig(t,e){var n=t.itemTemplateMap,i=null;return n!==null&&(i=n.I(e)),i===null&&(n!==null&&(i=n.I("")),i===null&&(Fm||(Fm=!0,Ve('No item template Panel found for category "'+e+'" on '+t),Ve("  Using default item template."),t=new Y,e=new Gt,e.bind(new ie("text","",Kn)),t.add(e),Bm=t),i=Bm)),i}function ep(t,e,n){var i=e.enabledChanged;if(i!==null&&i(e,n),e instanceof Y){e=e.R.s,i=e.length;for(var r=0;r<i;r++){var s=e[r];n&&s instanceof Y&&!s.isEnabled||ep(t,s,n)}}}function Qi(t,e){e.name=t,Pi.add(t,e)}Z.Object.defineProperties(Y.prototype,{type:{get:function(){return this.qa},set:function(t){var e=this.qa;e!==t&&(this.qa=t,this.isAtomic=this.qa===Y.Grid,this.v(),this.g("type",e,t))}},elements:{get:function(){return this.R.iterator}},naturalBounds:{get:function(){return this.ac}},padding:{get:function(){return this.ub},set:function(t){typeof t=="number"?(0>t&&Rt(t,">= 0",Y,"padding"),t=new Ft(t)):(0>t.left&&Rt(t.left,">= 0",Y,"padding:value.left"),0>t.right&&Rt(t.right,">= 0",Y,"padding:value.right"),0>t.top&&Rt(t.top,">= 0",Y,"padding:value.top"),0>t.bottom&&Rt(t.bottom,">= 0",Y,"padding:value.bottom"));var e=this.ub;e.C(t)||(this.ub=t=t.J(),this.v(),this.g("padding",e,t))}},defaultAlignment:{get:function(){return this.rm},set:function(t){var e=this.rm;e.C(t)||(this.rm=t=t.J(),this.v(),this.g("defaultAlignment",e,t))}},defaultStretch:{get:function(){return this.Hf},set:function(t){var e=this.Hf;e!==t&&(this.Hf=t,this.v(),this.g("defaultStretch",e,t))}},defaultSeparatorPadding:{get:function(){return this.T!==null?this.T.kp:Sa},set:function(t){typeof t=="number"&&(t=new Ft(t));var e=this.defaultSeparatorPadding;e.C(t)||(t=t.J(),this.T===null&&(this.T=new ti),this.T.kp=t,this.v(),this.g("defaultSeparatorPadding",e,t))}},defaultRowSeparatorStroke:{get:function(){return this.T!==null?this.T.ga:null},set:function(t){var e=this.defaultRowSeparatorStroke;e!==t&&(t===null||typeof t=="string"||t instanceof kt)&&(t instanceof kt&&t.freeze(),this.T===null&&(this.T=new ti),this.T.ga=t,this.N(),this.g("defaultRowSeparatorStroke",e,t))}},defaultRowSeparatorStrokeWidth:{get:function(){return this.T!==null?this.T.Fa:1},set:function(t){var e=this.defaultRowSeparatorStrokeWidth;e!==t&&isFinite(t)&&0<=t&&(this.T===null&&(this.T=new ti),this.T.Fa=t,this.v(),this.g("defaultRowSeparatorStrokeWidth",e,t))}},defaultRowSeparatorDashArray:{get:function(){return this.T!==null?this.T.W:null},set:function(t){var e=this.defaultRowSeparatorDashArray;if(e!==t){if(t!==null){for(var n=t.length,i=0,r=0;r<n;r++){var s=t[r];typeof s=="number"&&0<=s&&isFinite(s)||X("defaultRowSeparatorDashArray value "+s+" at index "+r+" must be a positive number or zero."),i+=s}if(i===0){if(e===null)return;t=null}}this.T===null&&(this.T=new ti),this.T.W=t,this.N(),this.g("defaultRowSeparatorDashArray",e,t)}}},defaultColumnSeparatorStroke:{get:function(){return this.T!==null?this.T.u:null},set:function(t){var e=this.defaultColumnSeparatorStroke;e!==t&&(t===null||typeof t=="string"||t instanceof kt)&&(t instanceof kt&&t.freeze(),this.T===null&&(this.T=new ti),this.T.u=t,this.N(),this.g("defaultColumnSeparatorStroke",e,t))}},defaultColumnSeparatorStrokeWidth:{get:function(){return this.T!==null?this.T.F:1},set:function(t){var e=this.defaultColumnSeparatorStrokeWidth;e!==t&&isFinite(t)&&0<=t&&(this.T===null&&(this.T=new ti),this.T.F=t,this.v(),this.g("defaultColumnSeparatorStrokeWidth",e,t))}},defaultColumnSeparatorDashArray:{get:function(){return this.T!==null?this.T.m:null},set:function(t){var e=this.defaultColumnSeparatorDashArray;if(e!==t){if(t!==null){for(var n=t.length,i=0,r=0;r<n;r++){var s=t[r];typeof s=="number"&&0<=s&&isFinite(s)||X("defaultColumnSeparatorDashArray value "+s+" at index "+r+" must be a positive number or zero."),i+=s}if(i===0){if(e===null)return;t=null}}this.T===null&&(this.T=new ti),this.T.m=t,this.N(),this.g("defaultColumnSeparatorDashArray",e,t)}}},inRowsCols:{get:function(){return this.T!==null?this.T.mb:null},set:function(t){this.T===null&&(this.T=new ti),this.T.mb=t}},viewboxStretch:{get:function(){return this.Rn},set:function(t){var e=this.Rn;e!==t&&(this.Rn=t,this.v(),this.g("viewboxStretch",e,t))}},gridCellSize:{get:function(){return this.Gm},set:function(t){var e=this.Gm;if(!e.C(t)){t.w()&&t.width!==0&&t.height!==0||X("Invalid Panel.gridCellSize: "+t),this.Gm=t.J();var n=this.diagram;n!==null&&this===n.grid&&Qo(n),this.N(),this.g("gridCellSize",e,t)}}},gridOrigin:{get:function(){return this.Hm},set:function(t){var e=this.Hm;if(!e.C(t)){t.w()||X("Invalid Panel.gridOrigin: "+t),this.Hm=t.J();var n=this.diagram;n!==null&&this===n.grid&&Qo(n),this.N(),this.g("gridOrigin",e,t)}}},graduatedMin:{get:function(){return this.oa!==null?this.oa.Ep:0},set:function(t){var e=this.graduatedMin;e!==t&&(this.oa===null&&(this.oa=new Oo),this.oa.Ep=t,this.v(),this.g("graduatedMin",e,t),Xs(this)&&(t=this.part,t!==null&&ps(this,t,"graduatedRange")))}},graduatedMax:{get:function(){return this.oa!==null?this.oa.F:100},set:function(t){var e=this.graduatedMax;e!==t&&(this.oa===null&&(this.oa=new Oo),this.oa.F=t,this.v(),this.g("graduatedMax",e,t),Xs(this)&&(t=this.part,t!==null&&ps(this,t,"graduatedRange")))}},graduatedRange:{get:function(){return this.graduatedMax-this.graduatedMin}},graduatedTickUnit:{get:function(){return this.oa!==null?this.oa.ga:10},set:function(t){var e=this.graduatedTickUnit;e!==t&&0<t&&(this.oa===null&&(this.oa=new Oo),this.oa.ga=t,this.v(),this.g("graduatedTickUnit",e,t))}},graduatedTickBase:{get:function(){return this.oa!==null?this.oa.W:0},set:function(t){var e=this.graduatedTickBase;e!==t&&(this.oa===null&&(this.oa=new Oo),this.oa.W=t,this.v(),this.g("graduatedTickBase",e,t))}},graduatedMarks:{get:function(){return this.oa!==null?this.oa.u:null},set:function(t){this.oa!==null?this.oa.u=t:t!==null&&(this.oa=new Oo,this.oa.u=t)}},graduatedBounds:{get:function(){return this.oa!==null?this.oa.j:null},set:function(t){this.oa!==null?this.oa.j=t:t!==null&&(this.oa=new Oo,this.oa.j=t)}},graduatedIntervals:{get:function(){return this.oa!==null?this.oa.m:null},set:function(t){this.oa!==null?this.oa.m=t:t!==null&&(this.oa=new Oo,this.oa.m=t)}},temporaryTextBlock:{get:function(){return this.oa!==null?this.oa.Lh:null},set:function(t){this.oa!==null?this.oa.Lh=t:t!==null&&(this.oa=new Oo,this.oa.Lh=t)}},panelLayoutState:{get:function(){return this.F},set:function(t){this.F=t}},Fe:{get:function(){return(this.o&8388608)!==0},set:function(t){(this.o&8388608)!==0!==t&&(this.o^=8388608)}},rowDefs:{get:function(){return this.T===null&&(this.T=new ti),this.T.Hc}},rowCount:{get:function(){return this.T===null?0:this.rowDefs.length}},colDefs:{get:function(){return this.T===null&&(this.T=new ti),this.T.Gc}},columnCount:{get:function(){return this.T===null?0:this.colDefs.length}},rowSizing:{get:function(){return this.T!==null?this.T.nb:ip},set:function(t){var e=this.rowSizing;e!==t&&(this.T===null&&(this.T=new ti),this.T.nb=t,this.v(),this.g("rowSizing",e,t))}},columnSizing:{get:function(){return this.T!==null?this.T.j:ip},set:function(t){var e=this.columnSizing;e!==t&&(this.T===null&&(this.T=new ti),this.T.j=t,this.v(),this.g("columnSizing",e,t))}},topIndex:{get:function(){return this.T!==null?this.T.Db:0},set:function(t){var e=this.topIndex;e!==t&&((!isFinite(t)||0>t)&&X("Panel.topIndex must be greater than zero and a real number, not: "+t),this.T===null&&(this.T=new ti),this.T.Db=t,this.v(),this.g("topIndex",e,t))}},leftIndex:{get:function(){return this.T!==null?this.T.gb:0},set:function(t){var e=this.leftIndex;e!==t&&((!isFinite(t)||0>t)&&X("Panel.leftIndex must be greater than zero and a real number, not: "+t),this.T===null&&(this.T=new ti),this.T.gb=t,this.v(),this.g("leftIndex",e,t))}},data:{get:function(){return this.qb},set:function(t){var e=this.qb;if(e!==t){var n=this instanceof ot&&!(this instanceof St);ui(this),this.qb=t;var i=this.diagram;i!==null&&(n?(n=i.partManager,this instanceof U?(e!==null&&n.Oe.remove(e),t!==null&&n.Oe.add(t,this)):this instanceof ot&&(e!==null&&n.Pe.remove(e),t!==null&&n.Pe.add(t,this))):(n=this.panel,n!==null&&n.Wd!==null&&(e!==null&&n.Wd.remove(e),t!==null&&n.Wd.add(t,this)))),this.g("data",e,t),i!==null&&i.undoManager.isUndoingRedoing||t!==null&&this.Ja()}}},itemIndex:{get:function(){return this.Wm},set:function(t){var e=this.Wm;e!==t&&(this.Wm=t,this.g("itemIndex",e,t))}},allBindings:{get:function(){return this.A!==null?this.A.mb:null},set:function(t){this.localBindings!==t&&(this.A===null&&(this.A=new Us),this.A.mb=t)}},itemArray:{get:function(){return this.sh},set:function(t){var e=this.sh;if(e!==t||t!==null&&uv(this,t)){var n=this.diagram;e!==t&&(n!==null&&e!==null&&Kg(n.partManager,this,n),this.sh=t,n!==null&&t!==null&&Ug(n.partManager,this)),this.g("itemArray",e,t),n!==null&&n.undoManager.isUndoingRedoing||Cm(this,t)}}},itemTemplate:{get:function(){return this.itemTemplateMap===null?null:this.itemTemplateMap.I("")},set:function(t){if(this.itemTemplateMap===null){if(t===null)return;this.itemTemplateMap=new pt}var e=this.itemTemplateMap.I("");e!==t&&((t instanceof ot||t.isPanelMain)&&X("Panel.itemTemplate must not be a Part or be Panel.isPanelMain: "+t),this.itemTemplateMap.add("",t),this.g("itemTemplate",e,t),t=this.diagram,t!==null&&t.undoManager.isUndoingRedoing||this.Lu())}},itemTemplateMap:{get:function(){return this.A!==null?this.A.ie:null},set:function(t){var e=this.itemTemplateMap;if(e!==t){for(var n=t.iterator;n.next(););xe(this),this.A.ie=t,this.g("itemTemplateMap",e,t),t=this.diagram,t!==null&&t.undoManager.isUndoingRedoing||this.Lu()}}},itemCategoryProperty:{get:function(){return this.A!==null?this.A.Hc:"category"},set:function(t){var e=this.itemCategoryProperty;e!==t&&(xe(this),this.A.Hc=t,this.g("itemCategoryProperty",e,t))}},isAtomic:{get:function(){return(this.o&1048576)!==0},set:function(t){var e=(this.o&1048576)!==0;e!==t&&(this.o^=1048576,this.g("isAtomic",e,t))}},isClipping:{get:function(){return(this.o&2097152)!==0},set:function(t){var e=(this.o&2097152)!==0;e!==t&&(this.o^=2097152,this instanceof ut&&(this.hb=null),this.v(),this.g("isClipping",e,t))}},isOpposite:{get:function(){return(this.o&33554432)!==0},set:function(t){var e=(this.o&33554432)!==0;e!==t&&(this.o^=33554432,this.v(),this.g("isOpposite",e,t))}},isEnabled:{get:function(){return(this.o&4194304)!==0},set:function(t){var e=(this.o&4194304)!==0;if(e!==t){var n=this.panel===null||this.panel.uf();this.o^=4194304,this.g("isEnabled",e,t),e=this.diagram,e!==null&&e.undoManager.isUndoingRedoing||n&&ep(this,this,t)}}},alignmentFocusName:{get:function(){return this.Me},set:function(t){var e=this.Me;e!==t&&(this.Me=t,this.v(),this.g("alignmentFocusName",e,t))}}}),Z.Object.defineProperties(Y,{Position:{get:function(){return Pi.I("Position")}},Horizontal:{get:function(){return Pi.I("Horizontal")}},Vertical:{get:function(){return Pi.I("Vertical")}},Spot:{get:function(){return Pi.I("Spot")}},Auto:{get:function(){return Pi.I("Auto")}},Table:{get:function(){return Pi.I("Table")}},Viewbox:{get:function(){return Pi.I("Viewbox")}},TableRow:{get:function(){return Pi.I("TableRow")}},TableColumn:{get:function(){return Pi.I("TableColumn")}},Link:{get:function(){return Pi.I("Link")}},Grid:{get:function(){return Pi.I("Grid")}},Graduated:{get:function(){return Pi.I("Graduated")}}}),Y.prototype.rebuildItemElements=Y.prototype.Lu,Y.prototype.findItemPanelForData=Y.prototype.Kw,Y.prototype.updateTargetBindings=Y.prototype.Ja,Y.prototype.copyTemplate=Y.prototype.ny,Y.prototype.graduatedValueForPoint=Y.prototype.$y,Y.prototype.graduatedPointForValue=Y.prototype.Zy,Y.prototype.findColumnForLocalX=Y.prototype.Ay,Y.prototype.findRowForLocalY=Y.prototype.Iy,Y.prototype.removeColumnDefinition=Y.prototype.Bz,Y.prototype.removeRowDefinition=Y.prototype.Gz,Y.prototype.removeAt=Y.prototype.lb,Y.prototype.remove=Y.prototype.remove,Y.prototype.insertAt=Y.prototype.Cb,Y.prototype.elt=Y.prototype.L,Y.prototype.add=Y.prototype.add,Y.prototype.findObject=Y.prototype.eb,Y.prototype.findInVisualTree=Y.prototype.ml,Y.prototype.walkVisualTreeFrom=Y.prototype.Ql,Y.prototype.findMainElement=Y.prototype.vb;var Fm=!1,Bm=null,Pi=new pt;Y.className="Panel",Y.definePanelLayout=Qi,Qi("Position",new Xu),Qi("Vertical",new Ku),Qi("Auto",new Wu),Qi("Link",new bu);function Oo(){this.Ep=0,this.F=100,this.ga=10,this.W=0,this.Lh=this.m=this.j=this.u=null}Oo.prototype.copy=function(){var t=new Oo;return t.Ep=this.Ep,t.F=this.F,t.ga=this.ga,t.W=this.W,t.u=this.u,t.j=this.j,t.m=this.m,t.Lh=this.Lh,t},Oo.className="GradPanelSettings";function ti(){this.Hc=[],this.Gc=[],this.j=this.nb=ip,this.gb=this.Db=0,this.kp=Sa,this.Fa=1,this.W=this.ga=null,this.F=1,this.mb=this.m=this.u=null}ti.prototype.copy=function(t){for(var e=new ti,n=this.Hc,i=n.length,r=e.Hc,s=0;s<i;s++)if(n[s]!==void 0){var h=n[s].copy();h.gi(t),r[s]=h}for(n=this.Gc,i=n.length,r=e.Gc,s=0;s<i;s++)n[s]!==void 0&&(h=n[s].copy(),h.gi(t),r[s]=h);return e.nb=this.nb,e.j=this.j,e.Db=this.Db,e.gb=this.gb,e.kp=this.kp.J(),e.Fa=this.Fa,e.ga=this.ga,e.W=this.W,e.F=this.F,e.u=this.u,e.m=this.m,e.mb=this.mb,e},ti.className="TablePanelSettings";function ye(){ce(this),this.ye=null,this.Np=!0,this.Xa=0,this.zc=NaN,this.Yi=0,this.Wi=1/0,this.Fb=He,this.pa=this.ic=this.ma=0,this.Rd=null,this.In=og,this.Wf=vi,this.Fn=this.Sf=null,this.Gn=NaN,this.Xb=this.gj=null,this.nm=!1}ye.prototype.copy=function(){var t=new ye;return t.Np=this.Np,t.Xa=this.Xa,t.zc=this.zc,t.Yi=this.Yi,t.Wi=this.Wi,t.Fb=this.Fb,t.ma=this.ma,t.ic=this.ic,t.pa=this.pa,t.Wf=this.Wf,t.In=this.In,this.Sf===null?t.Sf=null:t.Sf=this.Sf.J(),t.Fn=this.Fn,t.Gn=this.Gn,t.gj=null,this.gj!==null&&(t.separatorDashArray=wo(this.separatorDashArray)),t.Xb=this.Xb,t.nm=this.nm,t.Rd=this.Rd,t},a=ye.prototype,a.ob=function(t){t.classType===ye&&(this.sizing=t)},a.toString=function(){return"RowColumnDefinition "+(this.isRow?"(Row ":"(Column ")+this.index+") #"+$e(this)},a.gi=function(t){this.ye=t},a.bo=function(t){var e=0,n=this.ye;if(this.index!==t&&(t=this.separatorStroke,t===null&&n!==null&&(t=this.isRow?n.defaultRowSeparatorStroke:n.defaultColumnSeparatorStroke),t!==null&&(e=this.separatorStrokeWidth,isNaN(e)&&(n!==null?e=this.isRow?n.defaultRowSeparatorStrokeWidth:n.defaultColumnSeparatorStrokeWidth:e=0))),t=this.Sf,t===null)if(n!==null)t=n.defaultSeparatorPadding;else return e;return e+(this.isRow?t.top:t.left)},a.Oc=function(){var t=0,e=this.ye,n=0,i=this.isRow;if(e!==null&&e.type===Y.Table)for(var r=i?e.rowDefs.length:e.colDefs.length,s=0;s<r;s++){var h=i?e.rowDefs[s]:e.colDefs[s];if(h!==void 0&&h.ma!==0){n=h.index;break}}if(this.index!==n&&(n=this.separatorStroke,n===null&&e!==null&&(n=i?e.defaultRowSeparatorStroke:e.defaultColumnSeparatorStroke),n!==null&&(t=this.separatorStrokeWidth,isNaN(t)&&(e!==null?t=i?e.defaultRowSeparatorStrokeWidth:e.defaultColumnSeparatorStrokeWidth:t=0))),i=this.Sf,i===null)if(e!==null)i=e.defaultSeparatorPadding;else return t;return t+(this.isRow?i.top+i.bottom:i.left+i.right)},a.Jb=function(t,e,n){var i=this.ye;if(i!==null&&(i.bb(Ht,t,this,e,n,void 0,void 0),this.Rd!==null&&(e=i.diagram,e!==null&&!e.skipsModelSourceBindings&&(i=i.Tg(),i!==null&&(e=i.data,e!==null)))))for(n=this.Rd.iterator;n.next();)n.value.Mo(this,e,t,i)};function np(t){if(t.sizing===og){var e=t.ye;return t.isRow?e.rowSizing:e.columnSizing}return t.sizing}a.bind=function(t,e,n,i){var r=null;return typeof t=="string"?r=new ie(t,e,n,i):r=t,r.pd=this,t=this.panel,t!==null&&(e=t.Tg(),e!==null&&Tm(e)&&X("Cannot add a Binding to a RowColumnDefinition that is already frozen: "+r+" on "+t)),this.Rd===null&&(this.Rd=new Q),this.Rd.add(r),this},Z.Object.defineProperties(ye.prototype,{panel:{get:function(){return this.ye}},isRow:{get:function(){return this.Np},set:function(t){this.Np=t}},index:{get:function(){return this.Xa},set:function(t){this.Xa=t}},height:{get:function(){return this.zc},set:function(t){var e=this.zc;e!==t&&(0>t&&Rt(t,">= 0",ye,"height"),this.zc=t,this.actual=this.ma,this.panel!==null&&this.panel.v(),this.Jb("height",e,t))}},width:{get:function(){return this.zc},set:function(t){var e=this.zc;e!==t&&(0>t&&Rt(t,">= 0",ye,"width"),this.zc=t,this.actual=this.ma,this.panel!==null&&this.panel.v(),this.Jb("width",e,t))}},minimum:{get:function(){return this.Yi},set:function(t){var e=this.Yi;e!==t&&((0>t||!isFinite(t))&&Rt(t,">= 0",ye,"minimum"),this.Yi=t,this.actual=this.ma,this.panel!==null&&this.panel.v(),this.Jb("minimum",e,t))}},maximum:{get:function(){return this.Wi},set:function(t){var e=this.Wi;e!==t&&(0>t&&Rt(t,">= 0",ye,"maximum"),this.Wi=t,this.actual=this.ma,this.panel!==null&&this.panel.v(),this.Jb("maximum",e,t))}},alignment:{get:function(){return this.Fb},set:function(t){var e=this.Fb;e.C(t)||(this.Fb=t.J(),this.panel!==null&&this.panel.v(),this.Jb("alignment",e,t))}},stretch:{get:function(){return this.Wf},set:function(t){var e=this.Wf;e!==t&&(this.Wf=t,this.panel!==null&&this.panel.v(),this.Jb("stretch",e,t))}},separatorPadding:{get:function(){return this.Sf},set:function(t){typeof t=="number"&&(t=new Ft(t));var e=this.Sf;t!==null&&e!==null&&e.C(t)||(t!==null&&(t=t.J()),this.Sf=t,this.panel!==null&&this.panel.v(),this.Jb("separatorPadding",e,t))}},separatorStroke:{get:function(){return this.Fn},set:function(t){var e=this.Fn;e!==t&&(t!==null&&Ws(t,"RowColumnDefinition.separatorStroke"),t instanceof kt&&t.freeze(),this.Fn=t,this.panel!==null&&this.panel.v(),this.Jb("separatorStroke",e,t))}},separatorStrokeWidth:{get:function(){return this.Gn},set:function(t){var e=this.Gn;e!==t&&(this.Gn=t,this.panel!==null&&this.panel.v(),this.Jb("separatorStrokeWidth",e,t))}},separatorDashArray:{get:function(){return this.gj},set:function(t){var e=this.gj;if(e!==t){if(t!==null){for(var n=t.length,i=0,r=0;r<n;r++){var s=t[r];typeof s=="number"&&0<=s&&isFinite(s)||X("separatorDashArray value "+s+" at index "+r+" must be a positive number or zero."),i+=s}if(i===0){if(e===null)return;t=null}}this.gj=t,this.panel!==null&&this.panel.N(),this.Jb("separatorDashArray",e,t)}}},background:{get:function(){return this.Xb},set:function(t){var e=this.Xb;e!==t&&(t!==null&&Ws(t,"RowColumnDefinition.background"),t instanceof kt&&t.freeze(),this.Xb=t,this.panel!==null&&this.panel.N(),this.Jb("background",e,t))}},coversSeparators:{get:function(){return this.nm},set:function(t){var e=this.nm;e!==t&&(this.nm=t,this.panel!==null&&this.panel.N(),this.Jb("coversSeparators",e,t))}},sizing:{get:function(){return this.In},set:function(t){var e=this.In;e!==t&&(this.In=t,this.panel!==null&&this.panel.v(),this.Jb("sizing",e,t))}},actual:{get:function(){return this.ma},set:function(t){this.ma=isNaN(this.zc)?Math.max(Math.min(this.Wi,t),this.Yi):Math.max(Math.min(this.Wi,this.zc),this.Yi)}},measured:{get:function(){return this.ic},set:function(t){this.ic=t}},total:{get:function(){return this.ma+this.Oc()}},position:{get:function(){return this.pa},set:function(t){this.pa=t}}}),ye.prototype.computeEffectiveSpacing=ye.prototype.Oc,ye.prototype.computeEffectiveSpacingTop=ye.prototype.bo;var og=new J(ye,"Default",0),xl=new J(ye,"None",1),ip=new J(ye,"ProportionalExtra",2);ye.className="RowColumnDefinition",ye.Default=og,ye.None=xl,ye.ProportionalExtra=ip;function dt(t,e){nt.call(this),this.Ed=this.sa=null,this.zm="None",this.Lc=this.rk="black",this.Xf=1,this.Ma=this.Ig=null,this.un=this.tn=NaN,this.fa=null,typeof t=="string"?this.figure=t:t&&Object.assign(this,t),e&&Object.assign(this,e)}z(dt,nt),dt.prototype.cloneProtected=function(t){nt.prototype.cloneProtected.call(this,t),t.sa=this.sa,t.Ed=this.Ed,t.zm=this.zm,t.rk=this.rk,t.Lc=this.Lc,t.Xf=this.Xf,this.Ig!==null&&(t.Ig=wo(this.Ig)),this.Ma!==null&&(t.Ma=this.Ma.hc?this.Ma:this.Ma.copy()),t.tn=this.tn,t.un=this.un,this.fa!==null&&(t.fa=this.fa.copy())};function ms(t){t.Ma===null?t.Ma=new ag:t.Ma.hc&&(t.Ma=t.Ma.copy())}a=dt.prototype,a.dh=function(){nt.prototype.dh.call(this),this.Ma!==null&&(this.Ma.hc=!0)},a.ob=function(t){t===te||t===$i||t===sl||t===vi?this.geometryStretch=t:nt.prototype.ob.call(this,t)},a.toString=function(){return"Shape("+(this.figure!=="None"?this.figure:this.toArrow!=="None"?this.toArrow:this.fromArrow)+")#"+$e(this)};function th(t,e,n,i){var r=n.length;if(!(4>r)){var s=i.measuredBounds,h=Math.max(1,s.width);s=s.height;for(var u=n[0],p=n[1],d,g,c,y,S,v,L=0,N=Yt(),M=2;M<r;M+=2)d=n[M],g=n[M+1],c=d-u,u=g-p,c===0&&(c=.001),y=u/c,S=Math.atan2(u,c),v=Math.sqrt(c*c+u*u),N.push([c,S,y,v]),L+=v,u=d,p=g;u=n[0],p=n[1],c=i.measuredBounds.width,i instanceof dt&&(c-=i.strokeWidth),1>c&&(c=1),r=n=c,d=h/2,g=d!==0,M=0,v=N[M],c=v[0],S=v[1],y=v[2],v=v[3];for(var B=0;.1<=L;){if(B===0&&(g?(r=n,r-=d,L-=d,g=!1):r=n,r===0&&(r=1)),r>L){At(N);return}r>v?(B=r-v,r=v):B=0;var F=Math.sqrt(r*r/(1+y*y));if(0>c&&(F=-F),u+=F,p+=y*F,t.translate(u,p),t.rotate(S),t.translate(-(h/2),-(s/2)),B===0&&i.Uh(t,e),t.translate(h/2,s/2),t.rotate(-S),t.translate(-u,-p),L-=r,v-=r,B!==0){if(M++,M===N.length){At(N);return}v=N[M],c=v[0],S=v[1],y=v[2],v=v[3],r=B}}At(N)}}a.Uh=function(t,e){var n=this.Lc,i=this.rk;if(n!==null||i!==null){var r=this.sa;if(r!==null){t.Nc();var s=this.actualBounds,h=this.naturalBounds;i!==null&&En(this,t,i,!0,!1,h,s);var u=this.part,p=this.Xf;if(n===null||p!==0||u===null||!this.isPanelMain&&u.vb()!==this||(p=u.type===Y.Link&&u instanceof St&&u.category==="Selection"&&u.adornedObject instanceof dt&&u.adornedPart.vb()===u.adornedObject?u.adornedObject.strokeWidth:0),p===0&&(n=null),n!==null&&p!==0&&(En(this,t,n,!1,!1,h,s),t.lineWidth=p,t.lineJoin=this.strokeJoin,t.lineCap=this.strokeCap,t.miterLimit=this.strokeMiterLimit),s=!1,u&&e.Ee("drawShadows")&&(s=u.isShadowed),u=!0,n===null||i!==null&&i!=="transparent"||(u=!1),h=!1,p=this.strokeDashArray,p!==null&&(h=!0,t.yr(p,this.strokeDashOffset)),r.type===K.j)t.beginPath(),t.moveTo(r.startX,r.startY),t.lineTo(r.endX,r.endY),n!==null&&t.ki();else if(r.type===K.u){var d=r.startX;p=r.startY;var g=r.endX,c=r.endY;r=Math.min(d,g);var y=Math.min(p,c);d=Math.abs(g-d),p=Math.abs(c-p),t.beginPath(),t.rect(r,y,d,p),i!==null&&t.nf(i),n!==null&&(u&&s&&Bo(t),(d===0||p===0)&&(t.beginPath(),t.rect(r,y,Math.max(d,.1),Math.max(p,.1))),t.ki(),u&&s&&er(t))}else if(r.type===K.F)d=r.startX,p=r.startY,g=r.endX,c=r.endY,r=Math.abs(g-d)/2,y=Math.abs(c-p)/2,d=Math.min(d,g)+r,p=Math.min(p,c)+y,t.beginPath(),t.moveTo(d,p-y),t.bezierCurveTo(d+O.ig*r,p-y,d+r,p-O.ig*y,d+r,p),t.bezierCurveTo(d+r,p+O.ig*y,d+O.ig*r,p+y,d,p+y),t.bezierCurveTo(d-O.ig*r,p+y,d-r,p+O.ig*y,d-r,p),t.bezierCurveTo(d-r,p-O.ig*y,d-O.ig*r,p-y,d,p-y),t.closePath(),i!==null&&t.nf(i),n!==null&&(u&&s?(Bo(t),t.ki(),er(t)):t.ki());else if(r.type===K.m)for(r=r.figures,p=r.length,y=0;y<p;y++){d=r.s[y],t.beginPath(),t.moveTo(d.startX,d.startY),g=d.segments.s,c=g.length;for(var S=null,v=0;v<c;v++){var L=g[v];switch(L.type){case xi:t.moveTo(L.endX,L.endY);break;case Jt:t.lineTo(L.endX,L.endY);break;case Zn:t.bezierCurveTo(L.point1X,L.point1Y,L.point2X,L.point2Y,L.endX,L.endY);break;case _i:t.quadraticCurveTo(L.point1X,L.point1Y,L.endX,L.endY);break;case pe:if(L.radiusX===L.radiusY){var N=Math.PI/180;t.arc(L.point1X,L.point1Y,L.radiusX,L.startAngle*N,(L.startAngle+L.sweepAngle)*N,0>L.sweepAngle,S!==null?S.endX:d.startX,S!==null?S.endY:d.startY)}else if(S=ko(L,d),N=S.length,N===0)t.lineTo(L.centerX,L.centerY);else for(var M=0;M<N;M++){var B=S[M];M===0&&t.lineTo(B[0],B[1]),t.bezierCurveTo(B[2],B[3],B[4],B[5],B[6],B[7])}break;case Gi:if(M=N=0,S!==null&&S.type===pe){if(S=ko(S,d),B=S.length,B===0){t.lineTo(L.endX,L.endY);break}S=S[B-1]||null,S!==null&&(N=S[6],M=S[7])}else N=S!==null?S.endX:d.startX,M=S!==null?S.endY:d.startY;if(S=ss(L,d,N,M),N=S.length,N===0){t.lineTo(L.endX,L.endY);break}for(M=0;M<N;M++)B=S[M],t.bezierCurveTo(B[2],B[3],B[4],B[5],B[6],B[7]);break;default:X("Segment not of valid type: "+L.type)}L.isClosed&&t.closePath(),S=L}g=d.isFilled,s?d.isShadowed?(g===!0&&i!=="transparent"&&i!==null&&t.nf(i),n!==null&&(g&&u&&Bo(t),t.ki(),g&&u&&er(t))):(Bo(t),g&&i!=="transparent"&&i!==null&&t.nf(i),n!==null&&t.ki(),er(t)):(g&&i!==null&&t.nf(i),n!==null&&t.ki())}if(h&&t.wr(),this.pathPattern!==null){if(n=this.pathPattern,n.measure(1/0,1/0),i=n.measuredBounds,n.arrange(0,0,i.width,i.height),s=this.geometry,t.save(),t.beginPath(),i=Yt(),s.type===K.j)i.push(s.startX),i.push(s.startY),i.push(s.endX),i.push(s.endY),th(t,e,i,n);else if(s.type===K.m)for(s=s.figures.iterator;s.next();){for(u=s.value,i.length=0,i.push(u.startX),i.push(u.startY),h=u.startX,r=u.startY,p=h,y=r,d=u.segments.s,g=d.length,c=0;c<g;c++){switch(v=d[c],v.type){case xi:th(t,e,i,n),i.length=0,i.push(v.endX),i.push(v.endY),h=v.endX,r=v.endY,p=h,y=r;break;case Jt:i.push(v.endX),i.push(v.endY),h=v.endX,r=v.endY;break;case Zn:O.Be(h,r,v.point1X,v.point1Y,v.point2X,v.point2Y,v.endX,v.endY,.5,i),h=v.endX,r=v.endY;break;case _i:O.xo(h,r,v.point1X,v.point1Y,v.endX,v.endY,.5,i),h=v.endX,r=v.endY;break;case pe:if(L=ko(v,u),S=L.length,S===0){i.push(v.centerX),i.push(v.centerY),h=v.centerX,r=v.centerY;break}for(N=0;N<S;N++)M=L[N],O.Be(h,r,M[2],M[3],M[4],M[5],M[6],M[7],.5,i),h=M[6],r=M[7];break;case Gi:if(L=ss(v,u,h,r),S=L.length,S===0){i.push(v.endX),i.push(v.endY),h=v.endX,r=v.endY;break}for(N=0;N<S;N++)M=L[N],O.Be(h,r,M[2],M[3],M[4],M[5],M[6],M[7],.5,i),h=M[6],r=M[7];break;default:X("Segment not of valid type: "+v.type)}v.isClosed&&(i.push(p),i.push(y),th(t,e,i,n))}th(t,e,i,n)}else if(s.type===K.u)i.push(s.startX),i.push(s.startY),i.push(s.endX),i.push(s.startY),i.push(s.endX),i.push(s.endY),i.push(s.startX),i.push(s.endY),i.push(s.startX),i.push(s.startY),th(t,e,i,n);else if(s.type===K.F){if(r=new Fe,r.startX=s.endX,r.startY=(s.startY+s.endY)/2,h=new wt(pe),h.startAngle=0,h.sweepAngle=360,h.centerX=(s.startX+s.endX)/2,h.centerY=(s.startY+s.endY)/2,h.radiusX=Math.abs(s.startX-s.endX)/2,h.radiusY=Math.abs(s.startY-s.endY)/2,r.add(h),s=ko(h,r),u=s.length,u===0)i.push(h.centerX),i.push(h.centerY);else for(h=r.startX,r=r.startY,p=0;p<u;p++)y=s[p],O.Be(h,r,y[2],y[3],y[4],y[5],y[6],y[7],.5,i),h=y[6],r=y[7];th(t,e,i,n)}At(i),t.restore(),t.Mc(!1)}}}},a.ia=function(t,e){if(e===void 0&&(e=new T),t instanceof rt){t.Ec()&&X("getDocumentPoint Spot must be a real, specific Spot, not: "+t.toString());var n=this.naturalBounds,i=this.strokeWidth;e.h(t.x*(n.width+i)-i/2+n.x+t.offsetX,t.y*(n.height+i)-i/2+n.y+t.offsetY)}else e.set(t);return this.de.Ea(e),e},a.$h=function(t){t===void 0&&(t=new E);var e=this.naturalBounds,n=this.de;e=E.allocAt(e.x,e.y,e.width,e.height);var i=this.strokeWidth;return e.vc(i/2,i/2),i=T.allocAt(e.x,e.y).transform(n),t.h(i.x,i.y,0,0),i.h(e.right,e.y).transform(n),De(t,i.x,i.y,0,0),i.h(e.right,e.bottom).transform(n),De(t,i.x,i.y,0,0),i.h(e.x,e.bottom).transform(n),De(t,i.x,i.y,0,0),E.free(e),T.free(i),t},a.Sg=function(t,e){var n=this.geometry;if(n===null||this.fill===null&&this.stroke===null)return!1;var i=n.bounds,r=this.strokeWidth/2;n.type!==K.j||e||(r+=2);var s=E.alloc();if(s.assign(i),s.vc(r+2,r+2),!s.ba(t))return E.free(s),!1;if(i=r+1e-4,n.type===K.j)return this.stroke===null||(i=(n.endX-n.startX)*(t.x-n.startX)+(n.endY-n.startY)*(t.y-n.startY),0>(n.startX-n.endX)*(t.x-n.endX)+(n.startY-n.endY)*(t.y-n.endY)||0>i)?!1:(E.free(s),O.Sb(n.startX,n.startY,n.endX,n.endY,r,t.x,t.y));if(n.type===K.u){e=n.startX;var h=n.startY,u=n.endX;if(n=n.endY,s.x=Math.min(e,u),s.y=Math.min(h,n),s.width=Math.abs(u-e),s.height=Math.abs(n-h),this.fill===null){if(s.vc(-i,-i),s.ba(t))return E.free(s),!1;s.vc(i,i)}return this.stroke!==null&&s.vc(r,r),t=s.ba(t),E.free(s),t}if(n.type===K.F){h=n.startX,r=n.startY,u=n.endX;var p=n.endY;if(n=Math.min(h,u),e=Math.min(r,p),h=Math.abs(u-h)/2,r=Math.abs(p-r)/2,n=t.x-(n+h),e=t.y-(e+r),this.fill===null){if(h-=i,r-=i,0>=h||0>=r||1>=n*n/(h*h)+e*e/(r*r))return E.free(s),!1;h+=i,r+=i}return this.stroke!==null&&(h+=i,r+=i),E.free(s),0>=h||0>=r?!1:1>=n*n/(h*h)+e*e/(r*r)}if(n.type===K.m)return E.free(s),this.fill===null?Zc(n,t.x,t.y,r):Kd(n,t,r,1<this.strokeWidth,e);X("Unknown Geometry type: "+n.type)},a.vl=function(t,e,n,i){var r=this.desiredSize,s=this.Xf;if(t=Math.max(t,0),e=Math.max(e,0),this.Ed!==null)var h=this.geometry.bounds;else{var u=this.figure,p=sg[u];if(p===void 0){var d=O.Le[u];typeof d=="string"&&(d=O.Le[d]),typeof d=="function"?(p=d(null,100,100),sg[u]=p):X("Unsupported Figure: "+u)}h=p.bounds}u=h.width,p=h.height,d=h.width;var g=h.height;switch(zi(this,!0)){case te:i=n=0;break;case ne:d=Math.max(t-s,0),g=Math.max(e-s,0);break;case Re:d=Math.max(t-s,0),i=0;break;case Je:n=0,g=Math.max(e-s,0)}isFinite(r.width)&&(d=r.width),isFinite(r.height)&&(g=r.height),h=this.maxSize;var c=this.minSize;switch(n=Math.max(n-s,c.width),i=Math.max(i-s,c.height),d=Math.min(h.width,d),g=Math.min(h.height,g),d=isFinite(d)?Math.max(n,d):Math.max(u,n),g=isFinite(g)?Math.max(i,g):Math.max(p,i),n=rg(this),n){case te:break;case ne:u=d,p=g;break;case $i:n=Math.min(d/u,g/p),isFinite(n)||(n=1),u*=n,p*=n;break;default:X(n+" is not a valid geometryStretch.")}this.Ed!==null?(u===0&&(u=.001),p===0&&(p=.001),n=this.Ed!==null?this.Ed:this.sa,h=n.bounds,i=u/h.width,h=p/h.height,isFinite(i)||(i=1),isFinite(h)||(h=1),this.sa=i===1&&h===1?n:n.copy().scale(i,h)):this.sa!==null&&O.ca(this.sa.yk,t-s)&&O.ca(this.sa.xk,e-s)||(this.sa=dt.makeGeometry(this,u,p)),h=this.sa.bounds,t===1/0||e===1/0?this.se(h.x-s/2,h.y-s/2,t===0&&u===0?0:h.width+s,e===0&&p===0?0:h.height+s):this.se(-(s/2),-(s/2),d+s,g+s),r.w()?this.ac.h(0,0,r.width,r.height):this.ac.assign(h)};function rg(t){var e=t.geometryStretch;return t.Ed!==null?e===vi?ne:e:e===vi?sg[t.figure].defaultStretch:e}a.Qg=function(t,e,n,i){Ef(this,t,e,n,i)},a.Gr=function(t,e,n){return this.Cj(t.x,t.y,e.x,e.y,n)},a.Cj=function(t,e,n,i,r){var s=this.transform,h=1/(s.m11*s.m22-s.m12*s.m21),u=s.m22*h,p=-s.m12*h,d=-s.m21*h,g=s.m11*h,c=h*(s.m21*s.dy-s.m22*s.dx),y=h*(s.m12*s.dx-s.m11*s.dy);s=t*u+e*d+c,h=t*p+e*g+y,u=n*u+i*d+c,p=n*p+i*g+y,c=this.Xf/2,d=this.sa,d===null&&(this.measure(1/0,1/0),d=this.sa);var S=d.bounds;if(g=!1,d.type===K.j)if(1.5>=this.strokeWidth)g=O.He(d.startX,d.startY,d.endX,d.endY,s,h,u,p,r);else{if(d.startX===d.endX?(i=c,g=0):(e=(d.endY-d.startY)/(d.endX-d.startX),g=c/Math.sqrt(1+e*e),i=g*e),e=Yt(),t=new T,O.He(d.startX+i,d.startY+g,d.endX+i,d.endY+g,s,h,u,p,t)&&e.push(t),t=new T,O.He(d.startX-i,d.startY-g,d.endX-i,d.endY-g,s,h,u,p,t)&&e.push(t),t=new T,O.He(d.startX+i,d.startY+g,d.startX-i,d.startY-g,s,h,u,p,t)&&e.push(t),t=new T,O.He(d.endX+i,d.endY+g,d.endX-i,d.endY-g,s,h,u,p,t)&&e.push(t),u=e.length,u===0)return At(e),!1;for(g=!0,p=1/0,i=0;i<u;i++)t=e[i],n=(t.x-s)*(t.x-s)+(t.y-h)*(t.y-h),n<p&&(p=n,r.x=t.x,r.y=t.y);At(e)}else if(d.type===K.u)g=O.sf(S.x-c,S.y-c,S.x+S.width+c,S.y+S.height+c,s,h,u,p,r);else if(d.type===K.F){e=E.allocAt(S.x,S.y,S.width,S.height).vc(c,c);t:if(e.width===0)g=O.He(e.x,e.y,e.x,e.y+e.height,s,h,u,p,r);else if(e.height===0)g=O.He(e.x,e.y,e.x+e.width,e.y,s,h,u,p,r);else{if(t=e.width/2,d=e.height/2,i=e.x+t,g=e.y+d,n=9999,s!==u&&(n=(h-p)/(s-u)),9999>Math.abs(n)){if(p=h-g-n*(s-i),0>t*t*n*n+d*d-p*p){r.x=NaN,r.y=NaN,g=!1;break t}c=Math.sqrt(t*t*n*n+d*d-p*p),u=(-(t*t*n*p)+t*d*c)/(d*d+t*t*n*n)+i,t=(-(t*t*n*p)-t*d*c)/(d*d+t*t*n*n)+i,d=n*(u-i)+p+g,p=n*(t-i)+p+g,Math.abs((s-u)*(s-u))+Math.abs((h-d)*(h-d))<Math.abs((s-t)*(s-t))+Math.abs((h-p)*(h-p))?(r.x=u,r.y=d):(r.x=t,r.y=p)}else{if(u=d*d,p=s-i,u-=u/(t*t)*p*p,0>u){r.x=NaN,r.y=NaN,g=!1;break t}p=Math.sqrt(u),u=g+p,p=g-p,Math.abs(u-h)<Math.abs(p-h)?(r.x=s,r.y=u):(r.x=s,r.y=p)}g=!0}E.free(e)}else if(d.type===K.m){y=T.alloc();var v=u-s,L=p-h,N=v*v+L*L,M=s,B=h;if(0<N&&S.contains(M,B)&&(y.x=M,y.y=B,this.ba(y)))for(v!==0&&.5>Math.abs(v)?(L*=.5/v,v=.5):L!==0&&.5>Math.abs(L)&&(v*=.5/L,L=.5),M-=v,B-=L;S.contains(M,B);)M-=v,B-=L;for(r.x=u,r.y=p,L=0;L<d.figures.count;L++){var F=d.figures.s[L],j=F.isFilled?M:s,D=F.isFilled?B:h,R=F.segments;S=F.startX,v=F.startY;for(var W=S,tt=v,q=0;q<R.count;q++){var b=R.s[q],V=b.type,ft=b.endX,at=b.endY,Mt=!1;switch(V){case xi:W=ft,tt=at;break;case Jt:Mt=rp(S,v,ft,at,j,D,u,p,y);break;case Zn:Mt=O.Yn(S,v,b.point1X,b.point1Y,b.point2X,b.point2Y,ft,at,j,D,u,p,.6,y);break;case _i:Mt=O.Yn(S,v,S+2/3*(b.point1X-S),v+2/3*(b.point1Y-v),ft+2/3*(b.point1X-ft),at+2/3*(b.point1Y-at),ft,at,j,D,u,p,.6,y);break;case pe:case Gi:V=b.type===pe?ko(b,F):ss(b,F,S,v);var Vt=V.length;if(Vt===0){Mt=rp(S,v,b.type===pe?b.centerX:b.endX,b.type===pe?b.centerY:b.endY,j,D,u,p,y);break}for(at=null,ft=0;ft<Vt;ft++){if(at=V[ft],ft===0&&rp(S,v,at[0],at[1],j,D,u,p,y)){var Se=op(j,D,y,N,r);Se<N&&(N=Se,g=!0)}O.Yn(at[0],at[1],at[2],at[3],at[4],at[5],at[6],at[7],j,D,u,p,.6,y)&&(Se=op(j,D,y,N,r),Se<N&&(N=Se,g=!0))}ft=at[6],at=at[7];break;default:X("Unknown Segment type: "+V)}S=ft,v=at,Mt&&(Mt=op(j,D,y,N,r),Mt<N&&(N=Mt,g=!0)),b.isClosed&&(ft=W,at=tt,rp(S,v,ft,at,j,D,u,p,y)&&(b=op(j,D,y,N,r),b<N&&(N=b,g=!0)))}}s=n-t,h=i-e,u=Math.sqrt(s*s+h*h),u!==0&&(s/=u,h/=u),r.x-=s*c,r.y-=h*c,T.free(y)}else X("Unknown Geometry type: "+d.type);return g?(this.transform.Ea(r),!0):!1};function op(t,e,n,i,r){return t=n.x-t,e=n.y-e,e=t*t+e*e,e<i?(r.x=n.x,r.y=n.y,e):i}function rp(t,e,n,i,r,s,h,u,p){var d=!1,g=(r-h)*(e-i)-(s-u)*(t-n);return g===0?!1:(p.x=((r*u-s*h)*(t-n)-(r-h)*(t*i-e*n))/g,p.y=((r*u-s*h)*(e-i)-(s-u)*(t*i-e*n))/g,(t>n?t-n:n-t)<(e>i?e-i:i-e)?(t=e<i?e:i,e=e<i?i:e,(p.y>t||O.ca(p.y,t))&&(p.y<e||O.ca(p.y,e))&&(d=!0)):(e=t<n?t:n,t=t<n?n:t,(p.x>e||O.ca(p.x,e))&&(p.x<t||O.ca(p.x,t))&&(d=!0)),d)}a.Rg=function(t,e){if(e===void 0)return t.Ce(this.actualBounds);var n=this.sa;n===null&&(this.measure(1/0,1/0),n=this.sa),n=n.bounds;var i=this.strokeWidth/2,r=!1,s=T.alloc();return s.h(n.x-i,n.y-i),t.ba(e.Ea(s))&&(s.h(n.x-i,n.bottom+i),t.ba(e.Ea(s))&&(s.h(n.right+i,n.bottom+i),t.ba(e.Ea(s))&&(s.h(n.right+i,n.y-i),t.ba(e.Ea(s))&&(r=!0)))),T.free(s),r},a.Qc=function(t,e){if(this.Rg(t,e)||e===void 0&&(e=this.transform,t.Ce(this.actualBounds)))return!0;var n=ct.alloc();n.set(e),n.Lr();var i=t.left,r=t.right,s=t.top;t=t.bottom;var h=T.alloc();if(h.h(i,s),n.Ea(h),this.Sg(h,!0)||(h.h(r,s),n.Ea(h),this.Sg(h,!0))||(h.h(i,t),n.Ea(h),this.Sg(h,!0))||(h.h(r,t),n.Ea(h),this.Sg(h,!0)))return T.free(h),!0;var u=T.alloc(),p=T.alloc();return n.set(e),n.Cu(this.transform),n.Lr(),u.x=r,u.y=s,u.transform(n),h.x=i,h.y=s,h.transform(n),e=!1,xs(this,h,u,p)?e=!0:(h.x=r,h.y=t,h.transform(n),xs(this,h,u,p)?e=!0:(u.x=i,u.y=t,u.transform(n),xs(this,h,u,p)?e=!0:(h.x=i,h.y=s,h.transform(n),xs(this,h,u,p)&&(e=!0)))),T.free(h),ct.free(n),T.free(u),T.free(p),e};function xs(t,e,n,i){if(!t.Gr(e,n,i))return!1;t=e.x,e=e.y;var r=n.x,s=n.y;return n=i.x,i=i.y,t===r?(e<s?(t=e,e=s):t=s,i>=t&&i<=e):(t<r?(i=t,t=r):i=r,n>=i&&n<=t)}a.Lw=function(t,e,n){function i(N,M){for(var B=N.length,F=0;F<B;F+=2)if(M.qd(N[F],N[F+1])>r)return!0;return!1}if(n&&this.fill!==null&&this.Sg(t,!0))return!0;var r=t.mf(e),s=r;if(1.5<this.strokeWidth&&(r=this.strokeWidth/2+Math.sqrt(r),r*=r),e=this.sa,e===null&&(this.measure(1/0,1/0),e=this.sa,e===null))return!1;if(!n){var h=e.bounds,u=h.x,p=h.y,d=h.x+h.width;if(h=h.y+h.height,oi(t.x,t.y,u,p)<=r&&oi(t.x,t.y,d,p)<=r&&oi(t.x,t.y,u,h)<=r&&oi(t.x,t.y,d,h)<=r)return!0}if(u=e.startX,p=e.startY,d=e.endX,h=e.endY,e.type===K.j){if(n=(u-d)*(t.x-d)+(p-h)*(t.y-h),ve(t.x,t.y,u,p,d,h)<=(0<=(d-u)*(t.x-u)+(h-p)*(t.y-p)&&0<=n?r:s))return!0}else{if(e.type===K.u)return e=!1,n&&(e=ve(t.x,t.y,u,p,u,h)<=r||ve(t.x,t.y,u,p,d,p)<=r||ve(t.x,t.y,d,p,d,h)<=r||ve(t.x,t.y,u,h,d,h)<=r),e;if(e.type===K.F){e=t.x-(u+d)/2,s=t.y-(p+h)/2;var g=Math.abs(d-u)/2,c=Math.abs(h-p)/2;if(g===0||c===0)return ve(t.x,t.y,u,p,d,h)<=r;if(n){if(t=O.uy(g,c,e,s),t*t<=r)return!0}else return!(oi(e,s,-g,0)>=r||oi(e,s,0,-c)>=r||oi(e,s,0,c)>=r||oi(e,s,g,0)>=r)}else if(e.type===K.m){if(d=e.bounds,s=d.x,u=d.y,p=d.x+d.width,d=d.y+d.height,t.x>p&&t.x<s&&t.y>d&&t.y<u&&ve(t.x,t.y,s,u,s,d)>r&&ve(t.x,t.y,s,u,p,u)>r&&ve(t.x,t.y,p,d,s,d)>r&&ve(t.x,t.y,p,d,p,u)>r)return!1;if(s=Math.sqrt(r),n){if(this.fill===null?Zc(e,t.x,t.y,s):Kd(e,t,s,!0,!1))return!0}else{for(n=e.figures,e=0;e<n.count;e++){if(s=n.s[e],h=s.startX,g=s.startY,t.qd(h,g)>r)return!1;for(u=s.segments.s,p=u.length,d=0;d<p;d++)switch(c=u[d],c.type){case xi:case Jt:if(h=c.endX,g=c.endY,t.qd(h,g)>r)return!1;break;case Zn:var y=Yt();if(O.Be(h,g,c.point1X,c.point1Y,c.point2X,c.point2Y,c.endX,c.endY,.8,y),h=i(y,t),At(y),h||(h=c.endX,g=c.endY,t.qd(h,g)>r))return!1;break;case _i:if(y=Yt(),O.xo(h,g,c.point1X,c.point1Y,c.endX,c.endY,.8,y),h=i(y,t),At(y),h||(h=c.endX,g=c.endY,t.qd(h,g)>r))return!1;break;case pe:case Gi:y=c.type===pe?ko(c,s):ss(c,s,h,g);var S=y.length;if(S===0){if(h=c.type===pe?c.centerX:c.endX,g=c.type===pe?c.centerY:c.endY,t.qd(h,g)>r)return!1;break}c=null;for(var v=Yt(),L=0;L<S;L++)if(c=y[L],v.length=0,O.Be(c[0],c[1],c[2],c[3],c[4],c[5],c[6],c[7],.8,v),i(v,t))return At(v),!1;At(v),c!==null&&(h=c[6],g=c[7]);break;default:X("Unknown Segment type: "+c.type)}}return!0}}}return!1},a.lc=function(){this.sa=null},a.Iv=function(){return this.Xf};function jm(t){var e=t.diagram;e!==null&&e.undoManager.isUndoingRedoing||(t.segmentOrientation=Nl,t.toArrow!=="None"?(t.segmentIndex=-1,t.alignmentFocus=Tn):t.fromArrow!=="None"&&(t.segmentIndex=0,t.alignmentFocus=new rt(1-Tn.x,Tn.y)))}dt.makeGeometry=function(t,e,n){if(t.toArrow!=="None")var i=uo[t.toArrow];else t.fromArrow!=="None"?i=uo[t.fromArrow]:(i=O.Le[t.figure],typeof i=="string"&&(i=O.Le[i]),i===void 0&&X("Unknown Shape.figure: "+t.figure),i=i(t,e,n),i.yk=e,i.xk=n);if(i===null){var r=O.Le.Rectangle;typeof r=="function"&&(i=r(t,e,n))}return i};function Dm(t){var e=uo[t];if(e===void 0){var n=t.toLowerCase();if(n==="none")return"None";if(e=uo[n],e===void 0){var i=null,r;for(r in O.Ul)if(r.toLowerCase()===n){i=r;break}if(i!==null)return t=K.parse(O.Ul[i],!1),uo[i]=t,n!==i&&(uo[n]=i),i}}return typeof e=="string"?e:e instanceof K?t:null}Z.Object.defineProperties(dt.prototype,{geometry:{get:function(){return this.sa!==null?this.sa:this.Ed},set:function(t){var e=this.sa,n=this.Ed;if(e!==t){t!==null?this.Ed=this.sa=t.freeze():this.Ed=this.sa=null;var i=this.part;i!==null&&(i.Pf=NaN),this.v(),this.g("geometry",e||n,t),Xs(this)&&(t=this.part,t!==null&&ps(this,t,"geometryString"))}}},geometryString:{get:function(){return this.geometry===null?"":this.geometry.toString()},set:function(t){t=K.parse(t);var e=t.normalize();this.geometry=t,this.position=t=T.allocAt(-e.x,-e.y),T.free(t)}},isGeometryPositioned:{get:function(){return(this.o&1048576)!==0},set:function(t){var e=(this.o&1048576)!==0;e!==t&&(this.o^=1048576,this.v(),this.g("isGeometryPositioned",e,t))}},fill:{get:function(){return this.rk},set:function(t){var e=this.rk;e!==t&&(t!==null&&Ws(t,"Shape.fill"),t instanceof kt&&t.freeze(),this.rk=t,this.N(),this.g("fill",e,t))}},stroke:{get:function(){return this.Lc},set:function(t){var e=this.Lc;e!==t&&(t!==null&&Ws(t,"Shape.stroke"),t instanceof kt&&t.freeze(),this.Lc=t,this.N(),this.g("stroke",e,t))}},strokeWidth:{get:function(){return this.Xf},set:function(t){var e=this.Xf;if(e!==t)if(0<=t){this.Xf=t,this.v();var n=this.part;n!==null&&(n.Pf=NaN),this.g("strokeWidth",e,t)}else Rt(t,"value >= 0",dt,"strokeWidth:value")}},strokeCap:{get:function(){return this.Ma!==null?this.Ma.Yq:"butt"},set:function(t){var e=this.strokeCap;e!==t&&(typeof t!="string"||t!=="butt"&&t!=="round"&&t!=="square"?Rt(t,'"butt", "round", or "square"',dt,"strokeCap"):(ms(this),this.Ma.Yq=t,this.N(),this.g("strokeCap",e,t)))}},strokeJoin:{get:function(){return this.Ma!==null?this.Ma.Zq:"miter"},set:function(t){var e=this.strokeJoin;e!==t&&(typeof t!="string"||t!=="miter"&&t!=="bevel"&&t!=="round"?Rt(t,'"miter", "bevel", or "round"',dt,"strokeJoin"):(ms(this),this.Ma.Zq=t,this.N(),this.g("strokeJoin",e,t)))}},strokeMiterLimit:{get:function(){return this.Ma!==null?this.Ma.$q:10},set:function(t){var e=this.strokeMiterLimit;if(e!==t&&1<=t){ms(this),this.Ma.$q=t,this.N();var n=this.part;n!==null&&(n.Pf=NaN),this.g("strokeMiterLimit",e,t)}}},strokeDashArray:{get:function(){return this.Ig},set:function(t){var e=this.Ig;if(e!==t){if(t!==null){for(var n=t.length,i=0,r=0;r<n;r++){var s=t[r];0<=s&&isFinite(s)||X("strokeDashArray:value "+s+" at index "+r+" must be a positive number or zero."),i+=s}if(i===0){if(e===null)return;t=null}}this.Ig=t,this.N(),this.g("strokeDashArray",e,t)}}},strokeDashOffset:{get:function(){return this.Ma!==null?this.Ma.hj:0},set:function(t){var e=this.strokeDashOffset;e!==t&&0<=t&&(ms(this),this.Ma.hj=t,this.N(),this.g("strokeDashOffset",e,t))}},figure:{get:function(){return this.zm},set:function(t){var e=this.zm;if(e!==t){var n=O.Le[t];typeof n=="function"?n=t:(n=O.Le[t.toLowerCase()])||X("Unknown Shape.figure: "+t),e!==n&&(t=this.part,t!==null&&(t.Pf=NaN),this.zm=n,this.Ed=null,this.lc(),this.v(),this.g("figure",e,n))}}},toArrow:{get:function(){return this.Ra!==null?this.Ra.W:"None"},set:function(t){var e=this.toArrow;if(t===!0?t="Standard":t===!1&&(t=""),e!==t){var n=Dm(t);n===null?X("Unknown Shape.toArrow: "+t):e!==n&&(this.Ra===null&&(this.Ra=new Gr),this.Ra.W=n,this.Ed=null,this.lc(),this.v(),jm(this),this.g("toArrow",e,n))}}},fromArrow:{get:function(){return this.Ra!==null?this.Ra.j:"None"},set:function(t){var e=this.fromArrow;if(t===!0?t="Standard":t===!1&&(t=""),e!==t){var n=Dm(t);n===null?X("Unknown Shape.fromArrow: "+t):e!==n&&(this.Ra===null&&(this.Ra=new Gr),this.Ra.j=n,this.Ed=null,this.lc(),this.v(),jm(this),this.g("fromArrow",e,n))}}},spot1:{get:function(){return this.Ma!==null?this.Ma.Uf:He},set:function(t){var e=this.spot1;e.C(t)||(t=t.J(),ms(this),this.Ma.Uf=t,this.v(),this.g("spot1",e,t))}},spot2:{get:function(){return this.Ma!==null?this.Ma.Vf:He},set:function(t){var e=this.spot2;e.C(t)||(t=t.J(),ms(this),this.Ma.Vf=t,this.v(),this.g("spot2",e,t))}},parameter1:{get:function(){return this.tn},set:function(t){var e=this.tn;e!==t&&(this.tn=t,this.lc(),this.v(),this.g("parameter1",e,t))}},parameter2:{get:function(){return this.un},set:function(t){var e=this.un;e!==t&&(this.un=t,this.lc(),this.v(),this.g("parameter2",e,t))}},naturalBounds:{get:function(){return this.ac}},pathPattern:{get:function(){return this.Ma!==null?this.Ma.uq:null},set:function(t){var e=this.pathPattern;e!==t&&(ms(this),this.Ma.uq=t,this.N(),this.g("pathPattern",e,t))}},geometryStretch:{get:function(){return this.Ma!==null?this.Ma.Dp:vi},set:function(t){var e=this.geometryStretch;e!==t&&(ms(this),this.Ma.Dp=t,this.v(),this.g("geometryStretch",e,t))}},interval:{get:function(){return this.fa!==null?this.fa.zk:1},set:function(t){var e=this.interval;if(t=Math.round(t),e!==t&&t!==0&&isFinite(t)){this.fa===null&&(this.fa=new po),this.fa.zk=t;var n=this.diagram;n!==null&&this.panel===n.grid&&Qo(n),this.v(),n=this.panel,n!==null&&(n.graduatedIntervals=null),this.g("interval",e,t)}}},graduatedStart:{get:function(){return this.fa!==null?this.fa.u:0},set:function(t){var e=this.graduatedStart;e!==t&&(0>t?t=0:1<t&&(t=1),this.fa===null&&(this.fa=new po),this.fa.u=t,this.v(),this.g("graduatedStart",e,t))}},graduatedEnd:{get:function(){return this.fa!==null?this.fa.j:1},set:function(t){var e=this.graduatedEnd;e!==t&&(0>t?t=0:1<t&&(t=1),this.fa===null&&(this.fa=new po),this.fa.j=t,this.v(),this.g("graduatedEnd",e,t))}},graduatedSkip:{get:function(){return this.fa!==null?this.fa.m:null},set:function(t){var e=this.graduatedSkip;e!==t&&(this.fa===null&&(this.fa=new po),this.fa.m=t,this.v(),this.g("graduatedSkip",e,t))}}}),dt.prototype.intersectsRect=dt.prototype.Qc,dt.prototype.containedInRect=dt.prototype.Rg,dt.prototype.getNearestIntersectionPoint=dt.prototype.Gr,dt.prototype.getDocumentBounds=dt.prototype.$h,dt.prototype.getDocumentPoint=dt.prototype.ia;var uo=new In,sg=new In;dt.className="Shape",dt.getFigureGenerators=function(){var t=new pt,e;for(e in O.Le)e!==e.toLowerCase()&&t.add(e,O.Le[e]);return t.freeze(),t},dt.defineFigureGenerator=function(t,e){var n=t.toLowerCase(),i=O.Le;i[t]=e,i[n]=t},dt.getArrowheadGeometries=function(){var t=new pt;for(i in O.Ul)if(uo[i]===void 0){var e=K.parse(O.Ul[i],!1);uo[i]=e,e=i.toLowerCase(),e!==i&&(uo[e]=i)}for(var n in uo)if(n!==n.toLowerCase()){var i=uo[n];i instanceof K&&t.add(n,i)}return t.freeze(),t},dt.defineArrowheadGeometry=function(t,e){var n=null;typeof e=="string"?n=K.parse(e,!1):n=e,e=t.toLowerCase(),e!=="none"&&t!==e||X("Shape.defineArrowheadGeometry name must not be empty or None or all-lower-case: "+t);var i=uo;i[t]=n,i[e]=t};function ag(){this.hc=!1,this.Yq="butt",this.Zq="miter",this.$q=10,this.hj=0,this.uq=null,this.Dp=vi,this.Vf=this.Uf=He}ag.prototype.copy=function(){var t=new ag;return t.Yq=this.Yq,t.Zq=this.Zq,t.$q=this.$q,t.hj=this.hj,t.uq=this.uq,t.Dp=this.Dp,t.Uf=this.Uf.J(),t.Vf=this.Vf.J(),t};function Gt(t,e){return nt.call(this),up||(cn=yi?new li(null).context:null,up=!0),this.o|=2097152,this.bc="",this.Lc="black",this.oe="13px sans-serif",this.eq=this.yb=this.ad=0,this.da=this.fa=this.em=this.ht=this.it=null,this.th=0,this.Qe=null,this.xe=0,this.ne=this.Vb=this.Ic=null,typeof t=="string"?this.text=t:t&&Object.assign(this,t),e&&Object.assign(this,e),this}z(Gt,nt),Gt.prototype.cloneProtected=function(t){nt.prototype.cloneProtected.call(this,t),t.bc=this.bc,t.Lc=this.Lc,t.oe=this.oe,t.ad=this.ad,t.yb=this.yb,t.eq=this.eq,t.it=this.it,t.ht=this.ht,t.em=this.em,this.fa!==null&&(t.fa=this.fa.copy()),this.da!==null&&(t.da=this.da.hc?this.da:this.da.copy()),t.th=this.th,t.Qe=this.Qe,t.xe=this.xe,t.Ic=this.Ic,t.Vb=this.Vb,t.ne=this.ne};function bi(t){t.da===null?t.da=new gg:t.da.hc&&(t.da=t.da.copy())}a=Gt.prototype,a.dh=function(){nt.prototype.dh.call(this),this.da!==null&&(this.da.hc=!0)};function Gm(t,e){t.o=e.o|6144,t.tb=e.opacity,t.Xb=e.background,t.areaBackground=e.areaBackground,t.Xc=e.desiredSize.J(),t.minSize=e.minSize.J(),t.maxSize=e.maxSize.J(),e.Hb!==null?t.Hb=e.Hb.copy():t.Hb=null,t.wa=e.scale,t.Gb=e.angle,t.stretch=e.stretch,t.vg=e.margin.J(),t.Fb=e.alignment.J(),t.Xj=e.alignmentFocus.J(),t.segmentFraction=e.segmentFraction,t.segmentOffset=e.segmentOffset.J(),t.segmentOrientation=e.segmentOrientation,e.hb!==null&&(t.hb=e.hb.copy()),t.shadowVisible=e.shadowVisible,t.bc=e.bc,t.Lc=e.Lc,t.oe=e.oe,t.fa!==null&&(t.fa=e.fa.copy()),e.da!==null&&(t.da=e.da.hc?e.da:e.da.copy()),t.th=e.th}a.ob=function(t){t.classType===Gt?this.wrap=t:nt.prototype.ob.call(this,t)},a.toString=function(){return 22<this.bc.length?'TextBlock("'+this.bc.substring(0,20)+'"...)':'TextBlock("'+this.bc+'")'},a.v=function(){nt.prototype.v.call(this),this.ht=this.it=null},a.Uh=function(t,e){if(this.Lc!==null&&this.bc.length!==0&&this.oe!==null){var n=this.naturalBounds,i=this.actualBounds,r=n.width,s=n.height,h=vl(this),u=t.textAlign=this.textAlign,p=e.Qm;u==="start"?u=p?"right":"left":u==="end"&&(u=p?"left":"right"),p=this.isUnderline;var d=this.isStrikethrough;En(this,t,this.Lc,!0,!1,n,i),(p||d)&&En(this,t,this.Lc,!1,!1,n,i),i=0,n=!1;var g=this.de,c=g.dx-(h*g.m21+g.dx);g=g.dy-(h*g.m22+g.dy);var y=e.scale;switch(8>(c*c+g*g)*y*y&&(n=!0),e.Yb!==t&&(n=!1),e.Ee("textGreeking")===!1&&(n=!1),e=this.spacingAbove,c=this.spacingBelow,this.flip){case hl:t.translate(r,0),t.scale(-1,1);break;case al:t.translate(0,s),t.scale(1,-1);break;case ll:t.translate(r,s),t.scale(-1,-1)}if(t.Nc(),g=this.ad,y=(e+h+c)*g,s>y&&(i=this.verticalAlignment,i=i.y*s-i.y*y+i.offsetY),g===1&&this.ne!==null)c=this.yb,c>r&&(c=r),this.Th(this.ne,t,0,i+e,r,h,c,n,u,p,d);else if(this.Ic!==null&&this.Vb!==null)for(y=0;y<g;y++){var S=this.Ic[y];S>r&&(S=r),i+=e,this.Th(this.Vb[y],t,0,i,r,h,S,n,u,p,d),i+=h+c}switch(this.flip){case hl:t.scale(-1,1),t.translate(-r,0);break;case al:t.scale(1,-1),t.translate(0,-s);break;case ll:t.scale(-1,-1),t.translate(-r,-s)}}},a.Th=function(t,e,n,i,r,s,h,u,p,d,g){var c=0;u?(p==="left"?c=0:p==="right"?c=r-h:p==="center"&&(c=(r-h)/2),e.fillRect(n+c,i+.25*s,h,1)):(p==="left"?c=0:p==="right"?c=r:p==="center"&&(c=r/2),r=sp!==null?sp(this,s):.75*s,e.fillText(t,n+c,i+r),t=s/20|0,t===0&&(t=1),p==="right"?c-=h:p==="center"&&(c-=h/2),d&&(p=ap!==null?ap(this,s):.8*s,e.beginPath(),e.lineWidth=t,e.moveTo(n+c,i+p),e.lineTo(n+c+h,i+p),e.stroke()),g&&(e.beginPath(),e.lineWidth=t,i=i+s-s/2.2|0,t%2!==0&&(i+=.5),e.moveTo(n+c,i),e.lineTo(n+c+h,i),e.stroke()))},a.vl=function(t,e,n,i){this.th=t;var r=this.oe;cn!==null&&Vm!==r&&(Vm=cn.font=r),this.yb=this.xe=0,this.ne=this.Vb=this.Ic=this.Qe=null;var s;if(isNaN(this.desiredSize.width)){if(r=this.bc.replace(/\r\n/g,`
`).replace(/\r/g,`
`),r.length===0)r=0;else if(this.isMultiline){for(var h=s=0,u=!1;!u;){var p=r.indexOf(`
`,h);p===-1&&(p=r.length,u=!0),h=r.substr(h,p-h),this.formatting===Sl&&(h=h.trim()),s=Math.max(s,wi(h)),h=p+1}r=s}else s=r.indexOf(`
`,0),0<=s&&(r=r.substr(0,s)),r=wi(r);r=Math.min(r,t/this.scale),r=Math.max(8,r)}else r=this.desiredSize.width;if(this.panel!==null&&(r=Math.min(r,this.panel.maxSize.width)),s=Im(this,r),isNaN(this.desiredSize.height)?s=Math.min(s,e/this.scale):s=this.desiredSize.height,u=s,this.yb!==0&&this.Ic!==null&&this.Vb!==null&&this.overflow===hp&&(e=this.oe,e=this.overflow===hp?Om(e):0,p=this.spacingAbove+this.spacingBelow,p=Math.max(0,vl(this)+p),u=Math.min(this.maxLines-1,Math.max(Math.floor(u/p+.01)-1,0)),!(u+1>=this.Vb.length))){for(p=this.Vb[u],e=Math.max(1,t-e);wi(p)>e&&1<p.length;)p=p.substr(0,p.length-1);p+=Pl,e=wi(p),this.Vb[u]=p,this.Vb=this.Vb.slice(0,u+1),this.Ic[u]=e,this.Ic=this.Ic.slice(0,u+1),this.xe=this.Vb.length,this.yb=Math.max(this.yb,e),this.ad=this.xe,this.ad===1&&(this.ne=this.Vb[0])}(this.wrap===Am||isNaN(this.desiredSize.width))&&(r=isNaN(t)?this.yb:Math.min(t,this.yb),isNaN(this.desiredSize.width)&&(r=Math.max(8,r))),r=Math.max(n,r),s=Math.max(i,s),$(this.ac,r,s),this.se(0,0,r,s)},a.Qg=function(t,e,n,i){Ef(this,t,e,n,i)};function yl(t,e,n){t.ne===null?(t.ne=e,t.yb=n):((t.Vb===null||t.Ic===null)&&(t.Vb=[],t.Ic=[],t.Vb.push(t.ne),t.Ic.push(t.yb)),t.Vb.push(e),t.Ic.push(n))}function hg(t,e,n,i){var r=t.formatting===Sl;r&&(e=e.trim());var s=0,h=t.oe,u=t.spacingAbove+t.spacingBelow;u=Math.max(0,vl(t)+u);var p=t.overflow===hp?Om(h):0;if(t.ad>=t.maxLines)i!==null&&i.h(0,u);else if(h=e,t.wrap===lg){t.xe=1;var d=wi(e);if(p===0||d<=n)t.yb=Math.max(t.yb,d),yl(t,e,t.yb),i!==null&&i.h(d,u);else{for(s=eh(t,h),h=h.substr(s.length),e=eh(t,h),d=wi(s+e);0<e.length&&d<=n;)s+=e,h=h.substr(e.length),e=eh(t,h),d=s+e,r&&(d=d.trim()),d=wi(d);for(r&&(e=e.trim()),s+=e,n=Math.max(1,n-p);wi(s)>n&&1<s.length;)s=s.substr(0,s.length-1);s+=Pl;var g=wi(s);t.yb=g,yl(t,s,g),i!==null&&i.h(g,u)}}else{for(p=0,h.length===0&&(p=1,yl(t,h,0));0<h.length;){for(e=eh(t,h),h=h.substr(e.length);wi(e)>n;){var c=1;for(d=wi(e.substr(0,c)),g=0;d<=n;)c++,g=d,d=wi(e.substr(0,c));if(c===1){var y=d;s=Math.max(s,d)}else y=g,s=Math.max(s,g);if(c--,1>c&&(c=1),yl(t,e.substr(0,c),y),p++,e=e.substr(c),t.ad+p>t.maxLines)break}for(g=eh(t,h),d=wi(e+g);0<g.length&&d<=n;)e+=g,h=h.substr(g.length),g=eh(t,h),d=e+g,r&&(d=d.trim()),d=wi(d);if(r&&(e=e.trim()),e!==""&&(e[e.length-1]==="\xAD"&&(e=e.substring(0,e.length-1)+"\u2010"),g.length===0?(c=d,s=Math.max(s,d)):(c=g=wi(e),s=Math.max(s,g)),yl(t,e,c),p++,t.ad+p>t.maxLines))break}t.xe=Math.min(t.maxLines,p),t.yb=Math.max(t.yb,s),i!==null&&i.h(t.yb,u*t.xe)}}function eh(t,e){if(t.wrap===zm)return e.substr(0,1);for(var n=e.length,i=0,r=pv;i<n&&!r.test(e.charAt(i));)i++;for(t.formatting===Em&&(n=Math.min(n,i+1));i<n&&r.test(e.charAt(i));)i++;return i>=e.length?e:e.substr(0,i)}function wi(t){return cn===null?8*t.length:cn.measureText(t).width}function vl(t){if(t.Qe!==null)return t.Qe;var e=t.oe;if(cn===null){var n=16;return t.Qe=n}return dg[e]!==void 0&&5e3>Rm?n=dg[e]:(n=1.3*cn.measureText("M").width,dg[e]=n,Rm++),t.Qe=n}function Om(t){if(cn===null)return 6;if(lp[t]!==void 0&&5e3>fg)var e=lp[t];else e=cn.measureText(Pl).width,lp[t]=e,fg++;return e}function Im(t,e){var n=t.bc.replace(/\r\n/g,`
`).replace(/\r/g,`
`),i=t.spacingAbove+t.spacingBelow;if(i=Math.max(0,vl(t)+i),n.length===0)return t.yb=0,t.ad=1,i;if(!t.isMultiline){var r=n.indexOf(`
`,0);0<=r&&(n=n.substr(0,r))}r=0;for(var s=t.ad=0,h,u=!1;!u;){if(h=n.indexOf(`
`,s),h===-1&&(h=n.length,u=!0),s<=h){if(s=n.substr(s,h-s),t.wrap!==lg){t.xe=0;var p=ht.alloc();hg(t,s,e,p),r+=p.height,ht.free(p),t.ad+=t.xe}else hg(t,s,e,null),r+=i,t.ad++;t.ad===t.maxLines&&(u=!0)}s=h+1}return t.eq=r}Z.Object.defineProperties(Gt.prototype,{font:{get:function(){return this.oe},set:function(t){var e=this.oe;e!==t&&(this.oe=t,this.Qe=null,this.v(),this.g("font",e,t))}},text:{get:function(){return this.bc},set:function(t){var e=this.bc;t!=null?t=t.toString():t="",e!==t&&(this.bc=t,this.v(),this.g("text",e,t))}},textAlign:{get:function(){return this.da!==null?this.da.fr:"start"},set:function(t){var e=this.textAlign;e===t||t!=="start"&&t!=="end"&&t!=="left"&&t!=="right"&&t!=="center"||(bi(this),this.da.fr=t,this.N(),this.g("textAlign",e,t))}},flip:{get:function(){return this.da!==null?this.da.Kf:te},set:function(t){var e=this.flip;e!==t&&(bi(this),this.da.Kf=t,this.N(),this.g("flip",e,t))}},verticalAlignment:{get:function(){return this.da!==null?this.da.qr:xu},set:function(t){var e=this.verticalAlignment;e.C(t)||(t=t.J(),bi(this),this.da.qr=t,Ka(this),this.g("verticalAlignment",e,t))}},naturalBounds:{get:function(){if(!this.ac.w()){var t=ht.alloc();hg(this,this.bc,999999,t);var e=t.width;ht.free(t),t=Im(this,e);var n=this.desiredSize;isNaN(n.width)||(e=n.width),isNaN(n.height)||(t=n.height),$(this.ac,e,t)}return this.ac}},isMultiline:{get:function(){return(this.o&2097152)!==0},set:function(t){var e=(this.o&2097152)!==0;e!==t&&(this.o^=2097152,this.v(),this.g("isMultiline",e,t))}},isUnderline:{get:function(){return(this.o&4194304)!==0},set:function(t){var e=(this.o&4194304)!==0;e!==t&&(this.o^=4194304,this.N(),this.g("isUnderline",e,t))}},isStrikethrough:{get:function(){return(this.o&8388608)!==0},set:function(t){var e=(this.o&8388608)!==0;e!==t&&(this.o^=8388608,this.N(),this.g("isStrikethrough",e,t))}},wrap:{get:function(){return this.da!==null?this.da.sr:ug},set:function(t){var e=this.wrap;e!==t&&(bi(this),this.da.sr=t,this.v(),this.g("wrap",e,t))}},overflow:{get:function(){return this.da!==null?this.da.sq:pg},set:function(t){var e=this.overflow;e!==t&&(bi(this),this.da.sq=t,this.v(),this.g("overflow",e,t))}},stroke:{get:function(){return this.Lc},set:function(t){var e=this.Lc;e!==t&&(t!==null&&Ws(t,"TextBlock.stroke"),t instanceof kt&&t.freeze(),this.Lc=t,this.N(),this.g("stroke",e,t))}},lineCount:{get:function(){return this.ad}},lineHeight:{get:function(){return vl(this)}},editable:{get:function(){return(this.o&1048576)!==0},set:function(t){var e=(this.o&1048576)!==0;e!==t&&(this.o^=1048576,this.g("editable",e,t))}},textEditor:{get:function(){return this.da!==null?this.da.hr:null},set:function(t){var e=this.textEditor;e!==t&&(bi(this),this.da.hr=t,this.g("textEditor",e,t))}},errorFunction:{get:function(){return this.da!==null?this.da.vd:null},set:function(t){var e=this.errorFunction;e!==t&&(bi(this),this.da.vd=t,this.g("errorFunction",e,t))}},interval:{get:function(){return this.fa!==null?this.fa.zk:1},set:function(t){var e=this.interval;if(t=Math.round(t),e!==t&&t!==0&&isFinite(t)){this.fa===null&&(this.fa=new po),this.fa.zk=t,this.v();var n=this.panel;n!==null&&(n.graduatedIntervals=null),this.g("interval",e,t)}}},graduatedStart:{get:function(){return this.fa!==null?this.fa.u:0},set:function(t){var e=this.graduatedStart;e!==t&&(0>t?t=0:1<t&&(t=1),this.fa===null&&(this.fa=new po),this.fa.u=t,this.v(),this.g("graduatedStart",e,t))}},graduatedEnd:{get:function(){return this.fa!==null?this.fa.j:1},set:function(t){var e=this.graduatedEnd;e!==t&&(0>t?t=0:1<t&&(t=1),this.fa===null&&(this.fa=new po),this.fa.j=t,this.v(),this.g("graduatedEnd",e,t))}},graduatedFunction:{get:function(){return this.fa!==null?this.fa.F:null},set:function(t){var e=this.graduatedFunction;e!==t&&(this.fa===null&&(this.fa=new po),this.fa.F=t,this.v(),this.g("graduatedFunction",e,t))}},graduatedSkip:{get:function(){return this.fa!==null?this.fa.m:null},set:function(t){var e=this.graduatedSkip;e!==t&&(this.fa===null&&(this.fa=new po),this.fa.m=t,this.v(),this.g("graduatedSkip",e,t))}},textValidation:{get:function(){return this.da!==null?this.da.ij:null},set:function(t){var e=this.textValidation;e!==t&&(bi(this),this.da.ij=t,this.g("textValidation",e,t))}},textEdited:{get:function(){return this.da!==null?this.da.gr:null},set:function(t){var e=this.textEdited;e!==t&&(bi(this),this.da.gr=t,this.g("textEdited",e,t))}},spacingAbove:{get:function(){return this.da!==null?this.da.Uq:0},set:function(t){var e=this.spacingAbove;e!==t&&(bi(this),this.da.Uq=t,this.v(),this.g("spacingAbove",e,t))}},spacingBelow:{get:function(){return this.da!==null?this.da.Vq:0},set:function(t){var e=this.spacingBelow;e!==t&&(bi(this),this.da.Vq=t,this.v(),this.g("spacingBelow",e,t))}},formatting:{get:function(){return this.da!==null?this.da.Ap:Sl},set:function(t){var e=this.formatting;e!==t&&(bi(this),this.da.Ap=t,this.v(),this.g("formatting",e,t))}},maxLines:{get:function(){return this.da!==null?this.da.bq:1/0},set:function(t){var e=this.maxLines;e!==t&&(t=Math.floor(t),0>=t&&Rt(t,"> 0",Gt,"maxLines"),bi(this),this.da.bq=t,this.v(),this.g("maxLines",e,t))}},metrics:{get:function(){return{arrSize:this.Ic!==null?this.Ic:[this.yb],arrText:this.Vb!==null?this.Vb:[this.ne],maxLineWidth:this.yb,fontHeight:this.Qe}}},choices:{get:function(){return this.em},set:function(t){var e=this.em;e!==t&&(this.em=t,this.g("choices",e,t))}}});var sp=null,ap=null,lg=new J(Gt,"None",0),Am=new J(Gt,"WrapFit",1),ug=new J(Gt,"WrapDesiredSize",2),zm=new J(Gt,"WrapBreakAll",3),pg=new J(Gt,"OverflowClip",0),hp=new J(Gt,"OverflowEllipsis",1),Sl=new J(Gt,"FormatTrim",0),Em=new J(Gt,"FormatNone",0),pv=/[ \u200b\u00ad]/,dg=new In,Rm=0,lp=new In,fg=0,Pl="...",Vm="",cn=null,up=!1;Gt.className="TextBlock";function gg(){this.hc=!1,this.vd=null,this.Kf=te,this.Ap=Sl,this.bq=1/0,this.sq=pg,this.Vq=this.Uq=0,this.fr="start",this.ij=this.hr=this.gr=null,this.qr=xu,this.sr=ug}gg.prototype.copy=function(){var t=new gg;return t.vd=this.vd,t.Kf=this.Kf,t.Ap=this.Ap,t.bq=this.bq,t.sq=this.sq,t.Uq=this.Uq,t.Vq=this.Vq,t.fr=this.fr,t.gr=this.gr,t.hr=this.hr,t.ij=this.ij,t.qr=this.qr,t.sr=this.sr,t},Gt.getEllipsis=function(){return Pl},Gt.setEllipsis=function(t){Pl=t,lp=new In,fg=0},Gt.getBaseline=function(){return sp},Gt.setBaseline=function(t){sp=t},Gt.getUnderline=function(){return ap},Gt.setUnderline=function(t){ap=t},Gt.isValidFont=function(t){if(up||(cn=yi?new li(null).context:null,up=!0),cn===null)return!0;var e=cn.font;if(t===e||t==="10px sans-serif")return!0;cn.font="10px sans-serif",cn.font=t;var n=cn.font;if(n!=="10px sans-serif")return cn.font=e,!0;cn.font="19px serif";var i=cn.font;return cn.font=t,n=cn.font,cn.font=e,n!==i},Gt.FormatNone=Em,Gt.FormatTrim=Sl,Gt.None=lg,Gt.OverflowClip=pg,Gt.OverflowEllipsis=hp,Gt.WrapBreakAll=zm,Gt.WrapDesiredSize=ug,Gt.WrapFit=Am;function po(){this.zk=1,this.u=0,this.j=1,this.m=this.F=null}po.prototype.copy=function(){var t=new po;return t.zk=this.zk,t.u=this.u,t.j=this.j,t.F=this.F,t.m=this.m,t},po.className="GradElementSettings";function Pn(t,e){nt.call(this),this.qg=null,this.Kn="",this.Hg=Ac,this.tk=ne,this.Jg=this.vd=null,this.sk=Dt,this.Kf=te,this.al=null,this.Nm=!1,this.Cm=!0,this.Hk=!1,this.Xk=null,typeof t=="string"?this.source=t:t&&Object.assign(this,t),e&&Object.assign(this,e)}var nh;z(Pn,nt),Pn.prototype.cloneProtected=function(t){nt.prototype.cloneProtected.call(this,t),t.Kn=this.Kn,t.element=this.qg,t.Hg=this.Hg.J(),t.tk=this.tk,t.Kf=this.Kf,t.vd=this.vd,t.Jg=this.Jg,t.sk=this.sk.J(),t.Cm=this.Cm,t.Xk=this.Xk},Pn.prototype.ob=function(t){t===te||t===$i||t===sl?this.imageStretch=t:nt.prototype.ob.call(this,t)},Pn.prototype.toString=function(){return"Picture("+this.source+")#"+$e(this)};function ih(t){t===void 0&&(t=""),t!==""?nh[t]&&(delete nh[t],pp--):(nh=new In,pp=0)}function Ym(t,e){e.Kx||(e.Yp=function(n){e.Lp=!0,e.Im=!1;var i=e.ng.copy();if(i!=null){for(i=i.iterator;i.next();){var r=i.value,s=e.getAttribute("src")||"",h=r.zg.I(s);if(h!==null)for(var u=h.length,p=0;p<u;p++)s=h[p],r.wn.add(s),r.Kb(),e.Fm&&(e.At===void 0&&(e.At=n),s.Jg!==null&&s.Jg(s,n))}e.ng.clear()}t.desiredSize.w()||(bn(t,!1),t.v())},e.rp=function(n){e.Im=n;var i=e.ng.copy();if(i!=null){for(i=i.iterator;i.next();){var r=i.value,s=e.getAttribute("src")||"",h=r.zg.I(s);if(h!==null){r=h.length,s=Yt();for(var u=0;u<r;u++)s.push(h[u]);if(e.Fm)for(u=0;u<r;u++)h=s[u],h.vd!==null&&h.vd(h,n);At(s)}}e.ng.clear()}},e.addEventListener("load",e.Yp),e.addEventListener("error",e.rp),e.Kx=!0)}Pn.prototype.zz=function(){if(this.source!==""){ih(this.source);var t=this.source;this.source="",this.source=t}},Pn.prototype.redraw=function(){this.N()},Pn.prototype.Uh=function(t,e){var n=this.qg;if(n!==null){var i=n.getAttribute("src");if(!(n instanceof HTMLImageElement&&(i===null||i==="")||n.Im instanceof Event&&t instanceof gs)){i=this.naturalBounds;var r=0,s=0,h=this.Nm,u=h?+n.width:n.naturalWidth;if(h=h?+n.height:n.naturalHeight,u===void 0&&n.videoWidth&&(u=n.videoWidth),h===void 0&&n.videoHeight&&(h=n.videoHeight),u=u||i.width,h=h||i.height,u!==0&&h!==0){var p=u,d=h;this.sourceRect.w()&&(r=this.Hg.x,s=this.Hg.y,u=this.Hg.width,h=this.Hg.height);var g=u,c=h,y=this.tk,S=this.sk;switch(y){case te:if(this.sourceRect.w())break;g>=i.width&&(r=r+S.offsetX+(g*S.x-i.width*S.x)),c>=i.height&&(s=s+S.offsetY+(c*S.y-i.height*S.y)),u=Math.min(i.width,g),h=Math.min(i.height,c);break;case ne:g=i.width,c=i.height;break;case $i:case sl:y===$i?(y=Math.min(i.height/c,i.width/g),g*=y,c*=y):y===sl&&(y=Math.max(i.height/c,i.width/g),g*=y,c*=y,g>=i.width&&(r=(r+S.offsetX+(g*S.x-i.width*S.x)/g)*u),c>=i.height&&(s=(s+S.offsetY+(c*S.y-i.height*S.y)/c)*h),u*=1/(g/i.width),h*=1/(c/i.height),g=i.width,c=i.height)}y=this.qf()*e.scale;var v=g*y*c*y,L=u*h/v,N=n.__goCache;y=null;var M=dv;if(n.Lp&&N!==void 0&&4<v&&L>M*M)for(N.Sh===null&&(Um(N,4,p,d,n),Um(N,16,p,d,n)),p=N.Sh,d=p.length,v=0;v<d&&p[v].ratio*p[v].ratio<L;v++)y=p[v];if(!e.vm){if(this.al===null)if(this.qg===null)this.al=!1;else{p=new li(null).context;try{p.drawImage(this.qg,0,0)}catch{this.Cm=!1}try{p.getImageData(0,0,1,1).data[3]&&(this.al=!1),this.al=!1}catch{this.al=!0}}if(this.al)return}switch(p=0,g<i.width&&(p=S.offsetX+(i.width*S.x-g*S.x)),d=0,c<i.height&&(d=S.offsetY+(i.height*S.y-c*S.y)),this.flip){case hl:t.translate(Math.min(i.width,g),0),t.scale(-1,1);break;case al:t.translate(0,Math.min(i.height,c)),t.scale(1,-1);break;case ll:t.translate(Math.min(i.width,g),Math.min(i.height,c)),t.scale(-1,-1)}if(t.Nc(),e.Ee("pictureRatioOptimization")&&!e.Oi&&N!==void 0&&y!==null&&y.ratio!==1){t.save(),e=y.ratio;try{t.drawImage(y.source,r/e,s/e,Math.min(y.source.width,u/e),Math.min(y.source.height,h/e),p,d,Math.min(i.width,g),Math.min(i.height,c))}catch{this.Cm=!1}t.restore()}else try{t.drawImage(n,r,s,u,h,p,d,Math.min(i.width,g),Math.min(i.height,c))}catch{this.Cm=!1}switch(this.flip){case hl:t.scale(-1,1),t.translate(-Math.min(i.width,g),0);break;case al:t.scale(1,-1),t.translate(0,-Math.min(i.height,c));break;case ll:t.scale(-1,-1),t.translate(-Math.min(i.width,g),-Math.min(i.height,c))}}}}},Pn.prototype.vl=function(t,e,n,i){var r=this.desiredSize,s=zi(this,!0),h=this.qg,u=this.Nm;(u||!this.Hk&&h&&h.complete)&&(this.Hk=!0),h===null&&(isFinite(r.width)||(t=0),isFinite(r.height)||(e=0)),isFinite(r.width)||s===ne||s===Re?(isFinite(t)||(this.sourceRect.w()?t=this.sourceRect.width:h!==null&&(t=u?+h.width:h.naturalWidth)),n=0):h!==null&&this.Hk!==!1&&(t=this.sourceRect.w()?this.sourceRect.width:u?+h.width:h.naturalWidth),isFinite(r.height)||s===ne||s===Je?(isFinite(e)||(this.sourceRect.w()?e=this.sourceRect.height:h!==null&&(e=u?+h.height:h.naturalHeight)),i=0):h!==null&&this.Hk!==!1&&(e=this.sourceRect.w()?this.sourceRect.height:u?+h.height:h.naturalHeight),isFinite(r.width)&&(t=r.width),isFinite(r.height)&&(e=r.height),r=this.maxSize,s=this.minSize,n=Math.max(n||0,s.width),i=Math.max(i||0,s.height),t=Math.min(r.width,t),e=Math.min(r.height,e),t=Math.max(n,t),e=Math.max(i,e),h===null||h.complete||(isFinite(t)||(t=0),isFinite(e)||(e=0)),$(this.ac,t,e),this.se(0,0,t,e)},Pn.prototype.Qg=function(t,e,n,i){Ef(this,t,e,n,i)},Z.Object.defineProperties(Pn.prototype,{element:{get:function(){return this.qg},set:function(t){var e=this.qg;if(e!==t){this.Nm=t instanceof HTMLCanvasElement;var n=t instanceof HTMLImageElement;t===null||n||t instanceof HTMLVideoElement||this.Nm||X("Picture.element must be an instance of Image, Canvas, or Video, not: "+t);var i=this.diagram;i!==null&&Mf(i,this),this.qg=t,t!==null&&n&&t.ng===void 0&&(t.ng=new H),i!==null&&n&&Lf(i,this),t!==null&&(this.Nm||t.complete===!0?(t.Fm&&(t.Im instanceof Event&&this.vd!==null?this.vd(this,t.Im):t.Lp===!0&&!t.Im&&this.Jg!==null&&t.At&&this.Jg(this,t.At)),t.Lp=!0,this.desiredSize.w()||(bn(this,!1),this.v())):n&&Ym(this,t)),this.g("element",e,t),this.N()}}},source:{get:function(){return this.Kn},set:function(t){var e=this.Kn;if(e!==t){this.Kn=t;var n=nh;if(yi){if(n[t]!==void 0)var i=n[t];else if(t!==""){30<pp&&(ih(),n=nh),i=_e("img"),i.Fm=!0,Ym(this,i);var r=this.Xk;r!==null&&(i.crossOrigin=r(this)),i.src=t,n[t]=i,pp++}this.element=i,i!==null&&i.__goCache===void 0&&(i.__goCache=new Xm),this.v(),this.N()}this.g("source",e,t)}}},sourceCrossOrigin:{get:function(){return this.Xk},set:function(t){if(this.Xk!==t&&(this.Xk=t,this.element!==null)){var e=this.element.getAttribute("src");t===null&&typeof e=="string"?this.element.crossOrigin=null:t!==null&&(this.element.crossOrigin=t(this)),this.element.src=e}}},sourceRect:{get:function(){return this.Hg},set:function(t){var e=this.Hg;e.C(t)||(this.Hg=t=t.J(),this.N(),this.g("sourceRect",e,t))}},imageStretch:{get:function(){return this.tk},set:function(t){var e=this.tk;e!==t&&(this.tk=t,this.N(),this.g("imageStretch",e,t))}},flip:{get:function(){return this.Kf},set:function(t){var e=this.Kf;e!==t&&(this.Kf=t,this.N(),this.g("flip",e,t))}},imageAlignment:{get:function(){return this.sk},set:function(t){var e=this.sk;e.C(t)||(this.sk=t=t.J(),this.N(),this.g("imageAlignment",e,t))}},errorFunction:{get:function(){return this.vd},set:function(t){var e=this.vd;e!==t&&(this.vd=t,this.g("errorFunction",e,t))}},successFunction:{get:function(){return this.Jg},set:function(t){var e=this.Jg;e!==t&&(this.Jg=t,this.g("successFunction",e,t))}},naturalBounds:{get:function(){return this.ac}}}),Pn.prototype.redraw=Pn.prototype.redraw,Pn.prototype.reloadSource=Pn.prototype.zz;var pp=0,dv=4;Pn.className="Picture",nh=new In,Pn.clearCache=ih;function Xm(){this.Sh=null}function Um(t,e,n,i,r){t.Sh===null&&(t.Sh=[]);var s=new li(null),h=s.context,u=1/e;s.width=n/e,s.height=i/e,s.width!==0&&s.height!==0&&(e=new Km(s.Sa,e),n=1,0<t.Sh.length&&(n=t.Sh[t.Sh.length-1],r=n.source,n=n.ratio),h.setTransform(u*n,0,0,u*n,0,0),h.Nc(),h.drawImage(r,0,0),t.Sh.push(e))}Xm.className="PictureCacheArray";function Km(t,e){this.source=t,this.ratio=e}Km.className="PictureCacheInstance";function Js(){this.Dr=new K,this.oc=null}Js.prototype.reset=function(t){t!==null?(t.ja(),this.Dr=t,t.figures.clear()):this.Dr=new K,this.oc=null};function oh(t,e,n,i,r){t.oc=new Fe,t.oc.startX=e,t.oc.startY=n,t.oc.isFilled=i,t.Dr.figures.add(t.oc),r!==void 0&&(t.oc.isShadowed=r)}function fv(t){var e=t.oc.segments.length;0<e&&t.oc.segments.L(e-1).close()}Js.prototype.Ol=function(t){this.oc.isShadowed=t},Js.prototype.moveTo=function(t,e,n){n===void 0&&(n=!1);var i=new wt(xi);i.endX=t,i.endY=e,n&&i.close(),this.oc.segments.add(i)},Js.prototype.lineTo=function(t,e,n){n===void 0&&(n=!1);var i=new wt(Jt);i.endX=t,i.endY=e,n&&i.close(),this.oc.segments.add(i)};function ir(t,e,n,i,r,s,h){var u;u===void 0&&(u=!1);var p=new wt(Zn);p.point1X=e,p.point1Y=n,p.point2X=i,p.point2Y=r,p.endX=s,p.endY=h,u&&p.close(),t.oc.segments.add(p)}function dp(t,e,n,i,r){var s;s===void 0&&(s=!1);var h=new wt(_i);h.point1X=e,h.point1Y=n,h.endX=i,h.endY=r,s&&h.close(),t.oc.segments.add(h)}Js.prototype.arcTo=function(t,e,n,i,r,s,h){s===void 0&&(s=0),h===void 0&&(h=!1);var u=new wt(pe);u.startAngle=t,u.sweepAngle=e,u.centerX=n,u.centerY=i,u.radiusX=r,u.radiusY=s!==0?s:r,h&&u.close(),this.oc.segments.add(u)};function gv(t,e,n,i,r,s,h,u){var p;p===void 0&&(p=!1),e=new wt(Gi,h,u,e,n,i,r,s),p&&e.close(),t.oc.segments.add(e)}function Hm(t){var e=fp;return e!==null?(fp=null,e.reset(t),e):(e=new Js,e.reset(t),e)}var fp=null;Js.className="StreamGeometryContext";function Ze(t,e){var n=t.toLowerCase(),i=O.Le;i[t]=e,i[n]=t}Ze("Rectangle",function(t,e,n){t="r"+e+","+n;var i=O.zf[t];return i!==void 0||(i=new K(K.u),i.endX=e,i.endY=n,O.Af<O.Vl&&(O.zf[t]=i,O.Af++)),i}),Ze("Square",function(t,e,n){t="s"+e+","+n;var i=O.zf[t];return i!==void 0||(i=new K(K.u),i.endX=e,i.endY=n,i.defaultStretch=$i,O.Af<O.Vl&&(O.zf[t]=i,O.Af++)),i}),Ze("RoundedRectangle",function(t,e,n){t=t?t.parameter1:NaN,(isNaN(t)||0>t)&&(t=5),t=Math.min(t,e/3),t=Math.min(t,n/3);var i="rr"+e+","+n+","+t,r=O.zf[i];if(r!==void 0)return r;var s=t*O.ig;return r=new K().add(new Fe(t,0,!0).add(new wt(Jt,e-t,0)).add(new wt(Zn,e,t,e-s,0,e,s)).add(new wt(Jt,e,n-t)).add(new wt(Zn,e-t,n,e,n-s,e-s,n)).add(new wt(Jt,t,n)).add(new wt(Zn,0,n-t,s,n,0,n-s)).add(new wt(Jt,0,t)).add(new wt(Zn,t,0,0,s,s,0).close())),1<s&&(r.spot1=new rt(0,0,s,s),r.spot2=new rt(1,1,-s,-s)),O.Af<O.Vl&&(O.zf[i]=r,O.Af++),r}),Ze("Border","RoundedRectangle"),Ze("Ellipse",function(t,e,n){t="e"+e+","+n;var i=O.zf[t];return i!==void 0||(i=new K(K.F),i.endX=e,i.endY=n,i.spot1=Yd,i.spot2=Xd,O.Af<O.Vl&&(O.zf[t]=i,O.Af++)),i}),Ze("Circle",function(t,e,n){t="c"+e+","+n;var i=O.zf[t];return i!==void 0||(i=new K(K.F),i.endX=e,i.endY=n,i.spot1=Yd,i.spot2=Xd,i.defaultStretch=$i,O.Af<O.Vl&&(O.zf[t]=i,O.Af++)),i}),Ze("TriangleRight",function(t,e,n){return new K().add(new Fe(0,0).add(new wt(Jt,e,.5*n)).add(new wt(Jt,0,n).close())).Pl(0,.25,.5,.75)}),Ze("TriangleDown",function(t,e,n){return new K().add(new Fe(0,0).add(new wt(Jt,e,0)).add(new wt(Jt,.5*e,n).close())).Pl(.25,0,.75,.5)}),Ze("TriangleLeft",function(t,e,n){return new K().add(new Fe(e,n).add(new wt(Jt,0,.5*n)).add(new wt(Jt,e,0).close())).Pl(.5,.25,1,.75)}),Ze("TriangleUp",function(t,e,n){return new K().add(new Fe(e,n).add(new wt(Jt,0,n)).add(new wt(Jt,.5*e,0).close())).Pl(.25,.5,.75,1)}),Ze("Triangle","TriangleUp"),Ze("Diamond",function(t,e,n){return new K().add(new Fe(.5*e,0).add(new wt(Jt,0,.5*n)).add(new wt(Jt,.5*e,n)).add(new wt(Jt,e,.5*n).close())).Pl(.25,.25,.75,.75)}),Ze("LineH",function(t,e,n){return t=new K(K.j),t.startX=0,t.startY=n/2,t.endX=e,t.endY=n/2,t}),Ze("LineV",function(t,e,n){return t=new K(K.j),t.startX=e/2,t.startY=0,t.endX=e/2,t.endY=n,t}),Ze("None","Rectangle"),Ze("BarH","Rectangle"),Ze("BarV","Rectangle"),Ze("MinusLine","LineH"),Ze("PlusLine",function(t,e,n){return new K().add(new Fe(0,n/2,!1).add(new wt(Jt,e,n/2)).add(new wt(xi,e/2,0)).add(new wt(Jt,e/2,n)))}),Ze("XLine",function(t,e,n){return new K().add(new Fe(0,n,!1).add(new wt(Jt,e,0)).add(new wt(xi,0,0)).add(new wt(Jt,e,n)))}),Ze("LineRight",function(t,e,n){return new K().add(new Fe(.25*e,0,!1).add(new wt(Jt,.75*e,.5*n)).add(new wt(Jt,.25*e,n)))}),Ze("LineDown",function(t,e,n){return new K().add(new Fe(0,.25*n,!1).add(new wt(Jt,.5*e,.75*n)).add(new wt(Jt,e,.25*n)))}),Ze("LineLeft",function(t,e,n){return new K().add(new Fe(.75*e,0,!1).add(new wt(Jt,.25*e,.5*n)).add(new wt(Jt,.75*e,n)))}),Ze("LineUp",function(t,e,n){return new K().add(new Fe(0,.75*n,!1).add(new wt(Jt,.5*e,.25*n)).add(new wt(Jt,e,.75*n)))}),O.Ul={"":"",Standard:"F1 m 0,0 l 8,4 -8,4 2,-4 z",Backward:"F1 m 8,0 l -2,4 2,4 -8,-4 z",Triangle:"F1 m 0,0 l 8,4.62 -8,4.62 z",BackwardTriangle:"F1 m 8,4 l 0,4 -8,-4 8,-4 0,4 z",Boomerang:"F1 m 0,0 l 8,4 -8,4 4,-4 -4,-4 z",BackwardBoomerang:"F1 m 8,0 l -8,4 8,4 -4,-4 4,-4 z",SidewaysV:"m 0,0 l 8,4 -8,4 0,-1 6,-3 -6,-3 0,-1 z",BackwardV:"m 8,0 l -8,4 8,4 0,-1 -6,-3 6,-3 0,-1 z",OpenTriangle:"m 0,0 l 8,4 -8,4",BackwardOpenTriangle:"m 8,0 l -8,4 8,4",OpenTriangleLine:"m 0,0 l 8,4 -8,4 m 8.5,0 l 0,-8",BackwardOpenTriangleLine:"m 8,0 l  -8,4 8,4 m -8.5,0 l 0,-8",OpenTriangleTop:"m 0,0 l 8,4 m 0,4",BackwardOpenTriangleTop:"m 8,0 l -8,4 m 0,4",OpenTriangleBottom:"m 0,8 l 8,-4",BackwardOpenTriangleBottom:"m 0,4 l 8,4",HalfTriangleTop:"F1 m 0,0 l 0,4 8,0 z m 0,8",BackwardHalfTriangleTop:"F1 m 8,0 l 0,4 -8,0 z m 0,8",HalfTriangleBottom:"F1 m 0,4 l 0,4 8,-4 z",BackwardHalfTriangleBottom:"F1 m 8,4 l 0,4 -8,-4 z",ForwardSemiCircle:"m 4,0 b 270 180 0 4 4",BackwardSemiCircle:"m 4,8 b 90 180 0 -4 4",Feather:"m 0,0 l 3,4 -3,4",BackwardFeather:"m 3,0 l -3,4 3,4",DoubleFeathers:"m 0,0 l 3,4 -3,4 m 3,-8 l 3,4 -3,4",BackwardDoubleFeathers:"m 3,0 l -3,4 3,4 m 3,-8 l -3,4 3,4",TripleFeathers:"m 0,0 l 3,4 -3,4 m 3,-8 l 3,4 -3,4 m 3,-8 l 3,4 -3,4",BackwardTripleFeathers:"m 3,0 l -3,4 3,4 m 3,-8 l -3,4 3,4 m 3,-8 l -3,4 3,4",ForwardSlash:"m 0,8 l 5,-8",BackSlash:"m 0,0 l 5,8",DoubleForwardSlash:"m 0,8 l 4,-8 m -2,8 l 4,-8",DoubleBackSlash:"m 0,0 l 4,8 m -2,-8 l 4,8",TripleForwardSlash:"m 0,8 l 4,-8 m -2,8 l 4,-8 m -2,8 l 4,-8",TripleBackSlash:"m 0,0 l 4,8 m -2,-8 l 4,8 m -2,-8 l 4,8",Fork:"m 0,4 l 8,0 m -8,0 l 8,-4 m -8,4 l 8,4",BackwardFork:"m 8,4 l -8,0 m 8,0 l -8,-4 m 8,4 l -8,4",LineFork:"m 0,0 l 0,8 m 0,-4 l 8,0 m -8,0 l 8,-4 m -8,4 l 8,4",BackwardLineFork:"m 8,4 l -8,0 m 8,0 l -8,-4 m 8,4 l -8,4 m 8,-8 l 0,8",CircleFork:"F1 m 6,4 b 0 360 -3 0 3 z m 0,0 l 6,0 m -6,0 l 6,-4 m -6,4 l 6,4",BackwardCircleFork:"F1 m 0,4 l 6,0 m -6,-4 l 6,4 m -6,4 l 6,-4 m 6,0 b 0 360 -3 0 3",CircleLineFork:"F1 m 6,4 b 0 360 -3 0 3 z m 1,-4 l 0,8 m 0,-4 l 6,0 m -6,0 l 6,-4 m -6,4 l 6,4",BackwardCircleLineFork:"F1 m 0,4 l 6,0 m -6,-4 l 6,4 m -6,4 l 6,-4 m 0,-4 l 0,8 m 7,-4 b 0 360 -3 0 3",Circle:"F1 m 8,4 b 0 360 -4 0 4 z",Block:"F1 m 0,0 l 0,8 8,0 0,-8 z",StretchedDiamond:"F1 m 0,3 l 5,-3 5,3 -5,3 -5,-3 z",Diamond:"F1 m 0,4 l 4,-4 4,4 -4,4 -4,-4 z",Chevron:"F1 m 0,0 l 5,0 3,4 -3,4 -5,0 3,-4 -3,-4 z",StretchedChevron:"F1 m 0,0 l 8,0 3,4 -3,4 -8,0 3,-4 -3,-4 z",NormalArrow:"F1 m 0,2 l 4,0 0,-2 4,4 -4,4 0,-2 -4,0 z",X:"m 0,0 l 8,8 m 0,-8 l -8,8",TailedNormalArrow:"F1 m 0,0 l 2,0 1,2 3,0 0,-2 2,4 -2,4 0,-2 -3,0 -1,2 -2,0 1,-4 -1,-4 z",DoubleTriangle:"F1 m 0,0 l 4,4 -4,4 0,-8 z  m 4,0 l 4,4 -4,4 0,-8 z",BigEndArrow:"F1 m 0,0 l 5,2 0,-2 3,4 -3,4 0,-2 -5,2 0,-8 z",ConcaveTailArrow:"F1 m 0,2 h 4 v -2 l 4,4 -4,4 v -2 h -4 l 2,-2 -2,-2 z",RoundedTriangle:"F1 m 0,1 a 1,1 0 0 1 1,-1 l 7,3 a 0.5,1 0 0 1 0,2 l -7,3 a 1,1 0 0 1 -1,-1 l 0,-6 z",SimpleArrow:"F1 m 1,2 l -1,-2 2,0 1,2 -1,2 -2,0 1,-2 5,0 0,-2 2,2 -2,2 0,-2 z",AccelerationArrow:"F1 m 0,0 l 0,8 0.2,0 0,-8 -0.2,0 z m 2,0 l 0,8 1,0 0,-8 -1,0 z m 3,0 l 2,0 2,4 -2,4 -2,0 0,-8 z",BoxArrow:"F1 m 0,0 l 4,0 0,2 2,0 0,-2 2,4 -2,4 0,-2 -2,0 0,2 -4,0 0,-8 z",TriangleLine:"F1 m 8,4 l -8,-4 0,8 8,-4 z m 0.5,4 l 0,-8",CircleEndedArrow:"F1 m 10,4 l -2,-3 0,2 -2,0 0,2 2,0 0,2 2,-3 z m -4,0 b 0 360 -3 0 3 z",DynamicWidthArrow:"F1 m 0,3 l 2,0 2,-1 2,-2 2,4 -2,4 -2,-2 -2,-1 -2,0 0,-2 z",EquilibriumArrow:"m 0,3 l 8,0 -3,-3 m 3,5 l -8,0 3,3",FastForward:"F1 m 0,0 l 3.5,4 0,-4 3.5,4 0,-4 1,0 0,8 -1,0 0,-4 -3.5,4 0,-4 -3.5,4 0,-8 z",Kite:"F1 m 0,4 l 2,-4 6,4 -6,4 -2,-4 z",HalfArrowTop:"F1 m 0,0 l 4,4 4,0 -8,-4 z m 0,8",HalfArrowBottom:"F1 m 0,8 l 4,-4 4,0 -8,4 z",OpposingDirectionDoubleArrow:"F1 m 0,4 l 2,-4 0,2 4,0 0,-2 2,4 -2,4 0,-2 -4,0 0,2 -2,-4 z",PartialDoubleTriangle:"F1 m 0,0 4,3 0,-3 4,4 -4,4 0,-3 -4,3 0,-8 z",LineCircle:"F1 m 0,0 l 0,8 m 7 -4 b 0 360 -3 0 3 z",DoubleLineCircle:"F1 m 0,0 l 0,8 m 2,-8 l 0,8 m 7 -4 b 0 360 -3 0 3 z",TripleLineCircle:"F1 m 0,0 l 0,8 m 2,-8 l 0,8 m 2,-8 l 0,8 m 7 -4 b 0 360 -3 0 3 z",CircleLine:"F1 m 6 4 b 0 360 -3 0 3 z m 1,-4 l 0,8",DiamondCircle:"F1 m 8,4 l -4,4 -4,-4 4,-4 4,4 m 8,0 b 0 360 -4 0 4 z",PlusCircle:"F1 m 8,4 b 0 360 -4 0 4 l -8 0 z m -4 -4 l 0 8",OpenRightTriangleTop:"m 8,0 l 0,4 -8,0 m 0,4",OpenRightTriangleBottom:"m 8,8 l 0,-4 -8,0",Line:"m 0,0 l 0,8",DoubleLine:"m 0,0 l 0,8 m 2,0 l 0,-8",TripleLine:"m 0,0 l 0,8 m 2,0 l 0,-8 m 2,0 l 0,8",PentagonArrow:"F1 m 8,4 l -4,-4 -4,0 0,8 4,0 4,-4 z"};function cg(){this.hc=!1,this.Kq=this.ep=this.Sp=null,this.Mq="",this.yq=this.Hp=this.Lq=null,this.Aq="",this.zq=os,this.Bq=null,this.Cq="",this.Eq=He,this.Zp="",this.$p=Qe,this.iq=kr,this.cq=zh,this.op=null,this.Vp=127,this.Qq=ya,this.Pq="gray",this.Fg=4}cg.prototype.copy=function(){var t=new cg;return t.Sp=this.Sp,t.ep=this.ep,t.Kq=this.Kq,t.Mq=this.Mq,t.Lq=this.Lq,t.Hp=this.Hp,t.yq=this.yq,t.Aq=this.Aq,t.zq=this.zq.J(),t.Bq=this.Bq,t.Cq=this.Cq,t.Eq=this.Eq.J(),t.Zp=this.Zp,t.$p=this.$p.J(),t.iq=this.iq.J(),t.cq=this.cq.J(),t.op=this.op,t.Vp=this.Vp,t.Qq=this.Qq.J(),t.Pq=this.Pq,t.Fg=this.Fg,t};function ot(t,e){t===void 0||t instanceof fe||typeof t=="string"?Y.call(this,t):(Y.call(this),t&&(e=t)),this.G=2408959,this.Gf="",this.O=null,this.ug="",this.Df=this.Eg=null,this.bc="",this.kh=this.uh=null,this.$d=new T(NaN,NaN).freeze(),this.Ye=null,this.Un=NaN,this.Rv=-1,this.Jx=new E,this.Dh=null,this.Pf=NaN,e&&Object.assign(this,e)}z(ot,Y),ot.prototype.cloneProtected=function(t){Y.prototype.cloneProtected.call(this,t),t.G=this.G&-4097|49152,t.Gf=this.Gf,this.O!==null&&(t.O=this.O.hc?this.O:this.O.copy()),t.ug=this.ug,t.Df=null,t.bc=this.bc,t.$d.assign(this.$d),t.Un=this.Un},a=ot.prototype,a.lf=function(t){Y.prototype.lf.call(this,t),t.Yg(),t.Eg=null,t.Ye=null,t.Dh=null},a.toString=function(){var t=oo(this.constructor)+"#"+$e(this);return this.data!==null&&(t+="("+Kn(this.data)+")"),t};function mn(t){t.O===null?t.O=new cg:t.O.hc&&(t.O=t.O.copy())}a.dh=function(){Y.prototype.dh.call(this),this.O!==null&&(this.O.hc=!0)},a.Qj=function(t,e,n,i,r,s,h){var u=this.diagram;u!==null&&(t===me&&e==="elements"?r instanceof Y?cs(r,function(p){Ug(u.partManager,p),X0(u,p)}):Lf(u,r):t===Me&&e==="elements"&&(r instanceof Y?cs(r,function(p){Kg(u.partManager,p,u)}):Mf(u,r)),u.bb(t,e,n,i,r,s,h))},a.Ja=function(t){if(Y.prototype.Ja.call(this,t),this.data!==null){for(var e=this.R.s,n=e.length,i=0;i<n;i++){var r=e[i];r instanceof Y&&cs(r,function(s){s.data!==null&&s.Ja()})}for(e=this.adornments;e.next();)e.value.Ja(t)}},ot.prototype.updateRelationshipsFromData=function(){var t;this.data!==null&&((t=this.diagram)===null||t===void 0||t.partManager.updateRelationshipsFromData(this))},ot.prototype.zj=function(t){var e=this.Df;return e===null?null:e.I(t)},ot.prototype.Ng=function(t,e){if(e!==null){var n=null,i=this.Df;if(i!==null&&(n=i.I(t)),n!==e){if(n!==null){var r=n.diagram;r!==null&&r.remove(n)}i===null&&(this.Df=i=new pt),e.Gf!==t&&(e.category=t),i.add(t,e),t=this.diagram,t!==null&&(t.add(e),t=e.adornedObject,t!==null&&(t=t.Tg(),t!==null&&(e.data=t.data)))}}},ot.prototype.wf=function(t){var e=this.Df;if(e!==null){var n=e.I(t);if(n!==null){var i=n.diagram;i!==null&&i.remove(n)}e.remove(t),e.count===0&&(this.Df=null)}},ot.prototype.rj=function(){var t=this.Df;if(t!==null){var e=Yt();for(t=t.iterator;t.next();)e.push(t.key);t=e.length;for(var n=0;n<t;n++)this.wf(e[n]);At(e)}},ot.prototype.updateAdornments=function(){var t=this.diagram;if(t!==null){for(var e=this.adornments;e.next();){var n=e.value;n.v(),n.placeholder&&n.placeholder.v()}t:{if(this.isSelected&&this.selectionAdorned&&(e=this.selectionObject,e!==null&&this.actualBounds.w()&&this.isVisible()&&e.vf()&&e.actualBounds.w())){if(n=this.zj("Selection"),n===null){if(n=this.selectionAdornmentTemplate,n===null&&(n=this.Zg()?t.linkSelectionAdornmentTemplate:this instanceof ut?t.groupSelectionAdornmentTemplate:t.nodeSelectionAdornmentTemplate),!(n instanceof St))break t;ui(n),n=n.copy(),n!==null&&(this.Zg()&&this.selectionObject===this.path&&(n.type=Y.Link),n.adornedObject=e)}if(n!==null){n.type===Y.Link&&n.v(),this.Ng("Selection",n);break t}}this.wf("Selection")}for(cv(this,t),e=this.adornments;e.next();)e.value.Ja()}},ot.prototype.Qb=function(){var t=this.diagram;t!==null&&(Br(t),(this.G&16384)===0&&(this.G|=16384,t.Kb()))};function mg(t){(t.G&16384)!==0&&(t.updateAdornments(),t.G&=-16385)}function cv(t,e){e.toolManager.mouseDownTools.each(function(n){n.isEnabled&&n.updateAdornments(t)}),e.toolManager.updateAdornments(t)}function gp(t){if(Or(t)===!1){yg(t,!0),t.Ak();var e=t.diagram;e!==null&&(e.qe.add(t),e.Kb())}}function Wm(t){if(t.G|=2097152,Or(t)!==!1){var e=t.position,n=t.location;n.w()&&e.w()||_m(t,e,n),n=t.Eb;var i=E.alloc().assign(n);n.ja(),n.x=e.x,n.y=e.y,n.freeze(),t.wl(i,n),E.free(i),yg(t,!1)}}ot.prototype.se=function(t,e,n,i){var r=this.qc;r.h(t,e,n,i),this.Hb===null&&(this.Hb=new ct);var s=this.Hb;s.reset(),this.Hn(s,t,e,n,i),this.Hb=s,s.Mr()||s.Jo(r)},ot.prototype.Hn=function(t,e,n,i,r){if(this.wa!==1&&t.scale(this.wa),this.Gb!==0){var s=Dt;this.locationSpot.pb()&&(s=this.locationSpot);var h=T.alloc();if(this.locationObject!==this)for(e=this.locationObject,n=e.naturalBounds,h.ii(n.x,n.y,n.width,n.height,s),e.Hb!==null&&e.Hb.Ea(h),h.offset(-e.measuredBounds.x,-e.measuredBounds.y),s=e.panel;s!==null&&s!==this;)s.Hb!==null&&s.Hb.Ea(h),h.offset(-s.measuredBounds.x,-s.measuredBounds.y),s=s.panel;else h.ii(e,n,i,r,s);t.rotate(this.Gb,h.x,h.y),T.free(h)}},ot.prototype.move=function(t,e){e===!0?this.location=t:this.position=t},ot.prototype.moveTo=function(t,e,n){t=T.allocAt(t,e),this.move(t,n),T.free(t)},ot.prototype.isVisible=function(){if(!this.visible)return!1;var t=this.layer;if(t!==null){if(!t.visible)return!1;if(t=t.diagram,t!==null&&t.animationManager.Wr(this))return!0}return t=this.containingGroup,!!(t===null||t.isSubGraphExpanded&&t.isVisible())},ot.prototype.Tb=function(t){var e=this.diagram;t?(this.D(4),this.Qb(),e!==null&&e.qe.add(this)):(this.D(8),this.rj()),this.Yg(),e!==null&&(e.Wa(),e.N())},ot.prototype.eb=function(t){if(this.name===t)return this;var e=this.Dh;if(e===null&&(this.Dh=e=new pt),e.I(t)!==null)return e.I(t);var n=Y.prototype.eb.call(this,t);return n!==null?(e.set(t,n),n):(e.set(t,null),null)};function or(t,e,n,i){i===void 0&&(i=new T),n=n.Ec()?Dt:n;var r=e.naturalBounds;if(i.h(r.width*n.x+n.offsetX,r.height*n.y+n.offsetY),e===null||e===t)return i;for(e.transform.Ea(i),e=e.panel;e!==null&&e!==t;)e.transform.Ea(i),e=e.panel;return t.Hb!==null&&t.Hb.Ea(i),i.offset(-t.qc.x,-t.qc.y),i}ot.prototype.$h=function(t){return t===void 0&&(t=new E),t.assign(this.actualBounds)},ot.prototype.Ta=function(){Co(this)===!0&&this.measure(1/0,1/0),this.arrange()};function Jm(t){var e=T.alloc(),n=t.locationObject,i=n.naturalBounds,r=n instanceof dt?n.strokeWidth:0;if(e.ii(0,0,i.width+r,i.height+r,t.locationSpot),n!==t)for(e.offset(-r/2,-r/2),n.transform.Ea(e),n=n.panel;n!==null&&n!==t;)n.transform.Ea(e),n=n.panel;return t.Hb!==null&&t.Hb.Ea(e),e.offset(-t.qc.x,-t.qc.y),e}function Zs(t,e){var n=t.Jx;isNaN(t.Pf)&&(t.Pf=Mm(t));var i=t.Pf,r=2*i;if(!t.isShadowed)return n.h(e.x-1-i,e.y-1-i,e.width+2+r,e.height+2+r),n;i=e.x,r=e.y;var s=e.width;e=e.height;var h=t.shadowBlur;return t=t.shadowOffset,s+=h,e+=h,i-=h/2,r-=h/2,0<t.x?s+=t.x:(i+=t.x,s-=t.x),0<t.y?e+=t.y:(r+=t.y,e-=t.y),n.h(i-1,r-1,s+2,e+2),n}ot.prototype.arrange=function(){if(Si(this)===!1)Wm(this);else{ds(this,!1);var t=this.Eb,e=E.alloc();e.assign(t);var n=Ir(this);this.Qg(0,0,this.qc.width,this.qc.height);var i=this.position;_m(this,i,this.location),t.ja(),t.x=i.x,t.y=i.y,t.freeze(),this.wl(e,t),e.C(t)?this.Ld(n):!this.Rc()||O.B(e.width,t.width)&&O.B(e.height,t.height)||0<=this.Rv&&this.D(16),E.free(e),yg(this,!1)}},a=ot.prototype,a.wl=function(t,e){var n=this.diagram;if(n!==null){var i=!1;if(n.Li===!1&&t.w()){var r=E.alloc();r.assign(n.documentBounds),r.av(n.padding),t.x>r.x&&t.y>r.y&&t.right<r.right&&t.bottom<r.bottom&&e.x>r.x&&e.y>r.y&&e.right<r.right&&e.bottom<r.bottom&&(i=!0),E.free(r)}(this.G&65536)===0&&t.C(e)||bm(this,i,n),n.N(),!t.w()&&!e.w()||Ce(t,e)||(this instanceof _&&!n.undoManager.isUndoingRedoing&&this.sd(),this.Yg())}},a.Wu=function(t,e,n){if(this.Zg()||!t.w())return!1;var i=this.diagram;return i!==null&&Zm(this,i,t,e,n),this.pa=t,this.G&=-2097153,!this.$d.w()||i!==null&&!i.animationManager.isTicking&&i.undoManager.isUndoingRedoing||(i=this.$d,this.$d=new T(i.x+(t.x-e),i.y+(t.y-n)),this.g("location",i,this.$d.copy())),Or(this)===!1&&Si(this)===!1&&(gp(this),Wm(this)),!0};function Zm(t,e,n,i,r){e===null||t instanceof St||(e=e.animationManager,e.zb&&x0(e,t,new T(i,r),n))}a.Ll=function(t,e,n){var i=this.$d,r=this.pa;if(n){if(i.x===t&&i.y===e)return;Or(this)||Si(this)?r.h(NaN,NaN):r.h(r.x+t-i.x,r.y+e-i.y),i.h(t,e)}else{if(r.x===t&&r.y===e)return;i.h(i.x+t-r.x,i.y+e-r.y),r.h(t,e)}gp(this)},a.Xu=function(){this.G&=-2097153,gp(this)};function _m(t,e,n){var i=Jm(t),r=t.diagram,s=n.w(),h=e.w();s&&h?(t.G&2097152)!==0?$m(t,e,n,r,i):Qm(t,e,n,r,i):s?$m(t,e,n,r,i):h&&Qm(t,e,n,r,i),t.G|=2097152,T.free(i),t.Ak()}function $m(t,e,n,i,r){var s=e.x,h=e.y;e.h(n.x-r.x,n.y-r.y),i!==null&&(n=i.animationManager,(i=n.defaultAnimation.isAnimating)||!n.zb||t instanceof St||x0(n,t,new T(s,h),e),i||e.x===s&&e.y===h||t.g("position",new T(s,h),e.copy()))}function Qm(t,e,n,i,r){var s=n.copy();n.h(e.x+r.x,e.y+r.y),n.C(s)||i===null||t.g("location",s,n.copy())}function bm(t,e,n){vg(t,!1),t instanceof _&&Bf(n,t),t.layer.isTemporary||e||n.Wa(),e=t.Eb;var i=n.viewportBounds;i.w()?Ir(t)?(Oc(e,i)||t.Ld(!1),t.updateAdornments()):e.Qc(i)?(t.Ld(!0),t.updateAdornments()):t.Qb():n.Ni=!0}a.fi=function(){return!0},a.Rc=function(){return!0},a.Zg=function(){return!1},a.ei=function(){return!0};function xg(t,e,n,i){e.constructor===t.constructor||ex||(ex=!0,Ve('Should not change the class of the Part when changing category from "'+n+'" to "'+i+'"'),Ve("  Old class: "+oo(t.constructor)+", new class: "+oo(e.constructor)+", part: "+t.toString())),t.rj();var r=t.data;n=t.layerName;var s=t.isSelected,h=t.isHighlighted,u=!0,p=!0,d=!1;t instanceof _&&(u=t.isTreeLeaf,p=t.isTreeExpanded,d=t.wasTreeExpanded),e.lf(t),e.cloneProtected(t),t.Gf=i,t.v(),t.N(),e=t.diagram,i=!0,e!==null&&(i=e.skipsUndoManager,e.skipsUndoManager=!0),t.qb=r,t.G=s?t.G|4096:t.G&-4097,t.G=h?t.G|524288:t.G&-524289,t instanceof _&&(t.U=u?t.U|4:t.U&-5,t.U=p?t.U|1:t.U&-2,t.U=d?t.U|2:t.U&-3),r!==null&&t.Ja(),r=t.layerName,r!==n&&(t.ug=n,t.layerName=r),e!==null&&(e.skipsUndoManager=i),t.Rc()&&t.D(64)}ot.prototype.canCopy=function(){if(!this.copyable)return!1;var t=this.layer;return t===null?!0:t.allowCopy?(t=t.diagram,t===null?!0:!!t.allowCopy):!1},ot.prototype.canDelete=function(){if(!this.deletable)return!1;var t=this.layer;return t===null?!0:t.allowDelete?(t=t.diagram,t===null?!0:!!t.allowDelete):!1},ot.prototype.canEdit=function(){if(!this.textEditable)return!1;var t=this.layer;return t===null?!0:t.allowTextEdit?(t=t.diagram,t===null?!0:!!t.allowTextEdit):!1},ot.prototype.canGroup=function(){if(!this.groupable)return!1;var t=this.layer;return t===null?!0:t.allowGroup?(t=t.diagram,t===null?!0:!!t.allowGroup):!1},ot.prototype.canMove=function(){if(!this.movable)return!1;var t=this.layer;return t===null?!0:t.allowMove?(t=t.diagram,t===null?!0:!!t.allowMove):!1},ot.prototype.canReshape=function(){if(!this.reshapable)return!1;var t=this.layer;return t===null?!0:t.allowReshape?(t=t.diagram,t===null?!0:!!t.allowReshape):!1},ot.prototype.canResize=function(){if(!this.resizable)return!1;var t=this.layer;return t===null?!0:t.allowResize?(t=t.diagram,t===null?!0:!!t.allowResize):!1},ot.prototype.canRotate=function(){if(!this.rotatable)return!1;var t=this.layer;return t===null?!0:t.allowRotate?(t=t.diagram,t===null?!0:!!t.allowRotate):!1},ot.prototype.canSelect=function(){if(!this.selectable)return!1;var t=this.layer;return t===null?!0:t.allowSelect?(t=t.diagram,t===null?!0:!!t.allowSelect):!1};function Or(t){return(t.G&32768)!==0}function yg(t,e){t.G=e?t.G|32768:t.G&-32769}function vg(t,e){t.G=e?t.G|65536:t.G&-65537}function Ir(t){return(t.G&131072)!==0}a=ot.prototype,a.Ld=function(t){this.G=t?this.G|131072:this.G&-131073};function cp(t,e){t.G=e?t.G|1048576:t.G&-1048577}a.Yg=function(){var t=this.containingGroup;t!==null&&(t.v(),t.placeholder!==null&&t.placeholder.v(),t.sd())},a.N=function(){var t=this.diagram;t!==null&&!Si(this)&&!Or(this)&&this.isVisible()&&this.Eb.w()&&t.N(Zs(this,this.Eb))},a.v=function(){Y.prototype.v.call(this);var t=this.diagram;t!==null&&(t.qe.add(this),this instanceof _&&this.labeledLink!==null&&Ka(this.labeledLink),t.Kb(!0))},a.po=function(t){t||(t=this.kh,t!==null&&kg(t,this))},a.qo=function(t){t||(t=this.kh,t!==null&&Ng(t,this))},a.xj=function(){var t=this.data;if(t!==null){var e=this.diagram;e!==null&&(e=e.model,e!==null&&e.Bl(t))}},a.Jy=function(){return Sg(this,this)};function Sg(t,e){var n=e.containingGroup;return n!==null?1+Sg(t,n):e instanceof _&&(e=e.labeledLink,e!==null)?Sg(t,e):0}a.Ny=function(){return qm(this,this)};function qm(t,e){var n=e.containingGroup;return n!==null||e instanceof _&&(n=e.labeledLink,n!==null)?qm(t,n):e}a.Hd=function(t){return t instanceof ut?Pg(this,this,t):!1};function Pg(t,e,n){if(e===n||n===null)return!1;var i=e.containingGroup;return i===null||i!==n&&!Pg(t,i,n)?e instanceof _&&(e=e.labeledLink,e!==null)?Pg(t,e,n):!1:!0}a.Iw=function(t){if(t===null)return null;if(this===t)return this.containingGroup;for(var e=this;e!==null;){if(e instanceof ut&&cp(e,!0),e instanceof _){var n=e.labeledLink;n!==null&&(e=n)}e=e.containingGroup}for(n=null,e=t;e!==null;){if((e.G&1048576)!==0){n=e;break}e instanceof _&&(t=e.labeledLink,t!==null&&(e=t)),e=e.containingGroup}for(e=this;e!==null;)e instanceof ut&&cp(e,!1),e instanceof _&&(t=e.labeledLink,t!==null&&(e=t)),e=e.containingGroup;return n},ot.prototype.canLayout=function(){if(!this.isLayoutPositioned||!this.isVisible())return!1;var t=this.layer;return!(t!==null&&t.isTemporary||this instanceof _&&this.isLinkLabel)},ot.prototype.D=function(t){if(t===void 0&&(t=16777215),this.isLayoutPositioned&&(t&this.layoutConditions)!==0){var e=this.layer;e!==null&&e.isTemporary||this instanceof _&&this.isLinkLabel?e=!1:(e=this.diagram,e=!(e!==null&&e.undoManager.isUndoingRedoing))}else e=!1;if(e)if(e=this.kh,e!==null){var n=e.layout;n!==null?n.D():e.D(t)}else t=this.diagram,t!==null&&(t=t.layout,t!==null&&t.D())};function tx(t){return t.isVisible()?(t=t.layer,!(t!==null&&t.isTemporary)):!1}function Ar(t,e,n,i,r,s){if(s===void 0&&(s=null),!(t.contains(e)||s!==null&&!s(e)||e instanceof St)){if(t.add(e),e instanceof _){if(n&&e instanceof ut)for(var h=e.memberParts;h.next();)Ar(t,h.value,n,i,r,s);if(r!==!1)for(h=e.linksConnected;h.next();){var u=h.value;if(!t.contains(u)){var p=u.fromNode,d=u.toNode;p=p===null||t.contains(p),d=d===null||t.contains(d),(r?p&&d:p||d)&&Ar(t,u,n,i,r,s)}}if(1<i)for(e=e.ou();e.next();)Ar(t,e.value,n,i-1,r,s)}else if(e instanceof U)for(e=e.labelNodes;e.next();)Ar(t,e.value,n,i,r,s)}}Z.Object.defineProperties(ot.prototype,{key:{get:function(){var t=this.diagram;if(t!==null)return t.model.ua(this.data)}},adornments:{get:function(){return this.Df===null?Wn:this.Df.iteratorValues}},layer:{get:function(){return this.uh}},diagram:{get:function(){var t=this.uh;return t==null?null:t.diagram}},layerName:{get:function(){return this.ug},set:function(t){var e=this.ug;if(e!==t){var n=this.diagram;if((n===null||n.Aj(t)!==null&&!n.partManager.addsToTemporaryLayer)&&(this.ug=t,n!==null&&n.Wa(),this.g("layerName",e,t),e=this.layer,e!==null&&e.name!==t&&(n=e.diagram,n!==null&&(t=n.Aj(t),t!==null&&t!==e)))){var i=e.kc(-1,this,!0);if(0<=i&&n.bb(Me,"parts",e,this,null,i,!0),i=t.bi(99999999,this,!0),e.visible!==t.visible&&this.Tb(t.visible),0<=i&&n.bb(me,"parts",t,null,this,!0,i),i=this.layerChanged,i!==null){var r=n.$;n.$=!0,i(this,e,t),n.$=r}}}}},layerChanged:{get:function(){return this.O!==null?this.O.Sp:null},set:function(t){var e=this.layerChanged;e!==t&&(mn(this),this.O.Sp=t,this.g("layerChanged",e,t))}},zOrder:{get:function(){return this.Un},set:function(t){var e=this.Un;if(e!==t){this.Un=t;var n=this.layer;n!==null&&Bu(n,-1,this),this.g("zOrder",e,t),t=this.diagram,t!==null&&t.N()}}},locationObject:{get:function(){if(this.Ye===null){var t=this.locationObjectName;t!==""?(t=this.eb(t),t!==null?this.Ye=t:this.Ye=this):this instanceof St?this.type!==Y.Link&&this.placeholder!==null?this.Ye=this.placeholder:this.Ye=this:this.Ye=this}return this.Ye.visible?this.Ye:this}},minLocation:{get:function(){return this.O!==null?this.O.iq:kr},set:function(t){var e=this.minLocation;e.C(t)||(t=t.J(),mn(this),this.O.iq=t,this.g("minLocation",e,t))}},maxLocation:{get:function(){return this.O!==null?this.O.cq:zh},set:function(t){var e=this.maxLocation;e.C(t)||(t=t.J(),mn(this),this.O.cq=t,this.g("maxLocation",e,t))}},locationObjectName:{get:function(){return this.O!==null?this.O.Zp:""},set:function(t){var e=this.locationObjectName;e!==t&&(mn(this),this.O.Zp=t,this.Ye=null,this.v(),this.g("locationObjectName",e,t))}},locationSpot:{get:function(){return this.O!==null?this.O.$p:Qe},set:function(t){var e=this.locationSpot;e.C(t)||(t=t.J(),mn(this),this.O.$p=t,this.v(),this.g("locationSpot",e,t))}},location:{get:function(){return this.$d},set:function(t){var e=t.x,n=t.y,i=this.$d;if(!(i.x===e||isNaN(i.x)&&isNaN(e))||!(i.y===n||isNaN(i.y)&&isNaN(n))){if(t=t.copy(),e=t,this.Zg())e=!1;else{if(this.$d=e,this.G|=2097152,Si(this)===!1&&(gp(this),n=this.pa,n.w())){var r=this.diagram;if(r===null||r.animationManager.isTicking||!r.undoManager.isUndoingRedoing){var s=n.copy();n.h(n.x+(e.x-i.x),n.y+(e.y-i.y)),Zm(this,r,n,s.x,s.y),this.g("position",s,n.copy())}}e=!0}e&&this.g("location",i,t.copy())}}},category:{get:function(){return this.Gf},set:function(t){var e=this.Gf;if(e!==t){var n=this.diagram,i=this.data,r=null;if(n!==null&&i!==null&&!(this instanceof St)){var s=n.model.undoManager;s.isEnabled&&!s.isUndoingRedoing&&(r=this.clone(),r.R.addAll(this.R))}this.Gf=t,this.g("category",e,t),n===null||i===null||this instanceof St?this instanceof St&&(r=this.adornedPart,r!==null&&(t=r.Df,t!==null&&t.remove(e),r.Ng(this.category,this))):(s=n.model,s.undoManager.isUndoingRedoing||(this.Zg()?(n.partManager.setLinkCategoryForData(i,t),n=n.partManager.findLinkTemplateForCategory(t),n!==null&&(ui(n),n=n.copy(),n!==null&&xg(this,n,e,t))):(s!==null&&s.Il(i,t),n=Nx(n.partManager,i,t),n!==null&&(ui(n),n=n.copy(),n===null||n instanceof U||(i=this.location.copy(),xg(this,n,e,t),this.location.w()||(this.location=i)))),r!==null&&(e=this.clone(),e.R.addAll(this.R),this.g("self",r,e))))}}},self:{get:function(){return this},set:function(t){xg(this,t,this.category,t.category)}},copyable:{get:function(){return(this.G&1)!==0},set:function(t){var e=(this.G&1)!==0;e!==t&&(this.G^=1,this.g("copyable",e,t))}},deletable:{get:function(){return(this.G&2)!==0},set:function(t){var e=(this.G&2)!==0;e!==t&&(this.G^=2,this.g("deletable",e,t))}},textEditable:{get:function(){return(this.G&4)!==0},set:function(t){var e=(this.G&4)!==0;e!==t&&(this.G^=4,this.g("textEditable",e,t),this.Qb())}},groupable:{get:function(){return(this.G&8)!==0},set:function(t){var e=(this.G&8)!==0;e!==t&&(this.G^=8,this.g("groupable",e,t))}},movable:{get:function(){return(this.G&16)!==0},set:function(t){var e=(this.G&16)!==0;e!==t&&(this.G^=16,this.g("movable",e,t))}},selectionAdorned:{get:function(){return(this.G&32)!==0},set:function(t){var e=(this.G&32)!==0;e!==t&&(this.G^=32,this.g("selectionAdorned",e,t),this.Qb())}},isInDocumentBounds:{get:function(){return(this.G&64)!==0},set:function(t){var e=(this.G&64)!==0;if(e!==t){this.G^=64;var n=this.diagram;n!==null&&n.Wa(),this.g("isInDocumentBounds",e,t)}}},isLayoutPositioned:{get:function(){return(this.G&128)!==0},set:function(t){var e=(this.G&128)!==0;e!==t&&(this.G^=128,this.g("isLayoutPositioned",e,t),this.D(t?4:8))}},selectable:{get:function(){return(this.G&256)!==0},set:function(t){var e=(this.G&256)!==0;e!==t&&(this.G^=256,this.g("selectable",e,t),this.Qb())}},reshapable:{get:function(){return(this.G&512)!==0},set:function(t){var e=(this.G&512)!==0;e!==t&&(this.G^=512,this.g("reshapable",e,t),this.Qb())}},resizable:{get:function(){return(this.G&1024)!==0},set:function(t){var e=(this.G&1024)!==0;e!==t&&(this.G^=1024,this.g("resizable",e,t),this.Qb())}},rotatable:{get:function(){return(this.G&2048)!==0},set:function(t){var e=(this.G&2048)!==0;e!==t&&(this.G^=2048,this.g("rotatable",e,t),this.Qb())}},isSelected:{get:function(){return(this.G&4096)!==0},set:function(t){var e=(this.G&4096)!==0;if(e!==t){var n=this.diagram;if(!t||this.canSelect()&&!(n!==null&&n.selection.count>=n.maxSelectionCount)){this.G^=4096;var i=!1;if(n!==null){i=n.skipsUndoManager,n.skipsUndoManager=!0;var r=n.selection;r.ja(),t?r.add(this):r.remove(this),r.freeze()}this.g("isSelected",e,t),this.Qb(),t=this.selectionChanged,t!==null&&t(this),n!==null&&(n.Kb(),n.skipsUndoManager=i)}}}},isHighlighted:{get:function(){return(this.G&524288)!==0},set:function(t){var e=(this.G&524288)!==0;if(e!==t){this.G^=524288;var n=this.diagram;n!==null&&(n=n.highlighteds,n.ja(),t?n.add(this):n.remove(this),n.freeze()),this.g("isHighlighted",e,t),this.N(),t=this.highlightedChanged,t!==null&&t(this)}}},isShadowed:{get:function(){return(this.G&8192)!==0},set:function(t){var e=(this.G&8192)!==0;e!==t&&(this.G^=8192,this.g("isShadowed",e,t),this.N())}},isAnimated:{get:function(){return(this.G&262144)!==0},set:function(t){var e=(this.G&262144)!==0;e!==t&&(this.G^=262144,this.g("isAnimated",e,t))}},highlightedChanged:{get:function(){return this.O!==null?this.O.Hp:null},set:function(t){var e=this.highlightedChanged;e!==t&&(mn(this),this.O.Hp=t,this.g("highlightedChanged",e,t))}},selectionObjectName:{get:function(){return this.O!==null?this.O.Mq:""},set:function(t){var e=this.selectionObjectName;e!==t&&(mn(this),this.O.Mq=t,this.Eg=null,this.g("selectionObjectName",e,t))}},selectionAdornmentTemplate:{get:function(){return this.O!==null?this.O.Kq:null},set:function(t){var e=this.selectionAdornmentTemplate;e!==t&&(mn(this),this.O.Kq=t,this.g("selectionAdornmentTemplate",e,t))}},selectionObject:{get:function(){if(this.Eg===null){var t=this.selectionObjectName;t!==null&&t!==""?(t=this.eb(t),t!==null?this.Eg=t:this.Eg=this):this instanceof U?(t=this.path,t!==null?this.Eg=t:this.Eg=this):this.Eg=this}return this.Eg}},selectionChanged:{get:function(){return this.O!==null?this.O.Lq:null},set:function(t){var e=this.selectionChanged;e!==t&&(mn(this),this.O.Lq=t,this.g("selectionChanged",e,t))}},resizeAdornmentTemplate:{get:function(){return this.O!==null?this.O.yq:null},set:function(t){var e=this.resizeAdornmentTemplate;e!==t&&(mn(this),this.O.yq=t,this.g("resizeAdornmentTemplate",e,t))}},resizeObjectName:{get:function(){return this.O!==null?this.O.Aq:""},set:function(t){var e=this.resizeObjectName;e!==t&&(mn(this),this.O.Aq=t,this.g("resizeObjectName",e,t))}},resizeObject:{get:function(){var t=this.resizeObjectName;return t!==""&&(t=this.eb(t),t!==null)?t:this}},resizeCellSize:{get:function(){return this.O!==null?this.O.zq:os},set:function(t){var e=this.resizeCellSize;e.C(t)||(t=t.J(),mn(this),this.O.zq=t,this.g("resizeCellSize",e,t))}},rotateAdornmentTemplate:{get:function(){return this.O!==null?this.O.Bq:null},set:function(t){var e=this.rotateAdornmentTemplate;e!==t&&(mn(this),this.O.Bq=t,this.g("rotateAdornmentTemplate",e,t))}},rotateObjectName:{get:function(){return this.O!==null?this.O.Cq:""},set:function(t){var e=this.rotateObjectName;e!==t&&(mn(this),this.O.Cq=t,this.g("rotateObjectName",e,t))}},rotateObject:{get:function(){var t=this.rotateObjectName;return t!==""&&(t=this.eb(t),t!==null)?t:this}},rotationSpot:{get:function(){return this.O!==null?this.O.Eq:He},set:function(t){var e=this.rotationSpot;e.C(t)||(t=t.J(),mn(this),this.O.Eq=t,this.g("rotationSpot",e,t))}},text:{get:function(){return this.bc},set:function(t){var e=this.bc;e!==t&&(this.bc=t,this.g("text",e,t))}},containingGroup:{get:function(){return this.kh},set:function(t){if(this.Rc()){var e=this.kh;if(e!==t){t===null||this!==t&&!t.Hd(this)||(this===t&&X("Cannot make a Group a member of itself: "+this.toString()),X("Cannot make a Group indirectly contain itself: "+this.toString()+" already contains "+t.toString())),this.D(2);var n=this.diagram;if(e!==null?Ng(e,this):this instanceof ut&&n!==null&&n.Nh.remove(this),this.kh=t,t!==null?kg(t,this):this instanceof ut&&n!==null&&n.Nh.add(this),this.D(1),n!==null&&n.$){var i=this.data,r=n.model;if(i!==null&&r.Gj()){var s=r.ua(t!==null?t.data:null);r.Go(i,s)}}if(i=this.containingGroupChanged,i!==null&&(r=!0,n!==null&&(r=n.$,n.$=!0),i(this,e,t),n!==null&&(n.$=r)),this instanceof ut){for(n=new H,Ar(n,this,!0,0,!0),n=n.iterator;n.next();)if(i=n.value,i instanceof _)for(i=i.linksConnected;i.next();)rh(i.value)}if(this instanceof _){for(n=this.linksConnected;n.next();)rh(n.value);n=this.labeledLink,n!==null&&rh(n)}this.g("containingGroup",e,t),t!==null&&(e=t.layer,e!==null&&Bu(e,-1,t))}}else X("cannot set the Part.containingGroup of a Link or Adornment")}},containingGroupChanged:{get:function(){return this.O!==null?this.O.ep:null},set:function(t){var e=this.containingGroupChanged;e!==t&&(mn(this),this.O.ep=t,this.g("containingGroupChanged",e,t))}},isTopLevel:{get:function(){return!(this.containingGroup!==null||this instanceof _&&this.labeledLink!==null)}},layoutConditions:{get:function(){return this.O!==null?this.O.Vp:127},set:function(t){var e=this.layoutConditions;e!==t&&(mn(this),this.O.Vp=t,this.g("layoutConditions",e,t))}},dragComputation:{get:function(){return this.O!==null?this.O.op:null},set:function(t){var e=this.dragComputation;e!==t&&(mn(this),this.O.op=t,this.g("dragComputation",e,t))}},shadowOffset:{get:function(){return this.O!==null?this.O.Qq:ya},set:function(t){var e=this.shadowOffset;e.C(t)||(t=t.J(),mn(this),this.O.Qq=t,this.N(),this.g("shadowOffset",e,t))}},shadowColor:{get:function(){return this.O!==null?this.O.Pq:"gray"},set:function(t){var e=this.shadowColor;e!==t&&(mn(this),this.O.Pq=t,this.N(),this.g("shadowColor",e,t))}},shadowBlur:{get:function(){return this.O!==null?this.O.Fg:4},set:function(t){var e=this.shadowBlur;e!==t&&(mn(this),this.O.Fg=t,this.N(),this.g("shadowBlur",e,t))}}}),ot.prototype.invalidateLayout=ot.prototype.D,ot.prototype.findCommonContainingGroup=ot.prototype.Iw,ot.prototype.isMemberOf=ot.prototype.Hd,ot.prototype.findTopLevelPart=ot.prototype.Ny,ot.prototype.findSubGraphLevel=ot.prototype.Jy,ot.prototype.ensureBounds=ot.prototype.Ta,ot.prototype.getDocumentBounds=ot.prototype.$h,ot.prototype.findObject=ot.prototype.eb,ot.prototype.moveTo=ot.prototype.moveTo,ot.prototype.invalidateAdornments=ot.prototype.Qb,ot.prototype.clearAdornments=ot.prototype.rj,ot.prototype.removeAdornment=ot.prototype.wf,ot.prototype.addAdornment=ot.prototype.Ng,ot.prototype.findAdornment=ot.prototype.zj,ot.prototype.updateTargetBindings=ot.prototype.Ja;var ex=!1;ot.className="Part",ot.LayoutNone=0,ot.LayoutAdded=1,ot.LayoutRemoved=2,ot.LayoutShown=4,ot.LayoutHidden=8,ot.LayoutNodeSized=16,ot.LayoutGroupLayout=32,ot.LayoutNodeReplaced=64,ot.LayoutStandard=127,ot.LayoutAll=16777215;function St(t,e){t===void 0||t instanceof fe||typeof t=="string"?ot.call(this,t):(ot.call(this),t&&(e=t)),this.G&=-257,this.ug="Adornment",this.je=null,this.Vv=0,this.ow=!1,this.j=this.Ya=null,e&&Object.assign(this,e)}z(St,ot),St.prototype.toString=function(){var t=this.adornedPart;return"Adornment("+this.category+")"+(t!==null?t.toString():"")},St.prototype.updateRelationshipsFromData=function(){},St.prototype.tl=function(t){var e=this.adornedObject,n=e==null?void 0:e.part;if(n instanceof U&&e instanceof dt){e=n.path,n.tl(t),t=e.geometry,n=this.R.s,e=n.length;for(var i=0;i<e;i++){var r=n[i];r.isPanelMain&&r instanceof dt&&(r.sa=t)}}},St.prototype.fi=function(){var t=this.je;return t===null?!0:(t=t.part,t===null||!Si(t))},St.prototype.Rc=function(){return!1},St.prototype.Qj=function(t,e,n,i,r,s,h){if(t===me&&e==="elements"){if(r instanceof an)this.Ya===null&&(this.Ya=r);else if(r instanceof Y){var u=r.ml(function(p){return p instanceof an});u instanceof an&&this.Ya===null&&(this.Ya=u)}}else t===Me&&e==="elements"&&this.Ya!==null&&(i===this.Ya?this.Ya=null:i instanceof Y&&this.Ya.dg(i)&&(this.Ya=null));ot.prototype.Qj.call(this,t,e,n,i,r,s,h)},St.prototype.updateAdornments=function(){},St.prototype.xj=function(){},Z.Object.defineProperties(St.prototype,{placeholder:{get:function(){return this.Ya}},adornedObject:{get:function(){return this.je},set:function(t){var e=this.adornedPart,n=null;t!==null&&(n=t.part),e===null||t!==null&&e===n||e.wf(this.category),this.je=t,n!==null&&n.Ng(this.category,this)}},adornedPart:{get:function(){var t=this.je;return t!==null?t.part:null}},containingGroup:{get:function(){return null}}}),St.className="Adornment";function wg(){this.hc=!1,this.mr=this.Vi=this.Xp=this.Wp=null,this.So=Fd,this.xq=yp,this.ar=this.Xi=this.gq=this.fq=null}wg.prototype.copy=function(){var t=new wg;return t.Wp=this.Wp,t.Xp=this.Xp,t.Vi=this.Vi,t.mr=this.mr,t.So=this.So.J(),t.xq=this.xq,t.fq=this.fq,t.gq=this.gq,t.Xi=this.Xi,t.ar=this.ar,t};function _(t,e){t===void 0||t instanceof fe||typeof t=="string"?ot.call(this,t):(ot.call(this),t&&(e=t)),this.U=13,this.xa=null,this.ib=new Q,this.sc=this.Ne=this.Ek=null,this.Lg=!1,e&&Object.assign(this,e)}z(_,ot),_.prototype.cloneProtected=function(t){ot.prototype.cloneProtected.call(this,t),t.U=this.U,this.xa!==null&&(t.xa=this.xa.hc?this.xa:this.xa.copy())},a=_.prototype,a.lf=function(t){ot.prototype.lf.call(this,t),t.sd(),t.Ne=this.Ne,t.sc=null};function rr(t){t.xa===null?t.xa=new wg:t.xa.hc&&(t.xa=t.xa.copy())}a.dh=function(){ot.prototype.dh.call(this),this.xa!==null&&(this.xa.hc=!0)};function nx(t,e){e!==null&&(t.Ne===null&&(t.Ne=new H),t.Ne.add(e))}function ix(t,e,n,i){if(e===null||t.Ne===null)return null;for(var r=t.Ne.iterator;r.next();){var s=r.value;if(s.Ur===t&&s.Du===e&&s.jx===n&&s.kx===i||s.Ur===e&&s.Du===t&&s.jx===i&&s.kx===n)return s}return null}a.ez=function(t,e,n){e==null&&(e=""),n==null&&(n=""),t=ix(this,t,e,n),t!==null&&t.rl()},a.Qj=function(t,e,n,i,r,s,h){t===me&&e==="elements"?this.sc=null:t===Me&&e==="elements"&&(this.sc=null),ot.prototype.Qj.call(this,t,e,n,i,r,s,h)},a.sd=function(t){for(var e=this.linksConnected;e.next();){var n=e.value;t!==void 0&&t.contains(n)||(Cn(n.fromPort),Cn(n.toPort),n.ab())}};function ox(t,e){for(t=t.linksConnected;t.next();){var n=t.value;(n.fromPort===e||n.toPort===e)&&(Cn(n.fromPort),Cn(n.toPort),n.ab())}}function Cn(t){if(t!==null){var e=t.yn;e!==null&&e.rl(),t=t.part,e=t.containingGroup,e===null||t.isVisible()||Cn(e.port)}}a.fi=function(){return!0},_.prototype.getAvoidableRect=function(t){return t.set(this.actualBounds),t.Wn(this.avoidableMargin),t},_.prototype.findVisibleNode=function(){for(var t=this;t!==null&&!t.isVisible();)t=t.containingGroup;return t},_.prototype.isVisible=function(){if(!ot.prototype.isVisible.call(this))return!1;var t=!0,e=Rs,n=this.diagram;if(n!==null){if(n.animationManager.Wr(this))return!0;t=n.isTreePathToChildren,e=n.treeCollapsePolicy}if(e===Rs){if(t=this.cg(),t!==null&&!t.isTreeExpanded)return!1}else if(e===Gf){if(t=t?this.lu():this.mu(),0<t.count&&t.all(function(i){return!i.isTreeExpanded}))return!1}else if(e===Of&&(t=t?this.lu():this.mu(),0<t.count&&t.any(function(i){return!i.isTreeExpanded})))return!1;return t=this.labeledLink,t!==null?t.isVisible():!0},_.prototype.Tb=function(t){ot.prototype.Tb.call(this,t);for(var e=this.linksConnected;e.next();){var n=e.value;if(t&&this.containingGroup!==null){var i=n.no(this);i===null||i.Hd(this.containingGroup)||n.ab()}n.Tb(t)}},_.prototype.Jw=function(){var t=new H,e=new H;return rx(this,this,t,e),e.iterator};function rx(t,e,n,i){if(e!==null&&!n.has(e)){n.add(e);var r=!0,s=t.diagram;s!==null&&(r=s.isTreePathToChildren),e.linksConnected.each(function(h){h.isTreeLink?(r?h.fromNode===e:h.toNode===e)&&rx(t,r?h.toNode:h.fromNode,n,i):i.add(h)})}}_.prototype.findLinksConnected=function(t){if(t===void 0&&(t=null),t===null)return this.ib.iterator;var e=new Le(this.ib),n=this;return e.predicate=function(i){return i.fromNode===n&&i.fromPortId===t||i.toNode===n&&i.toPortId===t},e},a=_.prototype,a.io=function(t){t===void 0&&(t=null);var e=new Le(this.ib),n=this;return e.predicate=function(i){return i.fromNode!==n?!1:t===null?!0:i.fromPortId===t},e},a.Fd=function(t){t===void 0&&(t=null);var e=new Le(this.ib),n=this;return e.predicate=function(i){return i.toNode!==n?!1:t===null?!0:i.toPortId===t},e},a.ku=function(t){t===void 0&&(t=null);for(var e=null,n=null,i=this.ib.iterator;i.next();){var r=i.value;r.fromNode===this?(t===null||r.fromPortId===t)&&(r=r.toNode,e!==null?e.add(r):n!==null&&n!==r?(e=new H,e.add(n),e.add(r)):n=r):r.toNode!==this||t!==null&&r.toPortId!==t||(r=r.fromNode,e!==null?e.add(r):n!==null&&n!==r?(e=new H,e.add(n),e.add(r)):n=r)}return e!==null?e.iterator:n!==null?new ge(n):Wn},a.mu=function(t){t===void 0&&(t=null);for(var e=null,n=null,i=this.ib.iterator;i.next();){var r=i.value;r.fromNode!==this||t!==null&&r.fromPortId!==t||(r=r.toNode,e!==null?e.add(r):n!==null&&n!==r?(e=new H,e.add(n),e.add(r)):n=r)}return e!==null?e.iterator:n!==null?new ge(n):Wn},a.lu=function(t){t===void 0&&(t=null);for(var e=null,n=null,i=this.ib.iterator;i.next();){var r=i.value;r.toNode!==this||t!==null&&r.toPortId!==t||(r=r.fromNode,e!==null?e.add(r):n!==null&&n!==r?(e=new H,e.add(n),e.add(r)):n=r)}return e!==null?e.iterator:n!==null?new ge(n):Wn},a.Ey=function(t,e,n){e===void 0&&(e=null),n===void 0&&(n=null);var i=new Le(this.ib),r=this;return i.predicate=function(s){return!((s.fromNode!==r||s.toNode!==t||e!==null&&s.fromPortId!==e||n!==null&&s.toPortId!==n)&&(s.fromNode!==t||s.toNode!==r||n!==null&&s.fromPortId!==n||e!==null&&s.toPortId!==e))},i},a.Fy=function(t,e,n){e===void 0&&(e=null),n===void 0&&(n=null);var i=new Le(this.ib),r=this;return i.predicate=function(s){return!(s.fromNode!==r||s.toNode!==t||e!==null&&s.fromPortId!==e||n!==null&&s.toPortId!==n)},i};function mp(t,e,n){Cn(n);var i=t.ib.contains(e);if(i||t.ib.add(e),!i||e.fromNode===e.toNode){var r=t.linkConnected;if(r!==null){var s=!0,h=t.diagram;h!==null&&(s=h.$,h.$=!0),r(t,e,n),h!==null&&(h.$=s)}}!i&&e.isTreeLink&&(n=e.fromNode,e=e.toNode,n!==null&&e!==null&&n!==e&&(i=!0,t=t.diagram,t!==null&&(i=t.isTreePathToChildren),r=i?e:n,s=i?n:e,r.Lg||(r.Lg=s),!s.isTreeLeaf||t!==null&&t.undoManager.isUndoingRedoing||(i?n===s&&(s.isTreeLeaf=!1):e===s&&(s.isTreeLeaf=!1))))}function xp(t,e,n){Cn(n);var i=t.ib.remove(e),r=null;if(i||e.toNode===e.fromNode){var s=t.linkDisconnected;if(r=t.diagram,s!==null){var h=!0;r!==null&&(h=r.$,r.$=!0),s(t,e,n),r!==null&&(r.$=h)}}i&&e.isTreeLink&&(n=!0,r!==null&&(n=r.isTreePathToChildren),t=n?e.toNode:e.fromNode,e=n?e.fromNode:e.toNode,t!==null&&(t.Lg=!1),e===null||e.isTreeLeaf||(e.ib.count===0?(e.Lg=null,r!==null&&r.undoManager.isUndoingRedoing||(e.isTreeLeaf=!0)):wl(e)))}function wl(t){if(t.Lg=!1,t.ib.count!==0){var e=!0,n=t.diagram;if(n===null||!n.undoManager.isUndoingRedoing){for(n!==null&&(e=n.isTreePathToChildren),n=t.ib.iterator;n.next();){var i=n.value;if(i.isTreeLink){if(e){if(i.fromNode===t){t.isTreeLeaf=!1;return}}else if(i.toNode===t){t.isTreeLeaf=!1;return}}}t.isTreeLeaf=!0}}}_.prototype.updateRelationshipsFromData=function(){var t=this.diagram;t!==null&&t.partManager.updateRelationshipsFromData(this)},a=_.prototype,a.po=function(t){ot.prototype.po.call(this,t),t||(wl(this),t=this.Ek,t!==null&&gx(t,this))},a.qo=function(t){ot.prototype.qo.call(this,t),t||(t=this.Ek,t!==null&&t.od!==null&&(t.od.remove(this),t.v()))},a.xj=function(){if(0<this.ib.count){var t=this.diagram;if(t!==null)for(var e=t.commandHandler!==null?t.commandHandler.deletesConnectedLinks:!0,n=this.ib.copy().iterator;n.next();){var i=n.value;e?t.remove(i):(i.fromNode===this&&(i.fromNode=null),i.toNode===this&&(i.toNode=null))}}this.labeledLink=null,ot.prototype.xj.call(this)},a.Cr=function(t){if(this.sc===null){if(t===""&&this.Fe===!1)return this;sx(this)}var e=this.sc.I(t);return e!==null||t!==""&&(e=this.sc.I(""),e!==null)?e:this};function sx(t){t.sc===null?t.sc=new pt:t.sc.clear(),t.Ql(t,function(e,n){ax(e,n)}),t.sc.count===0&&t.sc.add("",t)}function ax(t,e){var n=e.portId;n!==null&&t.sc!==null&&t.sc.add(n,e)}function Lg(t,e,n){var i=e.portId;if(i!==null&&(t.sc!==null&&t.sc.remove(i),e=t.diagram,e!==null&&n)){for(n=null,t=t.findLinksConnected(i);t.next();)i=t.value,n===null&&(n=Yt()),n.push(i);if(n!==null){for(t=0;t<n.length;t++)e.remove(n[t]);At(n)}}}a.gz=function(t){if(t===null||t===this)return!1;var e=!0,n=this.diagram;if(n!==null&&(e=n.isTreePathToChildren),n=this,e)for(;n!==t;){e=null;for(var i=n.ib.iterator;i.next();){var r=i.value;if(r.isTreeLink&&(e=r.fromNode,e!==n&&e!==this))break}if(e===this||e===null||e===n)return!1;n=e}else for(;n!==t;){for(e=null,i=n.ib.iterator;i.next()&&(r=i.value,!r.isTreeLink||(e=r.toNode,e===n||e===this)););if(e===this||e===null||e===n)return!1;n=e}return!0},a.Ry=function(){var t=!0,e=this.diagram;if(e!==null&&(t=e.isTreePathToChildren),e=this,t)for(;;){t=null;for(var n=e.ib.iterator;n.next();){var i=n.value;if(i.isTreeLink&&(t=i.fromNode,t!==e&&t!==this))break}if(t===this)return this;if(t===null||t===e)return e;e=t}else for(;;){for(t=null,n=e.ib.iterator;n.next()&&(i=n.value,!i.isTreeLink||(t=i.toNode,t===e||t===this)););if(t===this)return this;if(t===null||t===e)return e;e=t}},a.By=function(t){if(t===null)return null;if(this===t)return this;for(var e=this;e!==null;)cp(e,!0),e=e.cg();var n=null;for(e=t;e!==null;){if((e.G&1048576)!==0){n=e;break}e=e.cg()}for(e=this;e!==null;)cp(e,!1),e=e.cg();return n},a.Vg=function(){var t=!0,e=this.diagram;if(e!==null&&(t=e.isTreePathToChildren),e=this.ib.iterator,t){for(;e.next();)if(t=e.value,t.isTreeLink&&t.fromNode!==this)return t}else for(;e.next();)if(t=e.value,t.isTreeLink&&t.toNode!==this)return t;return null},a.cg=function(){var t=this.Lg;if(t===null)return null;if(t instanceof _)return t;var e=!0;if(t=this.diagram,t!==null&&(e=t.isTreePathToChildren),t=this.ib.iterator,e){for(;t.next();)if(e=t.value,e.isTreeLink&&(e=e.fromNode,e!==this))return this.Lg=e}else for(;t.next();)if(e=t.value,e.isTreeLink&&(e=e.toNode,e!==this))return this.Lg=e;return this.Lg=null},a.Py=function(){function t(n,i){i.add(n);var r=n.Vg();r!==null&&(i.add(r),n=n.cg(),n!==null&&t(n,i))}var e=new H;return t(this,e),e},a.Oy=function(){return hx(this,this)};function hx(t,e){return e=e.cg(),e===null?0:1+hx(t,e)}a.ko=function(){var t=!0,e=this.diagram;e!==null&&(t=e.isTreePathToChildren),e=new Le(this.ib);var n=this;return e.predicate=t?function(i){return!!(i.isTreeLink&&i.fromNode===n)}:function(i){return!!(i.isTreeLink&&i.toNode===n)},e},a.ou=function(){var t=!0,e=this.diagram;e!==null&&(t=e.isTreePathToChildren);var n=e=null,i=this.ib.iterator;if(t)for(;i.next();)t=i.value,t.isTreeLink&&t.fromNode===this&&(t=t.toNode,e!==null?e.add(t):n!==null&&n!==t?(e=new Q,e.add(n),e.add(t)):n=t);else for(;i.next();)t=i.value,t.isTreeLink&&t.toNode===this&&(t=t.fromNode,e!==null?e.add(t):n!==null&&n!==t?(e=new Q,e.add(n),e.add(t)):n=t);return e!==null?e.iterator:n!==null?new ge(n):Wn},a.Qy=function(t){t===void 0&&(t=1/0);var e=new H;return Ar(e,this,!1,t,!0),e},_.prototype.collapseTree=function(t){t===void 0&&(t=1),1>t&&(t=1);var e=this.diagram;if(e!==null&&!e.Ge){e.Ge=!0;var n=new H;n.add(this),lx(this,n,e.isTreePathToChildren,t,e,this,e.treeCollapsePolicy===Rs),e.Ge=!1}};function lx(t,e,n,i,r,s,h){if(1<i)for(var u=n?t.io():t.Fd();u.next();){var p=u.value;p.isTreeLink&&(p=p.no(t),p===null||p===t||e.contains(p)||(e.add(p),lx(p,e,n,i-1,r,s,h)))}else ux(t,e,n,r,s,h)}function ux(t,e,n,i,r,s){for(var h=r===t?!0:t.isTreeExpanded,u=n?t.io():t.Fd();u.next();){var p=u.value;if(p.isTreeLink&&(p=p.no(t),p!==null&&p!==t)){var d=e.contains(p);d||e.add(p),h&&(s&&i.nj(p,r),p.Yg(),p.Tb(!1)),p.isTreeExpanded&&(p.wasTreeExpanded=p.isTreeExpanded,d||ux(p,e,n,i,r,s))}}t.isTreeExpanded=!1}_.prototype.expandTree=function(t){t===void 0&&(t=2),2>t&&(t=2);var e=this.diagram;if(e!==null&&!e.Ge){e.Ge=!0;var n=new H;n.add(this),px(this,n,e.isTreePathToChildren,t,e,this,e.treeCollapsePolicy===Rs),e.Ge=!1}};function px(t,e,n,i,r,s,h){for(var u=s===t?!1:t.isTreeExpanded,p=n?t.io():t.Fd();p.next();){var d=p.value;d.isTreeLink&&(u||d.td||d.ab(),d=d.no(t),d!==null&&d!==t&&!e.contains(d)&&(e.add(d),u||(d.Tb(!0),d.Yg(),h&&r.pj(d,s)),2<i||d.wasTreeExpanded))&&(d.wasTreeExpanded=!1,px(d,e,n,i-1,r,s,h))}t.isTreeExpanded=!0}Z.Object.defineProperties(_.prototype,{portSpreading:{get:function(){return this.xa!==null?this.xa.xq:yp},set:function(t){var e=this.portSpreading;e!==t&&(rr(this),this.xa.xq=t,this.g("portSpreading",e,t),t=this.diagram,t!==null&&t.undoManager.isUndoingRedoing||this.sd())}},avoidable:{get:function(){return(this.U&8)!==0},set:function(t){var e=(this.U&8)!==0;if(e!==t){this.U^=8;var n=this.diagram;n!==null&&Bf(n,this),this.g("avoidable",e,t)}}},avoidableMargin:{get:function(){return this.xa!==null?this.xa.So:Fd},set:function(t){typeof t=="number"&&(t=new Ft(t));var e=this.avoidableMargin;if(!e.C(t)){t=t.J(),rr(this),this.xa.So=t;var n=this.diagram;n!==null&&Bf(n,this),this.g("avoidableMargin",e,t)}}},linksConnected:{get:function(){return this.ib.iterator}},linkConnected:{get:function(){return this.xa!==null?this.xa.Wp:null},set:function(t){var e=this.linkConnected;e!==t&&(rr(this),this.xa.Wp=t,this.g("linkConnected",e,t))}},linkDisconnected:{get:function(){return this.xa!==null?this.xa.Xp:null},set:function(t){var e=this.linkDisconnected;e!==t&&(rr(this),this.xa.Xp=t,this.g("linkDisconnected",e,t))}},linkValidation:{get:function(){return this.xa!==null?this.xa.Vi:null},set:function(t){var e=this.linkValidation;e!==t&&(rr(this),this.xa.Vi=t,this.g("linkValidation",e,t))}},isLinkLabel:{get:function(){return this.Ek!==null}},labeledLink:{get:function(){return this.Ek},set:function(t){var e=this.Ek;if(e!==t){var n=this.diagram,i=this.data;if(e!==null){if(e.od!==null&&(e.od.remove(this),e.v()),n!==null&&i!==null&&!n.undoManager.isUndoingRedoing){var r=e.data,s=n.model;if(r!==null&&s.di()){var h=s.ua(i);h!==void 0&&s.lx(r,h)}}this.containingGroup=null}this.Ek=t,t!==null&&(gx(t,this),n===null||i===null||n.undoManager.isUndoingRedoing||(r=t.data,n=n.model,r!==null&&n.di()&&(i=n.ua(i),i!==void 0&&n.Yt(r,i))),this.containingGroup=t.containingGroup),Ka(this),this.g("labeledLink",e,t)}}},port:{get:function(){return this.Cr("")}},ports:{get:function(){return this.sc===null&&sx(this),this.sc.iteratorValues}},isTreeExpanded:{get:function(){return(this.U&1)!==0},set:function(t){var e=(this.U&1)!==0;if(e!==t){this.U^=1;var n=this.diagram;if(this.g("isTreeExpanded",e,t),e=this.treeExpandedChanged,e!==null){var i=!0;n!==null&&(i=n.$,n.$=!0),e(this),n!==null&&(n.$=i)}n!==null&&n.undoManager.isUndoingRedoing?this.Tb(t):t?this.expandTree():this.collapseTree()}}},wasTreeExpanded:{get:function(){return(this.U&2)!==0},set:function(t){var e=(this.U&2)!==0;e!==t&&(this.U^=2,this.g("wasTreeExpanded",e,t))}},treeExpandedChanged:{get:function(){return this.xa!==null?this.xa.mr:null},set:function(t){var e=this.treeExpandedChanged;e!==t&&(rr(this),this.xa.mr=t,this.g("treeExpandedChanged",e,t))}},isTreeLeaf:{get:function(){return(this.U&4)!==0},set:function(t){var e=(this.U&4)!==0;e!==t&&(this.U^=4,this.g("isTreeLeaf",e,t))}}}),_.prototype.expandTree=_.prototype.expandTree,_.prototype.collapseTree=_.prototype.collapseTree,_.prototype.findTreeParts=_.prototype.Qy,_.prototype.findTreeChildrenNodes=_.prototype.ou,_.prototype.findTreeChildrenLinks=_.prototype.ko,_.prototype.findTreeLevel=_.prototype.Oy,_.prototype.findTreeParentChain=_.prototype.Py,_.prototype.findTreeParentNode=_.prototype.cg,_.prototype.findTreeParentLink=_.prototype.Vg,_.prototype.findCommonTreeParent=_.prototype.By,_.prototype.findTreeRoot=_.prototype.Ry,_.prototype.isInTreeOf=_.prototype.gz,_.prototype.findPort=_.prototype.Cr,_.prototype.findLinksTo=_.prototype.Fy,_.prototype.findLinksBetween=_.prototype.Ey,_.prototype.findNodesInto=_.prototype.lu,_.prototype.findNodesOutOf=_.prototype.mu,_.prototype.findNodesConnected=_.prototype.ku,_.prototype.findLinksInto=_.prototype.Fd,_.prototype.findLinksOutOf=_.prototype.io,_.prototype.findExternalTreeLinksConnected=_.prototype.Jw,_.prototype.invalidateConnectedLinks=_.prototype.sd,_.prototype.invalidateLinkBundle=_.prototype.ez;var mv=new J(_,"SpreadingNone",10),yp=new J(_,"SpreadingEvenly",11),Mg=new J(_,"SpreadingPacked",12);_.className="Node",_.SpreadingNone=mv,_.SpreadingEvenly=yp,_.SpreadingPacked=Mg;function ut(t,e){t===void 0||t instanceof fe||typeof t=="string"?_.call(this,t):(_.call(this),t&&(e=t)),this.U|=4608,this.cn=new H,this.Ya=null,this.Jc=new Ut,this.Jc.group=this,this.Mk=new H,this.hb=this.tp=null,e&&Object.assign(this,e)}z(ut,_),ut.prototype.cloneProtected=function(t){_.prototype.cloneProtected.call(this,t),this.U=this.U&-32769;var e=t.ml(function(n){return n instanceof an});e instanceof an?t.Ya=e:t.Ya=null,this.Jc!==null?(t.Jc=this.Jc.copy(),t.Jc.group=t):(t.Jc!==null&&(t.Jc.group=null),t.Jc=null),this.hb!==null&&(t.hb=this.hb.copy())},a=ut.prototype,a.lf=function(t){_.prototype.lf.call(this,t);var e=t.Bj();for(t=t.memberParts;t.next();){var n=t.value;if(n.v(),n.D(8),n.rj(),n instanceof _)n.sd(e);else if(n instanceof U)for(n=n.labelNodes;n.next();)n.value.sd(e)}},a.Qj=function(t,e,n,i,r,s,h){if(t===me&&e==="elements"){if(r instanceof an)this.Ya===null?this.Ya=r:this.Ya!==r&&X("Cannot insert a second Placeholder into the visual tree of a Group.");else if(r instanceof Y){var u=r.ml(function(p){return p instanceof an});u instanceof an&&(this.Ya===null?this.Ya=u:this.Ya!==u&&X("Cannot insert a second Placeholder into the visual tree of a Group."))}}else t===Me&&e==="elements"&&this.Ya!==null&&(i===this.Ya?this.Ya=null:i instanceof Y&&this.Ya.dg(i)&&(this.Ya=null));_.prototype.Qj.call(this,t,e,n,i,r,s,h)},a.wl=function(t,e){_.prototype.wl.call(this,t,e),this.isClipping&&this.type!==Y.Spot&&this.isSubGraphExpanded&&(t=this.resizeObject,t instanceof Y&&(t=t.vb()),this.hb===null&&(this.hb=new E),t.$h(this.hb),t instanceof dt&&this.hb.vc(-t.strokeWidth,-t.strokeWidth))},a.Qg=function(t,e,n,i){this.Ye=this.Ya,_.prototype.Qg.call(this,t,e,n,i)},a.Ta=function(){var t=this;t.isSubGraphExpanded&&this.memberParts.each(function(e){!t.computesBoundsIncludingLinks&&e instanceof U||e.Ta()}),_.prototype.Ta.call(this)},a.fi=function(){if(!_.prototype.fi.call(this))return!1;for(var t=this.memberParts;t.next();){var e=t.value;if(e instanceof _){if(e.isVisible()&&Si(e))return!1}else if(e instanceof U&&e.isVisible()&&Si(e)&&e.fromNode!==this&&e.toNode!==this)return!1}return!0};function kg(t,e){if(t.cn.add(e)){e instanceof ut&&t.Mk.add(e);var n=t.memberAdded;if(n!==null){var i=!0,r=t.diagram;r!==null&&(i=r.$,r.$=!0),n(t,e),r!==null&&(r.$=i)}t.isVisible()&&t.isSubGraphExpanded||e.Tb(!1)}e instanceof U&&!t.computesBoundsIncludingLinks||(e=t.Ya,e===null&&(e=t),e.v())}function Ng(t,e){if(t.cn.remove(e)){e instanceof ut&&t.Mk.remove(e);var n=t.memberRemoved;if(n!==null){var i=!0,r=t.diagram;r!==null&&(i=r.$,r.$=!0),n(t,e),r!==null&&(r.$=i)}t.isVisible()&&t.isSubGraphExpanded||e.Tb(!0)}e instanceof U&&!t.computesBoundsIncludingLinks||(e=t.Ya,e===null&&(e=t),e.v())}a.xj=function(){if(0<this.cn.count){var t=this.diagram;if(t!==null)for(var e=this.cn.copy().iterator;e.next();)t.remove(e.value)}_.prototype.xj.call(this)},ut.prototype.canAddMembers=function(t){var e=this.diagram;if(e===null)return!1;for(e=e.commandHandler,t=zf(t).iterator;t.next();)if(!e.isValidMember(this,t.value))return!1;return!0},ut.prototype.addMembers=function(t,e){var n=this.diagram;if(n===null)return!1;n=n.commandHandler;var i=!0;for(t=zf(t).iterator;t.next();){var r=t.value;!e||n.isValidMember(this,r)?r.containingGroup=this:i=!1}return i},ut.prototype.canUngroup=function(){if(!this.ungroupable)return!1;var t=this.layer;return t===null||!t.allowUngroup?!1:(t=t.diagram,!!(t===null||t.allowUngroup))},a=ut.prototype,a.sd=function(t){var e=(this.U&65536)!==0;if(_.prototype.sd.call(this,t),!e)for((this.U&65536)===0&&(this.U=this.U^65536),e=this.ju();e.next();){var n=e.value;if(t===void 0||!t.contains(n)){var i=n.fromNode;i!==null&&i!==this&&i.Hd(this)&&!i.isVisible()?(Cn(n.fromPort),Cn(n.toPort),n.ab()):(i=n.toNode,i!==null&&i!==this&&i.Hd(this)&&!i.isVisible()&&(Cn(n.fromPort),Cn(n.toPort),n.ab()))}}},a.ju=function(){var t=this.diagram!==null&&this.diagram.jw;if(t&&this.tp!==null)return this.tp.iterator;var e=this.Bj();e.add(this);for(var n=new H,i=e.iterator;i.next();){var r=i.value;if(r instanceof _)for(r=r.linksConnected;r.next();){var s=r.value;e.contains(s)||n.add(s)}}return t&&(this.tp=n),n.iterator},a.Dy=function(){var t=this.Bj();t.add(this);for(var e=new H,n=t.iterator;n.next();){var i=n.value;if(i instanceof _)for(i=i.linksConnected;i.next();){var r=i.value,s=r.fromNode;s===null||t.contains(s)&&s!==this||e.add(s),r=r.toNode,r===null||t.contains(r)&&r!==this||e.add(r)}}return e.iterator},a.Cy=function(){function t(n,i){n!==null&&(i.add(n),t(n.containingGroup,i))}var e=new H;return t(this,e),e},a.Bj=function(){var t=new H;return Ar(t,this,!0,0,!0),t.remove(this),t},a.Tb=function(t){_.prototype.Tb.call(this,t);for(var e=this.memberParts;e.next();)e.value.Tb(t)},ut.prototype.collapseSubGraph=function(){var t=this.diagram;if(t!==null&&!t.Ge){t.Ge=!0;var e=this.Bj();dx(this,e,t,this),t.Ge=!1}};function dx(t,e,n,i){for(var r=t.memberParts;r.next();){var s=r.value;if(s.Tb(!1),s instanceof ut&&s.isSubGraphExpanded&&(s.wasSubGraphExpanded=s.isSubGraphExpanded,dx(s,e,n,i)),s instanceof _)s.sd(e),n.nj(s,i);else if(s instanceof U)for(s=s.labelNodes;s.next();)s.value.sd(e)}t.isSubGraphExpanded=!1}ut.prototype.expandSubGraph=function(){var t=this.diagram;if(t!==null&&!t.Ge){t.Ge=!0;var e=this.Bj();fx(this,e,t,this),t.Ge=!1}};function fx(t,e,n,i){for(var r=t.memberParts;r.next();){var s=r.value;if(s.Tb(!0),s instanceof ut&&s.wasSubGraphExpanded&&(s.wasSubGraphExpanded=!1,fx(s,e,n,i)),s instanceof _)s.sd(e),n.pj(s,i);else if(s instanceof U)for(s=s.labelNodes;s.next();)s.value.sd(e)}t.isSubGraphExpanded=!0}ut.prototype.move=function(t,e){e===void 0&&(e=!1);var n=e?this.location:this.position,i=n.x;n=n.y;var r=t.x,s=t.y;if(!(i===r||isNaN(i)&&isNaN(r))||!(n===s||isNaN(n)&&isNaN(s))){for(i=r-(isNaN(i)?0:i),n=s-(isNaN(n)?0:n),s=T.alloc(),_.prototype.move.call(this,t,e),t=new H,e=this.Bj().iterator;e.next();)r=e.value,r instanceof U&&(r.suspendsRouting&&t.add(r),r.td||r.fromNode!==this&&r.toNode!==this)&&(r.suspendsRouting=!0);for(e.reset();e.next();)if(r=e.value,!(r.Zg()||r instanceof _&&r.isLinkLabel)){var h=r.position,u=r.location;h.w()?(s.x=h.x+i,s.y=h.y+n,r.position=s):u.w()&&(s.x=u.x+i,s.y=u.y+n,r.location=s)}for(e.reset();e.next();)r=e.value,r instanceof U&&(r.suspendsRouting=t.contains(r),r.td||r.fromNode!==this&&r.toNode!==this)&&(h=r.position,s.x=h.x+i,s.y=h.y+n,s.w()?r.move(s):r.ab(),Cg(r)&&r.ab());T.free(s)}},Z.Object.defineProperties(ut.prototype,{placeholder:{get:function(){return this.Ya}},computesBoundsAfterDrag:{get:function(){return(this.U&2048)!==0},set:function(t){var e=(this.U&2048)!==0;e!==t&&(this.U^=2048,this.g("computesBoundsAfterDrag",e,t))}},computesBoundsIncludingLinks:{get:function(){return(this.U&4096)!==0},set:function(t){var e=(this.U&4096)!==0;e!==t&&(this.U^=4096,this.g("computesBoundsIncludingLinks",e,t))}},computesBoundsIncludingLocation:{get:function(){return(this.U&8192)!==0},set:function(t){var e=(this.U&8192)!==0;e!==t&&(this.U^=8192,this.g("computesBoundsIncludingLocation",e,t))}},handlesDragDropForMembers:{get:function(){return(this.U&16384)!==0},set:function(t){var e=(this.U&16384)!==0;e!==t&&(this.U^=16384,this.g("handlesDragDropForMembers",e,t))}},memberParts:{get:function(){return this.cn.iterator}},layout:{get:function(){return this.Jc},set:function(t){var e=this.Jc;if(e!==t){t!==null&&t.diagram!==null&&t.diagram.layout===t&&X("A layout cannot be both the Diagram.layout and a Group.layout: "+t),e!==null&&(e.diagram=null,e.group=null),this.Jc=t;var n=this.diagram;t!==null&&(t.diagram=n,t.group=this),n!==null&&(n.hh=!0),this.g("layout",e,t),n!==null&&n.Kb()}}},memberAdded:{get:function(){return this.xa!==null?this.xa.fq:null},set:function(t){var e=this.memberAdded;e!==t&&(rr(this),this.xa.fq=t,this.g("memberAdded",e,t))}},memberRemoved:{get:function(){return this.xa!==null?this.xa.gq:null},set:function(t){var e=this.memberRemoved;e!==t&&(rr(this),this.xa.gq=t,this.g("memberRemoved",e,t))}},memberValidation:{get:function(){return this.xa!==null?this.xa.Xi:null},set:function(t){var e=this.memberValidation;e!==t&&(rr(this),this.xa.Xi=t,this.g("memberValidation",e,t))}},ungroupable:{get:function(){return(this.U&256)!==0},set:function(t){var e=(this.U&256)!==0;e!==t&&(this.U^=256,this.g("ungroupable",e,t))}},isSubGraphExpanded:{get:function(){return(this.U&512)!==0},set:function(t){var e=(this.U&512)!==0;if(e!==t){this.U^=512;var n=this.diagram;if(this.g("isSubGraphExpanded",e,t),e=this.subGraphExpandedChanged,e!==null){var i=!0;n!==null&&(i=n.$,n.$=!0),e(this),n!==null&&(n.$=i)}n!==null&&n.undoManager.isUndoingRedoing?(this.Ya!==null&&this.Ya.v(),this.memberParts.each(function(r){r.updateAdornments()})):t?this.expandSubGraph():this.collapseSubGraph()}}},wasSubGraphExpanded:{get:function(){return(this.U&1024)!==0},set:function(t){var e=(this.U&1024)!==0;e!==t&&(this.U^=1024,this.g("wasSubGraphExpanded",e,t))}},subGraphExpandedChanged:{get:function(){return this.xa!==null?this.xa.ar:null},set:function(t){var e=this.subGraphExpandedChanged;e!==t&&(rr(this),this.xa.ar=t,this.g("subGraphExpandedChanged",e,t))}},ah:{get:function(){return(this.U&32768)!==0},set:function(t){(this.U&32768)!==0!==t&&(this.U^=32768)}}}),ut.prototype.expandSubGraph=ut.prototype.expandSubGraph,ut.prototype.collapseSubGraph=ut.prototype.collapseSubGraph,ut.prototype.findSubGraphParts=ut.prototype.Bj,ut.prototype.findContainingGroupChain=ut.prototype.Cy,ut.prototype.findExternalNodesConnected=ut.prototype.Dy,ut.prototype.findExternalLinksConnected=ut.prototype.ju,ut.prototype.ensureBounds=ut.prototype.Ta,ut.className="Group";function an(t){nt.call(this),this.ub=Sa,this.En=new E(NaN,NaN,NaN,NaN),t&&Object.assign(this,t)}z(an,nt),an.prototype.cloneProtected=function(t){nt.prototype.cloneProtected.call(this,t),t.ub=this.ub.J(),t.En=this.En.copy()},an.prototype.Sg=function(t){if(this.background===null&&this.areaBackground===null)return!1;var e=this.naturalBounds;return Di(0,0,e.width,e.height,t.x,t.y)},an.prototype.vl=function(){var t=this.part;if(t!==null&&(t instanceof ut||t instanceof St)||X("Placeholder is not inside a Group or Adornment."),t instanceof ut){var e=this.computeBorder(this.En),n=this.minSize,i=this.ac;for($(i,(isFinite(n.width)?Math.max(n.width,e.width):e.width)||0,(isFinite(n.height)?Math.max(n.height,e.height):e.height)||0),this.se(0,0,i.width,i.height),i=t.memberParts,n=!1;i.next();)if(i.value.isVisible()){n=!0;break}i=t.diagram,!n||i===null||i.animationManager.xu(t)||isNaN(e.x)||isNaN(e.y)||(n=T.alloc(),n.hi(e,t.locationSpot),n.C(t.location)||(t.location=n),T.free(n))}else{e=this.ac,n=this.ub,i=n.left+n.right;var r=n.top+n.bottom,s=t.adornedObject;t.angle=s.Zh();var h=0;s instanceof dt&&(h=s.strokeWidth);var u=s.qf(),p=s.naturalBounds,d=(p.width+h)*u;h=(p.height+h)*u,t.type!==Y.Link&&(u=s.ia(t.category==="Selection"?Qe:t.locationSpot,T.alloc()),t.location=u,T.free(u)),isNaN(d)||isNaN(h)?(t=s.ia(Qe,T.alloc()),d=E.allocAt(t.x,t.y,0,0),d.Ke(s.ia(ro,t)),d.Ke(s.ia(Pa,t)),d.Ke(s.ia(wa,t)),$(e,d.width+i||0,d.height+r||0),this.se(-n.left,-n.top,e.width,e.height),T.free(t),E.free(d)):($(e,d+i||0,h+r||0),this.se(-n.left,-n.top,e.width,e.height))}},an.prototype.Qg=function(t,e,n,i){this.actualBounds.h(t,e,n,i)},an.prototype.computeBorder=function(t){var e=this.part,n=e.diagram;if(n!==null&&e instanceof ut&&!e.layer.isTemporary&&e.computesBoundsAfterDrag&&this.En.w()){var i=n.toolManager.findTool("Dragging");if(i===n.currentTool&&(n=i.computeBorder(e,this.En,t),n!==null))return n}n=E.alloc(),i=this.computeMemberBounds(n);var r=this.ub;return e instanceof ut&&!e.isSubGraphExpanded?t.h(i.x-r.left,i.y-r.top,0,0):t.h(i.x-r.left,i.y-r.top,Math.max(i.width+r.left+r.right,0),Math.max(i.height+r.top+r.bottom,0)),E.free(n),e instanceof ut&&e.computesBoundsIncludingLocation&&e.location.w()&&t.Ke(e.location),t},an.prototype.computeMemberBounds=function(t){if(!(this.part instanceof ut))return t.h(0,0,0,0),t;for(var e=this.part,n=1/0,i=1/0,r=-1/0,s=-1/0,h=e.memberParts;h.next();){var u=h.value;if(u.isVisible()){if(u instanceof U&&(!e.computesBoundsIncludingLinks||Co(u)||u.fromNode===e||u.toNode===e))continue;u=u.actualBounds,u.left<n&&(n=u.left),u.top<i&&(i=u.top),u.right>r&&(r=u.right),u.bottom>s&&(s=u.bottom)}}return isFinite(n)&&isFinite(i)?t.h(n,i,r-n,s-i):(e=e.location,t.h(e.x,e.y,0,0)),t},Z.Object.defineProperties(an.prototype,{padding:{get:function(){return this.ub},set:function(t){typeof t=="number"&&(t=new Ft(t));var e=this.ub;e.C(t)||(this.ub=t=t.J(),this.g("padding",e,t),this.v())}}}),an.className="Placeholder";function U(t){ot.call(this,Y.Link),this.Na=8,this.Re=null,this.Se="",this.ef=this.Em=null,this.ff="",this.On=null,this.Vj=hn,this.mm=0,this.om=hn,this.pm=NaN,this.dj=Dg,this.Jn=.5,this.od=null,this.Ib=new Q().freeze(),this.bf=this.xg=null,this.Sk=new E,this.sa=new K,this.u=this.m=this.Ff=this.Jf=null,this.Ot=new T,this.xp=this.gw=this.fw=null,this.Ps=NaN,this.aa=null,this.j=[],t&&Object.assign(this,t)}z(U,ot),U.prototype.cloneProtected=function(t){ot.prototype.cloneProtected.call(this,t),t.Na=this.Na&-113,t.Se=this.Se,t.Em=this.Em,t.ff=this.ff,t.On=this.On,t.Vj=this.Vj,t.mm=this.mm,t.om=this.om,t.pm=this.pm,t.dj=this.dj,t.Jn=this.Jn,this.aa!==null&&(t.aa=this.aa.copy())},a=U.prototype,a.lf=function(t){ot.prototype.lf.call(this,t),this.Se=t.Se,this.ff=t.ff,t.xg=null,t.ab(),t.Ff=this.Ff;var e=t.fromPort;e!==null&&Cn(e),t=t.toPort,t!==null&&Cn(t)},a.ob=function(t){t.classType===U?(t.value&2)===2?this.routing=t:t===Yn||t===ar||t===ah?this.curve=t:t===kl||t===Lp||t===Mp?this.adjusting=t:t!==Dg&&t!==hn&&X("Unknown Link enum value for a Link property: "+t):ot.prototype.ob.call(this,t)},a.Pc=function(){this.aa===null&&(this.aa=new pl)},a.fi=function(){var t=this.fromNode;if(t!==null){var e=t.findVisibleNode();if(e!==null&&(t=e),Si(t)||Or(t))return!1}return t=this.toNode,!(t!==null&&(e=t.findVisibleNode(),e!==null&&(t=e),Si(t)||Or(t)))},a.Wu=function(){return!1},a.Xu=function(){},a.Rc=function(){return!1},U.prototype.computeAngle=function(t,e,n){return U.computeAngle(e,n)},U.computeAngle=function(t,e){switch(t){default:case hn:t=0;break;case Nl:t=e;break;case Tl:t=e+90;break;case Cl:t=e-90;break;case Gg:t=e+180;break;case kp:t=O.vo(e),90<t&&270>t&&(t-=180);break;case Fl:t=O.vo(e+90),90<t&&270>t&&(t-=180);break;case Bl:t=O.vo(e-90),90<t&&270>t&&(t-=180);break;case Np:if(t=O.vo(e),45<t&&135>t||225<t&&315>t)return 0;90<t&&270>t&&(t-=180)}return O.vo(t)};function rh(t){var e=t.fromNode,n=t.toNode,i=null;if(e!==null?i=n!==null?e.Iw(n):e.containingGroup:n!==null?i=n.containingGroup:i=null,e=i,n=t.kh,n!==e){n!==null&&Ng(n,t),t.kh=e,e!==null&&kg(e,t);var r=t.containingGroupChanged;if(r!==null){var s=!0,h=t.diagram;h!==null&&(s=h.$,h.$=!0),r(t,n,e),h!==null&&(h.$=s)}!t.td||t.fw!==n&&t.gw!==n||t.ab()}if(t.isLabeledLink)for(t=t.labelNodes;t.next();)t.value.containingGroup=i}a=U.prototype,a.Yg=function(){var t=this.containingGroup;t!==null&&this.fromNode!==t&&this.toNode!==t&&t.computesBoundsIncludingLinks&&ot.prototype.Yg.call(this)},a.no=function(t){var e=this.fromNode;return t===e?this.toNode:e},a.Wy=function(t){var e=this.fromPort;return t===e?this.toPort:e};function gx(t,e){t.od===null&&(t.od=new H),t.od.add(e),t.v()}a.po=function(t){if(ot.prototype.po.call(this,t),ys(this)&&this.ro(this.actualBounds),!t){t=this.Re;var e=null;t!==null&&(e=this.fromPort,mp(t,this,e));var n=this.ef;if(n!==null){var i=this.toPort;n===t&&i===e||mp(n,this,i)}Ll(this)}},a.qo=function(t){if(ot.prototype.qo.call(this,t),ys(this)&&this.ro(this.actualBounds),!t){t=this.Re;var e=null;t!==null&&(e=this.fromPort,xp(t,this,e));var n=this.ef;if(n!==null){var i=this.toPort;n===t&&i===e||xp(n,this,i)}Ml(this)}},a.xj=function(){if(this.td=!0,this.od!==null){var t=this.diagram;if(t!==null)for(var e=this.od.copy().iterator;e.next();)t.remove(e.value)}this.data!==null&&(t=this.diagram,t!==null&&t.partManager.removeDataForLink(this))},U.prototype.updateRelationshipsFromData=function(){if(this.data!==null){var t=this.diagram;t!==null&&t.partManager.updateRelationshipsFromData(this)}},U.prototype.move=function(t,e){var n=e?this.location:this.position,i=n.x;isNaN(i)&&(i=0);var r=n.y;for(isNaN(r)&&(r=0),i=t.x-i,r=t.y-r,e===!0?ot.prototype.move.call(this,t,!1):(t=T.allocAt(n.x+i,n.y+r),ot.prototype.move.call(this,t,!1),T.free(t)),sr(this,i,r),t=this.labelNodes;t.next();)e=t.value,n=e.position,e.moveTo(n.x+i,n.y+r)},U.prototype.canRelinkFrom=function(){if(!this.relinkableFrom)return!1;var t=this.layer;return t===null?!0:t.allowRelink?(t=t.diagram,!!(t===null||t.allowRelink)):!1},U.prototype.canRelinkTo=function(){if(!this.relinkableTo)return!1;var t=this.layer;return t===null?!0:t.allowRelink?(t=t.diagram,!!(t===null||t.allowRelink)):!1},U.prototype.computeMidPoint=function(t){var e=this.pointsCount;if(e===0)return t.assign(Ds),t;if(e===1)return t.assign(this.i(0)),t;if(e===2){var n=this.i(0),i=this.i(1);return t.h((n.x+i.x)/2,(n.y+i.y)/2),t}if(this.isOrthogonal&&(15<=this.computeCorner()||this.computeCurve()===Yn))return this.sa.pu(.5,t),t.add(this.i(0)),n=this.sa.figures.first(),t.offset(-n.startX,-n.startY),t;if(this.computeCurve()===Yn){if(e===3){n=this.i(0),i=this.i(1);var r=this.i(2);return O.ww(n.x,n.y,i.x,i.y,i.x,i.y,r.x,r.y,t),t}if(i=(e-1)/3|0,n=3*(i/2|0),i%2===1){i=this.i(n),r=this.i(n+1);var s=this.i(n+2);n=this.i(n+3),O.ww(i.x,i.y,r.x,r.y,s.x,s.y,n.x,n.y,t)}else t.assign(this.i(n));return t}var h=this.flattenedLengths;for(n=this.flattenedTotalLength,r=s=i=0;i<n/2&&s<e&&(r=h[s],!(i+r>n/2));)i+=r,s++;return e=this.i(s),s=this.i(s+1),1>Math.abs(e.x-s.x)?e.y>s.y?t.h(e.x,e.y-(n/2-i)):t.h(e.x,e.y+(n/2-i)):1>Math.abs(e.y-s.y)?e.x>s.x?t.h(e.x-(n/2-i),e.y):t.h(e.x+(n/2-i),e.y):(n=(n/2-i)/r,t.h(e.x+n*(s.x-e.x),e.y+n*(s.y-e.y))),t},U.prototype.computeMidAngle=function(){var t=this.pointsCount;if(2>t)return NaN;if(t===2)return this.i(0).Za(this.i(1));if(this.isOrthogonal&&(15<=this.computeCorner()||this.computeCurve()===Yn))return this.sa.Ow(.5);if(this.computeCurve()===Yn&&4<=t){var e=(t-1)/3|0,n=3*(e/2|0);if(e%2===1){n=Math.floor(n),t=this.i(n),e=this.i(n+1);var i=this.i(n+2);return n=this.i(n+3),O.gy(t.x,t.y,e.x,e.y,i.x,i.y,n.x,n.y)}if(0<n&&n+1<t)return this.i(n-1).Za(this.i(n+1))}e=this.flattenedLengths,i=this.flattenedTotalLength;var r=0;n=0;for(var s;r<i/2&&n<t&&(s=e[n],!(r+s>i/2));)r+=s,n++;if(e=this.i(n),i=this.i(n+1),1>Math.abs(e.x-i.x)&&1>Math.abs(e.y-i.y)){if(0<n&&n+2<t)return this.i(n-1).Za(this.i(n+2))}else{if(1>Math.abs(e.x-i.x))return e.y>i.y?270:90;if(1>Math.abs(e.y-i.y))return e.x>i.x?180:0}return e.Za(i)},a=U.prototype,a.i=function(t){return this.Ib.s[t]},a.Uc=function(t,e){this.Ib.Tc(t,e)},a.M=function(t,e,n){this.Ib.Tc(t,new T(e,n))},a.dz=function(t,e){this.Ib.Cb(t,e)},a.l=function(t,e,n){this.Ib.Cb(t,new T(e,n))},a.ce=function(t){this.Ib.add(t)},a.jf=function(t,e){this.Ib.add(new T(t,e))},a.Ou=function(t){this.Ib.lb(t)},a.sj=function(){this.Ib.clear()};function sr(t,e,n){if(e!==0||n!==0)if(t.pointsCount===0)t.defaultFromPoint&&t.defaultFromPoint.offset(e,n),t.defaultToPoint&&t.defaultToPoint.offset(e,n);else{for(var i=t.td,r=new Q,s=t.Ib.iterator;s.next();){var h=s.value;r.add(new T(h.x+e,h.y+n).freeze())}r.freeze(),s=t.Ib,t.Ib=r,h=t.diagram,isNaN(e)||isNaN(n)||h!==null&&h.animationManager.zb?t.v():(t.$d.h(t.$d.x+e,t.$d.y+n),t.pa.h(t.pa.x+e,t.pa.y+n),Ka(t)),i?vp(t):(t.defaultFromPoint&&(t.defaultFromPoint=t.i(0)),t.defaultToPoint&&(t.defaultToPoint=t.i(t.pointsCount-1))),h!==null&&h.animationManager.zb&&(e=h.animationManager,t.bf=r,e.Uk.add(t)),t.g("points",s,r)}}a.eh=function(){this.xg===null&&(this.xg=this.Ib,this.Ib=this.Ib.copy())},a.kf=function(){if(this.xg!==null){for(var t=this.xg,e=this.Ib,n=1/0,i=1/0,r=t.s,s=r.length,h=0;h<s;h++){var u=r[h];n=Math.min(u.x,n),i=Math.min(u.y,i)}u=h=1/0;for(var p=e.s,d=p.length,g=0;g<d;g++){var c=p[g];h=Math.min(c.x,h),u=Math.min(c.y,u),c.freeze()}if(e.freeze(),d===s){for(s=0;s<d;s++)if(g=r[s],c=p[s],g.x-n!==c.x-h||g.y-i!==c.y-u){this.lc();break}}else this.lc();this.xg=null,n=this.diagram,n!==null&&n.animationManager.zb&&(n=n.animationManager,this.bf=e,n.Uk.add(this)),vp(this),this.g("points",t,e)}},a.Qu=function(){this.xg!==null&&(this.Ib=this.xg,this.xg=null)};function vp(t){t.Ib.count===0?t.td=!1:(t.td=!0,t.xp=null,t.Ps=NaN,t.defaultFromPoint=t.i(0),t.defaultToPoint=t.i(t.pointsCount-1),jg(t,!1))}a.ab=function(){if(!this.suspendsRouting){var t=this.diagram;if(t){if(t.Rr.contains(this)||t.undoManager.isUndoingRedoing||(t=t.animationManager,t.isTicking&&!t.isAnimating))return;this.bf!==null&&!t.isTicking&&t.isAnimating&&(this.bf=null)}t=this.path,t!==null&&(this.td=!1,this.v(),t.v())}},a.hg=function(){if(!this.td&&!this.computingPoints){var t=!0;try{this.computingPoints=!0,this.eh(),t=this.computePoints()}catch{this.computingPoints=!1,this.Qu()}finally{this.computingPoints=!1,t?this.kf():this.Qu()}}},U.prototype.computePoints=function(){if(this.diagram===null)return!1;var t=this.fromNode,e=null;if(t===null?(Qs||(Qs=new _,Qs.desiredSize=Nr,Qs.Ta()),this.defaultFromPoint&&(Qs.location=this.defaultFromPoint,Qs.Ta(),e=t=Qs)):e=this.fromPort,e!==null&&!t.isVisible()){var n=t.findVisibleNode();n!==null&&n!==t?(t=n,e=n.port):t=n}if(this.fw=t,t===null||!t.location.w())return!1;for(;!(e===null||e.actualBounds.w()&&e.vf());)e=e.panel;if(e===null)return!1;var i=this.toNode,r=null;if(i===null?(bs||(bs=new _,bs.desiredSize=Nr,bs.Ta()),this.defaultToPoint&&(bs.location=this.defaultToPoint,bs.Ta(),r=i=bs)):r=this.toPort,r===null||i.isVisible()||(n=i.findVisibleNode(),n!==null&&n!==i?(i=n,r=n.port):i=n),this.gw=i,i===null||!i.location.w())return!1;for(;!(r===null||r.actualBounds.w()&&r.vf());)r=r.panel;if(r===null)return!1;var s=this.pointsCount,h=this.computeSpot(!0,e);n=this.computeSpot(!1,r);var u=sh(h),p=sh(n),d=e===r&&e!==null,g=this.isOrthogonal,c=this.curve===Yn;this.Jf=d&&!g?c=!0:!1;var y=this.computeAdjusting()===hn||d;if(!g&&!d&&u&&p){if(u=!1,!y&&3<=s&&(y=this.getLinkPoint(t,e,h,!0,!1,i,r),p=this.getLinkPoint(i,r,n,!1,!1,t,e),u=this.adjustPoints(0,y,s-1,p))&&(y=this.getLinkPoint(t,e,h,!0,!1,i,r),p=this.getLinkPoint(i,r,n,!1,!1,t,e),this.adjustPoints(0,y,s-1,p)),!u)if(this.sj(),c){s=this.getLinkPoint(t,e,h,!0,!1,i,r),y=this.getLinkPoint(i,r,n,!1,!1,t,e),u=y.x-s.x,p=y.y-s.y,d=this.computeCurviness(),c=g=0;var S=s.x+u/3,v=s.y+p/3,L=S,N=v;O.B(p,0)?N=0<u?N-d:N+d:(g=-u/p,c=Math.sqrt(d*d/(g*g+1)),0>d&&(c=-c),L=(0>p?-1:1)*c+S,N=g*(L-S)+v),S=s.x+2*u/3,v=s.y+2*p/3;var M=S,B=v;O.B(p,0)?B=0<u?B-d:B+d:(M=(0>p?-1:1)*c+S,B=g*(M-S)+v),this.sj(),this.ce(s),this.jf(L,N),this.jf(M,B),this.ce(y),this.Uc(0,this.getLinkPoint(t,e,h,!0,!1,i,r)),this.Uc(3,this.getLinkPoint(i,r,n,!1,!1,t,e))}else s=i,y=r,i=this.getLinkPoint(t,e,h,!0,!1,s,y),r=this.getLinkPoint(s,y,n,!1,!1,t,e),this.hasCurviness()?(y=r.x-i.x,n=r.y-i.y,h=this.computeCurviness(),t=i.x+y/2,e=i.y+n/2,s=t,u=e,O.B(n,0)?u=0<y?u-h:u+h:(y=-y/n,s=Math.sqrt(h*h/(y*y+1)),0>h&&(s=-s),s=(0>n?-1:1)*s+t,u=y*(s-t)+e),this.ce(i),this.jf(s,u),this.ce(r)):(this.ce(i),this.ce(r),u=E.alloc(),e.$h(u),p=u.ba(r),y.$h(u),d=u.ba(i),(p||d)&&(h=e.ia(Pp(h),new T),this.Uc(0,this.getLinkPointFromPoint(t,e,h,r,!0,h)),n=y.ia(Pp(n),new T),this.Uc(1,this.getLinkPointFromPoint(s,y,n,i,!1,n))),E.free(u))}else{c=this.isAvoiding,y&&(g&&c||d)&&this.sj();var F=d?this.computeCurviness():0;c=this.getLinkPoint(t,e,h,!0,g,i,r),S=L=v=0,(g||!u||d)&&(N=this.computeEndSegmentLength(t,e,h,!0),S=this.getLinkDirection(t,e,c,h,!0,g,i,r),d&&(u||h.C(n)||!g&&h.x+n.x===1&&h.y+n.y===1)&&(S-=g?90:30,0>F&&(S-=180)),0>S?S+=360:360<=S&&(S-=360),d&&(N+=Math.abs(F)*(g?1:2)),S===0?v=N:S===90?L=N:S===180?v=-N:S===270?L=-N:(v=N*Math.cos(S*Math.PI/180),L=N*Math.sin(S*Math.PI/180)),h.Ec()&&d&&(N=e.ia(Dt,T.alloc()),M=T.allocAt(N.x+1e3*v,N.y+1e3*L),this.getLinkPointFromPoint(t,e,N,M,!0,c),T.free(N),T.free(M))),N=this.getLinkPoint(i,r,n,!1,g,t,e);var j=B=M=0;if(g||!p||d){var D=this.computeEndSegmentLength(i,r,n,!1);j=this.getLinkDirection(i,r,N,n,!1,g,t,e),d&&(p||h.C(n)||!g&&h.x+n.x===1&&h.y+n.y===1)&&(j+=g?0:30,0>F&&(j+=180)),0>j?j+=360:360<=j&&(j-=360),d&&(D+=Math.abs(F)*(g?1:2)),j===0?M=D:j===90?B=D:j===180?M=-D:j===270?B=-D:(M=D*Math.cos(j*Math.PI/180),B=D*Math.sin(j*Math.PI/180)),n.Ec()&&d&&(n=r.ia(Dt,T.alloc()),h=T.allocAt(n.x+1e3*M,n.y+1e3*B),this.getLinkPointFromPoint(i,r,n,h,!1,N),T.free(n),T.free(h))}n=c,(g||!u||d)&&(n=new T(c.x+v,c.y+L)),h=N,(g||!p||d)&&(h=new T(N.x+M,N.y+B)),!y&&!g&&u&&3<s&&this.adjustPoints(0,c,s-2,h)?this.Uc(s-1,N):!y&&!g&&p&&3<s&&this.adjustPoints(1,n,s-1,N)?this.Uc(0,c):!y&&(g?6<=s:4<s)&&this.adjustPoints(1,n,s-2,h)?(this.Uc(0,c),this.Uc(s-1,N)):(this.sj(),this.ce(c),(g||!u||d)&&this.ce(n),g&&this.addOrthoPoints(n,S,h,j,t,i),(g||!p||d)&&this.ce(h),this.ce(N))}return!0};function Tg(t,e){return Math.abs(e.x-t.x)>Math.abs(e.y-t.y)?(e.x>=t.x?e.x=t.x+9e9:e.x=t.x-9e9,e.y=t.y):(e.y>=t.y?e.y=t.y+9e9:e.y=t.y-9e9,e.x=t.x),e}U.prototype.getLinkPointFromPoint=function(t,e,n,i,r,s){if(s===void 0&&(s=new T),t===null||e===null)return s.assign(n),s;if(t.isVisible()||(r=t.findVisibleNode(),r!==null&&r!==t&&(e=r.port)),t=null,r=e.panel,r===null||r.he()||(r=r.panel),r===null){r=i.x,i=i.y;var h=n.x;n=n.y}else{t=r.de,r=1/(t.m11*t.m22-t.m12*t.m21),h=t.m22*r;var u=-t.m12*r,p=-t.m21*r,d=t.m11*r,g=r*(t.m21*t.dy-t.m22*t.dx),c=r*(t.m12*t.dx-t.m11*t.dy);r=i.x*h+i.y*p+g,i=i.x*u+i.y*d+c,h=n.x*h+n.y*p+g,n=n.x*u+n.y*d+c}return e.Cj(r,i,h,n,s),t!==null&&s.transform(t),s};function Sp(t,e){var n=e.yn;return n===null&&(n=new qs,n.port=e,n.node=e.part,e.yn=n),wx(n,t)}U.prototype.getLinkPoint=function(t,e,n,i,r,s,h,u){if(u===void 0&&(u=new T),n.pb()&&!sh(n))return e.ia(n,u),u;if(n.Sc()){var p=Sp(this,e);if(p!==null){if(u.assign(p.to),r&&this.routing===mx){var d=Sp(this,h);if(d!==null&&p.jl<d.jl){p=T.alloc(),d=T.alloc();var g=new E(e.ia(Qe,p),e.ia(ro,d)),c=this.computeSpot(!i,h);t=this.getLinkPoint(s,h,c,!i,r,t,e,d),(n.tf(Ma)||n.tf(ka))&&t.y>=g.y&&t.y<=g.y+g.height?u.y=t.y:(n.tf(La)||n.tf(Na))&&t.x>=g.x&&t.x<=g.x+g.width&&(u.x=t.x),T.free(p),T.free(d)}}return u}}return n=e.ia(Pp(n),T.alloc()),this.pointsCount>(r?6:2)?(h=i?this.i(1):this.i(this.pointsCount-2),r&&(h=Tg(n,h.copy()))):(p=this.computeSpot(!i,h),s=T.alloc(),h=h.ia(Pp(p),s),r&&(h=Tg(n,h)),T.free(s)),this.getLinkPointFromPoint(t,e,n,h,i,u),T.free(n),u},U.prototype.getLinkDirection=function(t,e,n,i,r,s,h,u){t:if(i.pb())var p=i.x>i.y?i.x>1-i.y?0:i.x<1-i.y?270:315:i.x<i.y?i.x>1-i.y?90:i.x<1-i.y?180:135:.5>i.x?225:.5<i.x?45:0;else{if(i.Sc()&&(p=Sp(this,e),p!==null))switch(p.Fc){case 1:p=270;break t;case 2:p=180;break t;default:case 4:p=0;break t;case 8:p=90;break t}p=e.ia(Dt,T.alloc()),this.pointsCount>(s?6:2)?(u=r?this.i(1):this.i(this.pointsCount-2),u=s?Tg(p,u.copy()):n):(n=T.alloc(),u=u.ia(Dt,n),T.free(n)),n=Math.abs(u.x-p.x)>Math.abs(u.y-p.y)?u.x>=p.x?0:180:u.y>=p.y?90:270,T.free(p),p=n}return i.Ec()&&h.Hd(t)&&(p+=180,360<=p&&(p-=360)),sh(i)||(t=e.Zh(),t===0)||(45<=t&&135>t?p+=90:135<=t&&225>t?p+=180:225<=t&&315>t&&(p+=270),360<=p&&(p-=360)),p},U.prototype.computeEndSegmentLength=function(t,e,n,i){return e!==null&&n.Sc()&&(t=Sp(this,e),t!==null)?t.hu:(t=i?this.fromEndSegmentLength:this.toEndSegmentLength,e!==null&&isNaN(t)&&(t=i?e.fromEndSegmentLength:e.toEndSegmentLength),isNaN(t)&&(t=10),t)},U.prototype.computeSpot=function(t,e){return e===void 0&&(e=null),t?(t=e||this.fromPort,t===null?t=Dt:(e=this.fromSpot,e.Rb()&&(e=t.fromSpot),t=e===He?Ke:e)):(t=e||this.toPort,t===null?t=Dt:(e=this.toSpot,e.Rb()&&(e=t.toSpot),t=e===He?Ke:e)),t};function sh(t){return t===Ke||t.x===.5&&t.y===.5}function Pp(t){return t.x===.5&&t.y===.5?t:Dt}U.prototype.computeOtherPoint=function(t,e){return this.computeAdjusting()!==hn&&4<this.pointsCount?this.computeMidPoint(new T):(t=e.yn,t=t!==null?wx(t,this):null,t!==null?t.to:e.ia(Dt))},U.prototype.computeShortLength=function(t){if(t){if(t=this.fromShortLength,isNaN(t)){var e=this.fromPort;e!==null&&(t=e.fromShortLength)}return isNaN(t)?0:t}return t=this.toShortLength,isNaN(t)&&(e=this.toPort,e!==null&&(t=e.toShortLength)),isNaN(t)?0:t},U.prototype.pf=function(t,e,n,i,r,s){if(this.pickable===!1)return!1;e===void 0&&(e=null),n===void 0&&(n=null);var h=s;if(s===void 0&&(h=ct.alloc(),h.reset()),h.multiply(this.transform),this.Rg(t,h))return Qf(this,e,n,r),s===void 0&&ct.free(h),!0;if(this.Qc(t,h)){var u=!1;if(!this.isAtomic)for(var p=this.R.s,d=p.length;d--;){var g=p[d];if(g.visible||g===this.locationObject){var c=g.actualBounds,y=this.naturalBounds;if(!(c.x>y.width||c.y>y.height||0>c.x+c.width||0>c.y+c.height)){if(c=ct.alloc(),c.set(h),g instanceof Y)u=g.pf(t,e,n,i,r,c);else if(this.path===g){if(g instanceof dt)if(u=t,y=i,g.pickable===!1)u=!1;else if(c.multiply(g.transform),y)t:{var S=u,v=c;if(g.Rg(S,v))u=!0;else{if(v===void 0&&(v=g.transform,S.Ce(g.actualBounds))){u=!0;break t}u=S.left,y=S.right;var L=S.top;S=S.bottom;var N=T.alloc(),M=T.alloc(),B=T.alloc(),F=ct.alloc();F.set(v),F.Cu(g.transform),F.Lr(),M.x=y,M.y=L,M.transform(F),N.x=u,N.y=L,N.transform(F),v=!1,xs(g,N,M,B)?v=!0:(N.x=y,N.y=S,N.transform(F),xs(g,N,M,B)?v=!0:(M.x=u,M.y=S,M.transform(F),xs(g,N,M,B)?v=!0:(N.x=u,N.y=L,N.transform(F),xs(g,N,M,B)&&(v=!0)))),ct.free(F),T.free(N),T.free(M),T.free(B),u=v}}else u=g.Rg(u,c)}else u=um(g,t,i,c);u&&(y=g,e!==null&&(y=e(g)),y&&(n===null||n(y))&&r.add(y)),ct.free(c)}}}return s===void 0&&ct.free(h),u||this.background!==null||this.areaBackground!==null}return s===void 0&&ct.free(h),!1},U.prototype.computeCurve=function(){if(this.Jf===null){var t=this.fromPort,e=this.isOrthogonal;this.Jf=t!==null&&t===this.toPort&&!e}return this.Jf?Yn:this.curve},U.prototype.computeCorner=function(){if(this.curve===Yn)return 0;var t=this.corner;return(isNaN(t)||0>t)&&(t=10),t},U.prototype.findMidLabel=function(){for(var t=this.path,e=this.R.s,n=e.length,i=0;i<n;i++){var r=e[i];if(r!==t&&!r.isPanelMain&&(r.segmentIndex===-1/0||isNaN(r.segmentIndex)))return r}for(t=this.labelNodes;t.next();)if(e=t.value,e.segmentIndex===-1/0||isNaN(e.segmentIndex))return e;return null},U.prototype.computeSpacing=function(){if(!this.isVisible())return 0;var t=yx;t=Math.max(t,this.computeThickness());var e=this.fromPort,n=this.toPort;if(e!==null&&n!==null){var i=this.findMidLabel();if(i!==null){var r=i.naturalBounds,s=i.margin,h=isNaN(r.width)?30:r.width*i.scale+s.left+s.right;r=isNaN(r.height)?14:r.height*i.scale+s.top+s.bottom,i=i.segmentOrientation,i===Nl||i===kp||i===Gg?t=Math.max(t,r):i===Cl||i===Bl||i===Tl||i===Fl?t=Math.max(t,h):(e=e.ia(Dt).Za(n.ia(Dt))/180*Math.PI,t=Math.max(t,Math.abs(Math.sin(e)*h)+Math.abs(Math.cos(e)*r)+1)),this.curve===Yn&&(t*=1.333)}}return t},U.prototype.arrangeBundledLinks=function(t,e){if(e)for(e=0;e<t.length;e++){var n=t[e];n.computeAdjusting()===hn&&n.ab()}},U.prototype.computeCurviness=function(){var t=this.curviness;if(isNaN(t)){t=xx;var e=this.Ff;if(e!==null){for(var n=Yt(),i=0,r=e.links,s=0;s<r.length;s++){var h=r[s].computeSpacing();n.push(h),i+=h}for(i=-i/2,s=0;s<r.length;s++){if(r[s]===this){t=i+n[s]/2;break}i+=n[s]}e.Ur===this.fromNode&&(t=-t),At(n)}}return t},U.prototype.computeThickness=function(){if(!this.isVisible())return 0;var t=this.path;return t!==null?Math.max(t.strokeWidth,1):1},U.prototype.hasCurviness=function(){return!isNaN(this.curviness)||this.Ff!==null},U.prototype.adjustPoints=function(t,e,n,i){var r=this.computeAdjusting();if(this.isOrthogonal){if(r===Lp)return!1;r===Mp&&(r=kl)}switch(r){case Lp:var s=this.i(t),h=this.i(n);if(!s.$a(e)||!h.$a(i)){r=s.x,s=s.y;var u=h.x-r,p=h.y-s,d=Math.sqrt(u*u+p*p);if(!O.ca(d,0)){if(O.ca(u,0))var g=0>p?-Math.PI/2:Math.PI/2;else g=Math.atan(p/Math.abs(u)),0>u&&(g=Math.PI-g);h=e.x;var c=e.y;u=i.x-h;var y=i.y-c;for(p=Math.sqrt(u*u+y*y),O.ca(u,0)?y=0>y?-Math.PI/2:Math.PI/2:(y=Math.atan(y/Math.abs(u)),0>u&&(y=Math.PI-y)),d=p/d,g=y-g,this.Uc(t,e),t+=1;t<n;t++)e=this.i(t),u=e.x-r,p=e.y-s,e=Math.sqrt(u*u+p*p),O.ca(e,0)||(O.ca(u,0)?p=0>p?-Math.PI/2:Math.PI/2:(p=Math.atan(p/Math.abs(u)),0>u&&(p=Math.PI-p)),u=p+g,e*=d,this.M(t,h+e*Math.cos(u),c+e*Math.sin(u)));this.Uc(n,i)}}return!0;case Mp:if(s=this.i(t),c=this.i(n),!s.$a(e)||!c.$a(i)){r=s.x,s=s.y,h=c.x,c=c.y,d=(h-r)*(h-r)+(c-s)*(c-s),u=e.x,g=e.y,p=i.x,y=i.y;var S=1;if(p-u!==0){var v=(y-g)/(p-u);S=Math.sqrt(1+1/(v*v))}else v=9e9;for(this.Uc(t,e),t+=1;t<n;t++){e=this.i(t);var L=e.x,N=e.y,M=.5;d!==0&&(M=((r-L)*(r-h)+(s-N)*(s-c))/d);var B=r+M*(h-r),F=s+M*(c-s);e=Math.sqrt((L-B)*(L-B)+(N-F)*(N-F)),N<v*(L-B)+F&&(e=-e),0<v&&(e=-e),L=u+M*(p-u),M=g+M*(y-g),v!==0?(e=L+e/S,this.M(t,e,M-(e-L)/v)):this.M(t,L,M+e)}this.Uc(n,i)}return!0;case kl:t:{if(this.isOrthogonal&&(r=this.i(t),s=this.i(t+1),h=this.i(t+2),u=s.x,g=s.y,c=u,d=g,O.B(r.y,s.y)?O.B(s.x,h.x)?g=e.y:O.B(s.y,h.y)&&(u=e.x):O.B(r.x,s.x)&&(O.B(s.y,h.y)?u=e.x:O.B(s.x,h.x)&&(g=e.y)),this.M(t+1,u,g),r=this.i(n),s=this.i(n-1),h=this.i(n-2),u=s.x,g=s.y,p=u,y=g,O.B(r.y,s.y)?O.B(s.x,h.x)?g=i.y:O.B(s.y,h.y)&&(u=i.x):O.B(r.x,s.x)&&(O.B(s.y,h.y)?u=i.x:O.B(s.x,h.x)&&(g=i.y)),this.M(n-1,u,g),Cg(this))){this.M(t+1,c,d),this.M(n-1,p,y),n=!1;break t}this.Uc(t,e),this.Uc(n,i),n=!0}return n;default:return!1}},U.prototype.addOrthoPoints=function(t,e,n,i,r,s){0>e?e+=360:360<=e&&(e-=360),0>i?i+=360:360<=i&&(i-=360);var h=i;e=315<=e||45>e?0:45<=e&&135>e?90:135<=e&&225>e?180:270,i=315<=i||45>i?0:45<=i&&135>i?90:135<=i&&225>i?180:270;var u=r.actualBounds.copy(),p=s.actualBounds.copy();if(u.w()&&p.w()){u.vc(jl,jl),p.vc(jl,jl),u.Ke(t),p.Ke(n);var d=T.alloc(),g=T.alloc();e===0?n.x>t.x||i===270&&n.y<t.y&&p.right>t.x||i===90&&n.y>t.y&&p.right>t.x?(d.h(n.x,t.y),g.h(n.x,(t.y+n.y)/2),i===180?(d.x=this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!1),g.x=d.x,g.y=n.y):i===270&&n.y<t.y||i===90&&n.y>t.y?(d.x=t.x<p.left?this.computeMidOrthoPosition(t.x,t.y,p.left,n.y,!1):t.x<p.right&&(i===270&&t.y<p.top||i===90&&t.y>p.bottom)?this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!1):p.right,g.x=d.x,g.y=n.y):i===0&&t.x<p.left&&t.y>p.top&&t.y<p.bottom&&(d.x=t.x,d.y=t.y<n.y?Math.min(n.y,p.top):Math.max(n.y,p.bottom),g.y=d.y)):(d.h(t.x,n.y),g.h((t.x+n.x)/2,n.y),(i===180||i===90&&n.y<u.top||i===270&&n.y>u.bottom)&&(i===180&&(p.ba(t)||u.ba(n))?d.y=this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!0):n.y<t.y&&(i===180||i===90)?d.y=this.computeMidOrthoPosition(t.x,u.top,n.x,Math.max(n.y,p.bottom),!0):n.y>t.y&&(i===180||i===270)&&(d.y=this.computeMidOrthoPosition(t.x,u.bottom,n.x,Math.min(n.y,p.top),!0)),g.x=n.x,g.y=d.y),d.y>u.top&&d.y<u.bottom&&(n.x>=u.left&&n.x<=t.x||t.x<=p.right&&t.x>=n.x?(i===90||i===270)&&(d.h(Math.max((t.x+n.x)/2,t.x),t.y),g.h(d.x,n.y)):(d.y=i===270||(i===0||i===180)&&n.y<t.y?Math.min(n.y,i===0?u.top:Math.min(u.top,p.top)):Math.max(n.y,i===0?u.bottom:Math.max(u.bottom,p.bottom)),g.x=n.x,g.y=d.y))):e===180?n.x<t.x||i===270&&n.y<t.y&&p.left<t.x||i===90&&n.y>t.y&&p.left<t.x?(d.h(n.x,t.y),g.h(n.x,(t.y+n.y)/2),i===0?(d.x=this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!1),g.x=d.x,g.y=n.y):i===270&&n.y<t.y||i===90&&n.y>t.y?(d.x=t.x>p.right?this.computeMidOrthoPosition(t.x,t.y,p.right,n.y,!1):t.x>p.left&&(i===270&&t.y<p.top||i===90&&t.y>p.bottom)?this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!1):p.left,g.x=d.x,g.y=n.y):i===180&&t.x>p.right&&t.y>p.top&&t.y<p.bottom&&(d.x=t.x,d.y=t.y<n.y?Math.min(n.y,p.top):Math.max(n.y,p.bottom),g.y=d.y)):(d.h(t.x,n.y),g.h((t.x+n.x)/2,n.y),(i===0||i===90&&n.y<u.top||i===270&&n.y>u.bottom)&&(i===0&&(p.ba(t)||u.ba(n))?d.y=this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!0):n.y<t.y&&(i===0||i===90)?d.y=this.computeMidOrthoPosition(t.x,u.top,n.x,Math.max(n.y,p.bottom),!0):n.y>t.y&&(i===0||i===270)&&(d.y=this.computeMidOrthoPosition(t.x,u.bottom,n.x,Math.min(n.y,p.top),!0)),g.x=n.x,g.y=d.y),d.y>u.top&&d.y<u.bottom&&(n.x<=u.right&&n.x>=t.x||t.x>=p.left&&t.x<=n.x?(i===90||i===270)&&(d.h(Math.min((t.x+n.x)/2,t.x),t.y),g.h(d.x,n.y)):(d.y=i===270||(i===0||i===180)&&n.y<t.y?Math.min(n.y,i===180?u.top:Math.min(u.top,p.top)):Math.max(n.y,i===180?u.bottom:Math.max(u.bottom,p.bottom)),g.x=n.x,g.y=d.y))):e===90?n.y>t.y||i===180&&n.x<t.x&&p.bottom>t.y||i===0&&n.x>t.x&&p.bottom>t.y?(d.h(t.x,n.y),g.h((t.x+n.x)/2,n.y),i===270?(d.y=this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!0),g.x=n.x,g.y=d.y):i===180&&n.x<t.x||i===0&&n.x>t.x?(d.y=t.y<p.top?this.computeMidOrthoPosition(t.x,t.y,n.x,p.top,!0):t.y<p.bottom&&(i===180&&t.x<p.left||i===0&&t.x>p.right)?this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!0):p.bottom,g.x=n.x,g.y=d.y):i===90&&t.y<p.top&&t.x>p.left&&t.x<p.right&&(d.x=t.x<n.x?Math.min(n.x,p.left):Math.max(n.x,p.right),d.y=t.y,g.x=d.x)):(d.h(n.x,t.y),g.h(n.x,(t.y+n.y)/2),(i===270||i===0&&n.x<u.left||i===180&&n.x>u.right)&&(i===270&&(p.ba(t)||u.ba(n))?d.x=this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!1):n.x<t.x&&(i===270||i===0)?d.x=this.computeMidOrthoPosition(u.left,t.y,Math.max(n.x,p.right),n.y,!1):n.x>t.x&&(i===270||i===180)&&(d.x=this.computeMidOrthoPosition(u.right,t.y,Math.min(n.x,p.left),n.y,!1)),g.x=d.x,g.y=n.y),d.x>u.left&&d.x<u.right&&(n.y>=u.top&&n.y<=t.y||t.y<=p.bottom&&t.y>=n.y?(i===0||i===180)&&(d.h(t.x,Math.max((t.y+n.y)/2,t.y)),g.h(n.x,d.y)):(d.x=i===180||(i===90||i===270)&&n.x<t.x?Math.min(n.x,i===90?u.left:Math.min(u.left,p.left)):Math.max(n.x,i===90?u.right:Math.max(u.right,p.right)),g.x=d.x,g.y=n.y))):n.y<t.y||i===180&&n.x<t.x&&p.top<t.y||i===0&&n.x>t.x&&p.top<t.y?(d.h(t.x,n.y),g.h((t.x+n.x)/2,n.y),i===90?(d.y=this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!0),g.x=n.x,g.y=d.y):i===180&&n.x<t.x||i===0&&n.x>=t.x?(d.y=t.y>p.bottom?this.computeMidOrthoPosition(t.x,t.y,n.x,p.bottom,!0):t.y>p.top&&(i===180&&t.x<p.left||i===0&&t.x>p.right)?this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!0):p.top,g.x=n.x,g.y=d.y):i===270&&t.y>p.bottom&&t.x>p.left&&t.x<p.right&&(d.x=t.x<n.x?Math.min(n.x,p.left):Math.max(n.x,p.right),d.y=t.y,g.x=d.x)):(d.h(n.x,t.y),g.h(n.x,(t.y+n.y)/2),(i===90||i===0&&n.x<u.left||i===180&&n.x>u.right)&&(i===90&&(p.ba(t)||u.ba(n))?d.x=this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!1):n.x<t.x&&(i===90||i===0)?d.x=this.computeMidOrthoPosition(u.left,t.y,Math.max(n.x,p.right),n.y,!1):n.x>t.x&&(i===90||i===180)&&(d.x=this.computeMidOrthoPosition(u.right,t.y,Math.min(n.x,p.left),n.y,!1)),g.x=d.x,g.y=n.y),d.x>u.left&&d.x<u.right&&(n.y<=u.bottom&&n.y>=t.y||t.y>=p.top&&t.y<=n.y?(i===0||i===180)&&(d.h(t.x,Math.min((t.y+n.y)/2,t.y)),g.h(n.x,d.y)):(d.x=i===180||(i===90||i===270)&&n.x<t.x?Math.min(n.x,i===270?u.left:Math.min(u.left,p.left)):Math.max(n.x,i===270?u.right:Math.max(u.right,p.right)),g.x=d.x,g.y=n.y)));var c=n;if(this.isAvoiding){var y=this.diagram;if(y===null||r===s||this.layer.isTemporary||!W0(y)||u.ba(c)&&!s.Hd(r)||p.ba(t)&&!r.Hd(s))e=!1;else{var S=Cf(y,!0,this.containingGroup,null);if(this.segmentIndex!==17&&S.Hj(Math.min(t.x,d.x),Math.min(t.y,d.y),Math.abs(t.x-d.x),Math.abs(t.y-d.y))&&S.Hj(Math.min(d.x,g.x),Math.min(d.y,g.y),Math.abs(d.x-g.x),Math.abs(d.y-g.y))&&S.Hj(Math.min(g.x,c.x),Math.min(g.y,c.y),Math.abs(g.x-c.x),Math.abs(g.y-c.y)))e=!1;else{r=t,s=c;var v=n=null;if(y.isVirtualized){y=S.bounds.copy(),y.vc(-S.ao,-S.$n);var L=T.alloc();hh(S,t.x,t.y)||(O.sf(y.x,y.y,y.x+y.width,y.y+y.height,t.x,t.y,d.x,d.y,L)?(n=t=L.copy(),e=L.Za(d)):O.sf(y.x,y.y,y.x+y.width,y.y+y.height,d.x,d.y,g.x,g.y,L)?(n=t=L.copy(),e=L.Za(g)):O.sf(y.x,y.y,y.x+y.width,y.y+y.height,g.x,g.y,c.x,c.y,L)&&(n=t=L.copy(),e=L.Za(c))),hh(S,c.x,c.y)||(O.sf(y.x,y.y,y.x+y.width,y.y+y.height,c.x,c.y,g.x,g.y,L)?(v=c=L.copy(),i=g.Za(L)):O.sf(y.x,y.y,y.x+y.width,y.y+y.height,g.x,g.y,d.x,d.y,L)?(v=c=L.copy(),i=d.Za(L)):O.sf(y.x,y.y,y.x+y.width,y.y+y.height,d.x,d.y,t.x,t.y,L)&&(v=c=L.copy(),i=t.Za(L))),T.free(L)}u=u.copy().Vc(p),u.vc(S.ao*S.fs,S.$n*S.fs),Sx(S,t,e,c,i,u,!0),p=fo(S,c.x,c.y),!S.abort&&p>=lh&&(vx(S),u.vc(S.ao*S.Zw,S.$n*S.$w),Sx(S,t,e,c,i,u,!1),p=fo(S,c.x,c.y)),!S.abort&&p<lh&&fo(S,c.x,c.y)!==hr?(Fg(this,S,c.x,c.y,i,!0,h),u=this.i(2),4>this.pointsCount?(e===0||e===180?(u.x=t.x,u.y=c.y):(u.x=c.x,u.y=t.y),this.M(2,u.x,u.y),this.l(3,u.x,u.y)):(h=this.i(3),e===0||e===180?O.B(u.x,h.x)?(u=e===0?Math.max(u.x,t.x):Math.min(u.x,t.x),this.M(2,u,t.y),this.M(3,u,h.y)):O.B(u.y,h.y)?(Math.abs(t.y-u.y)<=S.$n/2&&(this.M(2,u.x,t.y),this.M(3,h.x,t.y)),this.l(2,u.x,t.y)):this.M(2,t.x,u.y):(e===90||e===270)&&(O.B(u.y,h.y)?(u=e===90?Math.max(u.y,t.y):Math.min(u.y,t.y),this.M(2,t.x,u),this.M(3,h.x,u)):O.B(u.x,h.x)?(Math.abs(t.x-u.x)<=S.ao/2&&(this.M(2,t.x,u.y),this.M(3,t.x,h.y)),this.l(2,t.x,u.y)):this.M(2,u.x,t.y))),n!==null&&(t=this.i(1),h=this.i(2),t.x!==h.x&&t.y!==h.y?e===0||e===180?this.l(2,t.x,h.y):this.l(2,h.x,t.y):e===0||e===180?this.l(2,r.x,n.y):this.l(2,n.x,r.y)),v!==null&&(i===0||i===180?this.jf(s.x,v.y):this.jf(v.x,s.y)),e=!0):e=!1}}}else e=!1;e||(this.ce(d.copy()),this.ce(g.copy())),T.free(d),T.free(g)}},U.prototype.computeMidOrthoPosition=function(t,e,n,i,r){var s=0;return!this.hasCurviness()||this.computeSpot(!0,this.fromPort).Sc()||this.computeSpot(!1,this.toPort).Sc()||(s=this.computeCurviness()),r?(e+i)/2+s:(t+n)/2+s};function Cg(t){if(t.diagram===null||!t.isAvoiding||!W0(t.diagram))return!1;var e=t.points.s,n=e.length;if(4>n)return!1;t=Cf(t.diagram,!0,t.containingGroup,null);for(var i=1;i<n-2;i++){var r=e[i],s=e[i+1];if(!t.Hj(Math.min(r.x,s.x),Math.min(r.y,s.y),Math.abs(r.x-s.x),Math.abs(r.y-s.y)))return!0}return!1}function Fg(t,e,n,i,r,s,h){var u=e.ao,p=e.$n,d=fo(e,n,i),g=n,c=i;for(r===0?g+=u:r===90?c+=p:r===180?g-=u:c-=p,r!==h&&d>vs&&fo(e,g,c)!==d-1&&(fo(e,n-u,i)===d-1?(r=180,g=n-u,c=i):fo(e,n+u,i)===d-1?(r=0,g=n+u,c=i):fo(e,n,i-p)===d-1?(r=270,g=n,c=i-p):fo(e,n,i+p)===d-1&&(r=90,g=n,c=i+p));d>vs&&fo(e,g,c)===d-1;)n=g,i=c,r===0?g+=u:r===90?c+=p:r===180?g-=u:c-=p,--d;s?d>vs&&(r===180||r===0?n=Math.floor(n/u)*u+u/2:(r===90||r===270)&&(i=Math.floor(i/p)*p+p/2)):(n=Math.floor(n/u)*u+u/2,i=Math.floor(i/p)*p+p/2),d>vs&&(s=r,h=n,g=i,r===0?(s=90,g+=p):r===90?(s=180,h-=u):r===180?(s=270,g-=p):r===270&&(s=0,h+=u),fo(e,h,g)===d-1?Fg(t,e,h,g,s,!1,s):(h=n,g=i,r===0?(s=270,g-=p):r===90?(s=0,h+=u):r===180?(s=90,g+=p):r===270&&(s=180,h-=u),fo(e,h,g)===d-1&&Fg(t,e,h,g,s,!1,s))),t.jf(n,i)}U.prototype.zy=function(t){var e=t.x;t=t.y;for(var n=this.i(0),i=this.i(1),r=ve(e,t,n.x,n.y,i.x,i.y),s=0,h=1;h<this.pointsCount-1;h++){n=this.i(h+1);var u=ve(e,t,i.x,i.y,n.x,n.y);i=n,u<r&&(s=h,r=u)}return s},U.prototype.lc=function(){this.Sj=!1,this.v()},U.prototype.tl=function(t){if(!(!t&&(this.td===!1||(t=this.vb(),this.Sj&&(t===null||t.geometry!==null))))&&(2>this.pointsCount?this.Sj=!0:this.sa=this.makeGeometry(),t=this.path,t!==null)){t.sa=this.sa;for(var e=this.R.s,n=e.length,i=0;i<n;i++){var r=e[i];r!==t&&r.isPanelMain&&r instanceof dt&&(r.sa=this.sa)}}},U.prototype.makeGeometry=function(){var t=this.sa,e=this.pointsCount,n=!1,i=this.diagram;i!==null&&ys(this)&&i.oh.contains(this)&&(this.Sk.width!==0||this.Sk.height!==0)&&(i.animationManager.isAnimating||i.currentTool!==i.toolManager)&&(n=!0);var r=this.i(0).copy(),s=r.copy();i=this.Ib.s;var h=this.computeCurve();if(h===Yn&&3<=e&&!O.ca(this.smoothness,0))if(e===3){var u=this.i(1);i=Math.min(r.x,u.x);var p=Math.min(r.y,u.y);u=this.i(2),i=Math.min(i,u.x),p=Math.min(p,u.y)}else{if(this.isOrthogonal)for(p=0;p<e;p++)u=i[p],s.x=Math.min(u.x,s.x),s.y=Math.min(u.y,s.y);else for(i=3;i<e;i+=3)i+3>=e&&(i=e-1),p=this.i(i),s.x=Math.min(p.x,s.x),s.y=Math.min(p.y,s.y);i=s.x,p=s.y}else{for(p=0;p<e;p++)u=i[p],s.x=Math.min(u.x,s.x),s.y=Math.min(u.y,s.y);i=s.x,p=s.y}if(i-=this.Ot.x,p-=this.Ot.y,r.x-=i,r.y-=p,e!==2||ys(this)){if(t.type=K.m,u=Hm(t),this.computeShortLength(!0)!==0&&(r=_s(this,r,!0,s)),oh(u,r.x,r.y,!1),h===Yn&&3<=e&&!O.ca(this.smoothness,0))if(e===3)n=this.i(1),e=n.x-i,n=n.y-p,r=this.i(2).copy(),r.x-=i,r.y-=p,this.computeShortLength(!1)!==0&&(r=_s(this,r,!1,s)),ir(u,e,n,e,n,r.x,r.y);else if(this.isOrthogonal){e=T.allocAt(i,p),n=T.alloc(),n.assign(this.i(1)),s=T.allocAt(i,p),r=T.allocAt(i,p),h=this.i(0);for(var d,g=this.smoothness/3,c=1;c<this.pointsCount-1;c++){d=this.i(c);var y=h,S=d,v=this.i(Bg(this,d,c,!1));if((!O.ca(y.x,S.x)||!O.ca(S.x,v.x))&&(!O.ca(y.y,S.y)||!O.ca(S.y,v.y))){var L=g;isNaN(L)&&(L=this.smoothness/3);var N=y.x;y=y.y;var M=S.x;S=S.y;var B=v.x;v=v.y;var F=L*wp(N,y,M,S);L*=wp(M,S,B,v),O.ca(y,S)&&O.ca(M,B)&&(M>N?v>S?(s.x=M-F,s.y=S-F,r.x=M+L,r.y=S+L):(s.x=M-F,s.y=S+F,r.x=M+L,r.y=S-L):v>S?(s.x=M+F,s.y=S-F,r.x=M-L,r.y=S+L):(s.x=M+F,s.y=S+F,r.x=M-L,r.y=S-L)),O.ca(N,M)&&O.ca(S,v)&&(S>y?(B>M?(s.x=M-F,s.y=S-F,r.x=M+L):(s.x=M+F,s.y=S-F,r.x=M-L),r.y=S+L):(B>M?(s.x=M-F,s.y=S+F,r.x=M+L):(s.x=M+F,s.y=S+F,r.x=M-L),r.y=S-L)),(O.ca(N,M)&&O.ca(M,B)||O.ca(y,S)&&O.ca(S,v))&&(N=.5*(N+B),y=.5*(y+v),s.x=N,s.y=y,r.x=N,r.y=y),(c===1||c===2&&O.ca(h.x,this.i(0).x)&&O.ca(h.y,this.i(0).y))&&(n.x=.5*(h.x+d.x),n.y=.5*(h.y+d.y)),ir(u,n.x-i,n.y-p,s.x-i,s.y-p,d.x-i,d.y-p),e.set(s),n.set(r),h=d}}d=h.x,h=h.y,g=this.i(this.pointsCount-1),this.computeShortLength(!1)!==0&&(g=_s(this,g.copy(),!1,Zi)),d=.5*(d+g.x),h=.5*(h+g.y),ir(u,r.x-i,r.y-p,d-i,h-p,g.x-i,g.y-p),T.free(e),T.free(n),T.free(s),T.free(r)}else for(n=3;n<e;n+=3)s=this.i(n-2),n+3>=e&&(n=e-1),r=this.i(n-1),h=this.i(n),n===e-1&&this.computeShortLength(!1)!==0&&(h=_s(this,h.copy(),!1,Zi)),ir(u,s.x-i,s.y-p,r.x-i,r.y-p,h.x-i,h.y-p);else{for(s=T.alloc(),s.assign(this.i(0)),r=T.alloc(),r.assign(s),h=this.computeCorner(),c=1,d=0;c<e;){if(c=Bg(this,s,c,1<c),g=this.i(c),c>=e-1){if(!s.C(g))this.computeShortLength(!1)!==0&&(g=_s(this,g.copy(),!1,Zi)),$s(this,u,-i,-p,s,g,n);else if(d===0)for(c=1;c<e;)r.assign(s),g=this.i(c++),$s(this,u,-i,-p,s,g,n),s.assign(g);break}if(d=Bg(this,g,c+1,c<e-3),c=-i,N=-p,y=g,M=this.i(d),L=n,O.B(s.y,y.y)&&O.B(y.x,M.x))if(v=Math.min(h,Math.abs(y.x-r.x)/2),v=F=Math.min(v,Math.abs(M.y-y.y)/2),O.B(v,0))$s(this,u,c,N,s,y,L),s.assign(y);else{var j=y.x,D=y.y;S=j,B=D,y.x>s.x?j=y.x-v:j=y.x+v,M.y>y.y?B=y.y+F:B=y.y-F,M=T.allocAt(j,D),$s(this,u,c,N,s,M,L),T.free(M),dp(u,y.x+c,y.y+N,S+c,B+N),s.h(S,B)}else O.B(s.x,y.x)&&O.B(y.y,M.y)?(v=Math.min(h,Math.abs(y.y-r.y)/2),v=F=Math.min(v,Math.abs(M.x-y.x)/2),O.B(F,0)?($s(this,u,c,N,s,y,L),s.assign(y)):(j=y.x,D=y.y,S=j,B=D,y.y>s.y?D=y.y-v:D=y.y+v,M.x>y.x?S=y.x+F:S=y.x-F,M=T.allocAt(j,D),$s(this,u,c,N,s,M,L),T.free(M),dp(u,y.x+c,y.y+N,S+c,B+N),s.h(S,B))):($s(this,u,c,N,s,y,L),s.assign(y));r.assign(g),c=d}T.free(s)}fp=u}else u=this.i(1).copy(),u.x-=i,u.y-=p,this.computeShortLength(!0)!==0&&(r=_s(this,r,!0,s)),this.computeShortLength(!1)!==0&&(u=_s(this,u,!1,s)),t.type=K.j,t.startX=r.x,t.startY=r.y,t.endX=u.x,t.endY=u.y;return this.Sj=!0,t};function wp(t,e,n,i){return t=n-t,isNaN(t)||t===1/0||t===-1/0?NaN:(0>t&&(t=-t),e=i-e,isNaN(e)||e===1/0||e===-1/0?NaN:(0>e&&(e=-e),O.ca(t,0)?e:O.ca(e,0)?t:Math.sqrt(t*t+e*e)))}function _s(t,e,n,i){var r=t.pointsCount;if(2>r)return e;if(n){var s=t.i(1);if(n=s.x-i.x,s=s.y-i.y,i=wp(e.x,e.y,n,s),i===0)return e;r=r===2?.5*i:i,t=t.computeShortLength(!0),t>r&&(t=r),r=t*(s-e.y)/i,e.x+=t*(n-e.x)/i,e.y+=r}else{if(s=t.i(r-2),n=s.x-i.x,s=s.y-i.y,i=wp(e.x,e.y,n,s),i===0)return e;r=r===2?.5*i:i,t=t.computeShortLength(!1),t>r&&(t=r),r=t*(e.y-s)/i,e.x-=t*(e.x-n)/i,e.y-=r}return e}function Bg(t,e,n,i){for(var r=t.pointsCount,s=e;O.ca(e.x,s.x)&&O.ca(e.y,s.y);){if(n>=r)return r-1;s=t.i(n++)}if(!O.ca(e.x,s.x)&&!O.ca(e.y,s.y))return n-1;for(var h=s;O.ca(e.x,s.x)&&O.ca(s.x,h.x)&&(!i||(e.y>=s.y?s.y>=h.y:s.y<=h.y))||O.ca(e.y,s.y)&&O.ca(s.y,h.y)&&(!i||(e.x>=s.x?s.x>=h.x:s.x<=h.x));){if(n>=r)return r-1;h=t.i(n++)}return n-2}U.prototype.computeJumpLength=function(){return 10};function $s(t,e,n,i,r,s,h){if(!h&&ys(t)){h=t.computeJumpLength();var u=h/2,p=[],d=0;if(t.isVisible()&&(d=xv(t,r,s,p)),0<d){if(O.B(r.y,s.y))if(r.x<s.x)for(var g=0;g<d;){var c=Math.max(r.x,Math.min(p[g++]-u,s.x-h));e.lineTo(c+n,s.y+i);for(var y=c+n,S=Math.min(c+h,s.x);g<d&&(c=p[g],c<S+h);)g++,S=Math.min(c+u,s.x);c=s.y-h+i,S+=n;var v=s.y+i;t.curve===ar?oh(e,S,v,!1):ir(e,y,c,S,c,S,v)}else for(--d;0<=d;){for(g=Math.min(r.x,Math.max(p[d--]+u,s.x+h)),e.lineTo(g+n,s.y+i),y=g+n,c=Math.max(g-h,s.x);0<=d&&(g=p[d],g>c-h);)d--,c=Math.max(g-u,s.x);g=s.y-h+i,c+=n,S=s.y+i,t.curve===ar?oh(e,c,S,!1):ir(e,y,g,c,g,c,S)}else if(O.B(r.x,s.x))if(r.y<s.y)for(g=0;g<d;){for(c=Math.max(r.y,Math.min(p[g++]-u,s.y-h)),e.lineTo(s.x+n,c+i),y=c+i,c=Math.min(c+h,s.y);g<d&&(S=p[g],S<c+h);)g++,c=Math.min(S+u,s.y);S=s.x-h+n,v=s.x+n,c+=i,t.curve===ar?oh(e,v,c,!1):ir(e,S,y,S,c,v,c)}else for(--d;0<=d;){for(g=Math.min(r.y,Math.max(p[d--]+u,s.y+h)),e.lineTo(s.x+n,g+i),y=g+i,g=Math.max(g-h,s.y);0<=d&&(c=p[d],c>g-h);)d--,g=Math.max(c-u,s.y);c=s.x-h+n,S=s.x+n,g+=i,t.curve===ar?oh(e,S,g,!1):ir(e,c,y,c,g,S,g)}}}e.lineTo(s.x+n,s.y+i)}function xv(t,e,n,i){var r=t.diagram;if(r===null||e.C(n))return 0;for(r=r.layers;r.next();){var s=r.value;if(s!==null&&s.visible){s=s.La.s;for(var h=s.length,u=0;u<h;u++){var p=s[u];if(p instanceof U){if(p===t)return 0<i.length&&i.sort(function(g,c){return g-c}),i.length;if(p.isVisible()&&ys(p)){var d=p.routeBounds;d.w()&&t.routeBounds.Qc(d)&&!t.usesSamePort(p)&&(d=p.path,d!==null&&d.vf()&&yv(e,n,i,p))}}}}}return 0<i.length&&i.sort(function(g,c){return g-c}),i.length}function yv(t,e,n,i){for(var r=O.B(t.y,e.y),s=i.pointsCount,h=i.i(0),u=T.alloc(),p=1;p<s;p++){var d=i.i(p);if(p<s-1){var g=i.i(p+1);if(h.y===d.y&&d.y===g.y){if(d.x>h.x&&g.x>=d.x||d.x<h.x&&g.x<=d.x)continue}else if(h.x===d.x&&d.x===g.x&&(d.y>h.y&&g.y>=d.y||d.y<h.y&&g.y<=d.y))continue}t:{g=t.x;var c=t.y,y=e.x,S=e.y,v=h.x;h=h.y;var L=d.x,N=d.y;if(O.B(g,y)){if(!O.B(c,S)&&O.B(h,N)&&Math.min(c,S)<h&&Math.max(c,S)>h&&Math.min(v,L)<g&&Math.max(v,L)>g&&!O.B(v,L)){u.x=g,u.y=h,g=!0;break t}}else if(O.B(c,S)&&O.B(v,L)&&Math.min(g,y)<v&&Math.max(g,y)>v&&Math.min(h,N)<c&&Math.max(h,N)>c&&!O.B(h,N)){u.x=v,u.y=c,g=!0;break t}u.x=0,u.y=0,g=!1}g&&(r?n.push(u.x):n.push(u.y)),h=d}T.free(u)}function ys(t){return t=t.curve,t===ah||t===ar}function jg(t,e){(e||ys(t))&&(e=t.diagram,e===null||e.animationManager.isTicking||e.oh.contains(t)||t.Sk.width===0&&t.Sk.height===0||e.oh.add(t,t.Sk.copy()))}U.prototype.ro=function(t){var e=this.layer;if(e!==null&&e.visible&&!e.isTemporary){var n=e.diagram;if(n!==null&&!n.animationManager.isTicking){var i=!1;for(n=n.layers;n.next();){var r=n.value;if(r.visible){if(r===e){i=!0;var s=!1;r=r.La.s;for(var h=r.length,u=0;u<h;u++){var p=r[u];p instanceof U&&(p===this?s=!0:s&&cx(this,p,t))}}else if(i)for(s=r.La.s,r=s.length,h=0;h<r;h++)u=s[h],u instanceof U&&cx(this,u,t)}}}}};function cx(t,e,n){if(e!==null&&e.Sj&&e.td&&ys(e)){var i=e.routeBounds;i.w()&&(t.routeBounds.Qc(i)||n.Qc(i))&&(t.usesSamePort(e)||e.lc())}}U.prototype.usesSamePort=function(t){var e=this.pointsCount,n=t.pointsCount;if(0<e&&0<n){var i=this.i(0),r=t.i(0);if(i.$a(r)||(e=this.i(e-1),t=t.i(n-1),e.$a(t)||i.$a(t)||e.$a(r)))return!0}else if(this.fromNode===t.fromNode||this.toNode===t.toNode||this.fromNode===t.toNode||this.toNode===t.fromNode)return!0;return!1},U.prototype.isVisible=function(){if(!ot.prototype.isVisible.call(this))return!1;var t=this.containingGroup,e=!0,n=this.diagram;if(n!==null&&(e=n.isTreePathToChildren),n=this.fromNode,n!==null){if(this.isTreeLink&&e&&!n.isTreeExpanded)return!1;if(n===t)return!0;for(var i=n;i!==null;){if(i.labeledLink===this)return!0;i=i.containingGroup}if(n=n.findVisibleNode(),n===null||n===t)return!1}if(n=this.toNode,n!==null){if(this.isTreeLink&&!e&&!n.isTreeExpanded)return!1;if(n===t)return!0;for(e=n;e!==null;){if(e.labeledLink===this)return!0;e=e.containingGroup}if(e=n.findVisibleNode(),e===null||e===t)return!1}return!0},U.prototype.Tb=function(t){if(ot.prototype.Tb.call(this,t),this.Ff!==null&&this.Ff.rl(),this.od!==null)for(var e=this.od.iterator;e.next();)e.value.Tb(t)},U.prototype.computeAdjusting=function(){return this.isAvoiding&&this.diagram!==null&&this.diagram.animationManager.defaultAnimation.isAnimating?kl:this.Vj};function Ll(t){var e=t.Re;if(e!==null){var n=t.ef;if(n!==null&&isNaN(t.curviness)){for(var i=t.Se,r=t.ff,s=t=null,h=e.ib.s,u=h.length,p=0;p<u;p++){var d=h[p];(d.Re===e&&d.Se===i&&d.ef===n&&d.ff===r||d.Re===n&&d.Se===r&&d.ef===e&&d.ff===i)&&(s===null?s=d:(t===null&&(t=[],t.push(s)),t.push(d)))}if(t!==null){for(s=ix(e,n,i,r),s===null&&(s=new Tp(e,i,n,r),nx(e,s),nx(n,s)),s.links=t,e=0;e<t.length;e++)t[e].Ff=s;s.rl()}}}}function Ml(t){var e=t.Ff;e!==null&&isNaN(t.curviness)&&(t.Ff=null,t=e.links.indexOf(t),0<=t&&(Bi(e.links,t),e.rl()))}U.prototype.Zg=function(){return!0},Z.Object.defineProperties(U.prototype,{fromNode:{get:function(){return this.Re},set:function(t){var e=this.Re;if(e!==t){var n=this.fromPort;e!==null&&(this.ef!==e&&xp(e,this,n),Ml(this),this.D(2)),this.Re=t,t!==null&&this.Tb(t.isVisible()),this.Jf=null,this.ab();var i=this.diagram;i!==null&&i.$&&i.partManager.setFromNodeForLink(this,t,e);var r=this.fromPort,s=this.fromPortChanged;if(s!==null){var h=!0;i!==null&&(h=i.$,i.$=!0),s(this,n,r),i!==null&&(i.$=h)}t!==null&&(this.ef!==t&&mp(t,this,r),Ll(this),this.D(1)),this.g("fromNode",e,t),rh(this)}}},fromPortId:{get:function(){return this.Se},set:function(t){var e=this.Se;if(e!==t){var n=this.fromPort;n!==null&&Cn(n),Ml(this),this.Se=t;var i=this.fromPort;i!==null&&Cn(i);var r=this.diagram;if(r!==null){var s=this.data,h=r.model;s!==null&&h.di()&&h.Uu(s,t)}n!==i&&(this.Jf=null,this.ab(),s=this.fromPortChanged,s!==null&&(h=!0,r!==null&&(h=r.$,r.$=!0),s(this,n,i),r!==null&&(r.$=h))),Ll(this),this.g("fromPortId",e,t)}}},fromPort:{get:function(){var t=this.Re;return t===null?null:t.Cr(this.Se)}},fromPortChanged:{get:function(){return this.Em},set:function(t){var e=this.Em;e!==t&&(this.Em=t,this.g("fromPortChanged",e,t))}},toNode:{get:function(){return this.ef},set:function(t){var e=this.ef;if(e!==t){var n=this.toPort;e!==null&&(this.Re!==e&&xp(e,this,n),Ml(this),this.D(2)),this.ef=t,t!==null&&this.Tb(t.isVisible()),this.Jf=null,this.ab();var i=this.diagram;i!==null&&i.$&&i.partManager.setToNodeForLink(this,t,e);var r=this.toPort,s=this.toPortChanged;if(s!==null){var h=!0;i!==null&&(h=i.$,i.$=!0),s(this,n,r),i!==null&&(i.$=h)}t!==null&&(this.Re!==t&&mp(t,this,r),Ll(this),this.D(1)),this.g("toNode",e,t),rh(this)}}},toPortId:{get:function(){return this.ff},set:function(t){var e=this.ff;if(e!==t){var n=this.toPort;n!==null&&Cn(n),Ml(this),this.ff=t;var i=this.toPort;i!==null&&Cn(i);var r=this.diagram;if(r!==null){var s=this.data,h=r.model;s!==null&&h.di()&&h.Zu(s,t)}n!==i&&(this.Jf=null,this.ab(),s=this.toPortChanged,s!==null&&(h=!0,r!==null&&(h=r.$,r.$=!0),s(this,n,i),r!==null&&(r.$=h))),Ll(this),this.g("toPortId",e,t)}}},toPort:{get:function(){var t=this.ef;return t===null?null:t.Cr(this.ff)}},toPortChanged:{get:function(){return this.On},set:function(t){var e=this.On;e!==t&&(this.On=t,this.g("toPortChanged",e,t))}},fromSpot:{get:function(){return this.aa!==null?this.aa.Ji:He},set:function(t){var e=this.fromSpot;e.C(t)||(t=t.J(),this.Pc(),this.aa.Ji=t,this.g("fromSpot",e,t),(e.Sc()||t.Sc())&&this.fromNode!==null&&Cn(this.fromPort),this.ab())}},fromEndSegmentLength:{get:function(){return this.aa!==null?this.aa.Hi:NaN},set:function(t){var e=this.fromEndSegmentLength;e!==t&&(0>t&&Rt(t,">= 0",U,"fromEndSegmentLength"),this.Pc(),this.aa.Hi=t,this.g("fromEndSegmentLength",e,t),this.ab())}},fromShortLength:{get:function(){return this.aa!==null?this.aa.Ii:NaN},set:function(t){var e=this.fromShortLength;e!==t&&(this.Pc(),this.aa.Ii=t,this.lc(),this.g("fromShortLength",e,t))}},toSpot:{get:function(){return this.aa!==null?this.aa.lj:He},set:function(t){var e=this.toSpot;e.C(t)||(t=t.J(),this.Pc(),this.aa.lj=t,this.g("toSpot",e,t),(e.Sc()||t.Sc())&&this.toNode!==null&&Cn(this.toPort),this.ab())}},toEndSegmentLength:{get:function(){return this.aa!==null?this.aa.jj:NaN},set:function(t){var e=this.toEndSegmentLength;e!==t&&(0>t&&Rt(t,">= 0",U,"toEndSegmentLength"),this.Pc(),this.aa.jj=t,this.g("toEndSegmentLength",e,t),this.ab())}},toShortLength:{get:function(){return this.aa!==null?this.aa.kj:NaN},set:function(t){var e=this.toShortLength;e!==t&&(this.Pc(),this.aa.kj=t,this.lc(),this.g("toShortLength",e,t))}},isLabeledLink:{get:function(){return this.od===null?!1:0<this.od.count}},labelNodes:{get:function(){return this.od===null?Wn:this.od.iterator}},relinkableFrom:{get:function(){return(this.Na&1)!==0},set:function(t){var e=(this.Na&1)!==0;e!==t&&(this.Na^=1,this.g("relinkableFrom",e,t),this.Qb())}},relinkableTo:{get:function(){return(this.Na&2)!==0},set:function(t){var e=(this.Na&2)!==0;e!==t&&(this.Na^=2,this.g("relinkableTo",e,t),this.Qb())}},resegmentable:{get:function(){return(this.Na&4)!==0},set:function(t){var e=(this.Na&4)!==0;e!==t&&(this.Na^=4,this.g("resegmentable",e,t),this.Qb())}},isTreeLink:{get:function(){return(this.Na&8)!==0},set:function(t){var e=(this.Na&8)!==0;e!==t&&(this.Na^=8,this.g("isTreeLink",e,t),this.fromNode!==null&&wl(this.fromNode),this.toNode!==null&&wl(this.toNode))}},path:{get:function(){var t=this.vb();return t instanceof dt?t:null}},routeBounds:{get:function(){this.hg();var t=this.Sk,e=1/0,n=1/0,i=this.pointsCount;if(i===0)t.h(NaN,NaN,0,0);else{if(i===1)i=this.i(0),e=Math.min(i.x,e),n=Math.min(i.y,n),t.h(i.x,i.y,0,0);else if(i===2){i=this.i(0);var r=this.i(1);e=Math.min(i.x,r.x),n=Math.min(i.y,r.y),t.h(i.x,i.y,0,0),t.Ke(r)}else if(this.computeCurve()===Yn&&3<=i&&!this.isOrthogonal)if(r=this.i(0),e=r.x,n=r.y,t.h(e,n,0,0),i===3){i=this.i(1),e=Math.min(i.x,e),n=Math.min(i.y,n);var s=this.i(2);e=Math.min(s.x,e),n=Math.min(s.y,n),O.gl(r.x,r.y,i.x,i.y,i.x,i.y,s.x,s.y,.5,t)}else for(s=3;s<i;s+=3){var h=this.i(s-2);s+3>=i&&(s=i-1);var u=this.i(s-1),p=this.i(s);O.gl(r.x,r.y,h.x,h.y,u.x,u.y,p.x,p.y,.5,t),e=Math.min(p.x,e),n=Math.min(p.y,n),r=p}else for(r=this.i(0),s=this.i(1),e=Math.min(r.x,s.x),n=Math.min(r.y,s.y),t.h(r.x,r.y,0,0),t.Ke(s),r=2;r<i;r++)s=this.i(r),e=Math.min(s.x,e),n=Math.min(s.y,n),t.Ke(s);this.Ot.h(e-t.x,n-t.y)}return t}},midPoint:{get:function(){return this.hg(),this.computeMidPoint(new T)}},midAngle:{get:function(){return this.hg(),this.computeMidAngle()}},flattenedLengths:{get:function(){if(this.xp===null){this.td||vp(this);for(var t=this.xp=[],e=this.pointsCount,n=0;n<e-1;n++){var i=this.i(n),r=this.i(n+1);O.ca(i.x,r.x)?(i=r.y-i.y,0>i&&(i=-i)):O.ca(i.y,r.y)?(i=r.x-i.x,0>i&&(i=-i)):i=Math.sqrt(i.mf(r)),t.push(i)}}return this.xp}},flattenedTotalLength:{get:function(){var t=this.Ps;if(isNaN(t)){for(var e=this.flattenedLengths,n=e.length,i=t=0;i<n;i++)t+=e[i];this.Ps=t}return t}},points:{get:function(){return this.Ib},set:function(t){var e=this.Ib;if(e!==t){var n=null;if(Array.isArray(t)){var i=t.length%2===0;if(i){for(var r=0;r<t.length;r++)if(typeof t[r]!="number"||isNaN(t[r])){i=!1;break}}if(i)for(n=new Q,i=0;i<t.length/2;i++)r=new T(t[2*i],t[2*i+1]).freeze(),n.add(r);else{for(i=!0,r=0;r<t.length;r++){var s=t[r];if(!Bt(s)||typeof s.x!="number"||isNaN(s.x)||typeof s.y!="number"||isNaN(s.y)){i=!1;break}}if(i)for(n=new Q,i=0;i<t.length;i++)r=t[i],n.add(new T(r.x,r.y).freeze())}}else if(t instanceof Q)for(n=t.copy(),t=n.iterator;t.next();)t.value.freeze();else X("Link.points value is not an instance of List or Array: "+t);n.freeze(),this.Ib=n,this.lc(),vp(this),t=this.diagram,t!==null&&(t.ci||t.undoManager.isUndoingRedoing||t.Rr.add(this),t.animationManager.zb&&(t=t.animationManager,this.bf=n,t.Uk.add(this))),this.g("points",e,n)}}},pointsCount:{get:function(){return this.Ib.count}},td:{get:function(){return(this.Na&16)!==0},set:function(t){(this.Na&16)!==0!==t&&(this.Na^=16)}},suspendsRouting:{get:function(){return(this.Na&32)!==0},set:function(t){(this.Na&32)!==0!==t&&(this.Na^=32)}},computingPoints:{get:function(){return(this.Na&64)!==0},set:function(t){(this.Na&64)!==0!==t&&(this.Na^=64)}},defaultFromPoint:{get:function(){return this.m},set:function(t){this.m=t.copy()}},defaultToPoint:{get:function(){return this.u},set:function(t){this.u=t.copy()}},isOrthogonal:{get:function(){return(this.dj.value&2)===2}},isAvoiding:{get:function(){return(this.dj.value&4)===4}},Sj:{get:function(){return(this.Na&128)!==0},set:function(t){(this.Na&128)!==0!==t&&(this.Na^=128)}},geometry:{get:function(){if(!this.Sj){if(this.hg(),2>this.pointsCount)return this.Sj=!0,this.sa;this.sa=this.makeGeometry()}return this.sa}},firstPickIndex:{get:function(){return 2>=this.pointsCount?0:this.isOrthogonal||!sh(this.computeSpot(!0))?1:0}},lastPickIndex:{get:function(){var t=this.pointsCount;return t===0?0:2>=t?t-1:this.isOrthogonal||!sh(this.computeSpot(!1))?t-2:t-1}},adjusting:{get:function(){return this.Vj},set:function(t){var e=this.Vj;e!==t&&(this.Vj=t,this.g("adjusting",e,t))}},corner:{get:function(){return this.mm},set:function(t){var e=this.mm;e!==t&&(this.mm=t,this.lc(),this.g("corner",e,t))}},curve:{get:function(){return this.om},set:function(t){var e=this.om;e!==t&&(this.om=t,this.ab(),this.lc(),jg(this,e===ar||e===ah||t===ar||t===ah),this.g("curve",e,t))}},curviness:{get:function(){return this.pm},set:function(t){var e=this.pm;e!==t&&(this.pm=t,this.ab(),this.lc(),this.g("curviness",e,t))}},routing:{get:function(){return this.dj},set:function(t){var e=this.dj;e!==t&&(this.dj=t,this.Jf=null,this.ab(),jg(this,(e.value&2)===2||(t.value&2)===2),this.g("routing",e,t))}},smoothness:{get:function(){return this.Jn},set:function(t){var e=this.Jn;e!==t&&(this.Jn=t,this.lc(),this.g("smoothness",e,t))}},key:{get:function(){var t=this.diagram;if(t!==null&&t.model.di())return t.model.uc(this.data)}}}),U.prototype.invalidateOtherJumpOvers=U.prototype.ro,U.prototype.findClosestSegment=U.prototype.zy,U.prototype.updateRoute=U.prototype.hg,U.prototype.invalidateRoute=U.prototype.ab,U.prototype.rollbackRoute=U.prototype.Qu,U.prototype.commitRoute=U.prototype.kf,U.prototype.startRoute=U.prototype.eh,U.prototype.clearPoints=U.prototype.sj,U.prototype.removePoint=U.prototype.Ou,U.prototype.addPointAt=U.prototype.jf,U.prototype.addPoint=U.prototype.ce,U.prototype.insertPointAt=U.prototype.l,U.prototype.insertPoint=U.prototype.dz,U.prototype.setPointAt=U.prototype.M,U.prototype.setPoint=U.prototype.Uc,U.prototype.getPoint=U.prototype.i,U.prototype.getOtherPort=U.prototype.Wy,U.prototype.getOtherNode=U.prototype.no;var Qs=null,bs=null,Dg=new J(U,"Normal",1),vv=new J(U,"Orthogonal",2),Sv=new J(U,"AvoidsNodes",6),mx=new J(U,"AvoidsNodesStraight",7),hn=new J(U,"None",0),Yn=new J(U,"Bezier",9),ar=new J(U,"JumpGap",10),ah=new J(U,"JumpOver",11),kl=new J(U,"End",17),Lp=new J(U,"Scale",18),Mp=new J(U,"Stretch",19),Nl=new J(U,"OrientAlong",21),Tl=new J(U,"OrientPlus90",22),Cl=new J(U,"OrientMinus90",23),Gg=new J(U,"OrientOpposite",24),kp=new J(U,"OrientUpright",25),Fl=new J(U,"OrientPlus90Upright",26),Bl=new J(U,"OrientMinus90Upright",27),Np=new J(U,"OrientUpright45",28),xx=16,yx=14,jl=8;U.className="Link",U.Normal=Dg,U.Orthogonal=vv,U.AvoidsNodes=Sv,U.AvoidsNodesStraight=mx,U.None=hn,U.Bezier=Yn,U.JumpGap=ar,U.JumpOver=ah,U.End=kl,U.Scale=Lp,U.Stretch=Mp,U.OrientAlong=Nl,U.OrientPlus90=Tl,U.OrientMinus90=Cl,U.OrientOpposite=Gg,U.OrientUpright=kp,U.OrientPlus90Upright=Fl,U.OrientMinus90Upright=Bl,U.OrientUpright45=Np,U.EndSegmentStep=8,U.CurvinessStart=xx,U.SpacingMin=yx,U.OrthoShortCut=jl;function Tp(t,e,n,i){ce(this),this.re=this.Jp=!1,this.Ur=t,this.jx=e,this.Du=n,this.kx=i,this.links=[]}Tp.prototype.rl=function(){if(!this.Jp){var t=this.links;0<t.length&&(t=t[0].diagram,t!==null&&(t.Kv.add(this),this.re=t.undoManager.isUndoingRedoing))}this.Jp=!0},Tp.prototype.hv=function(){if(this.Jp){this.Jp=!1;var t=this.links;if(0<t.length){var e=t[0],n=e.diagram;n=n===null||n.ci&&!this.re,this.re=!1,e.arrangeBundledLinks(t,n),t.length===1&&(e.Ff=null,t.length=0)}t.length===0&&(t=this.Ur,this!==null&&t.Ne!==null&&t.Ne.remove(this),t=this.Du,this!==null&&t.Ne!==null&&t.Ne.remove(this))}},Tp.className="LinkBundle";function Dl(t){ce(this),this.ux=this.group=null,this.Kr=!0,this.abort=!1,this.Bd=this.Ad=1,this.bn=this.an=-1,this.mc=t.width,this.nc=t.height,this.Wb=null,this.Qh=this.Ph=0,this.fs=11,this.$w=this.Zw=22}Dl.prototype.initialize=function(t){if(!(0>=t.width||0>=t.height)){var e=t.y,n=t.x+t.width,i=t.y+t.height;if(this.Ad=Math.floor((t.x-this.mc)/this.mc)*this.mc,this.Bd=Math.floor((e-this.nc)/this.nc)*this.nc,this.an=Math.ceil((n+2*this.mc)/this.mc)*this.mc,this.bn=Math.ceil((i+2*this.nc)/this.nc)*this.nc,t=1+(Math.ceil((this.an-this.Ad)/this.mc)|0),e=1+(Math.ceil((this.bn-this.Bd)/this.nc)|0),this.Wb===null||this.Ph<t-1||this.Qh<e-1){for(n=[],i=0;i<=t;i++)n[i]=new Uint32Array(e);this.Wb=n,this.Ph=t-1,this.Qh=e-1}if(t=Og,this.Wb!==null)for(e=0;e<=this.Ph;e++)if(n=this.Wb[e],n.fill)n.fill(t);else for(i=0;i<=this.Qh;i++)n[i]=t}};function hh(t,e,n){return t.Ad<=e&&e<=t.an&&t.Bd<=n&&n<=t.bn}function fo(t,e,n){return hh(t,e,n)?(e-=t.Ad,e/=t.mc,n-=t.Bd,n/=t.nc,t.Wb[e|0][n|0]):Og}function vx(t){if(t.Wb!==null)for(var e=0;e<=t.Ph;e++)for(var n=t.Wb[e],i=0;i<=t.Qh;i++)n[i]>=vs&&(n[i]=Og)}Dl.prototype.Hj=function(t,e,n,i){if(t>this.an||t+n<this.Ad||e>this.bn||e+i<this.Bd)return!0;t=(t-this.Ad)/this.mc|0,e=(e-this.Bd)/this.nc|0,n=Math.max(0,n)/this.mc+1|0;var r=Math.max(0,i)/this.nc+1|0;if(0>t&&(n+=t,t=0),0>e&&(r+=e,e=0),0>n||0>r)return!0;for(i=Math.min(t+n-1,this.Ph)|0,n=Math.min(e+r-1,this.Qh)|0;t<=i;t++){r=this.Wb[t];for(var s=e;s<=n;s++)if(r[s]===hr)return!1}return!0};function go(t,e,n,i,r,s,h,u,p){if(!(e<s||e>h||n<u||n>p)){var d=e|0,g=n|0,c=t.Wb[d][g];if(c>=vs&&c<lh)for(r?g+=i:d+=i,c+=1;s<=d&&d<=h&&u<=g&&g<=p&&!(c>=t.Wb[d][g]);)t.Wb[d][g]=c,c+=1,r?g+=i:d+=i;if(d=r?g:d,r)if(0<i)for(n+=i;n<d;n+=i)go(t,e,n,1,!r,s,h,u,p),go(t,e,n,-1,!r,s,h,u,p);else for(n+=i;n>d;n+=i)go(t,e,n,1,!r,s,h,u,p),go(t,e,n,-1,!r,s,h,u,p);else if(0<i)for(e+=i;e<d;e+=i)go(t,e,n,1,!r,s,h,u,p),go(t,e,n,-1,!r,s,h,u,p);else for(e+=i;e>d;e+=i)go(t,e,n,1,!r,s,h,u,p),go(t,e,n,-1,!r,s,h,u,p)}}function Cp(t,e,n,i,r,s,h,u,p){e|=0,n|=0;var d=hr,g=vs;for(t.Wb[e][n]=g;d===hr&&e>s&&e<h&&n>u&&n<p;)g+=1,t.Wb[e][n]=g,r?n+=i:e+=i,d=t.Wb[e][n]}function Fp(t,e,n,i,r,s,h,u,p){e|=0,n|=0;var d=hr,g=lh;for(t.Wb[e][n]=g;d===hr&&e>s&&e<h&&n>u&&n<p;)t.Wb[e][n]=g,r?n+=i:e+=i,d=t.Wb[e][n]}function Sx(t,e,n,i,r,s,h){if(t.Wb!==null){t.abort=!1;var u=e.x,p=e.y;if(hh(t,u,p)){u-=t.Ad,u/=t.mc,p-=t.Bd,p/=t.nc;var d=i.x,g=i.y;if(hh(t,d,g))if(d-=t.Ad,d/=t.mc,g-=t.Bd,g/=t.nc,1>=Math.abs(u-d)&&1>=Math.abs(p-g))t.abort=!0;else{var c=s.x;i=s.y,e=s.x+s.width;var y=s.y+s.height;c-=t.Ad,c/=t.mc,i-=t.Bd,i/=t.nc,e-=t.Ad,e/=t.mc,y-=t.Bd,y/=t.nc,s=Math.max(0,Math.min(t.Ph,c|0)),e=Math.min(t.Ph,Math.max(0,e|0)),c=Math.max(0,Math.min(t.Qh,i|0)),y=Math.min(t.Qh,Math.max(0,y|0)),i=t.Wb,u|=0,p|=0,d|=0,g|=0;var S=n===0||n===90?1:-1;if(n=n===90||n===270,i[u][p]===hr?(Cp(t,u,p,S,n,s,e,c,y),Cp(t,u,p,1,!n,s,e,c,y),Cp(t,u,p,-1,!n,s,e,c,y)):Cp(t,u,p,S,n,u,p,u,p),i[d][g]===hr?(Fp(t,d,g,r===0||r===90?1:-1,r===90||r===270,s,e,c,y),Fp(t,d,g,1,!(r===90||r===270),s,e,c,y),Fp(t,d,g,-1,!(r===90||r===270),s,e,c,y)):Fp(t,d,g,S,n,d,g,d,g),n=Yt(),h&&Px(t,d,g,r,u,p,n))for((n[0]!==d||n[1]!==g)&&(n.unshift(g),n.unshift(d)),(n[n.length-2]!==u||n[n.length-1]!==p)&&(n.push(u),n.push(p)),t=vs,r=n[n.length-2],h=n[n.length-1],i[r][h]=t++,s=n.length-4;0<=s;s-=2)for(r=n[s+2],h=n[s+3],e=n[s],d=n[s+1];e>r?r++:e<r?r--:d>h?h++:d<h&&h--,i[r][h]=t++,r!==e||h!==d;);else go(t,u,p,1,!1,s,e,c,y),go(t,u,p,-1,!1,s,e,c,y),go(t,u,p,1,!0,s,e,c,y),go(t,u,p,-1,!0,s,e,c,y);At(n)}}}}function Px(t,e,n,i,r,s,h){for(var u=t.Wb,p=e,d=n;;){if(p===r&&d===s)return!0;var g=p,c=d;if(i===0)if(g<r)g++;else break;else if(i===90)if(c<s)c++;else break;else if(i===180)if(g>r)g--;else break;else if(c>s)c--;else break;var y=u[g][c];if(y===0||y===Ig)break;p=g,d=c}for(;;){if(g=i,c=p,y=d,i===0?y<s?(g=90,y++):y>s&&(g=270,y--):i===90?c<r?(g=0,c++):c>r&&(g=180,c--):i===180?y<s?(g=90,y++):y>s&&(g=270,y--):c<r?(g=0,c++):c>r&&(g=180,c--),c=u[c][y],g!==i&&c!==0&&c!==Ig){if(h.push(p),h.push(d),Px(t,p,d,g,r,s,h))return!0;h.pop(),h.pop()}if(u[p][d]=Ig,i===0){if(p===e)return!1;p--}else if(i===90){if(d===n)return!1;d--}else if(i===180){if(p===e)return!1;p++}else{if(d===n)return!1;d++}}}Z.Object.defineProperties(Dl.prototype,{bounds:{get:function(){return new E(this.Ad,this.Bd,this.an-this.Ad,this.bn-this.Bd)}},ao:{get:function(){return this.mc},set:function(t){0<t&&t!==this.mc&&(this.mc=t,this.initialize(this.bounds))}},$n:{get:function(){return this.nc},set:function(t){0<t&&t!==this.nc&&(this.nc=t,this.initialize(this.bounds))}}});var hr=0,vs=1,lh=999999,Og=lh+1,Ig=lh+2;Dl.className="PositionArray";function qs(){ce(this),this.port=this.node=null,this.ee=[],this.uo=!1}qs.prototype.toString=function(){for(var t=this.ee,e=this.node.toString()+" "+t.length.toString()+":",n=0;n<t.length;n++){var i=t[n];i!==null&&(e+=`
  `+i.toString())}return e};function Pv(t,e,n,i){switch(e=e.offsetY,e){case 8:return 90;case 2:return 180;case 1:return 270;case 4:return 0}switch(e){case 9:return 180<n?270:90;case 6:return 90<n&&270>=n?180:0}switch(t=180*Math.atan2(t.height,t.width)/Math.PI,e){case 3:return n>t&&n<=180+t?180:270;case 5:return n>180-t&&n<=360-t?270:0;case 12:return n>t&&n<=180+t?90:0;case 10:return n>180-t&&n<=360-t?180:90;case 7:return 90<n&&n<=180+t?180:n>180+t&&n<=360-t?270:0;case 13:return 180<n&&n<=360-t?270:n>t&&180>=n?90:0;case 14:return n>t&&n<=180-t?90:n>180-t&&270>=n?180:0;case 11:return n>180-t&&n<=180+t?180:n>180+t?270:90}return i&&e!==15&&(n-=15,0>n&&(n+=360)),n>t&&n<180-t?90:n>=180-t&&n<=180+t?180:n>180+t&&n<360-t?270:0}qs.prototype.rl=function(){this.ee.length=0};function wx(t,e){var n=t.ee;if(n.length===0){t:if(!t.uo){n=t.uo,t.uo=!0;var i=null,r=t.node,s=r instanceof ut?r:null;if(s===null||s.isSubGraphExpanded)var h=r.isTreeExpanded?r.findLinksConnected(t.port.portId):r.Jw();else{if(!s.actualBounds.w()){t.uo=n;break t}i=s,h=i.ju()}s=t.ee.length=0;var u=t.port.ia(Qe,T.alloc()),p=t.port.ia(ro,T.alloc());for(r=E.allocAt(u.x,u.y,0,0),r.Ke(p),T.free(u),T.free(p),u=T.allocAt(r.x+r.width/2,r.y+r.height/2),p=t.port.Zh(),h=h.iterator;h.next();){var d=h.value;if(d.isVisible()&&d.fromPort!==d.toPort){var g=d.fromPort===t.port||d.fromNode!==null&&d.fromNode.Hd(i),c=d.computeSpot(g,t.port);if(c.Sc()&&(g=g?d.toPort:d.fromPort,g!==null)){var y=g.part;if(y!==null){var S=y.findVisibleNode();S!==null&&S!==y&&(y=S,g=y.port),g=d.computeOtherPoint(y,g),y=u.Za(g),y-=p,0>y?y+=360:360<=y&&(y-=360),c=Pv(r,c,y,d.isOrthogonal),c===0?(c=4,180<y&&(y-=360)):c===90?(c=8,270<y&&(y-=360)):c===180?c=2:(c=1,90>y&&(y+=360)),S=t.ee[s],S===void 0?(S=new Ag(d,y,c),t.ee[s]=S):(S.link=d,S.angle=y,S.Fc=c),S.Hu.set(g),s++}}}}for(T.free(u),t.ee.sort(qs.prototype.j),p=t.ee.length,i=-1,s=u=0;s<p;s++)h=t.ee[s],h!==void 0&&(h.Fc!==i&&(i=h.Fc,u=0),h.oo=u,u++);for(i=-1,u=0,s=p-1;0<=s;s--)p=t.ee[s],p!==void 0&&(p.Fc!==i&&(i=p.Fc,u=p.oo+1),p.jl=u);if(s=t.ee,c=t.port,i=t.node.portSpreading,u=T.alloc(),p=T.alloc(),h=T.alloc(),d=T.alloc(),c.ia(Qe,u),c.ia(Pa,p),c.ia(ro,h),c.ia(wa,d),S=y=g=c=0,i===Mg)for(var v=0;v<s.length;v++){var L=s[v];if(L!==null){var N=L.link.computeThickness();switch(L.Fc){case 8:y+=N;break;case 2:S+=N;break;case 1:c+=N;break;default:case 4:g+=N}}}var M=v=0,B=1,F=L=0;for(N=0;N<s.length;N++){var j=s[N];if(j!==null){if(v!==j.Fc){switch(v=j.Fc,v){case 8:var D=h;M=d;break;case 2:D=d,M=u;break;case 1:D=u,M=p;break;default:case 4:D=p,M=h}switch(L=M.x-D.x,F=M.y-D.y,v){case 8:y>Math.abs(L)?(B=Math.abs(L)/y,y=Math.abs(L)):B=1;break;case 2:S>Math.abs(F)?(B=Math.abs(F)/S,S=Math.abs(F)):B=1;break;case 1:c>Math.abs(L)?(B=Math.abs(L)/c,c=Math.abs(L)):B=1;break;default:case 4:g>Math.abs(F)?(B=Math.abs(F)/g,g=Math.abs(F)):B=1}M=0}var R=j.to;if(i===Mg){switch(j=j.link.computeThickness(),j*=B,R.set(D),v){case 8:R.x=D.x+L/2+y/2-M-j/2;break;case 2:R.y=D.y+F/2+S/2-M-j/2;break;case 1:R.x=D.x+L/2-c/2+M+j/2;break;default:case 4:R.y=D.y+F/2-g/2+M+j/2}M+=j}else{var W=.5;i===yp&&(W=(j.oo+1)/(j.jl+1)),R.x=D.x+L*W,R.y=D.y+F*W}}}for(T.free(u),T.free(p),T.free(h),T.free(d),D=t.ee,s=0;s<D.length;s++)i=D[s],i!==null&&(i.hu=t.computeEndSegmentLength(i));t.uo=n,E.free(r)}n=t.ee}for(t=0;t<n.length;t++)if(r=n[t],r!==null&&r.link===e)return r;return null}qs.prototype.j=function(t,e){return t===e?0:t===null?-1:e===null?1:t.Fc<e.Fc?-1:t.Fc>e.Fc?1:t.angle<e.angle?-1:t.angle>e.angle?1:0},qs.prototype.computeEndSegmentLength=function(t){var e=t.link,n=e.computeEndSegmentLength(this.node,this.port,Ke,e.fromPort===this.port),i=t.oo;if(0>i)return n;var r=t.jl;if(1>=r||!e.isOrthogonal)return n;e=t.Hu;var s=t.to;return(t.Fc===2||t.Fc===8)&&(i=r-1-i),((t=t.Fc===2||t.Fc===4)?e.y<s.y:e.x<s.x)?n+8*i:(t?e.y===s.y:e.x===s.x)?n:n+8*(r-1-i)},qs.className="Knot";function Ag(t,e,n){this.link=t,this.angle=e,this.Fc=n,this.Hu=new T,this.jl=this.oo=0,this.to=new T,this.hu=0}Ag.prototype.toString=function(){return this.link.toString()+" "+this.angle.toString()+" "+this.Fc.toString()+":"+this.oo.toString()+"/"+this.jl.toString()+" "+this.to.toString()+" "+this.hu.toString()+" "+this.Hu.toString()},Ag.className="LinkInfo";function Ut(t){ce(this),this.m=this.H=null,this.rh=this.Pm=!0,this.Vm=!1,this.Zl=new T(0,0).freeze(),this.Sm=!0,this.cm=this.Rm=null,this.Um=!1,this.j=null,t&&Object.assign(this,t)}Ut.prototype.cloneProtected=function(t){t.Pm=this.Pm,t.rh=this.rh,t.Vm=this.Vm,t.Zl.assign(this.Zl),t.Sm=this.Sm,t.Rm=this.Rm,t.cm=this.cm,t.Um=!0},Ut.prototype.copy=function(){var t=new this.constructor;return this.cloneProtected(t),t},Ut.prototype.ob=function(){},Ut.prototype.toString=function(){var t=oo(this.constructor);return t+="(",this.group!==null&&(t+=" in "+this.group),this.diagram!==null&&(t+=" for "+this.diagram),t+")"},Ut.prototype.D=function(){if(this.isValidLayout){var t=this.diagram;if(t!==null&&!t.undoManager.isUndoingRedoing){var e=t.animationManager;!e.isTicking&&(e.defaultAnimation.isAnimating&&e.wc(),this.isOngoing&&t.ci||this.isInitial&&!t.ci)&&(this.isValidLayout=!1,t.Kb())}}},Ut.prototype.createNetwork=function(){return new zt(this)},Ut.prototype.makeNetwork=function(t){var e=this.createNetwork();return t instanceof I?(e.$f(t.nodes,!0),e.$f(t.links,!0)):t instanceof ut?e.$f(t.memberParts):e.$f(t.iterator),e},Ut.prototype.updateParts=function(){this.isValidLayout=!0;var t=this.diagram;if(t===null&&this.network!==null)for(var e=this.network.vertexes.iterator;e.next();){var n=e.value.node;if(n!==null&&(t=n.diagram,t!==null))break}try{t!==null&&t.Ca("Layout"),this.commitLayout()}finally{t!==null&&t.cb("Layout")}},Ut.prototype.commitLayout=function(){if(this.network!==null){for(var t=this.network.vertexes.iterator;t.next();)t.value.commit();if(this.isRouting)for(t=this.network.edges.iterator;t.next();)t.value.commit()}},Ut.prototype.doLayout=function(t){var e=new H;t instanceof I?(zr(this,e,t.nodes,!0,this.ah,!0,!1,!0),zr(this,e,t.parts,!0,this.ah,!0,!1,!0)):t instanceof ut?zr(this,e,t.memberParts,!1,this.ah,!0,!1,!0):e.addAll(t.iterator),0<e.count&&(t=this.diagram,t!==null&&t.Ca("Layout"),this.doMinimalNoNetworkLayout(e),t!==null&&t.cb("Layout")),this.isValidLayout=!0},Ut.prototype.doMinimalNoNetworkLayout=function(t){var e=Math.ceil(Math.sqrt(t.count));this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin);var n=this.arrangementOrigin.x,i=n,r=this.arrangementOrigin.y,s=0,h=0;for(t=t.iterator;t.next();){var u=t.value;Gl(u);var p=u.measuredBounds,d=p.width;p=p.height,u.moveTo(i,r),u instanceof ut&&(u.ah=!1),i+=Math.max(d,50)+20,h=Math.max(h,Math.max(p,50)),s>=e-1?(s=0,i=n,r+=h+20,h=0):s++}},Ut.prototype.doMinimalNetworkLayout=function(){var t=Math.ceil(Math.sqrt(this.network.vertexes.count));this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin);for(var e=this.arrangementOrigin.x,n=e,i=this.arrangementOrigin.y,r=0,s=0,h=this.network.vertexes.iterator;h.next();){var u=h.value.node;if(!(u===null||u instanceof U)&&(Gl(u),this.ah(u))){var p=u.measuredBounds,d=p.width;p=p.height,u.moveTo(n,i),u instanceof ut&&(u.ah=!1),n+=Math.max(d,50)+20,s=Math.max(s,Math.max(p,50)),r>=t-1?(r=0,n=e,i+=s+20,s=0):r++}}},Ut.prototype.ah=function(t){return!!(!t.location.w()||t instanceof ut&&t.ah)};function zr(t,e,n,i,r,s,h,u){for(n=n.iterator;n.next();){var p=n.value;i&&!p.isTopLevel||r!==null&&!r(p)||!p.canLayout()||(s&&p instanceof _?p.isLinkLabel||(p instanceof ut&&p.layout===null?zr(t,e,p.memberParts,!1,r,s,h,u):(Gl(p),e.add(p))):h&&p instanceof U?e.add(p):!u||!p.Rc()||p instanceof _||(Gl(p),e.add(p)))}}function Gl(t){var e=t.actualBounds;(e.width===0||e.height===0||isNaN(e.width)||isNaN(e.height))&&t.Ta()}Ut.prototype.ai=function(t,e){var n=this.boundsComputation;return n!==null?(e||(e=new E),n(t,this,e)):e?(e.set(t.actualBounds),e):t.actualBounds},Ut.prototype.zw=function(t){var e=new H;return t instanceof I?(zr(this,e,t.nodes,!0,null,!0,!0,!0),zr(this,e,t.links,!0,null,!0,!0,!0),zr(this,e,t.parts,!0,null,!0,!0,!0)):t instanceof ut?zr(this,e,t.memberParts,!1,null,!0,!0,!0):zr(this,e,t.iterator,!1,null,!0,!0,!0),e},Ut.prototype.initialOrigin=function(t){var e=this.group;if(e!==null){var n=e.position.copy();return(isNaN(n.x)||isNaN(n.y))&&n.set(t),e=e.placeholder,e!==null&&(n=e.ia(Qe),(isNaN(n.x)||isNaN(n.y))&&n.set(t),t=e.padding,n.x+=t.left,n.y+=t.top),n}return t},Z.Object.defineProperties(Ut.prototype,{diagram:{get:function(){return this.H},set:function(t){this.H=t}},group:{get:function(){return this.m},set:function(t){this.m!==t&&(this.m=t,t!==null&&(this.H=t.diagram))}},isOngoing:{get:function(){return this.Pm},set:function(t){this.Pm!==t&&(this.Pm=t)}},isInitial:{get:function(){return this.rh},set:function(t){this.rh=t,t||(this.Um=!0)}},isViewportSized:{get:function(){return this.Vm},set:function(t){this.Vm!==t&&(this.Vm=t)&&this.D()}},isRouting:{get:function(){return this.Sm},set:function(t){this.Sm!==t&&(this.Sm=t)}},isRealtime:{get:function(){return this.Rm},set:function(t){this.Rm!==t&&(this.Rm=t)}},isValidLayout:{get:function(){return this.Um},set:function(t){this.Um!==t&&(this.Um=t,t||(t=this.diagram,t!==null&&(t.hh=!0)))}},network:{get:function(){return this.j},set:function(t){this.j!==t&&(this.j=t,t!==null&&(t.layout=this))}},boundsComputation:{get:function(){return this.cm},set:function(t){this.cm!==t&&(this.cm=t,this.D())}},arrangementOrigin:{get:function(){return this.Zl},set:function(t){this.Zl.C(t)||(this.Zl.assign(t),this.D())}}}),Ut.prototype.collectParts=Ut.prototype.zw,Ut.prototype.getLayoutBounds=Ut.prototype.ai,Ut.prototype.invalidateLayout=Ut.prototype.D,Ut.className="Layout";function zt(t){ce(this),this.Jc=t,this.gf=new H,this.me=new H,this.Vr=new pt,this.Qr=new pt}zt.prototype.clear=function(){if(this.gf)for(var t=this.gf.iterator;t.next();)t.value.clear();if(this.me)for(t=this.me.iterator;t.next();)t.value.clear();this.gf=new H,this.me=new H,this.Vr=new pt,this.Qr=new pt},zt.prototype.toString=function(t){t===void 0&&(t=0);var e="LayoutNetwork"+(this.layout!==null?"("+this.layout.toString()+")":"");if(0>=t)return e;if(e+=" vertexes: "+this.gf.count+" edges: "+this.me.count,1<t){for(var n=this.gf.iterator;n.next();)e+=`
    `+n.value.toString(t-1);for(n=this.me.iterator;n.next();)e+=`
    `+n.value.toString(t-1)}return e},zt.prototype.createVertex=function(){return new Te(this)},zt.prototype.createEdge=function(){return new Fn(this)},zt.prototype.$f=function(t,e,n){if(t!==null){for(e===void 0&&(e=!1),n===void 0&&(n=null),n===null&&(n=function(h){if(h instanceof _)return!h.isLinkLabel;if(h instanceof U){var u=h.fromNode;return u===null||u.isLinkLabel?!1:(h=h.toNode,!(h===null||h.isLinkLabel))}return!1}),t=t.iterator;t.next();){var i=t.value;if(i instanceof _&&(!e||i.isTopLevel)&&i.canLayout()&&n(i)){if(i instanceof ut&&i.layout===null)this.$f(i.memberParts,!1);else if(this.Yh(i)===null){var r=this.createVertex();r.node=i,this.Pg(r)}}}for(t.reset();t.next();)if(i=t.value,i instanceof U&&(!e||i.isTopLevel)&&i.canLayout()&&n(i)&&this.ho(i)===null){var s=i.fromNode;r=i.toNode,s!==null&&r!==null&&s!==r&&(s=this.findGroupVertex(s),r=this.findGroupVertex(r),s!==null&&r!==null&&this.Ij(s,r,i))}}},zt.prototype.findGroupVertex=function(t){if(t===null)return null;var e=t.findVisibleNode();if(e===null)return null;if(t=this.Yh(e),t!==null)return t;for(e=e.containingGroup;e!==null;){if(t=this.Yh(e),t!==null)return t;e=e.containingGroup}return null},a=zt.prototype,a.Pg=function(t){if(t!==null){this.gf.add(t);var e=t.node;e!==null&&this.Vr.add(e,t),t.network=this}},a.fl=function(t){if(t===null)return null;var e=this.Yh(t);return e===null&&(e=this.createVertex(),e.node=t,this.Pg(e)),e},a.gu=function(t){if(t!==null&&Lx(this,t)){for(var e=t.fg,n=e.count-1;0<=n;n--){var i=e.L(n);this.yj(i)}for(e=t.ag,t=e.count-1;0<=t;t--)n=e.L(t),this.yj(n)}};function Lx(t,e){if(e===null)return!1;var n=t.gf.remove(e);return n&&(e=e.node,e!==null&&t.Vr.remove(e)),n}a.ty=function(t){t!==null&&(t=this.Yh(t),t!==null&&this.gu(t))},a.Yh=function(t){return t===null?null:this.Vr.I(t)},a.Vn=function(t){if(t!==null){zg(this,t);var e=t.toVertex;e!==null&&e.Zt(t),e=t.fromVertex,e!==null&&e.Xt(t)}};function zg(t,e){if(e!==null){t.me.add(e);var n=e.link;n!==null&&t.ho(n)===null&&t.Qr.add(n,e),e.network=t}}a.Wx=function(t){if(t===null)return null;var e=t.fromNode,n=t.toNode,i=this.ho(t);return i===null?(i=this.createEdge(),i.link=t,e!==null&&(i.fromVertex=this.fl(e)),n!==null&&(i.toVertex=this.fl(n)),this.Vn(i)):(e!==null?i.fromVertex=this.fl(e):i.fromVertex=null,n!==null?i.toVertex=this.fl(n):i.toVertex=null),i},a.yj=function(t){if(t!==null){var e=t.toVertex;e!==null&&e.fu(t),e=t.fromVertex,e!==null&&e.eu(t),Eg(this,t)}};function Eg(t,e){e!==null&&t.me.remove(e)&&(e=e.link,e!==null&&t.Qr.remove(e))}a.sy=function(t){t!==null&&(t=this.ho(t),t!==null&&this.yj(t))},a.ho=function(t){return t===null?null:this.Qr.I(t)},a.Ij=function(t,e,n){if(t===null||e===null)return null;if(t.network===this&&e.network===this){var i=this.createEdge();return i.link=n,i.fromVertex=t,i.toVertex=e,this.Vn(i),i}return null},a.Fl=function(t){if(t!==null){var e=t.fromVertex,n=t.toVertex;e!==null&&n!==null&&(e.eu(t),n.fu(t),t.Fl(),e.Zt(t),n.Xt(t))}},a.eo=function(){for(var t=Yt(),e=this.me.iterator;e.next();){var n=e.value;n.fromVertex===n.toVertex&&t.push(n)}for(e=t.length,n=0;n<e;n++)this.yj(t[n]);At(t)},zt.prototype.deleteArtificialVertexes=function(){for(var t=Yt(),e=this.gf.iterator;e.next();){var n=e.value;n.node===null&&n.data===null&&t.push(n)}for(n=t.length,e=0;e<n;e++)this.gu(t[e]);for(e=Yt(),n=this.me.iterator;n.next();){var i=n.value;i.link===null&&i.data===null&&e.push(i)}for(n=e.length,i=0;i<n;i++)this.yj(e[i]);At(t),At(e)};function wv(t){for(var e=Yt(),n=t.me.iterator;n.next();){var i=n.value;i.fromVertex!==null&&i.toVertex!==null||e.push(i)}for(n=e.length,i=0;i<n;i++)t.yj(e[i]);At(e)}zt.prototype.vx=function(t){t===void 0&&(t=!0),t&&(this.deleteArtificialVertexes(),wv(this),this.eo()),t=new Q;for(var e=!0;e;){e=!1;for(var n=this.gf.iterator;n.next();){var i=n.value;if(0<i.fg.count||0<i.ag.count){e=this.layout.createNetwork(),t.add(e),Rg(this,e,i),e=!0;break}}}return t.sort(function(r,s){return r===null||s===null||r===s?0:s.vertexes.count-r.vertexes.count}),t};function Rg(t,e,n){if(n!==null&&n.network!==e){Lx(t,n),e.Pg(n);for(var i=n.sourceEdges;i.next();){var r=i.value;r.network!==e&&(Eg(t,r),zg(e,r),Rg(t,e,r.fromVertex))}for(i=n.destinationEdges;i.next();)n=i.value,n.network!==e&&(Eg(t,n),zg(e,n),Rg(t,e,n.toVertex))}}zt.prototype.yy=function(){for(var t=new H,e=this.gf.iterator;e.next();)t.add(e.value.node);for(e=this.me.iterator;e.next();)t.add(e.value.link);return t},Z.Object.defineProperties(zt.prototype,{layout:{get:function(){return this.Jc},set:function(t){t!==null&&(this.Jc=t)}},vertexes:{get:function(){return this.gf}},edges:{get:function(){return this.me}}}),zt.prototype.findAllParts=zt.prototype.yy,zt.prototype.splitIntoSubNetworks=zt.prototype.vx,zt.prototype.deleteSelfEdges=zt.prototype.eo,zt.prototype.reverseEdge=zt.prototype.Fl,zt.prototype.linkVertexes=zt.prototype.Ij,zt.prototype.findEdge=zt.prototype.ho,zt.prototype.deleteLink=zt.prototype.sy,zt.prototype.deleteEdge=zt.prototype.yj,zt.prototype.addLink=zt.prototype.Wx,zt.prototype.addEdge=zt.prototype.Vn,zt.prototype.findVertex=zt.prototype.Yh,zt.prototype.deleteNode=zt.prototype.ty,zt.prototype.deleteVertex=zt.prototype.gu,zt.prototype.addNode=zt.prototype.fl,zt.prototype.addVertex=zt.prototype.Pg,zt.prototype.addParts=zt.prototype.$f,zt.className="LayoutNetwork";function Te(t){ce(this),this.nb=t,this.j=new E(0,0,10,10).freeze(),this.m=new T(5,5).freeze(),this.Eh=this.qb=null,this.fg=new Q,this.ag=new Q}Te.prototype.clear=function(){this.Eh=this.qb=null,this.fg=new Q,this.ag=new Q},Te.prototype.toString=function(t){t===void 0&&(t=0);var e="LayoutVertex#"+$e(this);if(0<t&&(e+=this.node!==null?"("+this.node.toString()+")":"",1<t)){t="";for(var n=!0,i=this.fg.iterator;i.next();){var r=i.value;n?n=!1:t+=",",t+=r.toString(0)}for(r="",n=!0,i=this.ag.iterator;i.next();){var s=i.value;n?n=!1:r+=",",r+=s.toString(0)}e+=" sources: "+t+" destinations: "+r}return e},Te.prototype.commit=function(){var t=this.qb;if(t!==null){var e=this.bounds,n=t.bounds;Bt(n)?(n.x=e.x,n.y=e.y,n.width=e.width,n.height=e.height):t.bounds=e.copy()}else if(t=this.node,t!==null){if(e=this.bounds,!(t instanceof ut)){n=E.alloc();var i=this.network.layout.ai(t,n),r=t.locationObject.ia(Dt);if(i.w()&&r.w()){t.moveTo(e.x+this.focusX-(r.x-i.x),e.y+this.focusY-(r.y-i.y)),E.free(n);return}E.free(n)}t.moveTo(e.x,e.y)}},Te.prototype.Zt=function(t){t!==null&&(this.fg.contains(t)||this.fg.add(t))},Te.prototype.fu=function(t){t!==null&&this.fg.remove(t)},Te.prototype.Xt=function(t){t!==null&&(this.ag.contains(t)||this.ag.add(t))},Te.prototype.eu=function(t){t!==null&&this.ag.remove(t)};function Vg(t,e){return t=t.Eh,e=e.Eh,t?e?(t=t.text,e=e.text,t<e?-1:t>e?1:0):1:e!==null?-1:0}Z.Object.defineProperties(Te.prototype,{sourceEdgesArrayAccess:{get:function(){return this.fg._dataArray}},destinationEdgesArrayAccess:{get:function(){return this.ag._dataArray}},data:{get:function(){return this.qb},set:function(t){if(this.qb=t,t!==null&&t.bounds){var e=t.bounds;t=e.x;var n=e.y,i=e.width;e=e.height,this.m.h(i/2,e/2),this.j.h(t,n,i,e)}}},node:{get:function(){return this.Eh},set:function(t){if(this.Eh!==t){this.Eh=t,t.Ta();var e=this.network.layout,n=E.alloc(),i=e.ai(t,n);e=i.x;var r=i.y,s=i.width;if(i=i.height,isNaN(e)&&(e=0),isNaN(r)&&(r=0),this.j.h(e,r,s,i),E.free(n),!(t instanceof ut)&&(t=t.locationObject.ia(Dt),t.w())){this.m.h(t.x-e,t.y-r);return}this.m.h(s/2,i/2)}}},bounds:{get:function(){return this.j},set:function(t){this.j.C(t)||this.j.assign(t)}},focus:{get:function(){return this.m},set:function(t){this.m.C(t)||this.m.assign(t)}},centerX:{get:function(){return this.j.x+this.m.x},set:function(t){var e=this.j;e.x+this.m.x!==t&&(e.ja(),e.x=t-this.m.x,e.freeze())}},centerY:{get:function(){return this.j.y+this.m.y},set:function(t){var e=this.j;e.y+this.m.y!==t&&(e.ja(),e.y=t-this.m.y,e.freeze())}},focusX:{get:function(){return this.m.x},set:function(t){var e=this.m;e.x!==t&&(e.ja(),e.x=t,e.freeze())}},focusY:{get:function(){return this.m.y},set:function(t){var e=this.m;e.y!==t&&(e.ja(),e.y=t,e.freeze())}},x:{get:function(){return this.j.x},set:function(t){var e=this.j;e.x!==t&&(e.ja(),e.x=t,e.freeze())}},y:{get:function(){return this.j.y},set:function(t){var e=this.j;e.y!==t&&(e.ja(),e.y=t,e.freeze())}},width:{get:function(){return this.j.width},set:function(t){var e=this.j;e.width!==t&&(e.ja(),e.width=t,e.freeze())}},height:{get:function(){return this.j.height},set:function(t){var e=this.j;e.height!==t&&(e.ja(),e.height=t,e.freeze())}},network:{get:function(){return this.nb},set:function(t){this.nb=t}},sourceVertexes:{get:function(){for(var t=new H,e=this.sourceEdges;e.next();)t.add(e.value.fromVertex);return t.iterator}},destinationVertexes:{get:function(){for(var t=new H,e=this.destinationEdges;e.next();)t.add(e.value.toVertex);return t.iterator}},vertexes:{get:function(){for(var t=new H,e=this.sourceEdges;e.next();)t.add(e.value.fromVertex);for(e=this.destinationEdges;e.next();)t.add(e.value.toVertex);return t.iterator}},sourceEdges:{get:function(){return this.fg.iterator}},destinationEdges:{get:function(){return this.ag.iterator}},edges:{get:function(){for(var t=new Q,e=this.sourceEdges;e.next();)t.add(e.value);for(e=this.destinationEdges;e.next();)t.add(e.value);return t.iterator}},edgesCount:{get:function(){return this.fg.count+this.ag.count}}}),Te.prototype.deleteDestinationEdge=Te.prototype.eu,Te.prototype.addDestinationEdge=Te.prototype.Xt,Te.prototype.deleteSourceEdge=Te.prototype.fu,Te.prototype.addSourceEdge=Te.prototype.Zt,Te.className="LayoutVertex",Te.standardComparer=Vg,Te.smartComparer=function(t,e){if(t!==null){if(e!==null){t=t.Eh;var n=e.Eh;if(t!==null){if(n!==null){for(e=t.text.toLocaleLowerCase().split(/([+-]?[.]?\d+(?:\.\d*)?(?:e[+-]?\d+)?)/),t=n.text.toLocaleLowerCase().split(/([+-]?[.]?\d+(?:\.\d*)?(?:e[+-]?\d+)?)/),n=0;n<e.length;n++)if(t[n]!==""&&t[n]!==void 0){var i=parseFloat(e[n]),r=parseFloat(t[n]);if(isNaN(i))if(isNaN(r)){if(e[n].localeCompare(t[n])!==0)return e[n].localeCompare(t[n])}else return 1;else{if(isNaN(r))return-1;if(i-r!==0)return i-r}}else if(e[n]!=="")return 1;return t[n]!==""&&t[n]!==void 0?-1:0}return 1}return n!==null?-1:0}return 1}return e!==null?-1:0};function Fn(t){ce(this),this.mb=t,this.fd=this.Yc=this.Gk=this.qb=null}Fn.prototype.clear=function(){this.fd=this.Yc=this.Gk=this.qb=null},Fn.prototype.toString=function(t){t===void 0&&(t=0);var e="LayoutEdge#"+$e(this);return 0<t&&(e+=this.Gk!==null?"("+this.Gk.toString()+")":"",1<t&&(e+=" "+(this.Yc?this.Yc.toString():"null")+" --> "+(this.fd?this.fd.toString():"null"))),e},Fn.prototype.Fl=function(){var t=this.Yc;this.Yc=this.fd,this.fd=t},Fn.prototype.commit=function(){},Fn.prototype.Sw=function(t){return this.fd===t?this.Yc:this.Yc===t?this.fd:null},Z.Object.defineProperties(Fn.prototype,{network:{get:function(){return this.mb},set:function(t){this.mb=t}},data:{get:function(){return this.qb},set:function(t){this.qb!==t&&(this.qb=t)}},link:{get:function(){return this.Gk},set:function(t){this.Gk!==t&&(this.Gk=t)}},fromVertex:{get:function(){return this.Yc},set:function(t){this.Yc!==t&&(this.Yc=t)}},toVertex:{get:function(){return this.fd},set:function(t){this.fd!==t&&(this.fd=t)}}}),Fn.prototype.getOtherVertex=Fn.prototype.Sw,Fn.className="LayoutEdge";function Be(t){Ut.call(this),this.isViewportSized=!0,this.Sn=this.Tn=NaN,this.kg=new ht(NaN,NaN).freeze(),this.df=new ht(10,10).freeze(),this.Fb=Ol,this.Lb=jp,this.cd=Il,this.Wc=Mx,t&&Object.assign(this,t)}z(Be,Ut),Be.prototype.cloneProtected=function(t){Ut.prototype.cloneProtected.call(this,t),t.Tn=this.Tn,t.Sn=this.Sn,t.kg.assign(this.kg),t.df.assign(this.df),t.Fb=this.Fb,t.Lb=this.Lb,t.cd=this.cd,t.Wc=this.Wc},Be.prototype.ob=function(t){t.classType===Be?t===Il||t===Gp||t===Yg||t===Dp?this.sorting=t:t===jp||t===Ei?this.arrangement=t:t===Ol||t===Bp?this.alignment=t:X("Unknown enum value: "+t):Ut.prototype.ob.call(this,t)},Be.prototype.doLayout=function(t){this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin);var e=this.zw(t);t=this.diagram;for(var n=e.copy().iterator;n.next();){var i=n.value;if(!i.Zg()||i.fromNode===null&&i.toNode===null){if(i.Ta(),i instanceof ut)for(i=i.memberParts;i.next();)e.remove(i.value)}else e.remove(i)}var r=e.Da();if(r.length!==0){switch(this.sorting){case Dp:r.reverse();break;case Il:r.sort(this.comparer);break;case Gp:r.sort(this.comparer),r.reverse()}var s=this.wrappingColumn;isNaN(s)&&(s=0);var h=this.wrappingWidth;switch(isNaN(h)&&t!==null?(e=t.padding,h=Math.max(t.viewportBounds.width-e.left-e.right,0)):h=Math.max(this.wrappingWidth,0),0>=s&&0>=h&&(s=1),e=this.spacing.width,isFinite(e)||(e=0),n=this.spacing.height,isFinite(n)||(n=0),t!==null&&t.Ca("Layout"),i=[],this.alignment){case Bp:var u=e,p=n,d=E.alloc(),g=Math.max(this.cellSize.width,1);if(!isFinite(g))for(var c=g=0;c<r.length;c++){var y=this.ai(r[c],d);g=Math.max(g,y.width)}if(g=Math.max(g+u,1),c=Math.max(this.cellSize.height,1),!isFinite(c))for(y=c=0;y<r.length;y++){var S=this.ai(r[y],d);c=Math.max(c,S.height)}c=Math.max(c+p,1),y=this.arrangement;for(var v=S=this.arrangementOrigin.x,L=this.arrangementOrigin.y,N=0,M=0,B=0;B<r.length;B++){var F=r[B],j=this.ai(F,d),D=Math.ceil((j.width+u)/g)*g,R=Math.ceil((j.height+p)/c)*c;switch(y){case Ei:var W=Math.abs(v-j.width);break;default:W=v+j.width}switch((0<s&&N>s-1||0<h&&0<N&&W-S>h)&&(i.push(new E(0,L,h+u,M)),N=0,v=S,L+=M,M=0),M=Math.max(M,R),y){case Ei:j=-j.width;break;default:j=0}switch(F.moveTo(v+j,L),y){case Ei:v-=D;break;default:v+=D}N++}i.push(new E(0,L,h+u,M)),E.free(d);break;case Ol:for(p=h,g=s,c=e,y=n,h=E.alloc(),S=Math.max(this.cellSize.width,1),s=L=d=0,u=T.alloc(),v=0;v<r.length;v++)M=r[v],N=this.ai(M,h),M=or(M,M.locationObject,M.locationSpot,u),d=Math.max(d,M.x),L=Math.max(L,N.width-M.x),s=Math.max(s,M.y);switch(v=this.arrangement,v){case Ei:d+=c;break;default:L+=c}S=isFinite(S)?Math.max(S+c,1):Math.max(d+L,1);var tt=M=this.arrangementOrigin.x;for(B=this.arrangementOrigin.y,L=0,p>=d&&(p-=d),d=F=0,D=Math.max(this.cellSize.height,1),j=s=0,R=!0,N=T.alloc(),W=0;W<r.length;W++){var q=r[W],b=this.ai(q,h),V=or(q,q.locationObject,q.locationSpot,u);if(0<L)switch(v){case Ei:tt=(tt-M-(b.width-V.x))/S,tt=O.ca(Math.round(tt),tt)?Math.round(tt):Math.floor(tt),tt=tt*S+M;break;default:tt=(tt-M+V.x)/S,tt=O.ca(Math.round(tt),tt)?Math.round(tt):Math.ceil(tt),tt=tt*S+M}else switch(v){case Ei:F=tt+V.x+b.width;break;default:F=tt-V.x}switch(v){case Ei:var ft=-(tt+V.x)+F;break;default:ft=tt+b.width-V.x-F}if(0<g&&L>g-1||0<p&&0<L&&ft>p){for(i.push(new E(0,R?B-s:B,p+c,j+s+y)),tt=0;tt<L&&W!==L;tt++){ft=r[W-L+tt];var at=or(ft,ft.locationObject,ft.locationSpot,N);ft.moveTo(ft.position.x,ft.position.y+s-at.y)}j+=y,B=R?B+j:B+(j+s),L=j=s=0,tt=M,R=!1}switch(tt===M&&(d=v===Ei?Math.max(d,b.width-V.x):Math.min(d,-V.x)),s=Math.max(s,V.y),j=Math.max(j,b.height-V.y),isFinite(D)&&(j=Math.max(j,Math.max(b.height,D)-V.y)),R?q.moveTo(tt-V.x,B-V.y):q.moveTo(tt-V.x,B),v){case Ei:tt-=V.x+c;break;default:tt+=b.width-V.x+c}L++}if(i.push(new E(0,B,p+c,(R?j:j+s)+y)),r.length!==L)for(p=0;p<L;p++)g=r[r.length-L+p],c=or(g,g.locationObject,g.locationSpot,u),g.moveTo(g.position.x,g.position.y+s-c.y);if(T.free(u),T.free(N),v===Ei)for(r=0;r<i.length;r++)s=i[r],s.width+=d,s.x-=d;else for(r=0;r<i.length;r++)s=i[r],s.x>d&&(s.width+=s.x-d,s.x=d);E.free(h)}for(u=s=h=r=0;u<i.length;u++)p=i[u],r=Math.min(r,p.x),h=Math.min(h,p.y),s=Math.max(s,p.x+p.width);this.arrangement===Ei?this.commitLayers(i,new T(r+e/2-(s+r),h-n/2)):this.commitLayers(i,new T(r-e/2,h-n/2)),t!==null&&t.cb("Layout"),this.isValidLayout=!0}},Be.prototype.commitLayers=function(){};function Mx(t,e){return t=t.text,e=e.text,t<e?-1:t>e?1:0}Z.Object.defineProperties(Be.prototype,{wrappingWidth:{get:function(){return this.Tn},set:function(t){this.Tn!==t&&(0<t||isNaN(t))&&(this.Tn=t,this.isViewportSized=isNaN(t),this.D())}},wrappingColumn:{get:function(){return this.Sn},set:function(t){this.Sn!==t&&(0<t||isNaN(t))&&(this.Sn=t,this.D())}},cellSize:{get:function(){return this.kg},set:function(t){this.kg.C(t)||(this.kg.assign(t),this.D())}},spacing:{get:function(){return this.df},set:function(t){this.df.C(t)||(this.df.assign(t),this.D())}},alignment:{get:function(){return this.Fb},set:function(t){this.Fb===t||t!==Ol&&t!==Bp||(this.Fb=t,this.D())}},arrangement:{get:function(){return this.Lb},set:function(t){this.Lb===t||t!==jp&&t!==Ei||(this.Lb=t,this.D())}},sorting:{get:function(){return this.cd},set:function(t){this.cd===t||t!==Yg&&t!==Dp&&t!==Il&&t!==Gp||(this.cd=t,this.D())}},comparer:{get:function(){return this.Wc},set:function(t){this.Wc!==t&&(this.Wc=t,this.D())}}});var Bp=new J(Be,"Position",0),Ol=new J(Be,"Location",1),jp=new J(Be,"LeftToRight",2),Ei=new J(Be,"RightToLeft",3),Yg=new J(Be,"Forward",4),Dp=new J(Be,"Reverse",5),Il=new J(Be,"Ascending",6),Gp=new J(Be,"Descending",7);Be.className="GridLayout",Be.standardComparer=Mx,Be.smartComparer=function(t,e){if(t!==null){if(e!==null){t=t.text.toLocaleLowerCase().split(/([+-]?[.]?\d+(?:\.\d*)?(?:e[+-]?\d+)?)/),e=e.text.toLocaleLowerCase().split(/([+-]?[.]?\d+(?:\.\d*)?(?:e[+-]?\d+)?)/);for(var n=0;n<t.length;n++)if(e[n]!==""&&e[n]!==void 0){var i=parseFloat(t[n]),r=parseFloat(e[n]);if(isNaN(i))if(isNaN(r)){if(t[n].localeCompare(e[n])!==0)return t[n].localeCompare(e[n])}else return 1;else{if(isNaN(r))return-1;if(i-r!==0)return i-r}}else if(t[n]!=="")return 1;return e[n]!==""&&e[n]!==void 0?-1:0}return 1}return e!==null?-1:0},Be.Position=Bp,Be.Location=Ol,Be.LeftToRight=jp,Be.RightToLeft=Ei,Be.Forward=Yg,Be.Reverse=Dp,Be.Ascending=Il,Be.Descending=Gp;function Ct(){this.mn=new H,this.$m=new H,this.La=new H,this.Pe=new pt,this.Oe=new pt,this.Pi=new pt,this.H=null,this.Oo=!1}a=Ct.prototype,a.clear=function(){this.mn.clear(),this.$m.clear(),this.La.clear(),this.Pe.clear(),this.Oe.clear(),this.Pi.clear()},a.Je=function(t){this.H=t},a.bi=function(t){if(t instanceof _){if(this.mn.add(t),t instanceof ut){var e=t.containingGroup;e===null?this.H.Nh.add(t):e.Mk.add(t),e=t.layout,e!==null&&(e.diagram=this.H)}}else t instanceof U?this.$m.add(t):t instanceof St||this.La.add(t);e=t.data,e===null||t instanceof St||(t instanceof U?this.Oe.add(e,t):this.Pe.add(e,t))},a.kc=function(t){if(t.rj(),t instanceof _){if(this.mn.remove(t),t instanceof ut){var e=t.containingGroup;e===null?this.H.Nh.remove(t):e.Mk.remove(t),e=t.layout,e!==null&&(e.diagram=null)}}else t instanceof U?this.$m.remove(t):t instanceof St||this.La.remove(t);e=t.data,e===null||t instanceof St||(t instanceof U?this.Oe.remove(e):this.Pe.remove(e))},a.Kd=function(){var t=this.H;if(t!==null){for(var e=t.nodeTemplateMap.iterator;e.next();){var n=e.value,i=e.key;(!n.Rc()||n instanceof ut)&&X('Invalid node template in Diagram.nodeTemplateMap: template for "'+i+'" must be a Node or a simple Part, not a Group or Link: '+n)}for(e=t.groupTemplateMap.iterator;e.next();)n=e.value,i=e.key,n instanceof ut||X('Invalid group template in Diagram.groupTemplateMap: template for "'+i+'" must be a Group, not a normal Node or Link: '+n);for(e=t.linkTemplateMap.iterator;e.next();)n=e.value,i=e.key,n instanceof U||X('Invalid link template in Diagram.linkTemplateMap: template for "'+i+'" must be a Link, not a normal Node or simple Part: '+n);for(e=Yt(),n=t.selection.iterator;n.next();)(i=n.value.data)&&e.push(i);for(n=Yt(),t=t.highlighteds.iterator;t.next();)(i=t.value.data)&&n.push(i);for(t=Yt(),i=this.nodes.iterator;i.next();){var r=i.value;r.data!==null&&(t.push(r.data),t.push(r.location))}for(i=this.links.iterator;i.next();)r=i.value,r.data!==null&&(t.push(r.data),t.push(r.location));for(i=this.parts.iterator;i.next();)r=i.value,r.data!==null&&(t.push(r.data),t.push(r.location));for(this.removeAllModeledParts(),this.addAllModeledParts(),i=0;i<e.length;i++)r=this.Dc(e[i]),r!==null&&(r.isSelected=!0);for(i=0;i<n.length;i++)r=this.Dc(n[i]),r!==null&&(r.isHighlighted=!0);for(i=0;i<t.length;i+=2)r=this.Dc(t[i]),r!==null&&(r.location=t[i+1]);At(e),At(n),At(t)}},Ct.prototype.addAllModeledParts=function(){this.addModeledParts(this.diagram.model.nodeDataArray)},Ct.prototype.addModeledParts=function(t,e){var n=this,i=this.diagram.model;t.forEach(function(r){i.kb(r)&&kx(n,r,!1)}),t.forEach(function(r){i.kb(r)&&n.resolveReferencesForData(r)}),e!==!1&&Ou(this.diagram,!1)};function kx(t,e,n){if(e!=null&&!t.diagram.undoManager.isUndoingRedoing&&!t.Pe.contains(e)){n===void 0&&(n=!0);t:{if(e!=null&&!t.H.undoManager.isUndoingRedoing&&!t.Pe.contains(e)){var i=t.lo(e),r=Nx(t,e,i);if(r!==null&&(ui(r),r=r.copy(),r!==null)){var s=t.diagram.skipsModelSourceBindings;t.diagram.skipsModelSourceBindings=!0,r.Gf=i,r.qb=e,t.Oo&&(r.ug="Tool"),t.diagram.add(r),r.qb=null,r.data=e,t.diagram.skipsModelSourceBindings=s,i=r;break t}}i=null}i!==null&&n&&t.resolveReferencesForData(e)}}Ct.prototype.insertLink=function(){return null},Ct.prototype.resolveReferencesForData=function(){},Ct.prototype.lo=function(t){return this.H.model.lo(t)};function Nx(t,e,n){t=t.H;var i=t.model;return i.Gj()&&i.yu(e)?(e=t.groupTemplateMap.I(n),e===null&&(e=t.groupTemplateMap.I(""),e===null&&(Fx||(Fx=!0,Ve('No Group template found for category "'+n+'"'),Ve("  Using default group template")),e=t.Fx))):(e=t.nodeTemplateMap.I(n),e===null&&(e=t.nodeTemplateMap.I(""),e===null&&(Cx||(Cx=!0,Ve('No Node template found for category "'+n+'"'),Ve("  Using default node template")),e=t.Hx))),e}Ct.prototype.getLinkCategoryForData=function(){return""},Ct.prototype.setLinkCategoryForData=function(){},Ct.prototype.setFromNodeForLink=function(){},Ct.prototype.setToNodeForLink=function(){},Ct.prototype.findLinkTemplateForCategory=function(t){var e=this.H,n=e.linkTemplateMap.I(t);return n===null&&(n=e.linkTemplateMap.I(""),n===null&&(Bx||(Bx=!0,Ve('No Link template found for category "'+t+'"'),Ve("  Using default link template")),n=e.Gx)),n},Ct.prototype.removeAllModeledParts=function(){this.Yr(this.diagram.model.nodeDataArray)},Ct.prototype.Yr=function(t){var e=this;t.forEach(function(n){e.Co(n)})},Ct.prototype.Co=function(t){t=this.Dc(t),t!==null&&(yf(this.diagram,t,!1),this.unresolveReferencesForPart(t))},Ct.prototype.unresolveReferencesForPart=function(){},Ct.prototype.removeDataForLink=function(){},Ct.prototype.findPartForKey=function(t){return t==null?null:(t=this.H.model.cc(t),t!==null?this.Pe.I(t):null)},Ct.prototype.Pb=function(t){return t==null||(t=this.H.model.cc(t),t===null)?null:(t=this.Pe.I(t),t instanceof _?t:null)},Ct.prototype.findLinkForKey=function(){return null},a=Ct.prototype,a.Dc=function(t){if(t===null)return null;var e=this.Pe.I(t);return e!==null?e:e=this.Oe.I(t)},a.Wh=function(t){return t===null?null:(t=this.Pe.I(t),t instanceof _?t:null)},a.Cc=function(t){return t===null?null:this.Oe.I(t)},a.Br=function(t){for(var e=0;e<arguments.length;++e);e=new H;for(var n=this.mn.iterator;n.next();){var i=n.value,r=i.data;if(r!==null)for(var s=0;s<arguments.length;s++){var h=arguments[s];if(Bt(h)&&Xg(this,r,h)){e.add(i);break}}}return e.iterator},a.Ar=function(t){for(var e=0;e<arguments.length;++e);e=new H;for(var n=this.$m.iterator;n.next();){var i=n.value,r=i.data;if(r!==null)for(var s=0;s<arguments.length;s++){var h=arguments[s];if(Bt(h)&&Xg(this,r,h)){e.add(i);break}}}return e.iterator};function Xg(t,e,n){for(var i in n){var r=e[i],s=n[i];if(ue(s)){if(!ue(r)||r.length<s.length)return!1;for(var h=0;h<r.length;h++){var u=s[h];if(u!==void 0&&!Tx(t,r[h],u))return!1}}else if(!Tx(t,r,s))return!1}return!0}function Tx(t,e,n){if(typeof n=="function"){if(!n(e))return!1}else if(n instanceof RegExp){if(!e||!n.test(e.toString()))return!1}else if(Bt(e)&&Bt(n)){if(!Xg(t,e,n))return!1}else if(e!==n)return!1;return!0}Ct.prototype.doModelChanged=function(t){if(this.H){var e=this.H;if(t.model===e.model){var n=t.change;if(e.doModelChanged(t),e.$){e.$=!1;try{var i=t.modelChange;if(i!=="")if(n===Ht){if(i==="nodeCategory"){var r=this.Dc(t.object),s=t.newValue;r!==null&&typeof s=="string"&&(r.category=s)}else i==="nodeDataArray"&&(this.Yr(t.oldValue),this.addModeledParts(t.newValue));e.isModified=!0}else if(n===me){var h=t.newValue;i==="nodeDataArray"&&Bt(h)&&kx(this,h),e.isModified=!0}else if(n===Me){var u=t.oldValue;i==="nodeDataArray"&&Bt(u)&&this.Co(u),e.isModified=!0}else n===Oi&&(i==="SourceChanged"?t.object!==null?this.updateDataBindings(t.object,t.propertyName):(this.Lo(),this.updateAllTargetBindings()):i==="ModelDisplaced"&&this.Kd());else if(n===Ht){var p=t.propertyName,d=t.object;d===e.model?(p==="nodeKeyProperty"||p==="nodeCategoryProperty")&&(e.undoManager.isUndoingRedoing||this.Kd()):this.updateDataBindings(d,p),e.isModified=!0}else if(n===me||n===Me){var g=t.change===me,c=g?t.newParam:t.oldParam,y=g?t.newValue:t.oldValue,S=this.Pi.I(t.object);if(Array.isArray(S))for(t=0;t<S.length;t++){var v=S[t];if(g)tp(v,y,c,!0);else if(!(0>c)){var L=c+ml(v);v.kc(L,!0),eg(v,L,c)}}e.isModified=!0}}finally{e.$=!0}}}}},Ct.prototype.updateAllTargetBindings=function(t){t===void 0&&(t="");for(var e=this.parts.iterator;e.next();)e.value.Ja(t);for(e=this.nodes.iterator;e.next();)e.value.Ja(t);for(e=this.links.iterator;e.next();)e.value.Ja(t)},Ct.prototype.Lo=function(){for(var t=this.H.model,e=new H,n=t.nodeDataArray,i=0;i<n.length;i++)e.add(n[i]);var r=[];for(this.nodes.each(function(h){h.data===null||e.contains(h.data)||r.push(h.data)}),this.parts.each(function(h){h.data===null||e.contains(h.data)||r.push(h.data)}),r.forEach(function(h){Rx(t,h,!1)}),i=0;i<n.length;i++){var s=n[i];this.Dc(s)===null&&Ex(t,s,!1)}for(this.refreshDataBoundLinks(),n=this.parts.iterator;n.next();)n.value.updateRelationshipsFromData();for(n=this.nodes.iterator;n.next();)n.value.updateRelationshipsFromData();for(n=this.links.iterator;n.next();)n.value.updateRelationshipsFromData()},Ct.prototype.refreshDataBoundLinks=function(){},Ct.prototype.updateRelationshipsFromData=function(){},Ct.prototype.updateDataBindings=function(t,e){if(typeof e=="string"){var n=this.Dc(t);if(n!==null)n.Ja(e);else{n=null;for(var i=this.Pi.iterator;i.next();){for(var r=i.value,s=0;s<r.length;s++){var h=r[s].Kw(t);h!==null&&(n===null&&(n=Yt()),n.push(h))}if(n!==null)break}if(n!==null){for(i=0;i<n.length;i++)n[i].Ja(e);At(n)}}t===this.diagram.model.modelData&&this.updateAllTargetBindings(e)}};function Ug(t,e){var n=e.sh;if(ue(n)){var i=t.Pi.I(n);if(i===null)i=[],i.push(e),t.Pi.add(n,i);else{for(t=0;t<i.length;t++)if(i[t]===e)return;i.push(e)}}}function Kg(t,e,n){cs(e,function(h){h=h.R.s;for(var u=h.length,p=0;p<u;p++)Mf(n,h[p])});var i=e.sh;if(ue(i)){var r=t.Pi.I(i);if(r!==null){for(var s=0;s<r.length;s++)if(r[s]===e){r.splice(s,1),r.length===0&&t.Pi.remove(i);break}}}}Ct.prototype.wj=function(t,e,n){n===void 0&&(n=!1);var i=new pt;if(ue(t))for(var r=0;r<t.length;r++)Op(this,t[r],e,i,n);else for(t=t.iterator;t.next();)Op(this,t.value,e,i,n);if(e!==null){n=e.model,t=e.toolManager.findTool("Dragging"),t=t!==null?t.dragOptions.dragsLink:e.um.dragsLink,r=new H;for(var s=new pt,h=i.iterator;h.next();){var u=h.value;if(u instanceof U)t||u.fromNode!==null&&u.toNode!==null||r.add(u);else if(u instanceof _&&u.data!==null&&n.sl()){var p=u;u=h.key;var d=u.cg();d!==null&&(d=i.I(d),d!==null?(n.fe(p.data,n.ua(d.data)),p=e.Cc(p.data),u=u.Vg(),u!==null&&p!==null&&s.add(u,p)):n.fe(p.data,void 0))}}if(0<r.count&&e.Zr(r,!1),0<s.count)for(n=s.iterator;n.next();)i.add(n.key,n.value)}if(e!==null&&this.H!==null&&(e=e.model,n=e.afterCopyFunction,n!==null)){var g=new pt;i.each(function(c){c.key.data!==null&&g.add(c.key.data,c.value.data)}),n(g,e,this.H.model)}for(e=i.iterator;e.next();)e.value.Ja();return i};function Op(t,e,n,i,r){if(e===null||r&&!e.canCopy())return null;if(i.contains(e))return i.I(e);var s=t.copyPartData(e,n);if(!(s instanceof ot))return null;if(s.isSelected=!1,s.isHighlighted=!1,i.add(e,s),e instanceof _){for(var h=e.linksConnected;h.next();){var u=h.value;if(u.fromNode===e){var p=i.I(u);p!==null&&(p.fromNode=s)}u.toNode===e&&(u=i.I(u),u!==null&&(u.toNode=s))}if(e instanceof ut&&s instanceof ut)for(e=e.memberParts;e.next();)h=Op(t,e.value,n,i,r),h instanceof U||h===null||(h.containingGroup=s)}else if(e instanceof U&&s instanceof U)for(h=e.fromNode,h!==null&&(h=i.I(h),h!==null&&(s.fromNode=h)),h=e.toNode,h!==null&&(h=i.I(h),h!==null&&(s.toNode=h)),e=e.labelNodes;e.next();)h=Op(t,e.value,n,i,r),h!==null&&h instanceof _&&(h.labeledLink=s);return s}Ct.prototype.copyPartData=function(t,e){var n=null,i=t.data;if(i!==null&&e!==null){var r=e.model;t instanceof U||(i=r.copyNodeData(i),Bt(i)&&(r.hf(i),n=e.Dc(i)))}else ui(t),n=t.copy(),n!==null&&(r=this.H,e!==null?e.add(n):i!==null&&r!==null&&r.commandHandler!==null&&r.commandHandler.copiesClipboardData&&(e=r.model,r=null,n instanceof U||(r=e.copyNodeData(i)),Bt(r)&&(n.data=r)));return n},Z.Object.defineProperties(Ct.prototype,{nodes:{get:function(){return this.mn}},links:{get:function(){return this.$m}},parts:{get:function(){return this.La}},diagram:{get:function(){return this.H}},addsToTemporaryLayer:{get:function(){return this.Oo},set:function(t){this.Oo=t}}}),Ct.prototype.updateAllRelationshipsFromData=Ct.prototype.Lo,Ct.prototype.findLinksByExample=Ct.prototype.Ar,Ct.prototype.findNodesByExample=Ct.prototype.Br,Ct.prototype.findLinkForData=Ct.prototype.Cc,Ct.prototype.findNodeForData=Ct.prototype.Wh,Ct.prototype.findPartForData=Ct.prototype.Dc,Ct.prototype.findNodeForKey=Ct.prototype.Pb,Ct.prototype.removeModeledPart=Ct.prototype.Co,Ct.prototype.removeModeledParts=Ct.prototype.Yr,Ct.prototype.rebuildParts=Ct.prototype.Kd;var Cx=!1,Fx=!1,Bx=!1;Ct.className="PartManager";function ke(t){Ct.apply(this,arguments)}z(ke,Ct),ke.prototype.addAllModeledParts=function(){var t=this.diagram.model;this.addModeledParts(t.nodeDataArray),jx(this,t.linkDataArray)},ke.prototype.addModeledParts=function(t){for(Ct.prototype.addModeledParts.call(this,t,!1),t=this.links.iterator;t.next();)rh(t.value);Ou(this.diagram,!1)};function jx(t,e){e.forEach(function(n){Dx(t,n)}),Ou(t.diagram,!1)}function Dx(t,e){if(e!=null&&!t.diagram.undoManager.isUndoingRedoing&&!t.Oe.contains(e)){var n=t.getLinkCategoryForData(e),i=t.findLinkTemplateForCategory(n);if(i!==null){ui(i);var r=i.copy();if(r!==null){i=t.diagram.skipsModelSourceBindings,t.diagram.skipsModelSourceBindings=!0,r.Gf=n,r.qb=e,n=t.diagram.model;var s=Ep(n,e,!0);s!==""&&(r.fromPortId=s),s=Xn(n,e,!0),s!==void 0&&(s=t.Pb(s),s instanceof _&&(r.fromNode=s)),s=Ep(n,e,!1),s!==""&&(r.toPortId=s),s=Xn(n,e,!1),s!==void 0&&(s=t.Pb(s),s instanceof _&&(r.toNode=s)),n=n.rf(e),Array.isArray(n)&&n.forEach(function(h){h=t.Pb(h),h!==null&&(h.labeledLink=r)}),t.Oo&&(r.ug="Tool"),t.diagram.add(r),r.qb=null,r.data=e,t.diagram.skipsModelSourceBindings=i}}}}ke.prototype.removeAllModeledParts=function(){var t=this.diagram.model;Gx(this,t.linkDataArray),this.Yr(t.nodeDataArray)};function Gx(t,e){e.forEach(function(n){t.Co(n)})}ke.prototype.getLinkCategoryForData=function(t){return this.diagram.model.Er(t)},ke.prototype.setLinkCategoryForData=function(t,e){return this.diagram.model.Fo(t,e)},ke.prototype.setFromNodeForLink=function(t,e){var n=this.diagram.model;n.Tu(t.data,n.ua(e!==null?e.data:null))},ke.prototype.setToNodeForLink=function(t,e){var n=this.diagram.model;n.Yu(t.data,n.ua(e!==null?e.data:null))},ke.prototype.removeDataForLink=function(t){this.diagram.model.Al(t.data)},ke.prototype.findPartForKey=function(t){var e=Ct.prototype.findPartForKey.call(this,t);return e===null&&(t=this.diagram.model.Ug(t),t!==null)?this.Oe.I(t):e},ke.prototype.findLinkForKey=function(t){return t==null?null:(t=this.diagram.model.Ug(t),t!==null?this.Oe.I(t):null)},ke.prototype.doModelChanged=function(t){var e=this;if(Ct.prototype.doModelChanged.call(this,t),this.diagram){var n=this.diagram;if(t.model===n.model){var i=t.change;if(n.$){n.$=!1;try{var r=t.modelChange;if(r!==""){if(i===Ht){if(r==="linkFromKey"){var s=this.Cc(t.object);if(s!==null){var h=this.Pb(t.newValue);s.fromNode=h}}else if(r==="linkToKey"){var u=this.Cc(t.object);if(u!==null){var p=this.Pb(t.newValue);u.toNode=p}}else if(r==="linkFromPortId"){var d=this.Cc(t.object);if(d!==null){var g=t.newValue;typeof g=="string"&&(d.fromPortId=g)}}else if(r==="linkToPortId"){var c=this.Cc(t.object);if(c!==null){var y=t.newValue;typeof y=="string"&&(c.toPortId=y)}}else if(r==="nodeGroupKey"){var S=this.Dc(t.object);if(S!==null){var v=t.newValue;if(v!==void 0){var L=this.Pb(v);L instanceof ut?S.containingGroup=L:S.containingGroup=null}else S.containingGroup=null}}else if(r==="linkLabelKeys"){var N=this.Cc(t.object);if(N!==null){var M=t.oldValue,B=t.newValue;Array.isArray(M)&&M.forEach(function(V){0<=B.indexOf(V)||(V=e.Pb(V),V!==null&&(V.labeledLink=null))}),Array.isArray(B)&&B.forEach(function(V){V=e.Pb(V),V!==null&&(V.labeledLink=N)})}}else if(r==="linkCategory"){var F=this.Cc(t.object),j=t.newValue;F!==null&&typeof j=="string"&&(F.category=j)}else r==="linkDataArray"&&(Gx(this,t.oldValue),jx(this,t.newValue));n.isModified=!0}else if(i===me){var D=t.newValue;if(r==="linkDataArray"&&typeof D=="object"&&D!==null)Dx(this,D);else if(r==="linkLabelKeys"&&Rr(D)){var R=this.Cc(t.object),W=this.Pb(D);R!==null&&W!==null&&(W.labeledLink=R)}n.isModified=!0}else if(i===Me){var tt=t.oldValue;if(r==="linkDataArray"&&typeof tt=="object"&&tt!==null)this.Co(tt);else if(r==="linkLabelKeys"&&Rr(tt)){var q=this.Pb(tt);q!==null&&(q.labeledLink=null)}n.isModified=!0}}else if(i===Ht){var b=t.propertyName;t.object!==n.model||b!=="linkFromKeyProperty"&&b!=="linkToKeyProperty"&&b!=="linkFromPortIdProperty"&&b!=="linkToPortIdProperty"&&b!=="linkLabelKeysProperty"&&b!=="nodeIsGroupProperty"&&b!=="nodeGroupKeyProperty"&&b!=="linkCategoryProperty"||n.undoManager.isUndoingRedoing||this.Kd(),n.isModified=!0}}finally{n.$=!0}}}}},ke.prototype.refreshDataBoundLinks=function(){var t=this,e=this.diagram.model,n=new H,i=e.linkDataArray;i.forEach(function(s){n.add(s)});var r=[];this.links.each(function(s){s.data===null||n.contains(s.data)||r.push(s.data)}),r.forEach(function(s){Hx(e,s,!1)}),i.forEach(function(s){t.Cc(s)===null&&Kx(e,s,!1)})},ke.prototype.updateRelationshipsFromData=function(t){var e=t.data;if(e!==null){var n=t.diagram;if(n!==null){var i=n.model;if(t instanceof U){var r=Xn(i,e,!0);if(r=n.Pb(r),t.fromNode=r,r=Xn(i,e,!1),r=n.Pb(r),t.toNode=r,e=i.rf(e),0<e.length||0<t.labelNodes.count){if(e.length===1&&t.labelNodes.count===1){r=e[0];var s=t.labelNodes.first();if(i.ua(s.data)===r)return}r=new H().addAll(e);var h=new H;t.labelNodes.each(function(u){u.data!==null&&(u=i.ua(u.data),u!==void 0&&h.add(u))}),e=h.copy(),e.Bo(r),r=r.copy(),r.Bo(h),(0<e.count||0<r.count)&&(e.each(function(u){u=n.Pb(u),u!==null&&u.labeledLink===t&&(u.labeledLink=null)}),r.each(function(u){u=n.Pb(u),u!==null&&u.labeledLink!==t&&(u.labeledLink=t)}))}}else!(t instanceof St)&&(e=i.Wg(e),e=n.findPartForKey(e),e===null||e instanceof ut)&&(t.containingGroup=e)}}},ke.prototype.resolveReferencesForData=function(t){var e=this.diagram.model,n=e.ua(t);if(n!==void 0){var i=Al(e,n),r=this.Dc(t);if(i!==null&&r!==null){i=i.iterator;for(var s={};i.next();){var h=i.value;e.kb(h)?r instanceof ut&&e.Wg(h)===n&&(h=this.Dc(h),h!==null&&(h.containingGroup=r)):(s.link=this.Cc(h),s.link!==null&&r instanceof _&&(Xn(e,h,!0)===n&&(s.link.fromNode=r),Xn(e,h,!1)===n&&(s.link.toNode=r),h=e.rf(h),Array.isArray(h)&&h.some(function(u){return function(p){return p===n?(r.labeledLink=u.link,!0):!1}}(s)))),s={link:s.link}}Vi(e,n)}t=e.Wg(t),t!==void 0&&(t=this.Pb(t),t instanceof ut&&(r.containingGroup=t))}},ke.prototype.unresolveReferencesForPart=function(t){var e=this.diagram.model;if(t instanceof _){var n=e.ua(t.data);if(n!==void 0){for(var i=t.linksConnected;i.next();)Ri(e,n,i.value.data);if(t.isLinkLabel&&(i=t.labeledLink,i!==null&&Ri(e,n,i.data)),t instanceof ut)for(t=t.memberParts;t.next();)i=t.value.data,e.kb(i)&&Ri(e,n,i)}}},ke.prototype.copyPartData=function(t,e){var n=Ct.prototype.copyPartData.call(this,t,e);if(t instanceof U)if(t=t.data,t!==null&&e!==null){var i=e.model;t=i.co(t),typeof t=="object"&&t!==null&&(i.Rh(t),n=e.Cc(t))}else n!==null&&(e=this.diagram,t!==null&&e!==null&&e.commandHandler!==null&&e.commandHandler.copiesClipboardData&&(e=e.model.co(t),typeof e=="object"&&e!==null&&(n.data=e)));return n},ke.prototype.insertLink=function(t,e,n,i){var r=this.diagram,s=r.model,h=r.toolManager.findTool("Linking"),u="";if(t!==null&&(e===null&&(e=t),u=e.portId,u===null&&(u="")),e="",n!==null&&(i===null&&(i=n),e=i.portId,e===null&&(e="")),i=h.archetypeLinkData,i instanceof U){if(ui(i),s=i.copy(),s!==null)return s.fromNode=t,s.fromPortId=u,s.toNode=n,s.toPortId=e,r.add(s),t=h.archetypeLabelNodeData,t instanceof _&&(ui(t),t=t.copy(),t!==null&&(t.labeledLink=s,r.add(t))),s}else if(i!==null&&(i=s.co(i),typeof i=="object"&&i!==null))return t!==null&&ph(s,i,s.ua(t.data),!0),dh(s,i,u,!0),n!==null&&ph(s,i,s.ua(n.data),!1),dh(s,i,e,!1),s.Rh(i),t=h.archetypeLabelNodeData,t===null||t instanceof _||(t=s.copyNodeData(t),typeof t=="object"&&t!==null&&(s.hf(t),t=s.ua(t),t!==void 0&&s.Yt(i,t))),r.Cc(i);return null},ke.prototype.findLinkForKey=ke.prototype.findLinkForKey,ke.prototype.findPartForKey=ke.prototype.findPartForKey,ke.prototype.removeAllModeledParts=ke.prototype.removeAllModeledParts,ke.prototype.addModeledParts=ke.prototype.addModeledParts,ke.prototype.addAllModeledParts=ke.prototype.addAllModeledParts,ke.className="GraphLinksPartManager";function ei(){Ct.apply(this,arguments),this.Dg=null}z(ei,Ct);function Ip(t,e,n){if(e!==null&&n!==null&&n.Vg()===null){var i=t.diagram.toolManager.findTool("Linking"),r=e,s=n;if(t.diagram.isTreePathToChildren||(r=n,s=e),(i===null||!Hh(i,r,s,null,!0))&&(e=t.getLinkCategoryForData(n.data),i=t.findLinkTemplateForCategory(e),i!==null&&(ui(i),i=i.copy(),i!==null))){var h=t.diagram.skipsModelSourceBindings;t.diagram.skipsModelSourceBindings=!0,i.Gf=e,i.qb=n.data,i.fromNode=r,i.toNode=s,t.diagram.add(i),i.qb=null,i.data=n.data,t.diagram.skipsModelSourceBindings=h}}}ei.prototype.getLinkCategoryForData=function(t){return this.diagram.model.Hr(t)},ei.prototype.setLinkCategoryForData=function(t,e){this.diagram.model.ds(t,e)},ei.prototype.setFromNodeForLink=function(t,e,n){var i=this.diagram.model;if(n===void 0&&(n=null),e=e!==null?e.data:null,this.diagram.isTreePathToChildren)i.fe(t.data,i.ua(e));else{var r=this.Dg;this.Dg=t,n!==null&&i.fe(n.data,void 0),i.fe(e,i.ua(t.toNode!==null?t.toNode.data:null)),this.Dg=r}},ei.prototype.setToNodeForLink=function(t,e,n){var i=this.diagram.model;if(n===void 0&&(n=null),e=e!==null?e.data:null,this.diagram.isTreePathToChildren){var r=this.Dg;this.Dg=t,n!==null&&i.fe(n.data,void 0),i.fe(e,i.ua(t.fromNode!==null?t.fromNode.data:null)),this.Dg=r}else i.fe(t.data,i.ua(e))},ei.prototype.removeDataForLink=function(t){this.diagram.model.fe(t.data,void 0)},ei.prototype.findLinkForKey=function(t){return t==null?null:(t=this.diagram.model.cc(t),t!==null?this.Oe.I(t):null)},ei.prototype.doModelChanged=function(t){if(Ct.prototype.doModelChanged.call(this,t),this.diagram){var e=this.diagram;if(t.model===e.model){var n=t.change;if(e.$){e.$=!1;try{var i=t.modelChange;if(i!==""){if(n===Ht){if(i==="nodeParentKey"){var r=t.object,s=this.Pb(t.newValue),h=this.Wh(r);if(this.Dg!==null)s!==null&&(this.Dg.data=r,this.Dg.category=this.getLinkCategoryForData(r));else if(h!==null){var u=h.Vg();u!==null?s===null?e.remove(u):e.isTreePathToChildren?u.fromNode=s:u.toNode=s:Ip(this,s,h)}}else if(i==="parentLinkCategory"){var p=this.Wh(t.object),d=t.newValue;if(p!==null&&typeof d=="string"){var g=p.Vg();g!==null&&(g.category=d)}}e.isModified=!0}}else if(n===Ht){var c=t.propertyName;t.object===e.model&&c==="nodeParentKeyProperty"&&(e.undoManager.isUndoingRedoing||this.Kd()),e.isModified=!0}}finally{e.$=!0}}}}},ei.prototype.updateRelationshipsFromData=function(t){var e=t.data;if(e!==null){var n=t.diagram;if(n!==null){var i=n.model;t instanceof _&&(e=i.Xg(e),e=n.Pb(e),i=t.cg(),e!==i&&(i=t.Vg(),e!==null?i!==null?n.isTreePathToChildren?i.fromNode=e:i.toNode=e:Ip(this,e,t):i!==null&&yf(n,i,!1)))}}},ei.prototype.updateDataBindings=function(t,e){Ct.prototype.updateDataBindings.call(this,t,e),typeof e=="string"&&this.Dc(t)!==null&&(t=this.Cc(t),t!==null&&t.Ja(e))},ei.prototype.resolveReferencesForData=function(t){var e=this.diagram.model,n=e.ua(t);if(n!==void 0){var i=Al(e,n),r=this.Dc(t);if(i!==null&&r!==null){for(i=i.iterator;i.next();){var s=i.value;e.kb(s)&&r instanceof _&&e.Xg(s)===n&&Ip(this,r,this.Wh(s))}Vi(e,n)}t=e.Xg(t),t!==void 0&&r instanceof _&&(t=this.Pb(t),Ip(this,t,r))}},ei.prototype.unresolveReferencesForPart=function(t){var e=this.diagram.model;if(t instanceof _){var n=e.ua(t.data),i=this.Cc(t.data);if(i!==null){i.isSelected=!1,i.isHighlighted=!1;var r=i.layer;if(r!==null){var s=r.kc(-1,i,!1);0<=s&&this.diagram.bb(Me,"parts",r,i,null,s,null),s=i.layerChanged,s!==null&&s(i,r,null)}}for(i=this.diagram.isTreePathToChildren,t=t.linksConnected;t.next();)r=t.value,r=(i?r.toNode:r.fromNode).data,e.kb(r)&&Ri(e,n,r)}},ei.prototype.insertLink=function(t,e,n){e=this.diagram.model;var i=t,r=n;return this.diagram.isTreePathToChildren||(i=n,r=t),i!==null&&r!==null?(e.fe(r.data,e.ua(i.data)),r.Vg()):null},ei.prototype.findLinkForKey=ei.prototype.findLinkForKey,ei.className="TreePartManager";function et(t,e){this.Qk=new H,this.Ok=new H,this.qv=`,
  "insertedNodeKeys": `,this.Cx=`,
  "modifiedNodeData": `,this.sv=`,
  "removedNodeKeys": `,this.fh=null,ce(this),this.qm=this.va="",this.sg=!1,this.j={},this.Kc=[],this.jb=new pt,this.Fh="key",this.fk=this.Ik=null,this.hm=this.im=!1,this.km=!0,this.Wl=null,this.$i="category",this.If=new pt,this.et=new Q,this.Gg=!1,this.m=null,this.undoManager=new qt,t!==void 0&&(ue(t)?this.nodeDataArray=t:Object.assign(this,t)),e&&Object.assign(this,e)}et.prototype.cloneProtected=function(t){t.va=this.va,t.qm=this.qm,t.sg=this.sg,t.Fh=this.Fh,t.Ik=this.Ik,t.fk=this.fk,t.im=this.im,t.hm=this.hm,t.km=this.km,t.Wl=this.Wl,t.$i=this.$i},et.prototype.copy=function(){var t=new this.constructor;return this.cloneProtected(t),t},et.prototype.clear=function(){this.Kc=[],this.jb.clear(),this.If.clear(),this.undoManager.clear()},et.prototype.toString=function(t){if(t===void 0&&(t=0),1<t)return this.Ho();var e=(this.name!==""?this.name:"")+" Model";if(0<t){e+=`
 node data:`,t=this.nodeDataArray;for(var n=t.length,i=0;i<n;i++){var r=t[i];e+=" "+this.ua(r)+":"+Kn(r)}}return e},et.prototype.Pz=function(t){t.change!==Oi&&X("Model.toIncrementalData argument is not a Transaction ChangedEvent:"+t.toString());var e=t.object;return t.isTransactionFinished&&e instanceof Ge?(Ix(this,e),t=this.kv(e,t.propertyName==="FinishedUndo"),this.fh=null,t):null},et.prototype.kv=function(t,e){var n=this,i=!1,r=new H,s=new H,h=new H,u=this.fh;t.changes.each(function(c){c.model===n&&(c.modelChange==="nodeDataArray"?c.change===me?r.add(c.newValue):c.change===Me&&h.add(c.oldValue):n.kb(c.object)?s.add(c.object):c.change!==Ht||n.modelData!==c.object&&c.propertyName!=="modelData"?c.object!==null&&(u&&u.contains(c.object)?u.get(c.object).each(function(y){n.kb(y)&&s.add(y)}):c.object instanceof et||n.di()&&n.Bc(c.object)||Ax(n,c.object).each(function(y){s.add(y)})):i=!0)});var p=this.Ok;p.clear(),r.each(function(c){p.add(n.ua(c)),e||s.add(c)});var d=this.Qk;d.clear(),h.each(function(c){d.add(n.ua(c)),e&&s.add(c)}),t=n.cloneDeep(s.Da());var g=null;return i&&(g===null&&(g={}),g.modelData=this.cloneDeep(this.modelData)),0<p.count&&(g===null&&(g={}),e?g.removedNodeKeys=p.Da():g.insertedNodeKeys=p.Da()),0<t.length&&(g===null&&(g={}),g.modifiedNodeData=t),0<d.count&&(g===null&&(g={}),e?g.insertedNodeKeys=d.Da():g.removedNodeKeys=d.Da()),d.clear(),p.clear(),g},et.prototype.cloneDeep=function(t){return uh(this,t,!0)};function uh(t,e,n,i,r,s){function h(c,y){u?(c.__gohashid===void 0&&s.push(c),i.set(c,y)):(c=Lo++,i.set(c,y),r.set(c,e))}if(!Bt(e))return e;s||(s=[]);var u=Object.isExtensible(e);if(i||(i=new pt),u){var p=i.get(e);if(p)return p}else for(r||(r=new pt),p=r.iterator;p.next();){var d=p.key;if(p.value===e&&(d=i.get(d)))return d}if(Array.isArray(e)){p=[],h(e,p);for(var g=0;g<e.length;g++)p.push(uh(t,e[g],!1,i,r,s))}else if(e instanceof T||e instanceof ht||e instanceof E||e instanceof Ft||e instanceof rt)p=e.copy(),h(e,p);else{if(e instanceof kt||e instanceof K||e instanceof J)return e;if(e instanceof Q)p=new Q().addAll(uh(t,e.Da(),!1,i,r,s)),h(e,p);else if(e instanceof H)p=new H().addAll(uh(t,e.Da(),!1,i,r,s)),h(e,p);else if(e instanceof pt)p=new pt().addAll(uh(t,e.Da(),!1,i,r,s)),h(e,p);else if(e instanceof Date)p=new Date(e.getTime()),h(e,p);else if(e instanceof RegExp)p=new RegExp(e),h(e,p),p.lastIndex=e.lastIndex;else if(typeof e.copy=="function")p=e.copy(),h(e,p);else for(g in p={},h(e,p),e)g!=="__gohashid"&&(p[g]=uh(t,e[g],!1,i,r,s))}return n&&s.forEach(function(c){delete c.__gohashid}),p}a=et.prototype,a.quote=function(t){return JSON.stringify(t).replace(/[\u007F-\uFFFF]/g,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).substr(-4)})},a.Rl=function(){var t="";return this.name!==""&&(t+=`,
  "name": `+this.quote(this.name)),this.dataFormat!==""&&(t+=`,
  "dataFormat": `+this.quote(this.dataFormat)),this.isReadOnly&&(t+=`,
  "isReadOnly": `+this.isReadOnly),this.nodeKeyProperty!=="key"&&typeof this.nodeKeyProperty=="string"&&(t+=`,
  "nodeKeyProperty": `+this.quote(this.nodeKeyProperty)),this.copiesArrays&&(t+=`,
  "copiesArrays": true`),this.copiesArrayObjects&&(t+=`,
  "copiesArrayObjects": true`),this.copiesKey||(t+=`,
  "copiesKey": false`),this.nodeCategoryProperty!=="category"&&typeof this.nodeCategoryProperty=="string"&&(t+=`,
  "nodeCategoryProperty": `+this.quote(this.nodeCategoryProperty)),t},a.zo=function(t){t.name&&(this.name=t.name),t.dataFormat&&(this.dataFormat=t.dataFormat),t.isReadOnly&&(this.isReadOnly=!0),t.nodeKeyProperty&&(this.nodeKeyProperty=t.nodeKeyProperty),t.copiesArrays&&(this.copiesArrays=!0),t.copiesArrayObjects&&(this.copiesArrayObjects=!0),t.copiesKey===!1&&(this.copiesKey=!1),t.nodeCategoryProperty&&(this.nodeCategoryProperty=t.nodeCategoryProperty)};function Ox(t,e){e=e.modelData,Bt(e)&&(t.Cl(e),t.modelData=e)}a.lv=function(){var t=this.modelData,e=!1,n;for(n in t)if(!zx(n,t[n])){e=!0;break}return t="",e&&(t=`,
  "modelData": `+Hg(this,this.modelData)),t+`,
  "nodeDataArray": `+Er(this,this.nodeDataArray,!0)},a.Ku=function(t){Ox(this,t),t=t.nodeDataArray,ue(t)&&(this.Cl(t),this.nodeDataArray=t)};function Ix(t,e){function n(r,s){if((s=s.part)&&(s=s.data,r!==s)){var h=i.get(r);h===null?(h=new H,h.add(s),i.add(r,h)):h.add(s)}}var i=t.fh;i===null&&(i=new pt,e.changes.each(function(r){if(r.diagram!==null){var s=r.change;s===Ht?(r=r.object.panel)&&(s=r.data)&&n(s,r):(s===me||s===Me)&&(r=r.object,(s=r.itemArray)&&n(s,r))}}),t.fh=i)}function Ax(t,e){for(var n=new H,i=0;i<t.nodeDataArray.length;i++){var r=t.nodeDataArray[i];Ap(t,e,r,r,n)}return n}function Ap(t,e,n,i,r){if(Array.isArray(n))for(var s=0;s<n.length;s++){var h=n[s];if(h===e)return r.add(i),!0;if(Ap(t,e,h,i,r))return!0}else if(Bt(n)&&Object.getPrototypeOf(n)===Object.prototype)for(s in n){if(h=n[s],h===e)return r.add(i),!0;if(Ap(t,e,h,i,r))return!0}return!1}a.jv=function(t,e){var n=this,i=!1,r=new H,s=new H,h=new H,u=this.fh;t.changes.each(function(g){g.model===n&&(g.modelChange==="nodeDataArray"?g.change===me?r.add(g.newValue):g.change===Me&&h.add(g.oldValue):n.kb(g.object)?s.add(g.object):g.change!==Ht||n.modelData!==g.object&&g.propertyName!=="modelData"?g.object!==null&&(u&&u.contains(g.object)?u.get(g.object).each(function(c){n.kb(c)&&s.add(c)}):g.object instanceof et||n.di()&&n.Bc(g.object)||Ax(n,g.object).each(function(c){s.add(c)})):i=!0)});var p=this.Ok;p.clear(),r.each(function(g){p.add(n.ua(g)),e||s.add(g)});var d=this.Qk;return d.clear(),h.each(function(g){d.add(n.ua(g)),e&&s.add(g)}),t="",i&&(t+=`,
  "modelData": `+Hg(this,this.modelData)),0<p.count&&(t+=(e?this.sv:this.qv)+Er(this,p.Da(),!0)),0<s.count&&(t+=this.Cx+Er(this,s.Da(),!0)),0<d.count&&(t+=(e?this.qv:this.sv)+Er(this,d.Da(),!0)),d.clear(),p.clear(),t},a.yo=function(t){(t.name!==void 0&&t.name!==this.name||t.dataFormat!==void 0&&t.dataFormat!==this.dataFormat||t.isReadOnly!==void 0&&t.isReadOnly!==this.isReadOnly||t.nodeKeyProperty!==void 0&&t.nodeKeyProperty!==this.nodeKeyProperty||t.copiesArrays!==void 0&&t.copiesArrays!==this.copiesArrays||t.copiesArrayObjects!==void 0&&t.copiesArrayObjects!==this.copiesArrayObjects||t.copiesKey!==void 0&&t.copiesKey!==this.copiesKey||t.nodeCategoryProperty!==void 0&&t.nodeCategoryProperty!==this.nodeCategoryProperty)&&X("applyIncrementalJson cannot change Model properties"),Ox(this,t);var e=t.insertedNodeKeys,n=t.modifiedNodeData,i=new pt;if(Array.isArray(n))for(var r=0;r<n.length;r++){var s=n[r],h=this.ua(s);h!=null&&i.set(h,s)}if(Array.isArray(e))for(r=e.length,s=0;s<r;s++){h=e[s];var u=this.cc(h);u===null&&(u=(u=i.get(h))?u:this.copyNodeData({}),this.Jl(u,h),this.hf(u))}if(Array.isArray(n)){for(e=n.length,i=0;i<e;i++)if(r=n[i],s=this.ua(r),s=this.cc(s),s!==null){for(var p in r)p==="__gohashid"||p===this.nodeKeyProperty||this.Fj()&&p===this.nodeIsGroupProperty||this.setDataProperty(s,p,r[p]);this.Kl(r,s)}}if(t=t.removedNodeKeys,Array.isArray(t))for(n=t.length,p=0;p<n;p++)e=this.cc(t[p]),e!==null&&this.Bl(e)},a.wx=function(t,e){t.change!==Oi&&X("Model.toIncrementalJson argument is not a Transaction ChangedEvent:"+t.toString());var n=t.object;return t.isTransactionFinished&&n instanceof Ge?(e===void 0&&(e=zl(this,this)),Ix(this,n),t=this.jv(n,t.propertyName==="FinishedUndo"),this.fh=null,e==="2"?'{ "incremental": 2'+t+"}":'{ "class": '+this.quote(e)+', "incremental": 1'+this.Rl()+t+"}"):'{ "incremental": 0 }'},a.Qz=function(t,e){return this.wx(t,e)},a.Ho=function(t){return t===void 0&&(t=zl(this,this)),'{ "class": '+this.quote(t)+this.Rl()+this.lv()+"}"},a.toJSON=function(t){return this.Ho(t)},a.tw=function(t){var e=null;if(typeof t=="string")try{e=it.JSON.parse(t)}catch{}else typeof t=="object"?e=t:X("Unable to modify a Model from: "+t);var n=e.incremental;typeof n!="number"&&X("Unable to apply non-incremental changes to Model: "+t),n!==0&&(this.Ca("applyIncrementalJson"),this.yo(e),this.cb("applyIncrementalJson"))},a.by=function(t){return this.tw(t)},et.constructGraphLinksModel=function(){return new et},a=et.prototype,a.Cl=function(t){if(ue(t))for(var e=t.length,n=0;n<e;n++){var i=t[n];if(Bt(i)){var r=n;i=this.Cl(i),Array.isArray(t)?t[r]=i:X("Cannot replace an object in an HTMLCollection or NodeList at "+r)}}else if(Bt(t)){for(e in t)if(n=t[e],Bt(n)&&(n=this.Cl(n),t[e]=n,e==="points"&&Array.isArray(n))){for(r=n.length%2===0,i=0;i<n.length;i++)if(typeof n[i]!="number"){r=!1;break}if(r){for(r=new Q,i=0;i<n.length/2;i++)r.add(new T(n[2*i],n[2*i+1]));r.freeze(),t[e]=r}}return Lv(t)}return t},a.Sl=function(t){return t===void 0?"undefined":t===null?"null":t===!0?"true":t===!1?"false":typeof t=="string"?this.quote(t):typeof t=="number"?t===1/0?"9e9999":t===-1/0?"-9e9999":isNaN(t)?'{"class":"NaN"}':t.toString():t instanceof Date?'{"class":"Date", "value":"'+t.toJSON()+'"}':t instanceof Number?this.Sl(t.valueOf()):ue(t)?Er(this,t):Bt(t)?Hg(this,t):typeof t=="function"?"null":t.toString()};function Er(t,e,n){n===void 0&&(n=!1);var i=e.length;if(0>=i)return"[]";var r=new xa;r.add("["),n&&1<i&&r.add(`
`);for(var s=0;s<i;s++){var h=e[s];h!==void 0&&(0<s&&(r.add(","),n&&r.add(`
`)),r.add(t.Sl(h)))}return n&&1<i&&r.add(`
`),r.add("]"),r.toString()}function zx(t,e){return e===void 0||t==="__gohashid"||t[0]==="_"||typeof e=="function"}function ln(t){return isNaN(t)?"NaN":t===1/0?"9e9999":t===-1/0?"-9e9999":t}function Hg(t,e){var n=e;if(n instanceof T)e={class:"go.Point",x:ln(n.x),y:ln(n.y)};else if(n instanceof ht)e={class:"go.Size",width:ln(n.width),height:ln(n.height)};else if(n instanceof E)e={class:"go.Rect",x:ln(n.x),y:ln(n.y),width:ln(n.width),height:ln(n.height)};else if(n instanceof Ft)e={class:"go.Margin",top:ln(n.top),right:ln(n.right),bottom:ln(n.bottom),left:ln(n.left)};else if(n instanceof rt)n.pb()?e={class:"go.Spot",x:ln(n.x),y:ln(n.y),offsetX:ln(n.offsetX),offsetY:ln(n.offsetY)}:e={class:"go.Spot",enum:n.toString()};else if(n instanceof kt){if(e={class:"go.Brush",type:n.type.name},n.type===nr?e.color=n.color:(n.type===Do||n.type===Vn)&&(e.start=n.start,e.end=n.end,n.type===Vn&&(n.startRadius!==0&&(e.startRadius=ln(n.startRadius)),isNaN(n.endRadius)||(e.endRadius=ln(n.endRadius)))),n.colorStops!==null){var i={};for(n=n.colorStops.iterator;n.next();)i[n.key]=n.value;e.colorStops=i}}else n instanceof K?(e={class:"go.Geometry",type:n.type.name},n.startX!==0&&(e.startX=ln(n.startX)),n.startY!==0&&(e.startY=ln(n.startY)),n.endX!==0&&(e.endX=ln(n.endX)),n.endY!==0&&(e.endY=ln(n.endY)),n.spot1.C(Qe)||(e.spot1=n.spot1),n.spot2.C(ro)||(e.spot2=n.spot2),n.type===K.m&&(e.path=K.ga(n))):n instanceof J&&(e={class:"go.EnumValue",classType:zl(t,n.classType),name:n.name});i="{",n=!0;for(var r in e){var s=ee(e,r);if(!zx(r,s))if(n?n=!1:i+=",",i+=t.quote(r)+":",r==="points"&&s instanceof Q){var h="[";for(s=s.iterator;s.next();){var u=s.value;1<h.length&&(h+=","),h+=t.Sl(u.x),h+=",",h+=t.Sl(u.y)}h+="]",i+=h}else i+=t.Sl(s)}return i+"}"}function un(t){return typeof t=="number"?t:t==="NaN"?NaN:t==="9e9999"?1/0:t==="-9e9999"?-1/0:parseFloat(t)}function Lv(t){if(typeof t!="object")return t;var e=t.class||"";if(e==="NaN")return NaN;if(e==="Date")return new Date(t.value);if(e.indexOf("go.")!==0)return t;e=e.substr(3);var n=t;if(e==="Point")n=new T(un(t.x),un(t.y));else if(e==="Size")n=new ht(un(t.width),un(t.height));else if(e==="Rect")n=new E(un(t.x),un(t.y),un(t.width),un(t.height));else if(e==="Margin")n=new Ft(un(t.top),un(t.right),un(t.bottom),un(t.left));else if(e==="Spot")typeof t.enum=="string"?n=Ud(t.enum):n=new rt(un(t.x),un(t.y),un(t.offsetX),un(t.offsetY));else if(e==="Brush"){if(n=new kt,n.type=Mr(kt,t.type),typeof t.color=="string"&&(n.color=t.color),t.start instanceof rt&&(n.start=t.start),t.end instanceof rt&&(n.end=t.end),typeof t.startRadius=="number"&&(n.startRadius=un(t.startRadius)),typeof t.endRadius=="number"&&(n.endRadius=un(t.endRadius)),t=t.colorStops,Bt(t))for(var i in t)n.addColorStop(parseFloat(i),t[i])}else e==="Geometry"?(n=null,typeof t.path=="string"?n=K.parse(t.path):n=new K,n.type=Mr(K,t.type),typeof t.startX=="number"&&(n.startX=un(t.startX)),typeof t.startY=="number"&&(n.startY=un(t.startY)),typeof t.endX=="number"&&(n.endX=un(t.endX)),typeof t.endY=="number"&&(n.endY=un(t.endY)),t.spot1 instanceof rt&&(n.spot1=t.spot1),t.spot2 instanceof rt&&(n.spot2=t.spot2)):e==="EnumValue"&&(i=t.classType,i.indexOf("go.")===0&&(i=i.substr(3)),i=Jg(i),typeof i=="function"&&(n=Mr(i,t.name)));return n}a.Og=function(t){return this.et.add(t),this},a.Rj=function(t){this.et.remove(t)},a.ur=function(t){this.skipsUndoManager||this.undoManager.tu(t);for(var e=this.et,n=e.length,i=0;i<n;i++)e.L(i)(t)},a.bb=function(t,e,n,i,r,s,h){he(this,"",t,e,n,i,r,s,h)},a.g=function(t,e,n,i,r){he(this,"",Ht,t,this,e,n,i,r)},a.Xr=function(t,e,n,i,r,s){he(this,"",Ht,e,t,n,i,r,s)};function he(t,e,n,i,r,s,h,u,p){u===void 0&&(u=null),p===void 0&&(p=null);var d=new _t;d.model=t,d.change=n,d.modelChange=e,d.propertyName=i,d.object=r,d.oldValue=s,d.oldParam=u,d.newValue=h,d.newParam=p,t.ur(d)}et.prototype.changeState=function(t,e){if(t!==null&&t.model===this)if(t.change===Ht){var n=t.object,i=t.propertyName,r=t.I(e);i===this.nodeKeyProperty&&this.kb(n)&&(e=t.I(!e),e!==void 0&&this.jb.remove(e),r!==void 0&&this.jb.add(r,n)),Xt(n,i,r)}else t.change===me?(n=t.newParam,t.modelChange==="nodeDataArray"?(t=t.newValue,Bt(t)&&typeof n=="number"&&(i=this.ua(t),e?(this.Kc[n]===t&&Bi(this.Kc,n),i!==void 0&&this.jb.remove(i)):(this.Kc[n]!==t&&Lr(this.Kc,n,t),i!==void 0&&this.jb.add(i,t)))):t.modelChange===""?((i=t.object)&&!ue(i)&&t.propertyName&&(i=ee(t.object,t.propertyName)),ue(i)&&typeof n=="number"&&(t=t.newValue,e?Bi(i,n):Lr(i,n,t))):X("unknown ChangedEvent.Insert modelChange: "+t.toString())):t.change===Me?(n=t.oldParam,t.modelChange==="nodeDataArray"?(t=t.oldValue,Bt(t)&&typeof n=="number"&&(i=this.ua(t),e?(this.Kc[n]!==t&&Lr(this.Kc,n,t),i!==void 0&&this.jb.add(i,t)):(this.Kc[n]===t&&Bi(this.Kc,n),i!==void 0&&this.jb.remove(i)))):t.modelChange===""?((i=t.object)&&!ue(i)&&t.propertyName&&(i=ee(t.object,t.propertyName)),ue(i)&&typeof n=="number"&&(t=t.oldValue,e?Lr(i,n,t):Bi(i,n))):X("unknown ChangedEvent.Remove modelChange: "+t.toString())):t.change!==Oi&&X("unknown ChangedEvent: "+t.toString())},et.prototype.Ca=function(t){return this.undoManager.Ca(t)},et.prototype.cb=function(t){return this.undoManager.cb(t)},et.prototype.xf=function(){return this.undoManager.xf()},et.prototype.commit=function(t,e){e===void 0&&(e="");var n=this.skipsUndoManager;e===null&&(this.skipsUndoManager=!0,e=""),this.undoManager.Ca(e);var i=!1;try{t(this),i=!0}finally{i?this.undoManager.cb(e):this.undoManager.xf(),this.skipsUndoManager=n}},a=et.prototype,a.Ja=function(t,e){e===void 0&&(e=""),he(this,"SourceChanged",Oi,e,t,null,null)},a.ua=function(t){if(t!==null){var e=this.Fh;if(e!==""&&(e=ee(t,e),e!==void 0)){if(Rr(e))return e;X("Key value for node data "+t+" is not a number or a string: "+e)}}},a.Jl=function(t,e){if(t!==null){var n=this.Fh;if(n!=="")if(this.kb(t)){var i=ee(t,n);i!==e&&this.cc(e)===null&&(Xt(t,n,e),i!==void 0&&this.jb.remove(i),this.jb.add(e,t),he(this,"nodeKey",Ht,n,t,i,e),typeof n=="string"&&this.Ja(t,n),this.Do(i,e))}else Xt(t,n,e)}};function Rr(t){return typeof t=="number"||typeof t=="string"}a.kb=function(t){var e=this.ua(t);return e===void 0?!1:this.jb.I(e)===t},a.cc=function(t){return t===null&&X("Model.findNodeDataForKey:key must not be null"),t!==void 0&&Rr(t)?this.jb.I(t):null},a.Au=function(t){if(t!==null){var e=this.Fh;if(e!==""){var n=this.ua(t);if(n===void 0||this.jb.contains(n)){var i=this.Ik;if(i!==null&&(n=i(this,t),n!=null&&!this.jb.contains(n))){Xt(t,e,n);return}if(typeof n=="string"){for(i=2;this.jb.contains(n+i);)i++;Xt(t,e,n+i)}else if(n===void 0||typeof n=="number"){for(n=-this.jb.count-1;this.jb.contains(n);)n--;Xt(t,e,n)}}}}},a.hf=function(t){t!==null&&(Xo(t),this.kb(t)||Ex(this,t,!0))};function Ex(t,e,n){var i=t.ua(e);(i===void 0||t.jb.I(i)!==e)&&(t.Au(e),i=t.ua(e),i===void 0&&X("Model.makeNodeDataKeyUnique failed on "+e+".  Data not added to Model."),t.jb.add(i,e),i=null,n&&(i=t.Kc.length,Lr(t.Kc,i,e)),he(t,"nodeDataArray",me,"nodeDataArray",t,null,e,null,i),t.El(e),t.Dl(e))}a.Yx=function(t){if(ue(t))for(var e=t.length,n=0;n<e;n++)this.hf(t[n]);else for(t=t.iterator;t.next();)this.hf(t.value)},a.Bl=function(t){t!==null&&Rx(this,t,!0)};function Rx(t,e,n){var i=t.ua(e);if(i!==void 0&&t.jb.remove(i),i=null,n){t:if(n=t.Kc,Array.isArray(n))i=n.indexOf(e);else{i=n.length;for(var r=0;r<i;r++)if(n[r]===e){i=r;break t}i=-1}if(0>i)return;Bi(t.Kc,i)}he(t,"nodeDataArray",Me,"nodeDataArray",t,e,null,i,null),t.Ko(e)}a.Fz=function(t){if(ue(t))for(var e=t.length,n=0;n<e;n++)this.Bl(t[n]);else for(t=t.iterator;t.next();)this.Bl(t.value)},a.rz=function(t){if(t!==this.nodeDataArray&&ue(t)){var e=this.Qk;e.clear(),e.addAll(this.jb.iteratorKeys);var n=this.Ok;n.clear();for(var i=t.length,r=0;r<i;r++){var s=t[r],h=this.ua(s);if(h!==void 0){n.add(h);var u=this.cc(h);u!==s&&(u!==null?(this.Xn(u,s),this.Kl(s,u)):(s=this.cloneDeep(s),this.Jl(s,h),this.hf(s)))}else h=this.cloneDeep(s),this.hf(h),n.add(this.ua(h))}for(t=e.iterator;t.next();)i=t.value,n.contains(i)||(i=this.cc(i))&&this.Bl(i);e.clear(),n.clear()}},a.Do=function(t,e){e!==void 0&&(t=Al(this,t),t instanceof H&&this.If.add(e,t))},a.fv=function(){},a.El=function(){},a.Dl=function(){},a.Ko=function(){};function Ri(t,e,n){if(e!==void 0){var i=t.If.I(e);i===null&&(i=new H,t.If.add(e,i)),i.add(n)}}function Vi(t,e,n){if(e!==void 0){var i=t.If.I(e);i instanceof H&&(n==null?t.If.remove(e):(i.remove(n),i.count===0&&t.If.remove(e)))}}function Al(t,e){return e===void 0?null:(t=t.If.I(e),t instanceof H?t:null)}a.jy=function(t){t===void 0?this.If.clear():this.If.remove(t)},et.prototype.copyNodeData=function(t){if(t===null)return null;var e=this.fk;return t=e!==null?e(t,this):zp(this,t,!0),Bt(t)&&ce(t),t};function zp(t,e,n){if(t.copiesArrays&&Array.isArray(e)){var i=[];for(n=0;n<e.length;n++){var r=zp(t,e[n],t.copiesArrayObjects);i.push(r)}return ce(i),i}if(n&&Bt(e)){n=(n=e.constructor)?new n:{},r=t.copiesKey||typeof t.nodeKeyProperty!="string"?null:t.nodeKeyProperty;for(i in e)if(i==="__gohashid")n.__gohashid=void 0;else if(i===r)n[r]=void 0;else{var s=ee(e,i),h=zl(t,s);h==="GraphObject"||h==="Diagram"||h==="Layer"||h==="RowColumnDefinition"||h==="AnimationManager"||h==="Tool"||h==="CommandHandler"||h==="Layout"||h==="InputEvent"||h==="DiagramEvent"||s instanceof et||s instanceof qt||s instanceof Ge||s instanceof _t||(s=zp(t,s,!1)),Xt(n,i,s)}return ce(n),n}return e instanceof T||e instanceof ht||e instanceof E||e instanceof rt||e instanceof Ft?e.copy():e}et.prototype.setDataProperty=function(t,e,n){if(this.kb(t)){if(e===this.nodeKeyProperty){this.Jl(t,n);return}if(e===this.nodeCategoryProperty){this.Il(t,n);return}}else!Vx&&t instanceof nt&&(Vx=!0,Ve('Model.setDataProperty is modifying a GraphObject, "'+t.toString()+'"'),Ve("  Is that really your intent?"));var i=ee(t,e);i!==n&&(Xt(t,e,n),this.Xr(t,e,i,n))},a=et.prototype,a.set=function(t,e,n){this.setDataProperty(t,e,n)},a.Xn=function(t,e){if(e){var n=this.kb(t),i;for(i in e)i==="__gohashid"||n&&i===this.nodeKeyProperty||this.setDataProperty(t,i,e[i])}},a.Ux=function(t,e){this.Ir(t,-1,e)},a.Ir=function(t,e,n){0>e&&(e=t.length),Lr(t,e,n),he(this,"",me,"",t,null,n,null,e)},a.Nu=function(t,e){e===void 0&&(e=-1),t===this.Kc&&X("Model.removeArrayItem should not be called on the Model.nodeDataArray"),e===-1&&(e=t.length-1);var n=t[e];Bi(t,e),he(this,"",Me,"",t,n,null,e,null)},a.lo=function(t){if(t===null)return"";var e=this.$i;if(e===""||(e=ee(t,e),e===void 0))return"";if(typeof e=="string")return e;X("getCategoryForNodeData found a non-string category for "+t+": "+e)},a.Il=function(t,e){if(t!==null){var n=this.$i;if(n!=="")if(this.kb(t)){var i=ee(t,n);i===void 0&&(i=""),i!==e&&(Xt(t,n,e),he(this,"nodeCategory",Ht,n,t,i,e))}else Xt(t,n,e)}},a.Kl=function(t,e){this.Il(e,this.lo(t))},a.sl=function(){return!1},a.Fj=function(){return!1},a.di=function(){return!1},a.Nr=function(){return!1},a.Gj=function(){return!1};function Wg(){return new et}function zl(t,e){if(typeof e=="function"){if(e.className)return e.className;if(e.name)return e.name}else if(typeof e=="object"&&e!==null&&e.constructor)return zl(t,e.constructor);return typeof e}function Jg(t){return Li[t]?Li[t]:it.go!==void 0&&it.go[t]?it.go[t]:null}function ee(t,e){if(!t||!e)return null;try{if(typeof e=="function")var n=e(t);else typeof t.getAttribute=="function"?(n=t.getAttribute(e),n===null&&(n=void 0)):n=t[e]}catch{}return n}function Xt(t,e,n){if(t&&e)try{typeof e=="function"?e(t,n):typeof t.setAttribute=="function"?t.setAttribute(e,n):t[e]=n}catch{}}Z.Object.defineProperties(et.prototype,{name:{get:function(){return this.va},set:function(t){var e=this.va;e!==t&&(this.va=t,this.g("name",e,t))}},dataFormat:{get:function(){return this.qm},set:function(t){var e=this.qm;e!==t&&(this.qm=t,this.g("dataFormat",e,t))}},isReadOnly:{get:function(){return this.sg},set:function(t){var e=this.sg;e!==t&&(this.sg=t,this.g("isReadOnly",e,t))}},modelData:{get:function(){return this.j},set:function(t){var e=this.j;e!==t&&(this.j=t,this.g("modelData",e,t),this.Ja(t))}},undoManager:{get:function(){return this.m},set:function(t){var e=this.m;e!==t&&(e!==null&&e.mx(this),this.m=t,t!==null&&t.rw(this))}},skipsUndoManager:{get:function(){return this.Gg},set:function(t){this.Gg=t}},nodeKeyProperty:{get:function(){return this.Fh},set:function(t){var e=this.Fh;e!==t&&(t===""&&X("Model.nodeKeyProperty may not be the empty string"),0<this.jb.count&&X("Cannot set Model.nodeKeyProperty when there is existing node data"),this.Fh=t,this.g("nodeKeyProperty",e,t))}},makeUniqueKeyFunction:{get:function(){return this.Ik},set:function(t){var e=this.Ik;e!==t&&(this.Ik=t,this.g("makeUniqueKeyFunction",e,t))}},nodeDataArray:{get:function(){return this.Kc},set:function(t){var e=this.Kc;if(e!==t){this.jb.clear(),this.fv();for(var n=t.length,i=0;i<n;i++){var r=t[i];Bt(r)||X("Model.nodeDataArray must only contain Objects, not: "+r),Xo(r)}for(this.Kc=t,i=new Q,r=0;r<n;r++){var s=t[r],h=this.ua(s);h===void 0||this.jb.I(h)!==null?i.add(s):this.jb.add(h,s)}for(i=i.iterator;i.next();)r=i.value,this.Au(r),s=this.ua(r),s!==void 0&&this.jb.add(s,r);for(he(this,"nodeDataArray",Ht,"nodeDataArray",this,e,t),e=0;e<n;e++)i=t[e],this.El(i),this.Dl(i);Array.isArray(t)||(this.isReadOnly=!0)}}},copyNodeDataFunction:{get:function(){return this.fk},set:function(t){var e=this.fk;e!==t&&(this.fk=t,this.g("copyNodeDataFunction",e,t))}},copiesArrays:{get:function(){return this.im},set:function(t){var e=this.im;e!==t&&(this.im=t,this.g("copiesArrays",e,t))}},copiesArrayObjects:{get:function(){return this.hm},set:function(t){var e=this.hm;e!==t&&(this.hm=t,this.g("copiesArrayObjects",e,t))}},copiesKey:{get:function(){return this.km},set:function(t){var e=this.km;e!==t&&(this.km=t,this.g("copiesKey",e,t))}},afterCopyFunction:{get:function(){return this.Wl},set:function(t){var e=this.Wl;e!==t&&(this.Wl=t,this.g("afterCopyFunction",e,t))}},nodeCategoryProperty:{get:function(){return this.$i},set:function(t){var e=this.$i;e!==t&&(this.$i=t,this.g("nodeCategoryProperty",e,t))}},type:{get:function(){return"Model"}}}),et.prototype.setCategoryForNodeData=et.prototype.Il,et.prototype.getCategoryForNodeData=et.prototype.lo,et.prototype.removeArrayItem=et.prototype.Nu,et.prototype.insertArrayItem=et.prototype.Ir,et.prototype.addArrayItem=et.prototype.Ux,et.prototype.assignAllDataProperties=et.prototype.Xn,et.prototype.set=et.prototype.set,et.prototype.clearUnresolvedReferences=et.prototype.jy,et.prototype.mergeNodeDataArray=et.prototype.rz,et.prototype.removeNodeDataCollection=et.prototype.Fz,et.prototype.removeNodeData=et.prototype.Bl,et.prototype.addNodeDataCollection=et.prototype.Yx,et.prototype.addNodeData=et.prototype.hf,et.prototype.makeNodeDataKeyUnique=et.prototype.Au,et.prototype.findNodeDataForKey=et.prototype.cc,et.prototype.containsNodeData=et.prototype.kb,et.prototype.setKeyForNodeData=et.prototype.Jl,et.prototype.getKeyForNodeData=et.prototype.ua,et.prototype.updateTargetBindings=et.prototype.Ja,et.prototype.commit=et.prototype.commit,et.prototype.rollbackTransaction=et.prototype.xf,et.prototype.commitTransaction=et.prototype.cb,et.prototype.startTransaction=et.prototype.Ca,et.prototype.raiseDataChanged=et.prototype.Xr,et.prototype.raiseChanged=et.prototype.g,et.prototype.raiseChangedEvent=et.prototype.bb,et.prototype.removeChangedListener=et.prototype.Rj,et.prototype.addChangedListener=et.prototype.Og,et.prototype.writeJsonValue=et.prototype.Sl,et.prototype.replaceJsonObjects=et.prototype.Cl,et.prototype.applyIncrementalJSON=et.prototype.by,et.prototype.applyIncrementalJson=et.prototype.tw,et.prototype.toJSON=et.prototype.toJSON,et.prototype.toJson=et.prototype.Ho,et.prototype.toIncrementalJSON=et.prototype.Qz,et.prototype.toIncrementalJson=et.prototype.wx,et.prototype.toIncrementalData=et.prototype.Pz,et.prototype.clear=et.prototype.clear;var Vx=!1,Li={};et.className="Model",et.fromJSON=et.fromJson=function(t,e){e===void 0&&(e=null);var n=null;if(typeof t=="string")try{n=it.JSON.parse(t)}catch{}else typeof t=="object"?n=t:X("Unable to construct a Model from: "+t);if(e===null){t=null;var i=n.class;if(typeof i=="string")try{var r=null;i.indexOf("go.")===0?(i=i.substr(3),r=Jg(i)):(r=Jg(i),r===null&&(r=it[i])),typeof r=="function"&&(t=new r)}catch{}t===null||t instanceof et?e=t:X("Unable to construct a Model of declared class: "+n.class)}return e===null&&(e=et.constructGraphLinksModel()),e.zo(n),e.Ku(n),e},et.safePropertyValue=ee,et.safePropertySet=Xt,Li.Brush=kt,Li.ChangedEvent=_t,Li.Geometry=K,Li.Margin=Ft,Li.Panel=Y,Li.Point=T,Li.Rect=E,Li.Size=ht,Li.Spot=rt,Li.Transaction=Ge,Li.UndoManager=qt;function ie(t,e,n,i){ce(this),this._isFrozen=!1,t===void 0&&(t=""),e===void 0&&(e=t),n===void 0&&(n=null),this.j=-1,this.pd=null,this.cl=t,this.bl=this.Nn=0,this.Tq=null,this.Tm=!1,this.Yk=e,this.gm=n,i===void 0?(this.Lk=Xx,this.ak=null):(this.Lk=El,this.ak=i),this.Ms=new H}ie.prototype.copy=function(){var t=new ie;return t.cl=this.cl,t.Nn=this.Nn,t.bl=this.bl,t.Tq=this.Tq,t.Tm=this.Tm,t.Yk=this.Yk,t.gm=this.gm,t.Lk=this.Lk,t.ak=this.ak,t},a=ie.prototype,a.ob=function(t){t.classType===ie&&(this.mode=t)},a.toString=function(){return"Binding("+this.targetProperty+":"+this.sourceProperty+(this.li!==-1?" "+this.li:"")+" "+this.mode.name+")"},a.freeze=function(){return this._isFrozen=!0,this},a.ja=function(){return this._isFrozen=!1,this},a.bx=function(t){return t===void 0&&(t=null),this.mode=El,this.backConverter=t,this},a.wo=function(t){return t===void 0&&(t=""),this.sourceName=t,this.isToModel=!1,this},a.vz=function(){return this.sourceName=null,this.isToModel=!0,this};function Yx(t,e,n){return t=t.sourceName,t===null||t===""?e:t==="/"?n.part:t==="."?n:t===".."?n.panel:e.eb(t)}a.gv=function(t,e,n){var i=this.Yk;if(n===void 0||i===""||i===n){n=this.cl;var r=this.gm;if(r===null&&n==="")Ve("Binding error: target property is the empty string: "+this.toString());else{var s=e;if(i!==""&&(s=ee(e,i)),s!==void 0)if(r===null)n!==""&&Xt(t,n,s);else try{if(n!==""){var h=r(s,t);Xt(t,n,h)}else r(s,t)}catch{}}}},a.Mo=function(t,e,n,i){if(this.Lk===El){var r=this.cl;if(n===void 0||r===n){n=this.Yk;var s=this.ak,h=t;if(r!==""&&(h=ee(t,r)),h!==void 0&&!this.Ms.contains(t))try{this.Ms.add(t);var u=i!==null?i.diagram:null,p=u!==null?u.model:null;if(s===null){if(n!=="")p!==null?p.setDataProperty(e,n,h):Xt(e,n,h);else if(p!==null&&i!==null&&0<=i.itemIndex&&i.panel!==null&&Array.isArray(i.panel.itemArray)){var d=i.itemIndex,g=i.panel.itemArray;p.Nu(g,d),p.Ir(g,d,h)}}else try{if(n!==""){var c=s(h,e,p);p!==null?p.setDataProperty(e,n,c):Xt(e,n,c)}else{var y=s(h,e,p);if(y!==void 0&&p!==null&&i!==null&&0<=i.itemIndex&&i.panel!==null&&Array.isArray(i.panel.itemArray)){var S=i.itemIndex,v=i.panel.itemArray;p.Nu(v,S),p.Ir(v,S,y)}}}catch{}}finally{this.Ms.remove(t)}}}},Z.Object.defineProperties(ie.prototype,{li:{get:function(){return this.j},set:function(t){this._isFrozen&&yt(this),this.j=t}},targetProperty:{get:function(){return this.cl},set:function(t){this._isFrozen&&yt(this),this.cl=t}},sourceName:{get:function(){return this.Tq},set:function(t){this._isFrozen&&yt(this),this.Tq=t,t!==null&&(this.Tm=!1)}},isToModel:{get:function(){return this.Tm},set:function(t){this._isFrozen&&yt(this),this.Tm=t}},sourceProperty:{get:function(){return this.Yk},set:function(t){this._isFrozen&&yt(this),this.Yk=t}},converter:{get:function(){return this.gm},set:function(t){this._isFrozen&&yt(this),this.gm=t}},backConverter:{get:function(){return this.ak},set:function(t){this._isFrozen&&yt(this),this.ak=t}},mode:{get:function(){return this.Lk},set:function(t){this._isFrozen&&yt(this),this.Lk=t}}}),ie.prototype.updateSource=ie.prototype.Mo,ie.prototype.updateTarget=ie.prototype.gv,ie.prototype.ofModel=ie.prototype.vz,ie.prototype.ofObject=ie.prototype.wo,ie.prototype.makeTwoWay=ie.prototype.bx;var Mv="Binding",Xx=new J(ie,"OneWay",1),El=new J(ie,"TwoWay",2);ie.className="Binding",ie.parseEnum=function(t,e){return function(n){return n=Mr(t,n),n===null?e:n}},ie.toString=Kn,ie.OneWay=Xx,ie.TwoWay=El;function vt(t,e,n){et.call(this),this.pv=`,
  "insertedLinkKeys": `,this.Bx=`,
  "modifiedLinkData": `,this.rv=`,
  "removedLinkKeys": `,this.bd=[],this.Of=new H,this.rb=new pt,this.vh="",this.Ei=this.ek=this.Jk=null,this.We="from",this.Xe="to",this.Ui=this.Ti="",this.Si="category",this.Zd="",this.Pk="isGroup",this.ve="group",this.jm=!1,e!==void 0&&(this.linkDataArray=e),t!==void 0&&(ue(t)?this.nodeDataArray=t:Object.assign(this,t)),n&&Object.assign(this,n)}z(vt,et),vt.constructGraphLinksModel=et.constructGraphLinksModel,vt.prototype.cloneProtected=function(t){et.prototype.cloneProtected.call(this,t),t.vh=this.vh,t.Jk=this.Jk,t.ek=this.ek,t.We=this.We,t.Xe=this.Xe,t.Ti=this.Ti,t.Ui=this.Ui,t.Si=this.Si,t.Zd=this.Zd,t.Pk=this.Pk,t.ve=this.ve,t.jm=this.jm},a=vt.prototype,a.clear=function(){et.prototype.clear.call(this),this.bd=[],this.rb.clear(),this.Of.clear()},a.toString=function(t){if(t===void 0&&(t=0),2<=t)return this.Ho();var e=(this.name!==""?this.name:"")+" GraphLinksModel";if(0<t){e+=`
 node data:`,t=this.nodeDataArray;var n=t.length,i;for(i=0;i<n;i++){var r=t[i];e+=" "+this.ua(r)+":"+Kn(r)}for(e+=`
 link data:`,t=this.linkDataArray,n=t.length,i=0;i<n;i++)r=t[i],e+=" "+Xn(this,r,!0)+"-->"+Xn(this,r,!1)}return e},a.kv=function(t,e){this.linkKeyProperty===""&&X("GraphLinksModel.linkKeyProperty must not be an empty string for .toIncrementalData() to succeed.");var n=et.prototype.kv.call(this,t,e),i=this,r=new H,s=new H,h=new H,u=this.fh;t.changes.each(function(g){g.model===i&&(g.modelChange==="linkDataArray"?g.change===me?r.add(g.newValue):g.change===Me&&h.add(g.oldValue):i.Bc(g.object)?s.add(g.object):g.object!==null&&(g.object!==null&&u&&u.contains(g.object)?u.get(g.object).each(function(c){i.Bc(c)&&s.add(c)}):g.object instanceof et||i.kb(g.object)||Ux(i,g.object).each(function(c){s.add(c)})))});var p=this.Ok;p.clear(),r.each(function(g){p.add(i.uc(g)),e||s.add(g)});var d=this.Qk;return d.clear(),h.each(function(g){d.add(i.uc(g)),e&&s.add(g)}),t=i.cloneDeep(s.Da()),0<p.count&&(n===null&&(n={}),e?n.removedLinkKeys=p.Da():n.insertedLinkKeys=p.Da()),0<t.length&&(n===null&&(n={}),n.modifiedLinkData=t),0<d.count&&(n===null&&(n={}),e?n.insertedLinkKeys=d.Da():n.removedLinkKeys=d.Da()),d.clear(),p.clear(),n},a.Rl=function(){var t=et.prototype.Rl.call(this),e="";return this.linkCategoryProperty!=="category"&&typeof this.linkCategoryProperty=="string"&&(e+=`,
  "linkCategoryProperty": `+this.quote(this.linkCategoryProperty)),this.linkKeyProperty!==""&&typeof this.linkKeyProperty=="string"&&(e+=`,
  "linkKeyProperty": `+this.quote(this.linkKeyProperty)),this.linkFromKeyProperty!=="from"&&typeof this.linkFromKeyProperty=="string"&&(e+=`,
  "linkFromKeyProperty": `+this.quote(this.linkFromKeyProperty)),this.linkToKeyProperty!=="to"&&typeof this.linkToKeyProperty=="string"&&(e+=`,
  "linkToKeyProperty": `+this.quote(this.linkToKeyProperty)),this.linkFromPortIdProperty!==""&&typeof this.linkFromPortIdProperty=="string"&&(e+=`,
  "linkFromPortIdProperty": `+this.quote(this.linkFromPortIdProperty)),this.linkToPortIdProperty!==""&&typeof this.linkToPortIdProperty=="string"&&(e+=`,
  "linkToPortIdProperty": `+this.quote(this.linkToPortIdProperty)),this.linkLabelKeysProperty!==""&&typeof this.linkLabelKeysProperty=="string"&&(e+=`,
  "linkLabelKeysProperty": `+this.quote(this.linkLabelKeysProperty)),this.nodeIsGroupProperty!=="isGroup"&&typeof this.nodeIsGroupProperty=="string"&&(e+=`,
  "nodeIsGroupProperty": `+this.quote(this.nodeIsGroupProperty)),this.nodeGroupKeyProperty!=="group"&&typeof this.nodeGroupKeyProperty=="string"&&(e+=`,
  "nodeGroupKeyProperty": `+this.quote(this.nodeGroupKeyProperty)),t+e},a.zo=function(t){et.prototype.zo.call(this,t),t.linkKeyProperty&&(this.linkKeyProperty=t.linkKeyProperty),t.linkFromKeyProperty&&(this.linkFromKeyProperty=t.linkFromKeyProperty),t.linkToKeyProperty&&(this.linkToKeyProperty=t.linkToKeyProperty),t.linkFromPortIdProperty&&(this.linkFromPortIdProperty=t.linkFromPortIdProperty),t.linkToPortIdProperty&&(this.linkToPortIdProperty=t.linkToPortIdProperty),t.linkCategoryProperty&&(this.linkCategoryProperty=t.linkCategoryProperty),t.linkLabelKeysProperty&&(this.linkLabelKeysProperty=t.linkLabelKeysProperty),t.nodeIsGroupProperty&&(this.nodeIsGroupProperty=t.nodeIsGroupProperty),t.nodeGroupKeyProperty&&(this.nodeGroupKeyProperty=t.nodeGroupKeyProperty)},a.lv=function(){var t=et.prototype.lv.call(this),e=`,
  "linkDataArray": `+Er(this,this.linkDataArray,!0);return t+e},a.Ku=function(t){et.prototype.Ku.call(this,t),t=t.linkDataArray,Array.isArray(t)&&(this.Cl(t),this.linkDataArray=t)};function Ux(t,e){for(var n=new H,i=0;i<t.linkDataArray.length;i++){var r=t.linkDataArray[i];Ap(t,e,r,r,n)}return n}a.jv=function(t,e){this.linkKeyProperty===""&&X("GraphLinksModel.linkKeyProperty must not be an empty string for .toIncrementalJson() to succeed.");var n=et.prototype.jv.call(this,t,e),i=this,r=new H,s=new H,h=new H,u=this.fh;t.changes.each(function(g){g.model===i&&(g.modelChange==="linkDataArray"?g.change===me?r.add(g.newValue):g.change===Me&&h.add(g.oldValue):i.Bc(g.object)?s.add(g.object):g.object!==null&&(g.object!==null&&u&&u.contains(g.object)?u.get(g.object).each(function(c){i.Bc(c)&&s.add(c)}):g.object instanceof et||i.kb(g.object)||Ux(i,g.object).each(function(c){s.add(c)})))});var p=this.Ok;p.clear(),r.each(function(g){p.add(i.uc(g)),e||s.add(g)});var d=this.Qk;return d.clear(),h.each(function(g){d.add(i.uc(g)),e&&s.add(g)}),t=n,0<p.count&&(t+=(e?this.rv:this.pv)+Er(this,p.Da(),!0)),0<s.count&&(t+=this.Bx+Er(this,s.Da(),!0)),0<d.count&&(t+=(e?this.pv:this.rv)+Er(this,d.Da(),!0)),d.clear(),p.clear(),t},a.yo=function(t){(t.linkCategoryProperty!==void 0&&t.linkCategoryProperty!==this.linkCategoryProperty||t.linkKeyProperty!==void 0&&t.linkKeyProperty!==this.linkKeyProperty||t.linkFromKeyProperty!==void 0&&t.linkFromKeyProperty!==this.linkFromKeyProperty||t.linkToKeyProperty!==void 0&&t.linkToKeyProperty!==this.linkToKeyProperty||t.linkFromPortIdProperty!==void 0&&t.linkFromPortIdProperty!==this.linkFromPortIdProperty||t.linkToPortIdProperty!==void 0&&t.linkToPortIdProperty!==this.linkToPortIdProperty||t.linkLabelKeysProperty!==void 0&&t.linkLabelKeysProperty!==this.linkLabelKeysProperty||t.nodeIsGroupProperty!==void 0&&t.nodeIsGroupProperty!==this.nodeIsGroupProperty||t.nodeGroupKeyProperty!==void 0&&t.nodeGroupKeyProperty!==this.nodeGroupKeyProperty)&&X("applyIncrementalJson cannot change Model properties"),et.prototype.yo.call(this,t);var e=t.insertedLinkKeys;if(Array.isArray(e))for(var n=e.length,i=0;i<n;i++){var r=e[i],s=this.Ug(r);s===null&&(s=this.co({}),this.bs(s,r),this.Rh(s))}if(e=t.modifiedLinkData,Array.isArray(e)){for(n=e.length,i=0;i<n;i++)if(r=e[i],s=this.uc(r),s=this.Ug(s),s!==null){for(var h in r)h!=="__gohashid"&&h!==this.linkKeyProperty&&this.setDataProperty(s,h,r[h]);Wx(this,r,s)}}if(t=t.removedLinkKeys,Array.isArray(t))for(h=t.length,e=0;e<h;e++)n=this.Ug(t[e]),n!==null&&this.Al(n)},vt.prototype.changeState=function(t,e){if(t!==null&&t.model===this){if(t.change===Ht){var n=t.object,i=t.propertyName;if(i===this.linkKeyProperty&&this.Bc(n)){var r=t.I(e);e=t.I(!e),e!==void 0&&this.rb.remove(e),r!==void 0&&this.rb.add(r,n),Xt(n,i,r);return}}else if(t.change===me){if(n=t.newParam,t.modelChange==="linkDataArray"){t=t.newValue,Bt(t)&&typeof n=="number"&&(i=this.uc(t),e?(this.Of.remove(t),this.bd[n]===t&&this.bd.splice(n,1),i!==void 0&&this.rb.remove(i)):(this.Of.add(t),this.bd[n]!==t&&this.bd.splice(n,0,t),i!==void 0&&this.rb.add(i,t)));return}if(t.modelChange==="linkLabelKeys"){i=this.rf(t.object),Array.isArray(i)&&typeof n=="number"&&(e?(n=i.indexOf(t.newValue),0<=n&&i.splice(n,1)):0>i.indexOf(t.newValue)&&i.splice(n,0,t.newValue));return}}else if(t.change===Me){if(n=t.oldParam,t.modelChange==="linkDataArray"){t=t.oldValue,Bt(t)&&typeof n=="number"&&(i=this.uc(t),e?(this.Of.add(t),this.bd[n]!==t&&this.bd.splice(n,0,t),i!==void 0&&this.rb.add(i,t)):(this.Of.remove(t),this.bd[n]===t&&this.bd.splice(n,1),i!==void 0&&this.rb.remove(i)));return}if(t.modelChange==="linkLabelKeys"){i=this.rf(t.object),Array.isArray(i)&&typeof n=="number"&&(e?0>i.indexOf(t.newValue)&&i.splice(n,0,t.newValue):(n=i.indexOf(t.newValue),0<=n&&i.splice(n,1)));return}}et.prototype.changeState.call(this,t,e)}},a=vt.prototype,a.ul=function(t){if(t!==void 0){var e=this.Ei;if(e!==null){var n=this.cc(t);n===null&&(n=this.copyNodeData(e),Xt(n,this.nodeKeyProperty,t),this.hf(n))}return t}},a.Qw=function(t){return Xn(this,t,!0)},a.Tu=function(t,e){ph(this,t,e,!0)},a.Tw=function(t){return Xn(this,t,!1)},a.Yu=function(t,e){ph(this,t,e,!1)};function Xn(t,e,n){if(e!==null&&(t=n?t.We:t.Xe,t!==""&&(t=ee(e,t),t!==void 0))){if(Rr(t))return t;X((n?"FromKey":"ToKey")+" value for link data "+e+" is not a number or a string: "+t)}}function ph(t,e,n,i){if(n===null&&(n=void 0),e!==null){var r=i?t.We:t.Xe;if(r!=="")if(n=t.ul(n),t.Bc(e)){var s=ee(e,r);s!==n&&(Vi(t,s,e),Xt(e,r,n),t.cc(n)===null&&Ri(t,n,e),he(t,i?"linkFromKey":"linkToKey",Ht,r,e,s,n),typeof r=="string"&&t.Ja(e,r))}else Xt(e,r,n)}}a.Rw=function(t){return Ep(this,t,!0)},a.Uu=function(t,e){dh(this,t,e,!0)},a.Uw=function(t){return Ep(this,t,!1)},a.Zu=function(t,e){dh(this,t,e,!1)};function Ep(t,e,n){return e===null||(t=n?t.Ti:t.Ui,t==="")?"":(e=ee(e,t),e===void 0?"":e)}function dh(t,e,n,i){if(e!==null){var r=i?t.Ti:t.Ui;if(r!=="")if(t.Bc(e)){var s=ee(e,r);s===void 0&&(s=""),s!==n&&(Xt(e,r,n),he(t,i?"linkFromPortId":"linkToPortId",Ht,r,e,s,n),typeof r=="string"&&t.Ja(e,r))}else Xt(e,r,n)}}a.rf=function(t){if(t===null)return Rp;var e=this.Zd;return e===""?Rp:(t=ee(t,e),t===void 0?Rp:t)},a.cs=function(t,e){if(t!==null){var n=this.Zd;if(n!=="")if(this.Bc(t)){var i=ee(t,n);if(i===void 0&&(i=Rp),i!==e){if(Array.isArray(i))for(var r=i.length,s=0;s<r;s++)Vi(this,i[s],t);for(Xt(t,n,e),r=e.length,s=0;s<r;s++){var h=e[s];this.cc(h)===null&&Ri(this,h,t)}he(this,"linkLabelKeys",Ht,n,t,i,e),typeof n=="string"&&this.Ja(t,n)}}else Xt(t,n,e)}},a.Yt=function(t,e){if(e!=null&&t!==null){var n=this.Zd;if(n!==""){var i=ee(t,n);if(i===void 0)n=[],n.push(e),this.cs(t,n);else if(Array.isArray(i)){var r=i.indexOf(e);0<=r||(r=i.length,i.push(e),this.Bc(t)&&(this.cc(e)===null&&Ri(this,e,t),he(this,"linkLabelKeys",me,n,t,null,e,null,r)))}else X(n+" property is not an Array; cannot addLabelKeyForLinkData: "+t)}}},a.lx=function(t,e){if(e!=null&&t!==null){var n=this.Zd;if(n!==""){var i=ee(t,n);if(Array.isArray(i)){var r=i.indexOf(e);0>r||(i.splice(r,1),this.Bc(t)&&(Vi(this,e,t),he(this,"linkLabelKeys",Me,n,t,e,null,r,null)))}else i!==void 0&&X(n+" property is not an Array; cannot removeLabelKeyforLinkData: "+t)}}},a.uc=function(t){if(t!==null){var e=this.vh;if(e!==""&&(e=ee(t,e),e!==void 0)){if(Rr(e))return e;X("Key value for link data "+t+" is not a number or a string: "+e)}}},a.bs=function(t,e){if(t!==null){var n=this.vh;if(n!=="")if(this.Bc(t)){var i=ee(t,n);i!==e&&this.Ug(e)===null&&(Xt(t,n,e),i!==void 0&&this.rb.remove(i),this.rb.add(e,t),he(this,"linkKey",Ht,n,t,i,e),typeof n=="string"&&this.Ja(t,n))}else Xt(t,n,e)}},a.Ug=function(t){return t===null&&X("GraphLinksModel.findLinkDataForKey:key must not be null"),t!==void 0&&Rr(t)?this.rb.I(t):null},a.Sr=function(t){if(t!==null){var e=this.vh;if(e!==""){var n=this.uc(t);if(n===void 0||this.rb.contains(n)){var i=this.Jk;if(i!==null&&(n=i(this,t),n!=null&&!this.rb.contains(n))){Xt(t,e,n);return}if(typeof n=="string"){for(i=2;this.rb.contains(n+i);)i++;Xt(t,e,n+i)}else if(n===void 0||typeof n=="number"){for(n=-this.rb.count-1;this.rb.contains(n);)n--;Xt(t,e,n)}}}}},a.Bc=function(t){return t===null?!1:this.Of.contains(t)},a.Rh=function(t){t!==null&&(Xo(t),this.Bc(t)||Kx(this,t,!0))};function Kx(t,e,n){if(t.linkKeyProperty!==""){var i=t.uc(e);if(i!==void 0&&t.rb.I(i)===e)return;t.Sr(e),i=t.uc(e),i===void 0&&X("GraphLinksModel.makeLinkDataKeyUnique failed on "+e+". Data not added to model."),t.rb.add(i,e)}t.Of.add(e),i=null,n&&(i=t.bd.length,t.bd.splice(i,0,e)),he(t,"linkDataArray",me,"linkDataArray",t,null,e,null,i),Zg(t,e)}a.Xx=function(t){if(Array.isArray(t))for(var e=t.length,n=0;n<e;n++)this.Rh(t[n]);else for(t=t.iterator;t.next();)this.Rh(t.value)},a.Al=function(t){t!==null&&Hx(this,t,!0)};function Hx(t,e,n){t.Of.remove(e);var i=t.uc(e);if(i!==void 0&&t.rb.remove(i),i=null,n){if(i=t.bd.indexOf(e),0>i)return;t.bd.splice(i,1)}if(he(t,"linkDataArray",Me,"linkDataArray",t,e,null,i,null),n=Xn(t,e,!0),Vi(t,n,e),n=Xn(t,e,!1),Vi(t,n,e),i=t.rf(e),Array.isArray(i))for(var r=i.length,s=0;s<r;s++)n=i[s],Vi(t,n,e)}a.Dz=function(t){if(Array.isArray(t))for(var e=t.length,n=0;n<e;n++)this.Al(t[n]);else for(t=t.iterator;t.next();)this.Al(t.value)},a.qz=function(t){if(this.linkKeyProperty===""&&X("GraphLinksModel.linkKeyProperty must not be an empty string for .mergeLinkDataArray() to succeed."),t!==this.linkDataArray&&ue(t)){var e=this.Qk;e.clear(),e.addAll(this.rb.iteratorKeys);var n=this.Ok;n.clear();for(var i=t.length,r=0;r<i;r++){var s=t[r],h=this.uc(s);if(h!==void 0){n.add(h);var u=this.Ug(h);u!==s&&(u!==null?(this.Xn(u,s),Wx(this,s,u)):(s=this.cloneDeep(s),this.bs(s,h),this.Rh(s)))}else h=this.cloneDeep(s),this.Rh(h),n.add(this.uc(h))}for(t=e.iterator;t.next();)i=t.value,n.contains(i)||(i=this.Ug(i))&&this.Al(i);e.clear(),n.clear()}};function Zg(t,e){var n=Xn(t,e,!0);n=t.ul(n),t.cc(n)===null&&Ri(t,n,e),n=Xn(t,e,!1),n=t.ul(n),t.cc(n)===null&&Ri(t,n,e);var i=t.rf(e);if(Array.isArray(i))for(var r=i.length,s=0;s<r;s++)n=i[s],t.cc(n)===null&&Ri(t,n,e)}a.co=function(t){if(t===null)return null;var e=this.ek;return t=e!==null?e(t,this):zp(this,t,!0),Bt(t)&&(ce(t),this.We!==""&&Xt(t,this.We,void 0),this.Xe!==""&&Xt(t,this.Xe,void 0),this.Zd!==""&&Xt(t,this.Zd,[])),t},a.yu=function(t){if(t===null)return!1;var e=this.Pk;return e===""?!1:!!ee(t,e)},a.Wg=function(t){if(t!==null){var e=this.ve;if(e!==""&&(e=ee(t,e),e!==void 0)){if(Rr(e))return e;X("GroupKey value for node data "+t+" is not a number or a string: "+e)}}},a.Go=function(t,e){if(e===null&&(e=void 0),t!==null){var n=this.ve;if(n!=="")if(this.kb(t)){var i=ee(t,n);i!==e&&(Vi(this,i,t),Xt(t,n,e),this.cc(e)===null&&Ri(this,e,t),he(this,"nodeGroupKey",Ht,n,t,i,e),typeof n=="string"&&this.Ja(t,n))}else Xt(t,n,e)}},vt.prototype.copyNodeData=function(t){return t===null?null:(t=et.prototype.copyNodeData.call(this,t),this.uj||this.ve===""||ee(t,this.ve)===void 0||Xt(t,this.ve,void 0),t)},vt.prototype.setDataProperty=function(t,e,n){if(this.kb(t)){if(e===this.nodeKeyProperty){this.Jl(t,n);return}if(e===this.nodeCategoryProperty){this.Il(t,n);return}if(e===this.nodeGroupKeyProperty){this.Go(t,n);return}}else if(this.Bc(t)){if(e===this.linkFromKeyProperty){ph(this,t,n,!0);return}if(e===this.linkToKeyProperty){ph(this,t,n,!1);return}if(e===this.linkFromPortIdProperty){dh(this,t,n,!0);return}if(e===this.linkToPortIdProperty){dh(this,t,n,!1);return}if(e===this.linkKeyProperty){this.bs(t,n);return}if(e===this.linkCategoryProperty){this.Fo(t,n);return}if(e===this.linkLabelKeysProperty){this.cs(t,n);return}}var i=ee(t,e);i!==n&&(Xt(t,e,n),this.Xr(t,e,i,n))},a=vt.prototype,a.Xn=function(t,e){if(e){var n=this.kb(t),i=this.Bc(t),r;for(r in e)r==="__gohashid"||n&&r===this.nodeKeyProperty||n&&r===this.nodeIsGroupProperty&&ee(t,r)===e[r]||i&&r===this.linkKeyProperty||this.setDataProperty(t,r,e[r])}},a.Do=function(t,e){et.prototype.Do.call(this,t,e);for(var n=this.jb.iterator;n.next();)this.Pu(n.value,t,e);for(n=this.Of.iterator;n.next();){var i=n.value,r=t,s=e;if(Xn(this,i,!0)===r){var h=this.We;Xt(i,h,s),he(this,"linkFromKey",Ht,h,i,r,s),typeof h=="string"&&this.Ja(i,h)}if(Xn(this,i,!1)===r&&(h=this.Xe,Xt(i,h,s),he(this,"linkToKey",Ht,h,i,r,s),typeof h=="string"&&this.Ja(i,h)),h=this.rf(i),Array.isArray(h))for(var u=h.length,p=this.Zd,d=0;d<u;d++)h[d]===r&&(h[d]=s,he(this,"linkLabelKeys",me,p,i,r,s,d,d))}},a.Pu=function(t,e,n){if(this.Wg(t)===e){var i=this.ve;Xt(t,i,n),he(this,"nodeGroupKey",Ht,i,t,e,n),typeof i=="string"&&this.Ja(t,i)}},a.fv=function(){et.prototype.fv.call(this);for(var t=this.linkDataArray,e=t.length,n=0;n<e;n++)Zg(this,t[n])},a.El=function(t){et.prototype.El.call(this,t),t=this.ua(t);var e=Al(this,t);if(e!==null){var n=Yt();for(e=e.iterator;e.next();){var i=e.value;if(this.kb(i)){if(this.Wg(i)===t){var r=this.ve;he(this,"nodeGroupKey",Ht,r,i,t,t),typeof r=="string"&&this.Ja(i,r),n.push(i)}}else if(Xn(this,i,!0)===t&&(r=this.We,he(this,"linkFromKey",Ht,r,i,t,t),typeof r=="string"&&this.Ja(i,r),n.push(i)),Xn(this,i,!1)===t&&(r=this.Xe,he(this,"linkToKey",Ht,r,i,t,t),typeof r=="string"&&this.Ja(i,r),n.push(i)),r=this.rf(i),Array.isArray(r))for(var s=r.length,h=this.Zd,u=0;u<s;u++)r[u]===t&&(he(this,"linkLabelKeys",me,h,i,t,t,u,u),n.push(i))}for(e=0;e<n.length;e++)Vi(this,t,n[e]);At(n)}},a.Dl=function(t){et.prototype.Dl.call(this,t);var e=this.Wg(t);this.cc(e)===null&&Ri(this,e,t)},a.Ko=function(t){et.prototype.Ko.call(this,t);var e=this.Wg(t);Vi(this,e,t)},a.Er=function(t){if(t===null)return"";var e=this.Si;if(e===""||(e=ee(t,e),e===void 0))return"";if(typeof e=="string")return e;X("getCategoryForLinkData found a non-string category for "+t+": "+e)},vt.prototype.getLinkCategoryForData=function(t){return this.Er(t)},vt.prototype.Fo=function(t,e){if(t!==null){var n=this.Si;if(n!=="")if(this.Bc(t)){var i=ee(t,n);i===void 0&&(i=""),i!==e&&(Xt(t,n,e),he(this,"linkCategory",Ht,n,t,i,e),typeof n=="string"&&this.Ja(t,n))}else Xt(t,n,e)}},vt.prototype.setLinkCategoryForData=function(t,e){this.Fo(t,e)},a=vt.prototype,a.Kl=function(t,e){et.prototype.Kl.call(this,t,e),this.Go(e,this.Wg(t))};function Wx(t,e,n){t.Fo(n,t.Er(e)),t.Tu(n,t.Qw(e)),t.Yu(n,t.Tw(e)),t.cs(n,t.rf(e)),t.Uu(n,t.Rw(e)),t.Zu(n,t.Uw(e))}a.Fj=function(){return!0},a.di=function(){return!0},a.Nr=function(){return!0},a.Gj=function(){return!0},Z.Object.defineProperties(vt.prototype,{archetypeNodeData:{get:function(){return this.Ei},set:function(t){var e=this.Ei;e!==t&&(this.Ei=t,this.g("archetypeNodeData",e,t))}},linkFromKeyProperty:{get:function(){return this.We},set:function(t){var e=this.We;e!==t&&(this.We=t,this.g("linkFromKeyProperty",e,t))}},linkToKeyProperty:{get:function(){return this.Xe},set:function(t){var e=this.Xe;e!==t&&(this.Xe=t,this.g("linkToKeyProperty",e,t))}},linkFromPortIdProperty:{get:function(){return this.Ti},set:function(t){var e=this.Ti;e!==t&&(this.Ti=t,this.g("linkFromPortIdProperty",e,t))}},linkToPortIdProperty:{get:function(){return this.Ui},set:function(t){var e=this.Ui;e!==t&&(this.Ui=t,this.g("linkToPortIdProperty",e,t))}},linkLabelKeysProperty:{get:function(){return this.Zd},set:function(t){var e=this.Zd;e!==t&&(this.Zd=t,this.g("linkLabelKeysProperty",e,t))}},linkDataArray:{get:function(){return this.bd},set:function(t){var e=this.bd;if(e!==t){this.rb.clear();for(var n=t.length,i=0;i<n;i++){var r=t[i];Bt(r)||X("GraphLinksModel.linkDataArray must only contain Objects, not: "+r),Xo(r)}if(this.bd=t,this.linkKeyProperty!==""){for(i=new Q,r=0;r<n;r++){var s=t[r],h=this.uc(s);h===void 0||this.rb.I(h)!==null?i.add(s):this.rb.add(h,s)}for(i=i.iterator;i.next();)r=i.value,this.Sr(r),s=this.uc(r),s!==void 0&&this.rb.add(s,r)}for(i=new H,r=0;r<n;r++)i.add(t[r]);for(this.Of=i,he(this,"linkDataArray",Ht,"linkDataArray",this,e,t),e=0;e<n;e++)Zg(this,t[e])}}},linkKeyProperty:{get:function(){return this.vh},set:function(t){var e=this.vh;if(e!==t){this.vh=t,this.rb.clear();for(var n=this.linkDataArray.length,i=0;i<n;i++){var r=this.linkDataArray[i],s=this.uc(r);s===void 0&&(this.Sr(r),s=this.uc(r)),s!==void 0&&this.rb.add(s,r)}this.g("linkKeyProperty",e,t)}}},makeUniqueLinkKeyFunction:{get:function(){return this.Jk},set:function(t){var e=this.Jk;e!==t&&(this.Jk=t,this.g("makeUniqueLinkKeyFunction",e,t))}},copyLinkDataFunction:{get:function(){return this.ek},set:function(t){var e=this.ek;e!==t&&(this.ek=t,this.g("copyLinkDataFunction",e,t))}},nodeIsGroupProperty:{get:function(){return this.Pk},set:function(t){var e=this.Pk;e!==t&&(this.Pk=t,this.g("nodeIsGroupProperty",e,t))}},nodeGroupKeyProperty:{get:function(){return this.ve},set:function(t){var e=this.ve;e!==t&&(this.ve=t,this.g("nodeGroupKeyProperty",e,t))}},uj:{get:function(){return this.jm},set:function(t){this.jm!==t&&(this.jm=t)}},linkCategoryProperty:{get:function(){return this.Si},set:function(t){var e=this.Si;e!==t&&(this.Si=t,this.g("linkCategoryProperty",e,t))}},type:{get:function(){return"GraphLinksModel"}}}),vt.prototype.setCategoryForLinkData=vt.prototype.Fo,vt.prototype.getCategoryForLinkData=vt.prototype.Er,vt.prototype.assignAllDataProperties=vt.prototype.Xn,vt.prototype.setGroupKeyForNodeData=vt.prototype.Go,vt.prototype.getGroupKeyForNodeData=vt.prototype.Wg,vt.prototype.isGroupForNodeData=vt.prototype.yu,vt.prototype.copyLinkData=vt.prototype.co,vt.prototype.mergeLinkDataArray=vt.prototype.qz,vt.prototype.removeLinkDataCollection=vt.prototype.Dz,vt.prototype.removeLinkData=vt.prototype.Al,vt.prototype.addLinkDataCollection=vt.prototype.Xx,vt.prototype.addLinkData=vt.prototype.Rh,vt.prototype.containsLinkData=vt.prototype.Bc,vt.prototype.makeLinkDataKeyUnique=vt.prototype.Sr,vt.prototype.findLinkDataForKey=vt.prototype.Ug,vt.prototype.setKeyForLinkData=vt.prototype.bs,vt.prototype.getKeyForLinkData=vt.prototype.uc,vt.prototype.removeLabelKeyForLinkData=vt.prototype.lx,vt.prototype.addLabelKeyForLinkData=vt.prototype.Yt,vt.prototype.setLabelKeysForLinkData=vt.prototype.cs,vt.prototype.getLabelKeysForLinkData=vt.prototype.rf,vt.prototype.setToPortIdForLinkData=vt.prototype.Zu,vt.prototype.getToPortIdForLinkData=vt.prototype.Uw,vt.prototype.setFromPortIdForLinkData=vt.prototype.Uu,vt.prototype.getFromPortIdForLinkData=vt.prototype.Rw,vt.prototype.setToKeyForLinkData=vt.prototype.Yu,vt.prototype.getToKeyForLinkData=vt.prototype.Tw,vt.prototype.setFromKeyForLinkData=vt.prototype.Tu,vt.prototype.getFromKeyForLinkData=vt.prototype.Qw,vt.prototype.clear=vt.prototype.clear;var Rp=Object.freeze([]);vt.className="GraphLinksModel",Li.GraphLinksModel=vt,et.constructGraphLinksModel=et.constructGraphLinksModel=function(){return new vt},et.initDiagramModel=Wg=function(){return new vt};function pn(t,e){et.call(this),this.we="parent",this.lm=!1,this.bj="parentLinkCategory",t!==void 0&&(ue(t)?this.nodeDataArray=t:Object.assign(this,t)),e&&Object.assign(this,e)}z(pn,et),pn.constructGraphLinksModel=et.constructGraphLinksModel,pn.prototype.cloneProtected=function(t){et.prototype.cloneProtected.call(this,t),t.we=this.we,t.lm=this.lm,t.bj=this.bj},a=pn.prototype,a.toString=function(t){if(t===void 0&&(t=0),2<=t)return this.Ho();var e=(this.name!==""?this.name:"")+" TreeModel";if(0<t){e+=`
 node data:`,t=this.nodeDataArray;for(var n=t.length,i=0;i<n;i++){var r=t[i];e+=" "+this.ua(r)+":"+Kn(r)}}return e},a.Rl=function(){var t=et.prototype.Rl.call(this),e="";return this.nodeParentKeyProperty!=="parent"&&typeof this.nodeParentKeyProperty=="string"&&(e+=`,
  "nodeParentKeyProperty": `+this.quote(this.nodeParentKeyProperty)),t+e},a.zo=function(t){et.prototype.zo.call(this,t),t.nodeParentKeyProperty&&(this.nodeParentKeyProperty=t.nodeParentKeyProperty)},a.yo=function(t){t.nodeParentKeyProperty!==void 0&&t.nodeParentKeyProperty!==this.nodeParentKeyProperty&&X("applyIncrementalJson cannot change Model properties"),et.prototype.yo.call(this,t)},a.ul=function(t){return t},a.Xg=function(t){if(t!==null){var e=this.we;if(e!==""&&(e=ee(t,e),e!==void 0)){if(Rr(e))return e;X("ParentKey value for node data "+t+" is not a number or a string: "+e)}}},a.fe=function(t,e){if(e===null&&(e=void 0),t!==null){var n=this.we;if(n!=="")if(e=this.ul(e),this.kb(t)){var i=ee(t,n);i!==e&&(Vi(this,i,t),Xt(t,n,e),this.cc(e)===null&&Ri(this,e,t),he(this,"nodeParentKey",Ht,n,t,i,e),typeof n=="string"&&this.Ja(t,n))}else Xt(t,n,e)}},a.Hr=function(t){if(t===null)return"";var e=this.bj;return e===""||(e=ee(t,e),e===void 0)?"":typeof e=="string"?e:(X("getParentLinkCategoryForNodeData found a non-string category for "+t+": "+e),"")},pn.prototype.getLinkCategoryForData=function(t){return this.Hr(t)},pn.prototype.ds=function(t,e){if(t!==null){var n=this.bj;if(n!=="")if(this.kb(t)){var i=ee(t,n);i===void 0&&(i=""),i!==e&&(Xt(t,n,e),he(this,"parentLinkCategory",Ht,n,t,i,e),typeof n=="string"&&this.Ja(t,n))}else Xt(t,n,e)}},pn.prototype.setLinkCategoryForData=function(t,e){this.ds(t,e)},pn.prototype.copyNodeData=function(t){return t===null?null:(t=et.prototype.copyNodeData.call(this,t),this.vj||this.we===""||ee(t,this.we)===void 0||Xt(t,this.we,void 0),t)},pn.prototype.setDataProperty=function(t,e,n){if(this.kb(t)){if(e===this.nodeKeyProperty){this.Jl(t,n);return}if(e===this.nodeCategoryProperty){this.Il(t,n);return}if(e===this.nodeParentKeyProperty){this.fe(t,n);return}}var i=ee(t,e);i!==n&&(Xt(t,e,n),this.Xr(t,e,i,n))},a=pn.prototype,a.Do=function(t,e){et.prototype.Do.call(this,t,e);for(var n=this.jb.iterator;n.next();)this.Pu(n.value,t,e)},a.Pu=function(t,e,n){if(this.Xg(t)===e){var i=this.we;Xt(t,i,n),he(this,"nodeParentKey",Ht,i,t,e,n),typeof i=="string"&&this.Ja(t,i)}},a.El=function(t){et.prototype.El.call(this,t),t=this.ua(t);var e=Al(this,t);if(e!==null){var n=Yt();for(e=e.iterator;e.next();){var i=e.value;if(this.kb(i)&&this.Xg(i)===t){var r=this.we;he(this,"nodeParentKey",Ht,r,i,t,t),typeof r=="string"&&this.Ja(i,r),n.push(i)}}for(e=0;e<n.length;e++)Vi(this,t,n[e]);At(n)}},a.Dl=function(t){et.prototype.Dl.call(this,t);var e=this.Xg(t);e=this.ul(e),this.cc(e)===null&&Ri(this,e,t)},a.Ko=function(t){et.prototype.Ko.call(this,t);var e=this.Xg(t);Vi(this,e,t)},a.Kl=function(t,e){et.prototype.Kl.call(this,t,e),this.ds(e,this.Hr(t)),this.fe(e,this.Xg(t))},a.sl=function(){return!0},a.Nr=function(){return!0},Z.Object.defineProperties(pn.prototype,{nodeParentKeyProperty:{get:function(){return this.we},set:function(t){var e=this.we;e!==t&&(this.we=t,this.g("nodeParentKeyProperty",e,t))}},vj:{get:function(){return this.lm},set:function(t){this.lm!==t&&(this.lm=t)}},parentLinkCategoryProperty:{get:function(){return this.bj},set:function(t){var e=this.bj;e!==t&&(this.bj=t,this.g("parentLinkCategoryProperty",e,t))}},linkCategoryProperty:{get:function(){return this.parentLinkCategoryProperty},set:function(t){this.parentLinkCategoryProperty=t}},type:{get:function(){return"TreeModel"}}}),pn.prototype.setParentLinkCategoryForNodeData=pn.prototype.ds,pn.prototype.getParentLinkCategoryForNodeData=pn.prototype.Hr,pn.prototype.setParentKeyForNodeData=pn.prototype.fe,pn.prototype.getParentKeyForNodeData=pn.prototype.Xg,pn.className="TreeModel",Li.TreeModel=pn;function Wt(t){Ut.call(this),this.Gv=this.xm=this.gc=0,this.pp=360,this.Fv=Mi,this.Gi=0,this.tv=new T,this.cp=this.be=0,this.pr=new Xl,this.zs=this.aj=0,this.Nx=600,this.zn=NaN,this.am=1,this.Ln=0,this.$k=360,this.Lb=Mi,this.K=dn,this.cd=gh,this.Wc=Vg,this.df=6,this.ln=Wp,t&&Object.assign(this,t)}z(Wt,Ut),Wt.prototype.cloneProtected=function(t){Ut.prototype.cloneProtected.call(this,t),t.zn=this.zn,t.am=this.am,t.Ln=this.Ln,t.$k=this.$k,t.Lb=this.Lb,t.K=this.K,t.cd=this.cd,t.Wc=this.Wc,t.df=this.df,t.ln=this.ln},Wt.prototype.ob=function(t){t.classType===Wt?t===Kp||t===Hp||t===Xp||t===Up||t===gh?this.sorting=t:t===Ss||t===fh||t===dn||t===Yr?this.direction=t:t===lr||t===Vr||t===Mi||t===ki?this.arrangement=t:(t===ta||t===Wp)&&(this.nodeDiameterFormula=t):Ut.prototype.ob.call(this,t)},Wt.prototype.createNetwork=function(){return new ch(this)},Wt.prototype.doLayout=function(t){if(this.network===null&&(this.network=this.makeNetwork(t)),this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin),t=this.network.vertexes,1>=t.count)t.count===1&&(t=t.first(),t.centerX=0,t.centerY=0);else{var e=new Q;e.addAll(t.iterator),t=new Q;var n=new Q,i=this.sort(e),r,s,h=this.cp,u=this.arrangement,p=this.nodeDiameterFormula,d=this.radius;(!isFinite(d)||0>=d)&&(d=NaN);var g=this.aspectRatio;(!isFinite(g)||0>=g)&&(g=1);var c=this.startAngle;isFinite(c)||(c=0);var y=this.sweepAngle;if((!isFinite(y)||360<y||1>y)&&(y=360),e=this.spacing,isFinite(e)||(e=NaN),u===ki&&p===ta?u=Mi:u===ki&&p!==ta&&(u=this.arrangement),(this.direction===Ss||this.direction===fh)&&this.sorting!==gh){for(p=0;!(p>=i.length)&&(t.add(i.L(p)),!(p+1>=i.length));p+=2)n.add(i.L(p+1));this.direction===Ss?(this.arrangement===ki&&t.reverse(),i=new Q,i.addAll(t),i.addAll(n)):(this.arrangement===ki&&n.reverse(),i=new Q,i.addAll(n),i.addAll(t))}p=i.length;for(var S=s=r=0;S<i.length;S++){var v=c+y*s*(this.direction===dn?1:-1)/p,L=i.L(S).diameter;isNaN(L)&&(L=Xr(i.L(S),v)),360>y&&(S===0||S===i.length-1)&&(L/=2),r+=L,s++}if(isNaN(d)||u===ki){if(isNaN(e)&&(e=6),u!==Mi&&u!==ki){for(s=-1/0,h=0;h<p;h++)S=i.L(h),r=i.L(h===p-1?0:h+1),isNaN(S.diameter)&&Xr(S,0),isNaN(r.diameter)&&Xr(r,0),s=Math.max(s,(S.diameter+r.diameter)/2);h=s+e,u===lr?d=(s+e)/(2*Math.PI/p):d=Vp(this,h*(360<=y?p:p-1),g,c*Math.PI/180,y*Math.PI/180)}else d=Vp(this,r+(360<=y?p:p-1)*(u!==ki?e:1.6*e),g,c*Math.PI/180,y*Math.PI/180);s=d*g}else if(s=d*g,S=_g(this,d,s,c*Math.PI/180,y*Math.PI/180),isNaN(e))(u===Mi||u===ki)&&(e=(S-r)/(360<=y?p:p-1));else if(u===Mi||u===ki)S=(S-r)/(360<=y?p:p-1),S<e?(d=Vp(this,r+e*(360<=y?p:p-1),g,c*Math.PI/180,y*Math.PI/180),s=d*g):e=S;else{for(h=-1/0,r=0;r<p;r++)v=i.L(r),L=i.L(r===p-1?0:r+1),isNaN(v.diameter)&&Xr(v,0),isNaN(L.diameter)&&Xr(L,0),h=Math.max(h,(v.diameter+L.diameter)/2);h+=e,r=Vp(this,h*(360<=y?p:p-1),g,c*Math.PI/180,y*Math.PI/180),r>d?(d=r,s=d*g):h=S/(360<=y?p:p-1)}if(this.Fv=u,this.gc=d,this.xm=g,this.Gv=c,this.pp=y,this.Gi=e,this.be=s,this.cp=h,e=i,i=this.Fv,u=this.gc,d=this.Gv,g=this.pp,c=this.Gi,y=this.be,p=this.cp,this.direction!==Ss&&this.direction!==fh||i!==ki)if(this.direction===Ss||this.direction===fh){switch(h=0,i){case Vr:h=180*Yp(this,u,y,d,p)/Math.PI;break;case Mi:p=e=0,h=t.first(),h!==null&&(e=Xr(h,Math.PI/2)),h=n.first(),h!==null&&(p=Xr(h,Math.PI/2)),h=180*Yp(this,u,y,d,c+(e+p)/2)/Math.PI;break;case lr:h=g/e.length}if(this.direction===Ss){switch(i){case Vr:Yl(this,t,d,Yr);break;case Mi:Vl(this,t,d,Yr);break;case lr:Rl(this,t,g/2,d,Yr)}switch(i){case Vr:Yl(this,n,d+h,dn);break;case Mi:Vl(this,n,d+h,dn);break;case lr:Rl(this,n,g/2,d+h,dn)}}else{switch(i){case Vr:Yl(this,n,d,Yr);break;case Mi:Vl(this,n,d,Yr);break;case lr:Rl(this,n,g/2,d,Yr)}switch(i){case Vr:Yl(this,t,d+h,dn);break;case Mi:Vl(this,t,d+h,dn);break;case lr:Rl(this,t,g/2,d+h,dn)}}}else switch(i){case Vr:Yl(this,e,d,this.direction);break;case Mi:Vl(this,e,d,this.direction);break;case lr:Rl(this,e,g,d,this.direction);break;case ki:Jx(this,e,g,d,this.direction)}else Jx(this,e,g,d-g/2,dn)}this.updateParts(),this.network=null,this.isValidLayout=!0};function Rl(t,e,n,i,r){var s=t.pp,h=t.gc;t=t.be,i=i*Math.PI/180,n=n*Math.PI/180;for(var u=e.length,p=0;p<u;p++){var d=i+(r===dn?p*n/(360<=s?u:u-1):-(p*n)/u),g=e.L(p),c=h*Math.tan(d)/t;c=Math.sqrt((h*h+t*t*c*c)/(1+c*c)),g.centerX=c*Math.cos(d),g.centerY=c*Math.sin(d),g.actualAngle=180*d/Math.PI}}function Vl(t,e,n,i){var r=t.gc,s=t.be,h=t.Gi;n=n*Math.PI/180;for(var u=e.length,p=0;p<u;p++){var d=e.L(p),g=e.L(p===u-1?0:p+1),c=s*Math.sin(n);d.centerX=r*Math.cos(n),d.centerY=c,d.actualAngle=180*n/Math.PI,isNaN(d.diameter)&&Xr(d,0),isNaN(g.diameter)&&Xr(g,0),d=Yp(t,r,s,i===dn?n:-n,(d.diameter+g.diameter)/2+h),n+=i===dn?d:-d}}function Yl(t,e,n,i){var r=t.gc,s=t.be,h=t.cp;n=n*Math.PI/180;for(var u=e.length,p=0;p<u;p++){var d=e.L(p);d.centerX=r*Math.cos(n),d.centerY=s*Math.sin(n),d.actualAngle=180*n/Math.PI,d=Yp(t,r,s,i===dn?n:-n,h),n+=i===dn?d:-d}}function Jx(t,e,n,i,r){var s=t.pp;if(t.aj=0,t.pr=new Xl,360>n){for(s=i+(r===dn?s:-s);0>s;)s+=360;s%=360,180<s&&(s-=360),s*=Math.PI/180,t.zs=s,_x(t,e,n,i,r)}else Zx(t,e,n,i,r);t.pr.commit(e)}function Zx(t,e,n,i,r){var s=t.gc,h=t.Gi,u=t.xm,p=s*Math.cos(i*Math.PI/180),d=t.be*Math.sin(i*Math.PI/180),g=e.Da();if(g.length===3)g[0].centerX=s,g[0].centerY=0,g[1].centerX=g[0].centerX-g[0].width/2-g[1].width/2-h,g[1].y=g[0].y,g[2].centerX=(g[0].centerX+g[1].centerX)/2,g[2].y=g[0].y-g[2].height-h;else if(g.length===4)g[0].centerX=s,g[0].centerY=0,g[2].centerX=-g[0].centerX,g[2].centerY=g[0].centerY,g[1].centerX=0,g[1].y=Math.min(g[0].y,g[2].y)-g[1].height-h,g[3].centerX=0,g[3].y=Math.max(g[0].y+g[0].height+h,g[2].y+g[2].height+h);else{s=T.alloc();for(var c=0;c<g.length&&(g[c].centerX=p,g[c].centerY=d,!(c>=g.length-1));c++)$x(t,p,d,g,c,r,s)||Qx(t,p,d,g,c,r,s),p=s.x,d=s.y;if(T.free(s),t.aj++,!(23<t.aj)){p=g[0].centerX,d=g[0].centerY,s=g[g.length-1].centerX,c=g[g.length-1].centerY;var y=Math.abs(p-s)-((g[0].width+g[g.length-1].width)/2+h),S=Math.abs(d-c)-((g[0].height+g[g.length-1].height)/2+h);h=0,1>Math.abs(S)?Math.abs(p-s)<(g[0].width+g[g.length-1].width)/2&&(h=0):h=0<S?S:1>Math.abs(y)?0:y,p=Math.abs(s)>Math.abs(c)?0<s!=d>c:0<c!=p<s,(p=r===dn?p:!p)&&(h=-Math.abs(h),h=Math.min(h,-g[g.length-1].width),h=Math.min(h,-g[g.length-1].height)),t.pr.compare(h,g),1<Math.abs(h)&&(t.gc=8>t.aj?t.gc-h/(2*Math.PI):5>g.length&&10<h?t.gc/2:t.gc-(0<h?1.7:-2.3),t.be=t.gc*u,Zx(t,e,n,i,r))}}}function _x(t,e,n,i,r){for(var s=t.gc,h=t.be,u=t.xm,p=s*Math.cos(i*Math.PI/180),d=h*Math.sin(i*Math.PI/180),g=T.alloc(),c=e.Da(),y=0;y<c.length&&(c[y].centerX=p,c[y].centerY=d,!(y>=c.length-1));y++)$x(t,p,d,c,y,r,g)||Qx(t,p,d,c,y,r,g),p=g.x,d=g.y;if(T.free(g),t.aj++,!(23<t.aj)){if(p=Math.atan2(d,p),p=r===dn?t.zs-p:p-t.zs,p=Math.abs(p)<Math.abs(p-2*Math.PI)?p:p-2*Math.PI,s=p*(s+h)/2,h=t.pr,Math.abs(s)<Math.abs(h.ol))for(h.ol=s,h.Tj=[],h.Tl=[],p=0;p<c.length;p++)h.Tj[p]=c[p].bounds.x,h.Tl[p]=c[p].bounds.y;1<Math.abs(s)&&(t.gc=8>t.aj?t.gc-s/(2*Math.PI):t.gc-(0<s?1.7:-2.3),t.be=t.gc*u,_x(t,e,n,i,r))}}function $x(t,e,n,i,r,s,h){var u=t.gc,p=t.be,d=0;t=(i[r].width+i[r+1].width)/2+t.Gi;var g=!1;if(0<=n!=(s===dn)){if(s=e+t,s>u){if(s=e-t,s<-u)return h.x=s,h.y=d,!1;g=!0}}else if(s=e-t,s<-u){if(s=e+t,s>u)return h.x=s,h.y=d,!1;g=!0}return d=Math.sqrt(1-Math.min(1,s*s/(u*u)))*p,0>n!==g&&(d=-d),Math.abs(n-d)>(i[r].height+i[r+1].height)/2?(h.x=s,h.y=d,!1):(h.x=s,h.y=d,!0)}function Qx(t,e,n,i,r,s,h){var u=t.gc,p=t.be,d=0;if(t=(i[r].height+i[r+1].height)/2+t.Gi,i=!1,0<=e!=(s===dn)){if(s=n-t,s<-p){if(s=n+t,s>p){h.x=d,h.y=s;return}i=!0}}else if(s=n+t,s>p){if(s=n-t,s<-p){h.x=d,h.y=s;return}i=!0}d=Math.sqrt(1-Math.min(1,s*s/(p*p)))*u,0>e!==i&&(d=-d),h.x=d,h.y=s}Wt.prototype.commitLayout=function(){this.commitNodes(),this.isRouting&&this.commitLinks()},Wt.prototype.commitNodes=function(){var t=this.group!==null&&this.group.placeholder!==null&&this.group.isSubGraphExpanded,e=t?this.group.location.copy():null,n=this.actualCenter;t?n=new T(0,0):(n.x=this.arrangementOrigin.x+this.gc,n.y=this.arrangementOrigin.y+this.be);for(var i=this.network.vertexes.iterator;i.next();){var r=i.value;r.x+=n.x,r.y+=n.y,r.commit()}t&&(this.group.Ta(),t=this.group.position.copy(),n=this.group.location.copy(),e=e.ge(n.ge(t)),this.group.move(e),this.tv=e.ge(t))},Wt.prototype.commitLinks=function(){for(var t=this.network.edges.iterator;t.next();)t.value.commit()};function _g(t,e,n,i,r){var s=t.Nx;if(.001>Math.abs(t.xm-1))return i!==void 0&&r!==void 0?r*e:2*Math.PI*e;t=e>n?Math.sqrt(e*e-n*n)/e:Math.sqrt(n*n-e*e)/n;for(var h=0,u=i!==void 0&&r!==void 0?r/(s+1):Math.PI/(2*(s+1)),p=0,d=0;d<=s;d++){i!==void 0&&r!==void 0?p=i+d*r/s:p=d*Math.PI/(2*s);var g=Math.sin(p);h+=Math.sqrt(1-t*t*g*g)*u}return i!==void 0&&r!==void 0?(e>n?e:n)*h:4*(e>n?e:n)*h}function Vp(t,e,n,i,r){return e/(i!==void 0&&r!==void 0?_g(t,1,n,i,r):_g(t,1,n))}function Yp(t,e,n,i,r){if(.001>Math.abs(t.xm-1))return r/e;var s=e>n?Math.sqrt(e*e-n*n)/e:Math.sqrt(n*n-e*e)/n,h=0;t=2*Math.PI/(700*t.network.vertexes.count),e>n&&(i+=Math.PI/2);for(var u=0;;u++){var p=Math.sin(i+u*t);if(h+=(e>n?e:n)*Math.sqrt(1-s*s*p*p)*t,h>=r)return u*t}}Wt.prototype.sort=function(t){switch(this.sorting){case Xp:break;case Up:t.reverse();break;case Kp:t.sort(this.comparer);break;case Hp:t.sort(this.comparer),t.reverse();break;case gh:return this.Kj(kv(t));default:X("Invalid sorting type.")}return t};function kv(t){for(var e=[],n=0;n<t.length;n++)e.push(0);n=new Q;for(var i=0;i<t.length;i++){var r=-1,s=-1;if(i===0)for(var h=0;h<t.length;h++){var u=t.L(h).edgesCount;u>r&&(r=u,s=h)}else for(h=0;h<t.length;h++)u=e[h],u>r&&(r=u,s=h);for(n.add(t.L(s)),e[s]=-1,s=t.L(s),h=s.sourceEdges;h.next();)r=t.indexOf(h.value.fromVertex),0>r||0<=e[r]&&e[r]++;for(s=s.destinationEdges;s.next();)r=t.indexOf(s.value.toVertex),0>r||0<=e[r]&&e[r]++}return n}Wt.prototype.Kj=function(t){for(var e=[],n=0;n<t.length;n++){var i=t.L(n);e[n]=[];for(var r,s=i.destinationEdges;s.next();)r=t.indexOf(s.value.toVertex),r!==n&&0>e[n].indexOf(r)&&e[n].push(r);for(i=i.sourceEdges;i.next();)r=t.indexOf(i.value.fromVertex),r!==n&&0>e[n].indexOf(r)&&e[n].push(r)}for(s=[],n=0;n<e.length;n++)s[n]=0;n=[];var h=[],u=[];i=[],r=new Q;for(var p=0,d=0;d<e.length;d++){var g=e[d].length;if(g===1)i.push(d);else if(g===0)r.add(t.L(d));else{if(p===0)n.push(d);else{for(var c=g=1/0,y=-1,S=[],v=0;v<n.length;v++)0>e[n[v]].indexOf(n[v===n.length-1?0:v+1])&&S.push(v===n.length-1?0:v+1);if(S.length===0)for(v=0;v<n.length;v++)S.push(v);for(v=0;v<S.length;v++){for(var L=S[v],N=e[d],M=0,B=0;B<h.length;B++){var F=s[h[B]],j=s[u[B]];if(F<j){var D=F;F=j}else D=j;if(D<L&&L<=F)for(j=0;j<N.length;j++){var R=N[j];0>n.indexOf(R)||D<s[R]&&s[R]<F||D===s[R]||F===s[R]||M++}else for(j=0;j<N.length;j++)R=N[j],0>n.indexOf(R)||D<s[R]&&s[R]<F&&D!==s[R]&&F!==s[R]&&M++}for(N=M,B=M=0;B<e[d].length;B++)D=n.indexOf(e[d][B]),0<=D&&(D=Math.abs(L-(D>=L?D+1:D)),M+=D<n.length+1-D?D:n.length+1-D);for(B=0;B<h.length;B++)D=s[h[B]],F=s[u[B]],D>=L&&D++,F>=L&&F++,D>F&&(j=F,F=D,D=j),F-D<(n.length+2)/2==(D<L&&L<=F)&&M++;(N<g||N===g&&M<c)&&(g=N,c=M,y=L)}for(n.splice(y,0,d),g=0;g<n.length;g++)s[n[g]]=g;for(g=0;g<e[d].length;g++)c=e[d][g],0<=n.indexOf(c)&&(h.push(d),u.push(c))}p++}}for(h=n.length;;){for(s=!0,u=0;u<i.length;u++)if(p=i[u],d=e[p][0],g=n.indexOf(d),0<=g){for(y=c=0;y<e[d].length;y++)S=n.indexOf(e[d][y]),0>S||S===g||(v=S>g?S-g:g-S,c+=S<g!=v>h-v?1:-1);n.splice(0>c?g:g+1,0,p),i.splice(u,1),u--}else s=!1;if(s)break;n.push(i[0]),i.splice(0,1)}for(e=0;e<n.length;e++)r.add(t.L(n[e]));return r},Z.Object.defineProperties(Wt.prototype,{radius:{get:function(){return this.zn},set:function(t){this.zn!==t&&(0<t||isNaN(t))&&(this.zn=t,this.D())}},aspectRatio:{get:function(){return this.am},set:function(t){this.am!==t&&0<t&&(this.am=t,this.D())}},startAngle:{get:function(){return this.Ln},set:function(t){this.Ln!==t&&(this.Ln=t,this.D())}},sweepAngle:{get:function(){return this.$k},set:function(t){this.$k!==t&&(0<t&&360>=t?this.$k=t:this.$k=360,this.D())}},arrangement:{get:function(){return this.Lb},set:function(t){this.Lb===t||t!==ki&&t!==Mi&&t!==Vr&&t!==lr||(this.Lb=t,this.D())}},direction:{get:function(){return this.K},set:function(t){this.K===t||t!==dn&&t!==Yr&&t!==Ss&&t!==fh||(this.K=t,this.D())}},sorting:{get:function(){return this.cd},set:function(t){this.cd===t||t!==Xp&&t!==Up&&t!==Kp&&!Hp&&t!==gh||(this.cd=t,this.D())}},comparer:{get:function(){return this.Wc},set:function(t){this.Wc!==t&&(this.Wc=t,this.D())}},spacing:{get:function(){return this.df},set:function(t){this.df!==t&&(this.df=t,this.D())}},nodeDiameterFormula:{get:function(){return this.ln},set:function(t){this.ln===t||t!==Wp&&t!==ta||(this.ln=t,this.D())}},actualXRadius:{get:function(){return this.gc}},actualYRadius:{get:function(){return this.be}},actualSpacing:{get:function(){return this.Gi}},actualCenter:{get:function(){return this.tv}}});var Mi=new J(Wt,"ConstantSpacing",0),Vr=new J(Wt,"ConstantDistance",1),lr=new J(Wt,"ConstantAngle",2),ki=new J(Wt,"Packed",3),dn=new J(Wt,"Clockwise",4),Yr=new J(Wt,"Counterclockwise",5),Ss=new J(Wt,"BidirectionalLeft",6),fh=new J(Wt,"BidirectionalRight",7),Xp=new J(Wt,"Forwards",8),Up=new J(Wt,"Reverse",9),Kp=new J(Wt,"Ascending",10),Hp=new J(Wt,"Descending",11),gh=new J(Wt,"Optimized",12),Wp=new J(Wt,"Pythagorean",13),ta=new J(Wt,"Circular",14);Wt.className="CircularLayout",Wt.ConstantSpacing=Mi,Wt.ConstantDistance=Vr,Wt.ConstantAngle=lr,Wt.Packed=ki,Wt.Clockwise=dn,Wt.Counterclockwise=Yr,Wt.BidirectionalLeft=Ss,Wt.BidirectionalRight=fh,Wt.Forwards=Xp,Wt.Reverse=Up,Wt.Ascending=Kp,Wt.Descending=Hp,Wt.Optimized=gh,Wt.Pythagorean=Wp,Wt.Circular=ta;function Xl(){this.ol=-1/0,this.Tl=this.Tj=null}Xl.prototype.compare=function(t,e){if(0<t&&0>this.ol||Math.abs(t)<Math.abs(this.ol)&&!(0>t&&0<this.ol))for(this.ol=t,this.Tj=[],this.Tl=[],t=0;t<e.length;t++)this.Tj[t]=e[t].bounds.x,this.Tl[t]=e[t].bounds.y},Xl.prototype.commit=function(t){if(this.Tj!==null&&this.Tl!==null)for(var e=0;e<this.Tj.length;e++){var n=t.L(e);n.x=this.Tj[e],n.y=this.Tl[e]}},Xl.className="VertexArrangement";function ch(t){zt.call(this,t)}z(ch,zt),ch.prototype.createVertex=function(){return new Ul(this)},ch.prototype.createEdge=function(){return new Jp(this)},ch.className="CircularNetwork";function Ul(t){Te.call(this,t),this.u=this.Fi=NaN}z(Ul,Te);function Xr(t,e){var n=t.network;if(n===null)return NaN;if(n=n.layout,n===null)return NaN;if(n.arrangement===ki)if(n.nodeDiameterFormula===ta)t.Fi=Math.max(t.width,t.height);else{if(n=Math.abs(Math.sin(e)),e=Math.abs(Math.cos(e)),n===0)return t.width;if(e===0)return t.height;t.Fi=Math.min(t.height/n,t.width/e)}else t.Fi=n.nodeDiameterFormula===ta?Math.max(t.width,t.height):Math.sqrt(t.width*t.width+t.height*t.height);return t.Fi}Z.Object.defineProperties(Ul.prototype,{diameter:{get:function(){return this.Fi},set:function(t){this.Fi!==t&&(this.Fi=t)}},actualAngle:{get:function(){return this.u},set:function(t){this.u!==t&&(this.u=t)}}}),Ul.className="CircularVertex";function Jp(t){Fn.call(this,t)}z(Jp,Fn),Jp.className="CircularEdge";function Ie(t){Ut.call(this),this.Mg=null,this.Xm=0,this.Pd=new ht(100,100).freeze(),this.$l=!1,this.cf=!0,this.ld=!1,this.Kk=100,this.ym=1,this.Mf=1e3,this.en=10,this.An=Math,this.lk=.05,this.kk=50,this.ik=150,this.jk=0,this.tm=10,this.sm=5,t&&Object.assign(this,t)}z(Ie,Ut),Ie.prototype.cloneProtected=function(t){Ut.prototype.cloneProtected.call(this,t),t.Pd.assign(this.Pd),t.$l=this.$l,t.cf=this.cf,t.ld=this.ld,t.Kk=this.Kk,t.ym=this.ym,t.Mf=this.Mf,t.en=this.en,t.An=this.An,t.lk=this.lk,t.kk=this.kk,t.ik=this.ik,t.jk=this.jk,t.tm=this.tm,t.sm=this.sm},Ie.prototype.createNetwork=function(){return new ea(this)},Ie.prototype.doLayout=function(t){if(this.network===null&&(this.network=this.makeNetwork(t)),t=this.maxIterations,0<this.network.vertexes.count){this.network.eo();for(var e=this.network.vertexes.iterator;e.next();){var n=e.value;n.charge=this.electricalCharge(n),n.mass=this.gravitationalMass(n)}for(e=this.network.edges.iterator;e.next();)n=e.value,n.stiffness=this.springStiffness(n),n.length=this.springLength(n);if(this.$t(),this.Xm=0,this.needsClusterLayout()){e=this.network,n=e.vx();for(var i=n.iterator;i.next();){this.network=i.value;for(var r=this.network.vertexes.iterator;r.next();){var s=r.value;s.Jd=s.vertexes.count,s.bh=1,s.tj=null,s.Ie=null}bx(this,0,t)}this.network=e;var h=i=n.iterator;i=this.arrangementSpacing;var u=h.count,p=!0;s=r=0;for(var d=Yt(),g=0;g<u+e.vertexes.count+2;g++)d[g]=null;u=0,h.reset();for(var c=E.alloc();h.next();)if(g=h.value,this.computeBounds(g,c),p)p=!1,r=c.x+c.width/2,s=c.y+c.height/2,d[0]=new T(c.x+c.width+i.width,c.y),d[1]=new T(c.x,c.y+c.height+i.height),u=2;else{var y=qx(d,u,r,s,c.width,c.height,i),S=d[y],v=new T(S.x+c.width+i.width,S.y),L=new T(S.x,S.y+c.height+i.height);for(y+1<u&&d.splice(y+1,0,null),d[y]=v,d[y+1]=L,u++,y=S.x-c.x,S=S.y-c.y,g=g.vertexes.iterator;g.next();)v=g.value,v.centerX+=y,v.centerY+=S}for(E.free(c),g=e.vertexes.iterator;g.next();)h=g.value,y=h.bounds,2>u?(r=y.x+y.width/2,s=y.y+y.height/2,d[0]=new T(y.x+y.width+i.width,y.y),d[1]=new T(y.x,y.y+y.height+i.height),u=2):(p=qx(d,u,r,s,y.width,y.height,i),c=d[p],S=new T(c.x+y.width+i.width,c.y),y=new T(c.x,c.y+y.height+i.height),p+1<u&&d.splice(p+1,0,null),d[p]=S,d[p+1]=y,u++,h.centerX=c.x+h.width/2,h.centerY=c.y+h.height/2);for(At(d),i=n.iterator;i.next();){for(n=i.value,r=n.vertexes.iterator;r.next();)e.Pg(r.value);for(n=n.edges.iterator;n.next();)e.Vn(n.value)}}ey(this,t),this.updateParts()}this.Kk=t,this.network=null,this.isValidLayout=!0},Ie.prototype.needsClusterLayout=function(){if(3>this.network.vertexes.count)return!1;for(var t=0,e=0,n=this.network.vertexes.first().bounds,i=this.network.vertexes.iterator;i.next();){if(i.value.bounds.Qc(n)&&(t++,2<t))return!0;if(10<e)break;e++}return!1},Ie.prototype.computeBounds=function(t,e){var n=!0;for(t=t.vertexes.iterator;t.next();){var i=t.value;n?(n=!1,e.set(i.bounds)):e.Vc(i.bounds)}return e};function bx(t,e,n){if(Nv(t,e)){var i=t.Mf;t.Mf*=1+1/(e+1);var r=Tv(t,e),s=Math.max(0,Math.max(Math.min(t.network.vertexes.count,n*(e+1)/11),10));for(t.maxIterations+=s,bx(t,e+1,n),ey(t,s),Cv(t,r),e=r.vertexes.Da(),e.sort(function(h,u){return h===null||u===null||h===u?0:u.Jd-h.Jd}),n=0;n<e.length;n++)Fv(t,e[n]);t.Mf=i}}function Nv(t,e){if(10<e||3>t.network.vertexes.count)return!1;for(t.Mg=t.network.vertexes.Da(),t=t.Mg,t.sort(function(n,i){return n===null||i===null||n===i?0:i.Jd-n.Jd}),e=t.length-1;0<=e&&1>=t[e].Jd;)e--;return 1<t.length-e}function Tv(t,e){for(var n=t.network,i=new ea(t),r=0;r<t.Mg.length;r++){var s=t.Mg[r];if(1<s.Jd){i.Pg(s);var h=new ny;h.ks=s.Jd,h.ls=s.width,h.js=s.height,h.mv=s.focus.x,h.nv=s.focus.y,s.Ie===null&&(s.Ie=new Q),s.Ie.add(h),s.Ru=s.Ie.count-1}else break}for(s=n.edges.iterator;s.next();){var u=s.value;r=u.fromVertex,h=u.toVertex,r.network===i&&h.network===i?i.Vn(u):r.network===i?(u=r.tj,u===null&&(u=new Q,r.tj=u),u.add(h),r.Jd--,r.bh+=h.bh):h.network===i&&(u=h.tj,u===null&&(u=new Q,h.tj=u),u.add(r),h.Jd--,h.bh+=r.bh)}for(r=i.edges.iterator;r.next();)s=r.value,s.length*=Math.max(1,O.sqrt((s.fromVertex.bh+s.toVertex.bh)/(4*e+1)));for(e=i.vertexes.iterator;e.next();){r=e.value;var p=r.tj;if(p!==null&&0<p.count&&(h=r.Ie.L(r.Ie.count-1).ks-r.Jd,!(0>=h))){for(var d=u=0,g=p.count-h;g<p.count;g++){var c=p.L(g),y=null;for(s=c.edges.iterator;s.next();){var S=s.value;if(S.Sw(c)===r){y=S;break}}y!==null&&(d+=y.length,u+=c.width*c.height)}s=r.centerX,p=r.centerY,g=r.width,c=r.height,y=r.focus,S=g*c,1>S&&(S=1),u=O.sqrt((u+S+d*d*4/(h*h))/S),h=(u-1)*g/2,u=(u-1)*c/2,r.bounds=new E(s-y.x-h,p-y.y-u,g+2*h,c+2*u),r.focus=new T(y.x+h,y.y+u)}}return t.network=i,n}function Cv(t,e){for(var n=t.network.vertexes.iterator;n.next();){var i=n.value;if(i.network=e,i.Ie!==null){var r=i.Ie.L(i.Ru);i.Jd=r.ks;var s=r.mv,h=r.nv;i.bounds=new E(i.centerX-s,i.centerY-h,r.ls,r.js),i.focus=new T(s,h),i.Ru--}}for(n=t.network.edges.iterator;n.next();)n.value.network=e;t.network=e}function Fv(t,e){var n=e.tj;if(n!==null&&n.count!==0){var i=e.centerX,r=e.centerY,s=e.width,h=e.height;e.Ie!==null&&0<e.Ie.count&&(h=e.Ie.L(0),s=h.ls,h=h.js),s=O.sqrt(s*s+h*h)/2;for(var u=!1,p=h=0,d=0,g=e.vertexes.iterator;g.next();){var c=g.value;1>=c.Jd?p++:(u=!0,d++,h+=Math.atan2(e.centerY-c.centerY,e.centerX-c.centerX))}if(p!==0){for(0<d&&(h/=d),d=e=0,e=u?2*Math.PI/(p+1):2*Math.PI/p,p%2===0&&(d=e/2),1<n.count&&n.sort(function(S,v){return S===null||v===null||S===v?0:v.width*v.height-S.width*S.height}),u=p%2===0?0:1,n=n.iterator;n.next();)if(p=n.value,!(1<p.Jd||t.isFixed(p))){for(g=null,c=p.edges.iterator;c.next();){g=c.value;break}c=p.width;var y=p.height;c=O.sqrt(c*c+y*y)/2,g=s+g.length+c,c=h+(e*(u/2>>1)+d)*(u%2===0?1:-1),p.centerX=i+g*Math.cos(c),p.centerY=r+g*Math.sin(c),u++}}}}function qx(t,e,n,i,r,s,h){var u=9e19,p=-1,d=0;t:for(;d<e;d++){var g=t[d],c=g.x-n,y=g.y-i;if(c=c*c+y*y,c<u){for(y=d-1;0<=y;y--)if(t[y].y>g.y&&t[y].x-g.x<r+h.width)continue t;for(y=d+1;y<e;y++)if(t[y].x>g.x&&t[y].y-g.y<s+h.height)continue t;p=d,u=c}}return p}Ie.prototype.$t=function(){if(this.comments)for(var t=this.network.vertexes.iterator;t.next();)this.addComments(t.value)},Ie.prototype.addComments=function(t){var e=t.node;if(e!==null)for(e=e.ku();e.next();){var n=e.value;if(n.category==="Comment"&&n.isVisible()){var i=this.network.Yh(n);i===null&&(i=this.network.fl(n)),i.charge=this.defaultCommentElectricalCharge,n=null;for(var r=i.destinationEdges;r.next();){var s=r.value;if(s.toVertex===t){n=s;break}}if(n===null){for(r=i.sourceEdges;r.next();)if(s=r.value,s.fromVertex===t){n=s;break}}n===null&&(n=this.network.Ij(t,i,null)),n.length=this.defaultCommentSpringLength}}};function ty(t,e){var n=t.bounds,i=n.x;t=n.y;var r=n.width;n=n.height;var s=e.bounds,h=s.x;e=s.y;var u=s.width;return s=s.height,i+r<h?t>e+s?(n=i+r-h,t=t-e-s,O.sqrt(n*n+t*t)):t+n<e?(i=i+r-h,t=t+n-e,O.sqrt(i*i+t*t)):h-(i+r):i>h+u?t>e+s?(n=i-h-u,t=t-e-s,O.sqrt(n*n+t*t)):t+n<e?(i=i-h-u,t=t+n-e,O.sqrt(i*i+t*t)):i-(h+u):t>e+s?t-(e+s):t+n<e?e-(t+n):.1}function ey(t,e){for(t.Mg=null,e=t.Xm+e;t.Xm<e&&(t.Xm++,Bv(t)););t.Mg=null}function Bv(t){t.Mg===null&&(t.Mg=t.network.vertexes.Da());var e=t.Mg;if(0>=e.length)return!1;var n=e[0];n.forceX=0,n.forceY=0;for(var i=n.centerX,r=i,s=n=n.centerY,h=1;h<e.length;h++){var u=e[h];u.forceX=0,u.forceY=0;var p=u.centerX;u=u.centerY,i=Math.min(i,p),r=Math.max(r,p),n=Math.min(n,u),s=Math.max(s,u)}(r=r-i>s-n)?e.sort(function(L,N){return L===null||N===null||L===N?0:L.centerX-N.centerX}):e.sort(function(L,N){return L===null||N===null||L===N?0:L.centerY-N.centerY}),n=t.Mf;var d=i=u=0;for(s=0;s<e.length;s++){h=e[s],i=h.bounds,u=h.focus,p=i.x+u.x;var g=i.y+u.y;i=h.charge*t.electricalFieldX(p,g),d=h.charge*t.electricalFieldY(p,g),i+=h.mass*t.gravitationalFieldX(p,g),d+=h.mass*t.gravitationalFieldY(p,g),h.forceX+=i,h.forceY+=d;for(var c=s+1;c<e.length;c++){var y=e[c];if(y!==h){i=y.bounds,u=y.focus,d=i.x+u.x;var S=i.y+u.y;if(p-d>n||d-p>n){if(r)break}else if(g-S>n||S-g>n){if(!r)break}else{var v=ty(h,y);1>v?(i=t.randomNumberGenerator,i===null&&(t.randomNumberGenerator=i=new Zp),v=i.random(),u=i.random(),p>d?(i=Math.abs(y.bounds.right-h.bounds.x),i=(1+i)*v):p<d?(i=Math.abs(y.bounds.x-h.bounds.right),i=-(1+i)*v):(i=Math.max(y.width,h.width),i=(1+i)*v-i/2),g>S?(d=Math.abs(y.bounds.bottom-h.bounds.y),d=(1+d)*u):p<d?(d=Math.abs(y.bounds.y-h.bounds.bottom),d=-(1+d)*u):(d=Math.max(y.height,h.height),d=(1+d)*u-d/2)):(u=-(h.charge*y.charge)/(v*v),i=(d-p)/v*u,d=(S-g)/v*u),h.forceX+=i,h.forceY+=d,y.forceX-=i,y.forceY-=d}}}}for(r=t.network.edges.iterator;r.next();)u=r.value,n=u.fromVertex,s=u.toVertex,h=n.bounds,p=n.focus,i=h.x+p.x,h=h.y+p.y,g=s.bounds,c=s.focus,p=g.x+c.x,g=g.y+c.y,c=ty(n,s),1>c?(c=t.randomNumberGenerator,c===null&&(t.randomNumberGenerator=c=new Zp),u=c.random(),c=c.random(),i=(i>p?1:-1)*(1+(s.width>n.width?s.width:n.width))*u,d=(h>g?1:-1)*(1+(s.height>n.height?s.height:n.height))*c):(u=u.stiffness*(c-u.length),i=(p-i)/c*u,d=(g-h)/c*u),n.forceX+=i,n.forceY+=d,s.forceX-=i,s.forceY-=d;for(r=i=0;r<e.length;r++)n=e[r],t.isFixed(n)?t.moveFixedVertex(n):i=Math.max(i,t.moveVertex(n)||0);return i>t.epsilonDistance*t.epsilonDistance}Ie.prototype.moveVertex=function(t){var e=t.forceX,n=t.forceY,i=this.moveLimit;return e<-i?e=-i:e>i&&(e=i),n<-i?n=-i:n>i&&(n=i),t.centerX+=e,t.centerY+=n,e*e+n*n},Ie.prototype.moveFixedVertex=function(){},Ie.prototype.commitLayout=function(){this.Vu(),this.commitNodes(),this.isRouting&&this.commitLinks()},Ie.prototype.Vu=function(){if(this.setsPortSpots)for(var t=this.network.edges.iterator;t.next();){var e=t.value.link;e!==null&&(e.fromSpot=He,e.toSpot=He)}},Ie.prototype.commitNodes=function(){var t=0,e=0;if(this.arrangesToOrigin){var n=E.alloc();this.computeBounds(this.network,n),e=this.arrangementOrigin,t=e.x-n.x,e=e.y-n.y,E.free(n)}n=E.alloc();for(var i=this.network.vertexes.iterator;i.next();){var r=i.value;(t!==0||e!==0)&&(n.assign(r.bounds),n.x+=t,n.y+=e,r.bounds=n),r.commit()}E.free(n)},Ie.prototype.commitLinks=function(){for(var t=this.network.edges.iterator;t.next();)t.value.commit()},Ie.prototype.springStiffness=function(t){return t=t.stiffness,isNaN(t)?this.lk:t},Ie.prototype.springLength=function(t){return t=t.length,isNaN(t)?this.kk:t},Ie.prototype.electricalCharge=function(t){return t=t.charge,isNaN(t)?this.ik:t},Ie.prototype.electricalFieldX=function(){return 0},Ie.prototype.electricalFieldY=function(){return 0},Ie.prototype.gravitationalMass=function(t){return t=t.mass,isNaN(t)?this.jk:t},Ie.prototype.gravitationalFieldX=function(){return 0},Ie.prototype.gravitationalFieldY=function(){return 0},Ie.prototype.isFixed=function(t){return t.isFixed},Z.Object.defineProperties(Ie.prototype,{currentIteration:{get:function(){return this.Xm}},arrangementSpacing:{get:function(){return this.Pd},set:function(t){this.Pd.C(t)||(this.Pd.assign(t),this.D())}},arrangesToOrigin:{get:function(){return this.$l},set:function(t){this.$l!==t&&(this.$l=t,this.D())}},setsPortSpots:{get:function(){return this.cf},set:function(t){this.cf!==t&&(this.cf=t,this.D())}},comments:{get:function(){return this.ld},set:function(t){this.ld!==t&&(this.ld=t,this.D())}},maxIterations:{get:function(){return this.Kk},set:function(t){this.Kk!==t&&0<=t&&(this.Kk=t,this.D())}},epsilonDistance:{get:function(){return this.ym},set:function(t){this.ym!==t&&0<t&&(this.ym=t,this.D())}},infinityDistance:{get:function(){return this.Mf},set:function(t){this.Mf!==t&&1<t&&(this.Mf=t,this.D())}},moveLimit:{get:function(){return this.en},set:function(t){this.en!==t&&1<t&&(this.en=t,this.D())}},randomNumberGenerator:{get:function(){return this.An},set:function(t){this.An!==t&&(t!==null&&typeof t.random!="function"&&X('ForceDirectedLayout.randomNumberGenerator must have a "random()" function on it: '+t),this.An=t)}},defaultSpringStiffness:{get:function(){return this.lk},set:function(t){this.lk!==t&&(this.lk=t,this.D())}},defaultSpringLength:{get:function(){return this.kk},set:function(t){this.kk!==t&&(this.kk=t,this.D())}},defaultElectricalCharge:{get:function(){return this.ik},set:function(t){this.ik!==t&&(this.ik=t,this.D())}},defaultGravitationalMass:{get:function(){return this.jk},set:function(t){this.jk!==t&&(this.jk=t,this.D())}},defaultCommentSpringLength:{get:function(){return this.tm},set:function(t){this.tm!==t&&(this.tm=t,this.D())}},defaultCommentElectricalCharge:{get:function(){return this.sm},set:function(t){this.sm!==t&&(this.sm=t,this.D())}}}),Ie.className="ForceDirectedLayout";function ny(){this.nv=this.mv=this.js=this.ls=this.ks=0}ny.className="ForceDirectedSubnet";function ea(t){zt.call(this,t)}z(ea,zt),ea.prototype.createVertex=function(){return new Kl(this)},ea.prototype.createEdge=function(){return new Hl(this)},ea.className="ForceDirectedNetwork";function Kl(t){Te.call(this,t),this.ga=!1,this.Fa=this.u=NaN,this.bh=this.Jd=this.W=this.F=0,this.Ie=this.tj=null,this.Ru=0}z(Kl,Te),Z.Object.defineProperties(Kl.prototype,{isFixed:{get:function(){return this.ga},set:function(t){this.ga!==t&&(this.ga=t)}},charge:{get:function(){return this.u},set:function(t){this.u!==t&&(this.u=t)}},mass:{get:function(){return this.Fa},set:function(t){this.Fa!==t&&(this.Fa=t)}},forceX:{get:function(){return this.F},set:function(t){this.F!==t&&(this.F=t)}},forceY:{get:function(){return this.W},set:function(t){this.W!==t&&(this.W=t)}}}),Kl.className="ForceDirectedVertex";function Hl(t){Fn.call(this,t),this.j=this.m=NaN}z(Hl,Fn),Z.Object.defineProperties(Hl.prototype,{stiffness:{get:function(){return this.m},set:function(t){this.m!==t&&(this.m=t)}},length:{get:function(){return this.j},set:function(t){this.j!==t&&(this.j=t)}}}),Hl.className="ForceDirectedEdge";function Zp(){var t=0;this.seed=t,this.xx=48271,this.zx=2147483647,this.Q=44488.07041494893,this.Ax=3399,this.yx=1/2147483647,this.random()}Zp.prototype.random=function(){var t=this.seed%this.Q*this.xx-this.seed/this.Q*this.Ax;return 0<t?this.seed=t:this.seed=t+this.zx,this.seed*this.yx},Zp.className="RandomNumberGenerator";function It(t){Ut.call(this),this.fc=this.Yd=25,this.K=0,this.hk=bp,this.Fk=qp,this.wk=td,this.Qi=4,this.Wj=ed,this.Qf=15,this.cf=!0,this.Zm=4,this.Oa=this.aq=this.Ga=-1,this.zd=this.dn=0,this.Qa=this.xd=this.yd=this.Xd=this.pc=null,this.gn=0,this.fn=this.Zi=null,this.ae=0,this.hn=null,this.Ef=new T,this.te=[],this.te.length=100,t&&Object.assign(this,t)}z(It,Ut),It.prototype.cloneProtected=function(t){Ut.prototype.cloneProtected.call(this,t),t.Yd=this.Yd,t.fc=this.fc,t.K=this.K,t.hk=this.hk,t.Fk=this.Fk,t.wk=this.wk,t.Qi=this.Qi,t.Wj=this.Wj,t.Qf=this.Qf,t.cf=this.cf,t.Zm=this.Zm},It.prototype.ob=function(t){t.classType===It?t.name.indexOf("Aggressive")===0?this.aggressiveOption=t:t.name.indexOf("Cycle")===0?this.cycleRemoveOption=t:t.name.indexOf("Init")===0?this.initializeOption=t:t.name.indexOf("Layer")===0?this.layeringOption=t:X("Unknown enum value: "+t):Ut.prototype.ob.call(this,t)},It.prototype.createNetwork=function(){return new xh(this)},It.prototype.doLayout=function(t){for(this.network===null&&(this.network=this.makeNetwork(t)),this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin),this.aq=-1,this.zd=this.dn=0,this.hn=this.fn=this.Zi=null,t=0;t<this.te.length;t++)this.te[t]=null;if(0<this.network.vertexes.count){for(this.network.eo(),this.cycleRemoveOption!==Jl&&this.removeCycles(),t=this.network.vertexes.iterator;t.next();)t.value.layer=-1;for(this.Ga=-1,this.assignLayers(),t.reset();t.next();)this.Ga=Math.max(this.Ga,t.value.layer);this.cycleRemoveOption===Jl&&this.removeCycles(),t=this.network;for(var e=[],n=t.edges.iterator;n.next();){var i=n.value;i.valid=!1,e.push(i)}for(n=0;n<e.length;n++){i=e[n];var r=i.fromVertex,s=i.toVertex;if(!(i.valid||(r.node===null&&r.data===null||s.node===null&&s.data===null)&&r.layer===s.layer)){var h=0,u=0,p=0,d=0;if(i.link!==null){if(u=i.link,u===null)continue;var g=r.node;if(h=s.node,g===null||h===null)continue;var c=u.fromNode;p=u.toNode;var y=u.fromPort;if(u=u.toPort,i.rev){d=c;var S=y;c=p,y=u,p=d,u=S}var v=r.focus;d=s.focus;var L=i.rev?s.bounds:r.bounds;S=T.alloc(),g!==c?L.w()&&c.isVisible()?c.actualBounds.w()?(or(c,y,Dt,S),S.x+=c.actualBounds.x-L.x,S.y+=c.actualBounds.y-L.y):(or(c,y,Dt,S),S.w()||S.assign(v)):S.assign(v):L.w()?(or(c,y,Dt,S),S.w()||S.assign(v)):S.assign(v),c=i.rev?r.bounds:s.bounds,g=T.alloc(),h!==p?c.w()&&p.isVisible()?p.actualBounds.w()?(or(p,u,Dt,g),g.x+=p.actualBounds.x-c.x,g.y+=p.actualBounds.y-c.y):(or(p,u,Dt,g),g.w()||g.assign(d)):g.assign(d):c.w()?(or(p,u,Dt,g),g.w()||g.assign(d)):g.assign(d),this.K===90||this.K===270?(h=Math.round((S.x-v.x)/this.fc),p=S.x,u=Math.round((g.x-d.x)/this.fc),d=g.x):(h=Math.round((S.y-v.y)/this.fc),p=S.y,u=Math.round((g.y-d.y)/this.fc),d=g.y),T.free(S),T.free(g),i.portFromColOffset=h,i.portFromPos=p,i.portToColOffset=u,i.portToPos=d}else i.portFromColOffset=0,i.portFromPos=0,i.portToColOffset=0,i.portToPos=0;if(S=r.layer,g=s.layer,c=0,L=i.link,L!==null){var N=L.fromPort,M=L.toPort;if(N!==null&&M!==null){var B=L.fromNode;if(y=L.toNode,B!==null&&y!==null){var F=Qp(this,!0),j=Qp(this,!1),D=this.setsPortSpots?F:L.computeSpot(!0,N);v=this.setsPortSpots?j:L.computeSpot(!1,M);var R=L.isOrthogonal;D.Sc()&&D.tf(j)&&v.Sc()&&v.tf(F)?c=0:(F=L.getLinkPoint(B,N,D,!0,R,y,M,T.alloc()),j=L.getLinkDirection(B,N,F,D,!0,R,y,M),T.free(F),D.Or()||j!==py(this,i,!0)?this.setsPortSpots&&B!==null&&B.ports.count===1&&i.rev&&(c+=1):c+=1,D=L.getLinkPoint(y,M,v,!1,R,B,N,T.alloc()),L=L.getLinkDirection(y,M,D,v,!1,R,B,N),T.free(D),v.Or()||L!==py(this,i,!1)?this.setsPortSpots&&y!==null&&y.ports.count===1&&i.rev&&(c+=2):c+=2)}}}if(y=c,c=y===1||y===3,(y=y===2||y===3)&&(v=t.createVertex(),v.node=null,v.qj=1,v.layer=S,v.near=r,t.Pg(v),r=t.Ij(r,v,i.link),r.valid=!1,r.rev=i.rev,r.portFromColOffset=h,r.portToColOffset=0,r.portFromPos=p,r.portToPos=0,r=v),L=1,c&&L--,S-g>L&&0<S){for(i.valid=!1,v=t.createVertex(),v.node=null,v.qj=2,v.layer=S-1,t.Pg(v),r=t.Ij(r,v,i.link),r.valid=!0,r.rev=i.rev,r.portFromColOffset=y?0:h,r.portToColOffset=0,r.portFromPos=y?0:p,r.portToPos=0,r=v,S--;S-g>L&&0<S;)v=t.createVertex(),v.node=null,v.qj=3,v.layer=S-1,t.Pg(v),r=t.Ij(r,v,i.link),r.valid=!0,r.rev=i.rev,r.portFromColOffset=0,r.portToColOffset=0,r.portFromPos=0,r.portToPos=0,r=v,S--;r=t.Ij(v,s,i.link),r.valid=!c,c&&(v.near=s),r.rev=i.rev,r.portFromColOffset=0,r.portToColOffset=u,r.portFromPos=0,r.portToPos=d}else i.valid=!0}}for(t=this.pc=[],e=0;e<=this.Ga;e++)t[e]=0;for(e=this.network.vertexes.iterator;e.next();)e.value.index=-1;for(this.initializeIndices(),this.aq=-1,n=this.zd=this.dn=0;n<=this.Ga;n++)t[n]>t[this.zd]&&(this.aq=t[n]-1,this.zd=n),t[n]<t[this.dn]&&(this.dn=n);for(this.hn=[],n=0;n<t.length;n++)this.hn[n]=[];for(e.reset();e.next();)t=e.value,this.hn[t.layer][t.index]=t;for(this.Oa=-1,t=0;t<=this.Ga;t++){for(e=Ur(this,t),n=0,i=this.pc[t],s=0;s<i;s++)r=e[s],n+=this.nodeMinColumnSpace(r,!0),r.column=n,n+=1,n+=this.nodeMinColumnSpace(r,!1);this.Oa=Math.max(this.Oa,n-1),Kr(this,t,e)}this.reduceCrossings(),this.straightenAndPack(),this.updateParts()}this.network=null,this.isValidLayout=!0},It.prototype.linkMinLength=function(){return 1};function $g(t){var e=t.fromVertex.node||t.fromVertex.data;return t=t.toVertex.node||t.toVertex.data,e===null&&t===null?8:e===null||t===null?4:1}It.prototype.nodeMinLayerSpace=function(t,e){return t.node===null&&t.data===null?0:this.K===90||this.K===270?e?t.focus.y+10:t.bounds.height-t.focus.y+10:e?t.focus.x+10:t.bounds.width-t.focus.x+10},It.prototype.nodeMinColumnSpace=function(t,e){if(t.node===null&&t.data===null)return 0;var n=e?t.Fu:t.Eu;return n!==null?n:(n=this.K,n===90||n===270?e?t.Fu=t.focus.x/this.fc+1|0:t.Eu=(t.bounds.width-t.focus.x)/this.fc+1|0:e?t.Fu=t.focus.y/this.fc+1|0:t.Eu=(t.bounds.height-t.focus.y)/this.fc+1|0)};function xn(t){t.Zi===null&&(t.Zi=[]);for(var e=0,n=t.network.vertexes.iterator;n.next();){var i=n.value;t.Zi[e]=i.layer,e++,t.Zi[e]=i.column,e++,t.Zi[e]=i.index,e++}return t.Zi}function ni(t,e){var n=0;for(t=t.network.vertexes.iterator;t.next();){var i=t.value;i.layer=e[n],n++,i.column=e[n],n++,i.index=e[n],n++}}function iy(t,e,n){var i=Ur(t,e),r=t.pc[e];(t.fn===null||t.fn.length<r*r)&&(t.fn=[]);for(var s=t.fn,h=0;h<r;h++){var u=0,p=i[h],d=p.near;if(d!==null&&d.layer===p.layer)if(p=d.index,p>h)for(var g=h+1;g<p;g++){var c=i[g];c.near===d&&c.qj===d.qj||u++}else for(g=h-1;g>p;g--)c=i[g],c.near===d&&c.qj===d.qj||u++;var y;if(0<=n)for(p=i[h].sourceEdgesArrayAccess,d=0;d<p.length;d++){var S=p[d];if(S.valid&&S.fromVertex.layer!==e)for(c=S.fromVertex.index,g=S.portToPos,S=S.portFromPos,y=d+1;y<p.length;y++){var v=p[y];if(v.valid&&v.fromVertex.layer!==e){var L=v.fromVertex.index,N=v.portToPos;v=v.portFromPos,g<N&&(c>L||c===L&&S>v)&&u++,N<g&&(L>c||L===c&&v>S)&&u++}}}if(0>=n){for(p=i[h].destinationEdgesArrayAccess,d=0;d<p.length;d++)if(S=p[d],S.valid&&S.toVertex.layer!==e)for(c=S.toVertex.index,g=S.portToPos,S=S.portFromPos,y=d+1;y<p.length;y++)v=p[y],v.valid&&v.toVertex.layer!==e&&(L=v.toVertex.index,N=v.portToPos,v=v.portFromPos,S<v&&(c>L||c===L&&g>N)&&u++,v<S&&(L>c||L===c&&N>g)&&u++)}for(s[h*r+h]=u,p=h+1;p<r;p++){var M=0,B=0;if(0<=n){u=i[h].sourceEdgesArrayAccess;var F=i[p].sourceEdgesArrayAccess;for(d=0;d<u.length;d++)if(S=u[d],S.valid&&S.fromVertex.layer!==e)for(c=S.fromVertex.index,S=S.portFromPos,y=0;y<F.length;y++)v=F[y],v.valid&&v.fromVertex.layer!==e&&(L=v.fromVertex.index,v=v.portFromPos,(c<L||c===L&&S<v)&&B++,(L<c||L===c&&v<S)&&M++)}if(0>=n){for(u=i[h].destinationEdgesArrayAccess,F=i[p].destinationEdgesArrayAccess,d=0;d<u.length;d++)if(S=u[d],S.valid&&S.toVertex.layer!==e)for(c=S.toVertex.index,g=S.portToPos,y=0;y<F.length;y++)v=F[y],v.valid&&v.toVertex.layer!==e&&(L=v.toVertex.index,N=v.portToPos,(c<L||c===L&&g<N)&&B++,(L<c||L===c&&N<g)&&M++)}s[h*r+p]=M,s[p*r+h]=B}}return Kr(t,e,i),s}It.prototype.countCrossings=function(){for(var t=0,e=0;e<=this.Ga;e++)for(var n=iy(this,e,1),i=this.pc[e],r=0;r<i;r++)for(var s=r;s<i;s++)t+=n[r*i+s];return t};function _p(t){for(var e=0,n=0;n<=t.Ga;n++){for(var i=t,r=n,s=Ur(i,r),h=i.pc[r],u=0,p=0;p<h;p++){var d=s[p].destinationEdgesArrayAccess;if(d!==null)for(var g=0;g<d.length;g++){var c=d[g];if(c.valid&&c.toVertex.layer!==r){var y=c.fromVertex.column+c.portFromColOffset,S=c.toVertex.column+c.portToColOffset;u+=(Math.abs(y-S)+1)*$g(c)}}}Kr(i,r,s),e+=u}return e}It.prototype.normalize=function(){var t=1/0;this.Oa=-1;for(var e=this.network.vertexes.iterator;e.next();){var n=e.value;t=Math.min(t,n.column-this.nodeMinColumnSpace(n,!0)),this.Oa=Math.max(this.Oa,n.column+this.nodeMinColumnSpace(n,!1))}for(e.reset();e.next();)e.value.column-=t;this.Oa-=t};function Qg(t,e,n){for(var i=Ur(t,e),r=t.pc[e],s=[],h=0;h<r;h++){var u=i[h],p=null;0>=n&&(p=u.sourceEdgesArrayAccess);var d=null;0<=n&&(d=u.destinationEdgesArrayAccess);var g=0,c=0,y=u.near;if(y!==null&&y.layer===u.layer&&(g+=y.column-1,c++),p!==null)for(y=0;y<p.length;y++){u=p[y];var S=u.fromVertex;u.valid&&!u.rev&&S.layer!==e&&(g+=S.column,c++)}if(d!==null)for(p=0;p<d.length;p++)u=d[p],y=u.toVertex,u.valid&&!u.rev&&y.layer!==e&&(g+=y.column,c++);s[h]=c===0?-1:g/c}return Kr(t,e,i),s}function oy(t,e,n){for(var i=Ur(t,e),r=t.pc[e],s=[],h=0;h<r;h++){var u=i[h],p=null;0>=n&&(p=u.sourceEdgesArrayAccess);var d=null;0<=n&&(d=u.destinationEdgesArrayAccess);var g=0,c=[],y=u.near;if(y!==null&&y.layer===u.layer&&(c[g]=y.column-1,g++),u=void 0,p!==null)for(y=0;y<p.length;y++){u=p[y];var S=u.fromVertex;u.valid&&!u.rev&&S.layer!==e&&(c[g]=S.column+u.portFromColOffset,g++)}if(d!==null)for(p=0;p<d.length;p++)u=d[p],y=u.toVertex,u.valid&&!u.rev&&y.layer!==e&&(c[g]=y.column+u.portToColOffset,g++);g===0?s[h]=-1:(c.sort(function(v,L){return v-L}),d=g>>1,s[h]=(g&1)!==0?c[d]:c[d-1]+c[d]>>1)}return Kr(t,e,i),s}function Wl(t,e,n,i,r,s){if(e.component===i){if(e.component=n,r)for(var h=e.destinationEdges;h.next();){var u=h.value,p=u.toVertex,d=e.layer-p.layer;u=t.linkMinLength(u),d===u&&Wl(t,p,n,i,r,s)}if(s)for(h=e.sourceEdges;h.next();)u=h.value,p=u.fromVertex,d=p.layer-e.layer,u=t.linkMinLength(u),d===u&&Wl(t,p,n,i,r,s)}}function bg(t,e,n,i,r,s){if(e.component===i){if(e.component=n,r)for(var h=e.destinationEdges;h.next();)bg(t,h.value.toVertex,n,i,r,s);if(s)for(e=e.sourceEdges;e.next();)bg(t,e.value.fromVertex,n,i,r,s)}}It.prototype.removeCycles=function(){for(var t=this.network.edges.iterator;t.next();)t.value.rev=!1;switch(this.hk){default:case ec:t=this.network;var e=0,n=t.vertexes.count-1,i=[];i.length=n+1;for(var r=t.vertexes.iterator;r.next();)r.value.valid=!0;for(;jv(t)!==null;){for(r=ry(t);r!==null;)i[n]=r,n--,r.valid=!1,r=ry(t);for(r=sy(t);r!==null;)i[e]=r,e++,r.valid=!1,r=sy(t);r=null;for(var s=0,h=this.network.vertexes.iterator;h.next();){var u=h.value;if(u.valid){for(var p=0,d=u.destinationEdges;d.next();)d.value.toVertex.valid&&p++;d=0;for(var g=u.sourceEdges;g.next();)g.value.fromVertex.valid&&d++;(r===null||s<p-d)&&(r=u,s=p-d)}}r!==null&&(i[e]=r,e++,r.valid=!1)}for(e=0;e<t.vertexes.count;e++)i[e].index=e;for(i=t.edges.iterator;i.next();)e=i.value,e.fromVertex.index>e.toVertex.index&&(t.Fl(e),e.rev=!0);break;case bp:for(i=this.network.vertexes.iterator;i.next();)t=i.value,t.kl=-1,t.finish=-1;for(t=this.network.edges.iterator;t.next();)t.value.forest=!1;for(this.gn=0,i.reset();i.next();)e=i.value,e.sourceEdges.count===0&&qg(this,e);for(i.reset();i.next();)e=i.value,e.kl===-1&&qg(this,e);for(t.reset();t.next();)i=t.value,i.forest||(e=i.fromVertex,n=e.finish,r=i.toVertex,s=r.finish,r.kl<e.kl&&n<s&&(this.network.Fl(i),i.rev=!0));break;case Jl:for(t=this.network,e=t.vertexes.iterator,i=1/0;e.next();)i=Math.min(i,e.value.layer);if(1/0>i){if(0>i)for(e.reset();e.next();)e.value.layer-=i;for(i=[],e.reset();e.next();)n=e.value,r=i[n.layer],r===void 0?i[n.layer]=[n]:r.push(n);for(n=e=0;n<i.length;n++)if(r=i[n],!r||r.length===0)e++;else if(0<n)for(s=0;s<r.length;s++)r[s].layer-=e;for(i=t.edges.iterator;i.next();)e=i.value,e.fromVertex.layer<e.toVertex.layer&&(t.Fl(e),e.rev=!0)}}};function jv(t){for(t=t.vertexes.iterator;t.next();){var e=t.value;if(e.valid)return e}return null}function ry(t){for(t=t.vertexes.iterator;t.next();){var e=t.value;if(e.valid){for(var n=!0,i=e.destinationEdges;i.next();)if(i.value.toVertex.valid){n=!1;break}if(n)return e}}return null}function sy(t){for(t=t.vertexes.iterator;t.next();){var e=t.value;if(e.valid){for(var n=!0,i=e.sourceEdges;i.next();)if(i.value.fromVertex.valid){n=!1;break}if(n)return e}}return null}function qg(t,e){e.kl=t.gn,t.gn++;for(var n=e.destinationEdges;n.next();){var i=n.value,r=i.toVertex;r.kl===-1&&(i.forest=!0,qg(t,r))}e.finish=t.gn,t.gn++}It.prototype.assignLayers=function(){switch(this.Fk){case nc:ay(this);break;case ic:for(var t,e=this.network.vertexes.iterator;e.next();)t=ly(this,e.value),this.Ga=Math.max(t,this.Ga);for(e.reset();e.next();)t=e.value,t.layer=this.Ga-t.layer;break;default:case qp:for(ay(this),e=this.network.vertexes.iterator;e.next();)e.value.valid=!1;for(e.reset();e.next();)t=e.value,t.sourceEdges.count===0&&uy(this,t);for(t=1/0,e.reset();e.next();)t=Math.min(t,e.value.layer);for(this.Ga=-1,e.reset();e.next();){var n=e.value;n.layer-=t,this.Ga=Math.max(this.Ga,n.layer)}}};function ay(t){for(var e=t.network.vertexes.iterator;e.next();){var n=hy(t,e.value);t.Ga=Math.max(n,t.Ga)}}function hy(t,e){var n=0;if(e.layer===-1){for(var i=e.destinationEdges;i.next();){var r=i.value,s=r.toVertex;r=t.linkMinLength(r),n=Math.max(n,hy(t,s)+r)}e.layer=n}else n=e.layer;return n}function ly(t,e){var n=0;if(e.layer===-1){for(var i=e.sourceEdges;i.next();){var r=i.value,s=r.fromVertex;r=t.linkMinLength(r),n=Math.max(n,ly(t,s)+r)}e.layer=n}else n=e.layer;return n}function uy(t,e){if(!e.valid){e.valid=!0;for(var n=e.destinationEdges;n.next();)uy(t,n.value.toVertex);for(n=t.network.vertexes.iterator;n.next();)n.value.component=-1;for(var i=e.sourceEdgesArrayAccess,r=i.length,s=0;s<r;s++){var h=i[s],u=h.fromVertex,p=h.toVertex;h=t.linkMinLength(h),u.layer-p.layer>h&&Wl(t,u,0,-1,!0,!1)}for(Wl(t,e,1,-1,!0,!0);e.component!==0;){for(s=0,i=1/0,u=0,p=null,h=t.network.vertexes.iterator;h.next();){var d=h.value;if(d.component===1){var g=0,c=!1,y=d.sourceEdgesArrayAccess;r=y.length;for(var S=0;S<r;S++){var v=y[S],L=v.fromVertex;g+=1,L.component!==1&&(s+=1,L=L.layer-d.layer,v=t.linkMinLength(v),i=Math.min(i,L-v))}for(y=d.destinationEdgesArrayAccess,r=y.length,S=0;S<r;S++)v=y[S].toVertex,--g,v.component!==1?--s:c=!0;(p===null||g<u)&&!c&&(p=d,u=g)}}if(0<s){for(n.reset();n.next();)r=n.value,r.component===1&&(r.layer+=i);e.component=0}else p.component=0}for(n=t.network.vertexes.iterator;n.next();)n.value.component=-1;for(Wl(t,e,1,-1,!0,!1);e.component!==0;){for(i=0,r=1/0,s=0,u=null,p=t.network.vertexes.iterator;p.next();)if(h=p.value,h.component===1){for(d=0,g=!1,y=h.sourceEdgesArrayAccess,c=y.length,S=0;S<c;S++)v=y[S].fromVertex,d+=1,v.component!==1?i+=1:g=!0;for(y=h.destinationEdgesArrayAccess,c=y.length,S=0;S<c;S++)v=y[S],L=v.toVertex,--d,L.component!==1&&(--i,L=h.layer-L.layer,v=t.linkMinLength(v),r=Math.min(r,L-v));(u===null||d>s)&&!g&&(u=h,s=d)}if(0>i){for(n.reset();n.next();)i=n.value,i.component===1&&(i.layer-=r);e.component=0}else u.component=0}}}function py(t,e,n){return t.K===90?n&&!e.rev||!n&&e.rev?270:90:t.K===180?n&&!e.rev||!n&&e.rev?0:180:t.K===270?n&&!e.rev||!n&&e.rev?90:270:n&&!e.rev||!n&&e.rev?180:0}It.prototype.initializeIndices=function(){switch(this.wk){default:case rc:for(var t=this.network.vertexes.iterator;t.next();){var e=t.value,n=e.layer;e.index=this.pc[n],this.pc[n]++}break;case td:for(t=this.network.vertexes.iterator,e=this.Ga;0<=e;e--)for(t.reset();t.next();)n=t.value,n.layer===e&&n.index===-1&&dy(this,n);break;case oc:for(t=this.network.vertexes.iterator,e=0;e<=this.Ga;e++)for(t.reset();t.next();)n=t.value,n.layer===e&&n.index===-1&&fy(this,n)}};function dy(t,e){var n=e.layer;for(e.index=t.pc[n],t.pc[n]++,e=e.destinationEdgesArrayAccess,n=!0;n;){n=!1;for(var i=0;i<e.length-1;i++){var r=e[i],s=e[i+1];r.portFromColOffset>s.portFromColOffset&&(n=!0,e[i]=s,e[i+1]=r)}}for(n=0;n<e.length;n++)i=e[n],i.valid&&(i=i.toVertex,i.index===-1&&dy(t,i))}function fy(t,e){var n=e.layer;e.index=t.pc[n],t.pc[n]++,e=e.sourceEdgesArrayAccess;for(var i=!0;i;)for(i=!1,n=0;n<e.length-1;n++){var r=e[n],s=e[n+1];r.portToColOffset>s.portToColOffset&&(i=!0,e[n]=s,e[n+1]=r)}for(n=0;n<e.length;n++)i=e[n],i.valid&&(i=i.fromVertex,i.index===-1&&fy(t,i))}It.prototype.reduceCrossings=function(){var t=this.countCrossings(),e=xn(this),n,i;for(n=0;n<this.Qi;n++){for(i=0;i<=this.Ga;i++)$p(this,i,1),pi(this,i,1);var r=this.countCrossings();for(r<t&&(t=r,e=xn(this)),i=this.Ga;0<=i;i--)$p(this,i,-1),pi(this,i,-1);r=this.countCrossings(),r<t&&(t=r,e=xn(this))}for(ni(this,e),n=0;n<this.Qi;n++){for(i=0;i<=this.Ga;i++)$p(this,i,0),pi(this,i,0);for(r=this.countCrossings(),r<t&&(t=r,e=xn(this)),i=this.Ga;0<=i;i--)$p(this,i,0),pi(this,i,0);r=this.countCrossings(),r<t&&(t=r,e=xn(this))}ni(this,e);var s,h,u;switch(this.Wj){case sc:break;case ac:for(u=t+1;(i=this.countCrossings())<u;)for(u=i,n=this.Ga;0<=n;n--)for(h=0;h<=n;h++){for(s=!0;s;)for(s=!1,i=n;i>=h;i--)s=pi(this,i,-1)||s;for(r=this.countCrossings(),r>=t?ni(this,e):(t=r,e=xn(this)),s=!0;s;)for(s=!1,i=n;i>=h;i--)s=pi(this,i,1)||s;for(r=this.countCrossings(),r>=t?ni(this,e):(t=r,e=xn(this)),s=!0;s;)for(s=!1,i=h;i<=n;i++)s=pi(this,i,1)||s;for(r>=t?ni(this,e):(t=r,e=xn(this)),s=!0;s;)for(s=!1,i=h;i<=n;i++)s=pi(this,i,-1)||s;for(r>=t?ni(this,e):(t=r,e=xn(this)),s=!0;s;)for(s=!1,i=n;i>=h;i--)s=pi(this,i,0)||s;for(r>=t?ni(this,e):(t=r,e=xn(this)),s=!0;s;)for(s=!1,i=h;i<=n;i++)s=pi(this,i,0)||s;r>=t?ni(this,e):(t=r,e=xn(this))}break;default:case ed:for(n=this.Ga,h=0,u=t+1;(i=this.countCrossings())<u;){for(u=i,s=!0;s;)for(s=!1,i=n;i>=h;i--)s=pi(this,i,-1)||s;for(r=this.countCrossings(),r>=t?ni(this,e):(t=r,e=xn(this)),s=!0;s;)for(s=!1,i=n;i>=h;i--)s=pi(this,i,1)||s;for(r=this.countCrossings(),r>=t?ni(this,e):(t=r,e=xn(this)),s=!0;s;)for(s=!1,i=h;i<=n;i++)s=pi(this,i,1)||s;for(r>=t?ni(this,e):(t=r,e=xn(this)),s=!0;s;)for(s=!1,i=h;i<=n;i++)s=pi(this,i,-1)||s;for(r>=t?ni(this,e):(t=r,e=xn(this)),s=!0;s;)for(s=!1,i=n;i>=h;i--)s=pi(this,i,0)||s;for(r>=t?ni(this,e):(t=r,e=xn(this)),s=!0;s;)for(s=!1,i=h;i<=n;i++)s=pi(this,i,0)||s;r>=t?ni(this,e):(t=r,e=xn(this))}}ni(this,e)};function $p(t,e,n){var i=Ur(t,e),r=t.pc[e],s=oy(t,e,n),h=Qg(t,e,n);for(n=0;n<r;n++)h[n]===-1&&(h[n]=i[n].column),s[n]===-1&&(s[n]=i[n].column);for(var u=!0,p;u;)for(u=!1,n=0;n<r-1;n++)(s[n+1]<s[n]||s[n+1]===s[n]&&h[n+1]<h[n])&&(u=!0,p=s[n],s[n]=s[n+1],s[n+1]=p,p=h[n],h[n]=h[n+1],h[n+1]=p,p=i[n],i[n]=i[n+1],i[n+1]=p);for(n=s=0;n<r;n++)p=i[n],p.index=n,s+=t.nodeMinColumnSpace(p,!0),p.column=s,s+=1,s+=t.nodeMinColumnSpace(p,!1);Kr(t,e,i)}function pi(t,e,n){var i=Ur(t,e),r=t.pc[e];n=iy(t,e,n);var s,h=[];for(s=0;s<r;s++)h[s]=-1;var u=[];for(s=0;s<r;s++)u[s]=-1;for(var p=!1,d=!0;d;)for(d=!1,s=0;s<r-1;s++){var g=n[i[s].index*r+i[s+1].index],c=n[i[s+1].index*r+i[s].index],y=0,S=0,v=i[s].column,L=i[s+1].column,N=t.nodeMinColumnSpace(i[s],!0),M=t.nodeMinColumnSpace(i[s],!1),B=t.nodeMinColumnSpace(i[s+1],!0),F=t.nodeMinColumnSpace(i[s+1],!1);N=v-N+B,M=L-M+F;var j=i[s].sourceEdges.iterator;for(j.reset();j.next();)if(B=j.value,F=B.fromVertex,B.valid&&F.layer===e){for(B=0;i[B]!==F;)B++;B<s&&(y+=2*(s-B),S+=2*(s+1-B)),B===s+1&&(y+=1),B>s+1&&(y+=4*(B-s),S+=4*(B-(s+1)))}for(j=i[s].destinationEdges.iterator,j.reset();j.next();)if(B=j.value,F=B.toVertex,B.valid&&F.layer===e){for(B=0;i[B]!==F;)B++;B===s+1&&(S+=1)}for(j=i[s+1].sourceEdges.iterator,j.reset();j.next();)if(B=j.value,F=B.fromVertex,B.valid&&F.layer===e){for(B=0;i[B]!==F;)B++;B<s&&(y+=2*(s+1-B),S+=2*(s-B)),B===s&&(S+=1),B>s+1&&(y+=4*(B-(s+1)),S+=4*(B-s))}for(j=i[s+1].destinationEdges.iterator,j.reset();j.next();)if(B=j.value,F=B.toVertex,B.valid&&F.layer===e){for(B=0;i[B]!==F;)B++;B===s&&(y+=1)}B=F=0,j=h[i[s].index];var D=u[i[s].index],R=h[i[s+1].index],W=u[i[s+1].index];j!==-1&&(F+=Math.abs(j-v),B+=Math.abs(j-M)),D!==-1&&(F+=Math.abs(D-v),B+=Math.abs(D-M)),R!==-1&&(F+=Math.abs(R-L),B+=Math.abs(R-N)),W!==-1&&(F+=Math.abs(W-L),B+=Math.abs(W-N)),(S<y-.5||S===y&&c<g-.5||S===y&&c===g&&B<F-.5)&&(d=p=!0,i[s].column=M,i[s+1].column=N,g=i[s],i[s]=i[s+1],i[s+1]=g)}for(s=0;s<r;s++)i[s].index=s;return Kr(t,e,i),p}It.prototype.straightenAndPack=function(){var t=(this.Qf&1)!==0,e=(this.Qf&Iv)!==0;if(1e3<this.network.edges.count&&e&&(t=!1),t){var n=[];for(e=0;e<=this.Ga;e++)n[e]=0;for(var i,r=this.network.vertexes.iterator;r.next();){var s=r.value;e=s.layer,i=s.column,s=this.nodeMinColumnSpace(s,!1),n[e]=Math.max(n[e],i+s)}for(r.reset();r.next();)s=r.value,e=s.layer,i=s.column,s.column=(8*(this.Oa-n[e])>>1)+8*i;this.Oa*=8}if((this.Qf&2)!==0)for(n=!0;n;){for(n=!1,e=this.zd+1;e<=this.Ga;e++)n=mh(this,e,1)||n;for(e=this.zd-1;0<=e;e--)n=mh(this,e,-1)||n;n=mh(this,this.zd,0)||n}if((this.Qf&4)!==0){for(e=this.zd+1;e<=this.Ga;e++)tc(this,e,1);for(e=this.zd-1;0<=e;e--)tc(this,e,-1);tc(this,this.zd,0)}if(t&&(gy(this,-1),gy(this,1)),(this.Qf&2)!==0)for(n=!0;n;){for(n=!1,n=mh(this,this.zd,0)||n,e=this.zd+1;e<=this.Ga;e++)n=mh(this,e,0)||n;for(e=this.zd-1;0<=e;e--)n=mh(this,e,0)||n}};function mh(t,e,n){for(var i=!1;Dv(t,e,n);)i=!0;return i}function Dv(t,e,n){var i,r=Ur(t,e),s=t.pc[e],h=Qg(t,e,-1);if(0<n)for(i=0;i<s;i++)h[i]=-1;var u=Qg(t,e,1);if(0>n)for(i=0;i<s;i++)u[i]=-1;for(var p=!1,d=!0;d;)for(d=!1,i=0;i<s;i++){var g=r[i].column,c=t.nodeMinColumnSpace(r[i],!0),y=t.nodeMinColumnSpace(r[i],!1),S=0;0>i-1||g-r[i-1].column-1>c+t.nodeMinColumnSpace(r[i-1],!1)?S=g-1:S=g,c=i+1>=s||r[i+1].column-g-1>y+t.nodeMinColumnSpace(r[i+1],!0)?g+1:g;var v=y=0,L=0;if(0>=n)for(var N=r[i].sourceEdges.iterator;N.next();){var M=N.value,B=M.fromVertex;if(M.valid&&B.layer!==e){var F=$g(M),j=M.portFromColOffset;M=M.portToColOffset,B=B.column,y+=(Math.abs(g+M-(B+j))+1)*F,v+=(Math.abs(S+M-(B+j))+1)*F,L+=(Math.abs(c+M-(B+j))+1)*F}}if(0<=n)for(N=r[i].destinationEdges.iterator;N.next();)M=N.value,B=M.toVertex,M.valid&&B.layer!==e&&(F=$g(M),j=M.portFromColOffset,M=M.portToColOffset,B=B.column,y+=(Math.abs(g+j-(B+M))+1)*F,v+=(Math.abs(S+j-(B+M))+1)*F,L+=(Math.abs(c+j-(B+M))+1)*F);M=j=F=0,N=h[r[i].index],B=u[r[i].index],N!==-1&&(F+=Math.abs(N-g),j+=Math.abs(N-S),M+=Math.abs(N-c)),B!==-1&&(F+=Math.abs(B-g),j+=Math.abs(B-S),M+=Math.abs(B-c)),v<y||v===y&&j<F?(d=p=!0,r[i].column=S):(L<y||L===y&&M<F)&&(d=p=!0,r[i].column=c)}return Kr(t,e,r),t.normalize(),p}function tc(t,e,n){var i=Ur(t,e),r=t.pc[e],s=oy(t,e,n),h=[];for(n=0;n<r;n++)h[n]=s[n];for(s=!0;s;)for(s=!1,n=0;n<r;n++){var u=i[n].column,p=t.nodeMinColumnSpace(i[n],!0),d=t.nodeMinColumnSpace(i[n],!1),g=0;if(h[n]===-1)if(n===0&&n===r-1)g=u;else if(n===0){var c=i[n+1].column;c-u===d+t.nodeMinColumnSpace(i[n+1],!0)?g=u-1:g=u}else n===r-1?(c=i[n-1].column,g=u-c===p+t.nodeMinColumnSpace(i[n-1],!1)?u+1:u):(c=i[n-1].column,p=c+t.nodeMinColumnSpace(i[n-1],!1)+p+1,c=i[n+1].column,d=c-t.nodeMinColumnSpace(i[n+1],!0)-d-1,g=(p+d)/2|0);else n===0&&n===r-1?g=h[n]:n===0?(c=i[n+1].column,d=c-t.nodeMinColumnSpace(i[n+1],!0)-d-1,g=Math.min(h[n],d)):n===r-1?(c=i[n-1].column,p=c+t.nodeMinColumnSpace(i[n-1],!1)+p+1,g=Math.max(h[n],p)):(c=i[n-1].column,p=c+t.nodeMinColumnSpace(i[n-1],!1)+p+1,c=i[n+1].column,d=c-t.nodeMinColumnSpace(i[n+1],!0)-d-1,p<h[n]&&h[n]<d?g=h[n]:p>=h[n]?g=p:d<=h[n]&&(g=d));g!==u&&(s=!0,i[n].column=g)}Kr(t,e,i),t.normalize()}function Gv(t,e){for(var n=!0,i=t.network.vertexes.iterator;i.next();){var r=i.value,s=t.nodeMinColumnSpace(r,!0),h=t.nodeMinColumnSpace(r,!1);if(r.column-s<=e&&r.column+h>=e){n=!1;break}}if(t=!1,n)for(i.reset();i.next();)n=i.value,n.column>e&&(--n.column,t=!0);return t}function Ov(t,e){var n=e+1,i,r=[],s=[];for(i=0;i<=t.Ga;i++)r[i]=!1,s[i]=!1;for(var h=t.network.vertexes.iterator;h.next();){i=h.value;var u=i.column-t.nodeMinColumnSpace(i,!0),p=i.column+t.nodeMinColumnSpace(i,!1);u<=e&&p>=e&&(r[i.layer]=!0),u<=n&&p>=n&&(s[i.layer]=!0)}for(u=!0,n=!1,i=0;i<=t.Ga;i++)u=u&&!(r[i]&&s[i]);if(u)for(h.reset();h.next();)t=h.value,t.column>e&&(--t.column,n=!0);return n}function gy(t,e){for(var n=0;n<=t.Oa;n++)for(;Gv(t,n););for(t.normalize(),n=0;n<t.Oa;n++)for(;Ov(t,n););t.normalize();var i;if(0<e)for(n=0;n<=t.Oa;n++){var r=xn(t),s=_p(t);for(i=s+1;s<i;){i=s,cy(t,n,1);var h=_p(t);h>s?ni(t,r):h<s&&(s=h,r=xn(t))}}if(0>e)for(n=t.Oa;0<=n;n--)for(r=xn(t),s=_p(t),i=s+1;s<i;)i=s,cy(t,n,-1),h=_p(t),h>s?ni(t,r):h<s&&(s=h,r=xn(t));t.normalize()}function cy(t,e,n){t.ae=0;for(var i=t.network.vertexes.iterator;i.next();)i.value.component=-1;if(0<n)for(i.reset();i.next();){var r=i.value;r.column-t.nodeMinColumnSpace(r,!0)<=e&&(r.component=t.ae)}if(0>n)for(i.reset();i.next();)r=i.value,r.column+t.nodeMinColumnSpace(r,!1)>=e&&(r.component=t.ae);for(t.ae++,i.reset();i.next();)e=i.value,e.component===-1&&(bg(t,e,t.ae,-1,!0,!0),t.ae++);var s;for(e=[],s=0;s<t.ae*t.ae;s++)e[s]=!1;for(r=[],s=0;s<(t.Ga+1)*(t.Oa+1);s++)r[s]=-1;for(i.reset();i.next();){s=i.value;for(var h=s.layer,u=Math.max(0,s.column-t.nodeMinColumnSpace(s,!0)),p=Math.min(t.Oa,s.column+t.nodeMinColumnSpace(s,!1));u<=p;u++)r[h*(t.Oa+1)+u]=s.component}for(s=0;s<=t.Ga;s++){if(0<n)for(h=0;h<t.Oa;h++)r[s*(t.Oa+1)+h]!==-1&&r[s*(t.Oa+1)+h+1]!==-1&&r[s*(t.Oa+1)+h]!==r[s*(t.Oa+1)+h+1]&&(e[r[s*(t.Oa+1)+h]*t.ae+r[s*(t.Oa+1)+h+1]]=!0);if(0>n)for(h=t.Oa;0<h;h--)r[s*(t.Oa+1)+h]!==-1&&r[s*(t.Oa+1)+h-1]!==-1&&r[s*(t.Oa+1)+h]!==r[s*(t.Oa+1)+h-1]&&(e[r[s*(t.Oa+1)+h]*t.ae+r[s*(t.Oa+1)+h-1]]=!0)}for(r=[],s=0;s<t.ae;s++)r[s]=!0;for(h=[],h.push(0);h.length!==0;)if(p=h[h.length-1],h.pop(),r[p])for(r[p]=!1,s=0;s<t.ae;s++)e[p*t.ae+s]&&h.splice(0,0,s);if(0<n)for(i.reset();i.next();)t=i.value,r[t.component]&&--t.column;if(0>n)for(i.reset();i.next();)n=i.value,r[n.component]&&(n.column+=1)}It.prototype.commitLayout=function(){if(this.setsPortSpots)for(var t=Qp(this,!0),e=Qp(this,!1),n=this.network.edges.iterator;n.next();){var i=n.value.link;i!==null&&(i.fromSpot=t,i.toSpot=e)}this.commitNodes(),this.cu(),this.isRouting&&this.commitLinks()};function Qp(t,e){return t.K===270?e?ri:ai:t.K===90?e?ai:ri:t.K===180?e?si:Tn:e?Tn:si}It.prototype.commitNodes=function(){this.Xd=[],this.yd=[],this.xd=[],this.Qa=[];for(var t=0;t<=this.Ga;t++)this.Xd[t]=0,this.yd[t]=0,this.xd[t]=0,this.Qa[t]=0;for(t=this.network.vertexes.iterator;t.next();){var e=t.value,n=e.layer;this.Xd[n]=Math.max(this.Xd[n],this.nodeMinLayerSpace(e,!0)),this.yd[n]=Math.max(this.yd[n],this.nodeMinLayerSpace(e,!1))}e=0,n=this.Yd;for(var i=0;i<=this.Ga;i++){var r=n;0>=this.Xd[i]+this.yd[i]&&(r=0),0<i&&(e+=r/2),this.K===90||this.K===0?(e+=this.yd[i],this.xd[i]=e,e+=this.Xd[i]):(e+=this.Xd[i],this.xd[i]=e,e+=this.yd[i]),i<this.Ga&&(e+=r/2),this.Qa[i]=e}for(n=e,e=this.arrangementOrigin,i=0;i<=this.Ga;i++)this.K===270?this.xd[i]=e.y+this.xd[i]:this.K===90?(this.xd[i]=e.y+n-this.xd[i],this.Qa[i]=n-this.Qa[i]):this.K===180?this.xd[i]=e.x+this.xd[i]:(this.xd[i]=e.x+n-this.xd[i],this.Qa[i]=n-this.Qa[i]);for(t.reset(),n=i=1/0;t.next();){r=t.value;var s=r.layer,h=r.column|0;if(this.K===270||this.K===90){var u=e.x+this.fc*h;s=this.xd[s]}else u=this.xd[s],s=e.y+this.fc*h;r.centerX=u,r.centerY=s,i=Math.min(r.x,i),n=Math.min(r.y,n)}for(i=e.x-i,e=e.y-n,this.Ef=new T(i,e),t.reset();t.next();)n=t.value,n.x+=i,n.y+=e,n.commit()},It.prototype.cu=function(){for(var t=0,e=this.Yd,n=0;n<=this.Ga;n++)t+=this.Xd[n],t+=this.yd[n];t+=this.Ga*e,e=[],n=this.fc*this.Oa;for(var i=this.maxLayer;0<=i;i--)this.K===270?i===0?e.push(new E(0,0,n,Math.abs(this.Qa[0]))):e.push(new E(0,this.Qa[i-1],n,Math.abs(this.Qa[i-1]-this.Qa[i]))):this.K===90?i===0?e.push(new E(0,this.Qa[0],n,Math.abs(this.Qa[0]-t))):e.push(new E(0,this.Qa[i],n,Math.abs(this.Qa[i-1]-this.Qa[i]))):this.K===180?i===0?e.push(new E(0,0,Math.abs(this.Qa[0]),n)):e.push(new E(this.Qa[i-1],0,Math.abs(this.Qa[i-1]-this.Qa[i]),n)):i===0?e.push(new E(this.Qa[0],0,Math.abs(this.Qa[0]-t),n)):e.push(new E(this.Qa[i],0,Math.abs(this.Qa[i-1]-this.Qa[i]),n));this.commitLayers(e,this.Ef)},It.prototype.commitLayers=function(){},It.prototype.commitLinks=function(){for(var t=this.network.edges.iterator,e;t.next();)e=t.value.link,e!==null&&(e.eh(),e.sj(),e.kf());for(t.reset();t.next();)e=t.value.link,e!==null&&e.hg();for(t.reset();t.next();){var n=t.value;if(e=n.link,e!==null){e.eh();var i=e,r=i.fromNode,s=i.toNode,h=i.fromPort,u=i.toPort;if(r!==null){var p=r.findVisibleNode();p!==null&&p!==r&&(r=p,h=p.port)}s!==null&&(p=s.findVisibleNode(),p!==null&&p!==s&&(s=p,u=p.port));var d=e.computeSpot(!0,h);p=e.computeSpot(!1,u);var g=n.fromVertex,c=n.toVertex;if(n.valid){if(e.curve===Yn&&e.pointsCount===4)if(g.column===c.column)n=e.getLinkPoint(r,h,d,!0,!1,s,u),h=e.getLinkPoint(s,u,p,!1,!1,r,h),n.w()||n.set(r.actualBounds.center),h.w()||h.set(s.actualBounds.center),e.sj(),e.jf(n.x,n.y),e.jf((2*n.x+h.x)/3,(2*n.y+h.y)/3),e.jf((n.x+2*h.x)/3,(n.y+2*h.y)/3),e.jf(h.x,h.y);else{var y=!1,S=!1;if(h!==null&&d===Ke&&(y=!0),u!==null&&p===Ke&&(S=!0),y||S){var v=e.i(0).x;if(n=e.i(0).y,g=e.i(3).x,i=e.i(3).y,y){if(this.K===90||this.K===270){y=v;var L=(n+i)/2}else y=(v+g)/2,L=n;e.M(1,y,L),d=e.getLinkPoint(r,h,d,!0,!1,s,u),d.w()||d.set(r.actualBounds.center),e.M(0,d.x,d.y)}S&&(this.K===90||this.K===270?(d=g,n=(n+i)/2):(d=(v+g)/2,n=i),e.M(2,d,n),r=e.getLinkPoint(s,u,p,!1,!1,r,h),r.w()||r.set(s.actualBounds.center),e.M(3,r.x,r.y))}}e.kf()}else if(g.layer===c.layer)e.kf();else{if(y=S=!1,L=this.Yd,v=e.firstPickIndex+1,e.isOrthogonal){y=!0;var N=e.pointsCount;4<N&&e.points.removeRange(2,N-3)}else if(e.curve===Yn)S=!0,N=e.pointsCount,4<N&&e.points.removeRange(2,N-3),N===4&&(v=2);else{N=e.pointsCount;var M=d===Ke,B=p===Ke;2<N&&M&&B?e.points.removeRange(1,N-2):3<N&&M&&!B?e.points.removeRange(1,N-3):3<N&&!M&&B?e.points.removeRange(2,N-2):4<N&&!M&&!B&&e.points.removeRange(2,N-3)}if(n.rev){for(;c!==null&&g!==c;){var F=N=null;for(M=c.sourceEdges.iterator;M.next()&&(B=M.value,B.link!==n.link||(N=B.fromVertex,F=B.toVertex,N.node!==null)););if(N===null)break;if(N!==g){M=e.i(v-1).x,B=e.i(v-1).y;var j=N.centerX,D=N.centerY;if(y)this.K===180||this.K===0?v===e.firstPickIndex+1?(e.l(v++,M,B),e.l(v++,M,D)):(F!==null?F.centerY:B)!==D&&(F=this.Qa[N.layer-1]+this.Ef.x,e.l(v++,F,B),e.l(v++,F,D)):v===e.firstPickIndex+1?(e.l(v++,M,B),e.l(v++,j,B)):(F!==null?F.centerX:M)!==j&&(F=this.Qa[N.layer-1]+this.Ef.y,e.l(v++,M,F),e.l(v++,j,F));else if(v===e.firstPickIndex+1){F=Math.max(10,this.Xd[c.layer]);var R=Math.max(10,this.yd[c.layer]);if(S)this.K===180?j<=c.bounds.x?(c=c.bounds.x,e.l(v++,c-F,D),e.l(v++,c,D),e.l(v++,c+R,D)):(e.l(v++,j-F,D),e.l(v++,j,D),e.l(v++,j+R,D)):this.K===90?D>=c.bounds.bottom?(c=c.bounds.y+c.bounds.height,e.l(v++,j,c+R),e.l(v++,j,c),e.l(v++,j,c-F)):(e.l(v++,j,D+R),e.l(v++,j,D),e.l(v++,j,D-F)):this.K===270?D<=c.bounds.y?(c=c.bounds.y,e.l(v++,j,c-F),e.l(v++,j,c),e.l(v++,j,c+R)):(e.l(v++,j,D-F),e.l(v++,j,D),e.l(v++,j,D+R)):this.K===0&&(j>=c.bounds.right?(c=c.bounds.x+c.bounds.width,e.l(v++,c+R,D),e.l(v++,c,D),e.l(v++,c-F,D)):(e.l(v++,j+R,D),e.l(v++,j,D),e.l(v++,j-F,D)));else{e.l(v++,M,B);var W=0;this.K===180||this.K===0?((this.K===180?j>=c.bounds.right:j<=c.bounds.x)&&(W=(this.K===0?-F:R)/2),e.l(v++,M+W,D)):((this.K===270?D>=c.bounds.bottom:D<=c.bounds.y)&&(W=(this.K===90?-F:R)/2),e.l(v++,j,B+W)),e.l(v++,j,D)}}else F=Math.max(10,this.Xd[N.layer]),R=Math.max(10,this.yd[N.layer]),S?this.K===180?(e.l(v++,j-F-L,D),e.l(v++,Math.min(j-F+L/2,j),D),e.l(v++,j,D),e.l(v++,j,D),e.l(v++,Math.max(j+R-L/2,j),D),e.l(v++,j+R+L,D)):this.K===90?(e.l(v++,j,D+R+L),e.l(v++,j,Math.max(D+R-L/2,D)),e.l(v++,j,D),e.l(v++,j,D),e.l(v++,j,Math.min(D-F+L/2,D)),e.l(v++,j,D-F-L)):this.K===270?(e.l(v++,j,D-F-L),e.l(v++,j,Math.min(D-F+L/2,D)),e.l(v++,j,D),e.l(v++,j,D),e.l(v++,j,Math.max(D+R-L/2,D)),e.l(v++,j,D+R+L)):(e.l(v++,j+R+L,D),e.l(v++,Math.max(j+R-L/2,j),D),e.l(v++,j,D),e.l(v++,j,D),e.l(v++,Math.min(j-F+L/2,j),D),e.l(v++,j-F-L,D)):e.l(v++,j,D)}c=N}(u===null||d!==Ke||y)&&(M=e.i(v-1).x,B=e.i(v-1).y,j=e.i(v).x,D=e.i(v).y,y?(L=this.yd[g.layer],this.K===180||this.K===0?(y=B,y>=g.bounds.y&&y<=g.bounds.bottom&&(this.K===180?j>=g.bounds.x:j<=g.bounds.right)&&(c=g.centerX+(this.K===180?-L:L),y<g.bounds.y+g.bounds.height/2?y=g.bounds.y-this.fc/2:y=g.bounds.bottom+this.fc/2,e.l(v++,c,B),e.l(v++,c,y)),e.l(v++,j,y)):(y=M,y>=g.bounds.x&&y<=g.bounds.right&&(this.K===270?D>=g.bounds.y:D<=g.bounds.bottom)&&(c=g.centerY+(this.K===270?-L:L),y<g.bounds.x+g.bounds.width/2?y=g.bounds.x-this.fc/2:y=g.bounds.right+this.fc/2,e.l(v++,M,c),e.l(v++,y,c)),e.l(v++,y,D)),e.l(v++,j,D)):S?(F=Math.max(10,this.Xd[g.layer]),R=Math.max(10,this.yd[g.layer]),this.K===180&&j>=g.bounds.x?(c=g.bounds.x+g.bounds.width,e.M(v-2,c,B),e.M(v-1,c+R,B)):this.K===90&&D<=g.bounds.bottom?(c=g.bounds.y,e.M(v-2,M,c),e.M(v-1,M,c-F)):this.K===270&&D>=g.bounds.y?(c=g.bounds.y+g.bounds.height,e.M(v-2,M,c),e.M(v-1,M,c+R)):this.K===0&&j<=g.bounds.right&&(c=g.bounds.x,e.M(v-2,c,B),e.M(v-1,c-F,B))):(F=Math.max(10,this.Xd[g.layer]),R=Math.max(10,this.yd[g.layer]),y=0,this.K===180||this.K===0?((this.K===180?j<=g.bounds.x:j>=g.bounds.right)&&(y=(this.K===0?R:-F)/2),e.l(v++,j+y,B)):((this.K===270?D<=g.bounds.y:D>=g.bounds.bottom)&&(y=(this.K===90?R:-F)/2),e.l(v++,M,D+y)),e.l(v++,j,D)))}else{for(;g!==null&&g!==c;){for(F=N=null,g=g.destinationEdges.iterator;g.next()&&(M=g.value,M.link!==n.link||(N=M.toVertex,F=M.fromVertex,F.node!==null&&(F=null),N.node!==null)););if(N===null)break;N!==c&&(M=e.i(v-1).x,B=e.i(v-1).y,j=N.centerX,D=N.centerY,y?this.K===180||this.K===0?(F!==null?F.centerY:B)!==D&&(F=this.Qa[N.layer]+this.Ef.x,v===e.firstPickIndex+1&&(F=this.K===0?Math.max(F,M):Math.min(F,M)),e.l(v++,F,B),e.l(v++,F,D)):(F!==null?F.centerX:M)!==j&&(F=this.Qa[N.layer]+this.Ef.y,v===e.firstPickIndex+1&&(F=this.K===90?Math.max(F,B):Math.min(F,B)),e.l(v++,M,F),e.l(v++,j,F)):(F=Math.max(10,this.Xd[N.layer]),R=Math.max(10,this.yd[N.layer]),S?this.K===180?(e.l(v++,j+R+L,D),e.l(v++,Math.max(j+R-L/2,j),D),e.l(v++,j,D),e.l(v++,j,D),e.l(v++,Math.min(j-F+L/2,j),D),e.l(v++,j-F-L,D)):this.K===90?(e.l(v++,j,D-F-L),e.l(v++,j,Math.min(D-F+L/2,D)),e.l(v++,j,D),e.l(v++,j,D),e.l(v++,j,Math.max(D+R-L/2,D)),e.l(v++,j,D+R+L)):this.K===270?(e.l(v++,j,D+R+L),e.l(v++,j,Math.max(D+R-L/2,D)),e.l(v++,j,D),e.l(v++,j,D),e.l(v++,j,Math.min(D-F+L/2,D)),e.l(v++,j,D-F-L)):(e.l(v++,j-F-L,D),e.l(v++,Math.min(j-F+L/2,j),D),e.l(v++,j,D),e.l(v++,j,D),e.l(v++,Math.max(j+R-L/2,j),D),e.l(v++,j+R+L,D)):this.K===180?(e.l(v++,j+R,D),e.l(v++,j-F,D)):this.K===90?(e.l(v++,j,D-F),e.l(v++,j,D+R)):this.K===270?(e.l(v++,j,D+R),e.l(v++,j,D-F)):(e.l(v++,j-F,D),e.l(v++,j+R,D)))),g=N}y&&(M=e.i(v-1).x,B=e.i(v-1).y,j=e.i(v).x,D=e.i(v).y,this.K===180||this.K===0?B!==D&&(F=this.K===0?Math.min(Math.max((j+M)/2,this.Qa[c.layer]+this.Ef.x),j):Math.max(Math.min((j+M)/2,this.Qa[c.layer]+this.Ef.x),j),e.l(v++,F,B),e.l(v++,F,D)):M!==j&&(F=this.K===90?Math.min(Math.max((D+B)/2,this.Qa[c.layer]+this.Ef.y),D):Math.max(Math.min((D+B)/2,this.Qa[c.layer]+this.Ef.y),D),e.l(v++,M,F),e.l(v++,j,F)))}i!==null&&S&&(h!==null&&(d===Ke&&(d=e.i(0),i=e.i(2),d.C(i)||e.M(1,(d.x+i.x)/2,(d.y+i.y)/2)),d=e.getLinkPoint(r,h,Ke,!0,!1,s,u),d.w()||d.set(r.actualBounds.center),e.M(0,d.x,d.y)),u!==null&&(p===Ke&&(p=e.i(e.pointsCount-1),d=e.i(e.pointsCount-3),p.C(d)||e.M(e.pointsCount-2,(p.x+d.x)/2,(p.y+d.y)/2)),r=e.getLinkPoint(s,u,Ke,!1,!1,r,h),r.w()||r.set(s.actualBounds.center),e.M(e.pointsCount-1,r.x,r.y))),e.kf(),n.commit()}}}this.avoidOrthogonalOverlaps()},It.prototype.avoidOrthogonalOverlaps=function(){if(!(0>=this.linkSpacing)){for(var t=new Q,e=this.network.edges.iterator;e.next();){var n=e.value.link;n!==null&&n.isOrthogonal&&!t.contains(n)&&t.add(n)}if(0<t.count)if(this.K===90||this.K===270){for(e=0,n=[],t=t.iterator;t.next();){var i=t.value;if(i!==null&&i.isOrthogonal)for(var r=2;r<i.pointsCount-3;r++){var s=i.i(r),h=i.i(r+1);if(this.B(s.y,h.y)&&!this.B(s.x,h.x)){var u=new Hr;u.layer=Math.floor(s.y/2);var p=i.i(0),d=i.i(i.pointsCount-1);if(u.first=p.x*p.x+p.y,u.ec=d.x*d.x+d.y,u.hd=Math.min(s.x,h.x),u.Ac=Math.max(s.x,h.x),u.index=r,u.link=i,r+2<i.pointsCount){p=i.i(r-1),d=i.i(r+2);var g=0;p.y<s.y?g=d.y<s.y?3:s.x<h.x?2:1:p.y>s.y&&(g=d.y>s.y?0:h.x<s.x?2:1),u.j=g}n.push(u)}}}if(1<n.length)for(n.sort(this.qx),t=0;t<n.length;){for(s=n[t].layer,i=t+1;i<n.length&&n[i].layer===s;)i++;if(1<i-t)for(s=t;s<i;){for(h=n[s].Ac,r=t+1;r<i&&n[r].hd<h;)h=Math.max(h,n[r].Ac),r++;if(h=r-s,1<h){for(this.ji(n,this.$r,s,s+h),g=1,u=n[s].ec,p=s;p<r;p++)d=n[p],d.ec!==u&&(g++,u=d.ec);this.ji(n,this.px,s,s+h);var c=1;for(u=n[s].first,p=s;p<r;p++)d=n[p],d.first!==u&&(c++,u=d.first);for(p=!0,d=c,g<c?(p=!1,d=g,u=n[s].ec,this.ji(n,this.$r,s,s+h)):u=n[s].first,g=0,c=s;c<r;c++){var y=n[c];(p?y.first:y.ec)!==u&&(g++,u=p?y.first:y.ec);var S=y.link;s=S.i(y.index),h=S.i(y.index+1);var v=this.linkSpacing*(g-(d-1)/2);e++,S.eh(),S.M(y.index,s.x,s.y+v),S.M(y.index+1,h.x,h.y+v),S.kf()}}s=r}t=i}}else{for(e=0,n=[],t=t.iterator;t.next();)if(i=t.value,i!==null&&i.isOrthogonal)for(r=2;r<i.pointsCount-3;r++)s=i.i(r),h=i.i(r+1),this.B(s.x,h.x)&&!this.B(s.y,h.y)&&(u=new Hr,u.layer=Math.floor(s.x/2),p=i.i(0),d=i.i(i.pointsCount-1),u.first=p.x+p.y*p.y,u.ec=d.x+d.y*d.y,u.hd=Math.min(s.y,h.y),u.Ac=Math.max(s.y,h.y),u.index=r,u.link=i,r+2<i.pointsCount&&(p=i.i(r-1),d=i.i(r+2),g=0,p.x<s.x?g=d.x<s.x?3:s.y<h.y?2:1:p.x>s.x&&(g=d.x>s.x?0:h.y<s.y?2:1),u.j=g),n.push(u));if(1<n.length)for(n.sort(this.qx),t=0;t<n.length;){for(s=n[t].layer,i=t+1;i<n.length&&n[i].layer===s;)i++;if(1<i-t)for(s=t;s<i;){for(h=n[s].Ac,r=t+1;r<i&&n[r].hd<h;)h=Math.max(h,n[r].Ac),r++;if(h=r-s,1<h){for(this.ji(n,this.$r,s,s+h),g=1,u=n[s].ec,p=s;p<r;p++)d=n[p],d.ec!==u&&(g++,u=d.ec);for(this.ji(n,this.px,s,s+h),c=1,u=n[s].first,p=s;p<r;p++)d=n[p],d.first!==u&&(c++,u=d.first);for(p=!0,d=c,g<c?(p=!1,d=g,u=n[s].ec,this.ji(n,this.$r,s,s+h)):u=n[s].first,g=0,c=s;c<r;c++)y=n[c],(p?y.first:y.ec)!==u&&(g++,u=p?y.first:y.ec),S=y.link,s=S.i(y.index),h=S.i(y.index+1),v=this.linkSpacing*(g-(d-1)/2),e++,S.eh(),S.M(y.index,s.x+v,s.y),S.M(y.index+1,h.x+v,h.y),S.kf()}s=r}t=i}}}},a=It.prototype,a.qx=function(t,e){return t instanceof Hr&&e instanceof Hr&&t!==e?t.layer<e.layer?-1:t.layer>e.layer?1:t.hd<e.hd?-1:t.hd>e.hd?1:t.Ac<e.Ac?-1:t.Ac>e.Ac?1:0:0},a.px=function(t,e){return t instanceof Hr&&e instanceof Hr&&t!==e?t.first<e.first?-1:t.first>e.first||t.j<e.j?1:t.j>e.j||t.hd<e.hd?-1:t.hd>e.hd?1:t.Ac<e.Ac?-1:t.Ac>e.Ac?1:0:0},a.$r=function(t,e){return t instanceof Hr&&e instanceof Hr&&t!==e?t.ec<e.ec?-1:t.ec>e.ec||t.j<e.j?1:t.j>e.j||t.hd<e.hd?-1:t.hd>e.hd?1:t.Ac<e.Ac?-1:t.Ac>e.Ac?1:0:0},a.B=function(t,e){return t-=e,-1<t&&1>t},a.ji=function(t,e,n,i){var r=t.length,s=i-n;if(!(1>=s))if((0>n||n>=r-1)&&X("not in range 0 <= from < length: "+n),s===2)i=t[n],r=t[n+1],0<e(i,r)&&(t[n]=r,t[n+1]=i);else if(n===0)if(i>=r)t.sort(e);else for(n=t.slice(0,i),n.sort(e),e=0;e<i;e++)t[e]=n[e];else if(i>=r)for(i=t.slice(n),i.sort(e),e=n;e<r;e++)t[e]=i[e-n];else for(r=t.slice(n,i),r.sort(e),e=n;e<i;e++)t[e]=r[e-n]};function Ur(t,e){var n=t.pc[e];if(n>=t.te.length){for(var i=[],r=0;r<t.te.length;r++)i[r]=t.te[r];t.te=i}for(t.te[n]===void 0||t.te[n]===null?i=[]:(i=t.te[n],t.te[n]=null),t=t.hn[e],e=0;e<t.length;e++)n=t[e],i[n.index]=n;return i}function Kr(t,e,n){t.te[t.pc[e]]=n}Z.Object.defineProperties(It.prototype,{layerSpacing:{get:function(){return this.Yd},set:function(t){this.Yd!==t&&0<=t&&(this.Yd=t,this.D())}},columnSpacing:{get:function(){return this.fc},set:function(t){this.fc!==t&&0<t&&(this.fc=t,this.D())}},direction:{get:function(){return this.K},set:function(t){this.K!==t&&(t===0||t===90||t===180||t===270?(this.K=t,this.D()):X("LayeredDigraphLayout.direction must be 0, 90, 180, or 270"))}},cycleRemoveOption:{get:function(){return this.hk},set:function(t){this.hk===t||t!==ec&&t!==bp&&t!==Jl||(this.hk=t,this.D())}},layeringOption:{get:function(){return this.Fk},set:function(t){this.Fk===t||t!==qp&&t!==nc&&t!==ic||(this.Fk=t,this.D())}},initializeOption:{get:function(){return this.wk},set:function(t){this.wk===t||t!==td&&t!==oc&&t!==rc||(this.wk=t,this.D())}},iterations:{get:function(){return this.Qi},set:function(t){this.Qi!==t&&0<=t&&(this.Qi=t,this.D())}},aggressiveOption:{get:function(){return this.Wj},set:function(t){this.Wj===t||t!==sc&&t!==ed&&t!==ac||(this.Wj=t,this.D())}},packOption:{get:function(){return this.Qf},set:function(t){this.Qf!==t&&0<=t&&8>t&&(this.Qf=t,this.D())}},setsPortSpots:{get:function(){return this.cf},set:function(t){this.cf!==t&&(this.cf=t,this.D())}},linkSpacing:{get:function(){return this.Zm},set:function(t){this.Zm!==t&&0<=t&&(this.Zm=t,this.D())}},maxLayer:{get:function(){return this.Ga}},maxIndex:{get:function(){return this.aq}},maxColumn:{get:function(){return this.Oa}},minIndexLayer:{get:function(){return this.dn}},maxIndexLayer:{get:function(){return this.zd}}});var bp=new J(It,"CycleDepthFirst",0),ec=new J(It,"CycleGreedy",1),Jl=new J(It,"CycleFromLayers",2),qp=new J(It,"LayerOptimalLinkLength",0),nc=new J(It,"LayerLongestPathSink",1),ic=new J(It,"LayerLongestPathSource",2),td=new J(It,"InitDepthFirstOut",0),oc=new J(It,"InitDepthFirstIn",1),rc=new J(It,"InitNaive",2),sc=new J(It,"AggressiveNone",0),ed=new J(It,"AggressiveLess",1),ac=new J(It,"AggressiveMore",2),Iv=8;It.className="LayeredDigraphLayout",It.CycleDepthFirst=bp,It.CycleGreedy=ec,It.CycleFromLayers=Jl,It.LayerOptimalLinkLength=qp,It.LayerLongestPathSink=nc,It.LayerLongestPathSource=ic,It.InitDepthFirstOut=td,It.InitDepthFirstIn=oc,It.InitNaive=rc,It.AggressiveNone=sc,It.AggressiveLess=ed,It.AggressiveMore=ac,It.PackNone=0,It.PackExpand=1,It.PackStraighten=2,It.PackMedian=4,It.PackAll=15;function Hr(){this.index=this.Ac=this.hd=this.ec=this.first=this.layer=0,this.link=null,this.j=0}Hr.className="SegInfo";function xh(t){zt.call(this,t)}z(xh,zt),xh.prototype.createVertex=function(){return new Zl(this)},xh.prototype.createEdge=function(){return new _l(this)},xh.className="LayeredDigraphNetwork";function Zl(t){Te.call(this,t),this.Xa=this.mg=this.uh=-1,this.u=NaN,this.F=null,this.valid=!1,this.finish=this.kl=NaN,this.qj=0,this.Eu=this.Fu=null}z(Zl,Te),Z.Object.defineProperties(Zl.prototype,{layer:{get:function(){return this.uh},set:function(t){this.uh!==t&&(this.uh=t)}},column:{get:function(){return this.mg},set:function(t){this.mg!==t&&(this.mg=t)}},index:{get:function(){return this.Xa},set:function(t){this.Xa!==t&&(this.Xa=t)}},component:{get:function(){return this.u},set:function(t){this.u!==t&&(this.u=t)}},near:{get:function(){return this.F},set:function(t){this.F!==t&&(this.F=t)}}}),Zl.className="LayeredDigraphVertex";function _l(t){Fn.call(this,t),this.j=this.ga=this.Fa=!1,this.W=this.u=NaN,this.F=this.m=0}z(_l,Fn),Z.Object.defineProperties(_l.prototype,{fromVertex:{get:function(){return this.Yc},set:function(t){this.Yc!==t&&(this.Yc=t)}},toVertex:{get:function(){return this.fd},set:function(t){this.fd!==t&&(this.fd=t)}},valid:{get:function(){return this.Fa},set:function(t){this.Fa!==t&&(this.Fa=t)}},rev:{get:function(){return this.ga},set:function(t){this.ga!==t&&(this.ga=t)}},forest:{get:function(){return this.j},set:function(t){this.j!==t&&(this.j=t)}},portFromPos:{get:function(){return this.u},set:function(t){this.u!==t&&(this.u=t)}},portToPos:{get:function(){return this.W},set:function(t){this.W!==t&&(this.W=t)}},portFromColOffset:{get:function(){return this.m},set:function(t){this.m!==t&&(this.m=t)}},portToColOffset:{get:function(){return this.F},set:function(t){this.F!==t&&(this.F=t)}}}),_l.className="LayeredDigraphEdge";function mt(t){Ut.call(this),this.Ob=new H,this.vn=rd,this.nd=co,this.Pn=ad,this.Up=yc,this.uv=[],this.ld=!0,this.Lb=hd,this.Pd=new ht(10,10).freeze();var e=new ra(this);this.V=new di(e),this.Y=new di(e),this.Nt=[],t&&Object.assign(this,t)}z(mt,Ut),mt.prototype.cloneProtected=function(t){Ut.prototype.cloneProtected.call(this,t),t.vn=this.vn,t.Pn=this.Pn,t.Up=this.Up,t.ld=this.ld,t.Lb=this.Lb,t.Pd.assign(this.Pd),t.V.copyInheritedPropertiesFrom(this.V),t.Y.copyInheritedPropertiesFrom(this.Y)},mt.prototype.ob=function(t){t.classType===mt?t.name.indexOf("Alignment")===0?this.alignment=t:t.name.indexOf("Arrangement")===0?this.arrangement=t:t.name.indexOf("Compaction")===0?this.compaction=t:t.name.indexOf("Path")===0?this.path=t:t.name.indexOf("Sorting")===0?this.sorting=t:t.name.indexOf("Style")===0?this.treeStyle=t:X("Unknown enum value: "+t):Ut.prototype.ob.call(this,t)},mt.prototype.createNetwork=function(){return new ra(this)},mt.prototype.makeNetwork=function(t){function e(i){if(i instanceof _)return!i.isLinkLabel&&i.category!=="Comment";if(i instanceof U){var r=i.fromNode;return r===null||r.isLinkLabel||r.category==="Comment"?!1:(i=i.toNode,!(i===null||i.isLinkLabel||i.category==="Comment"))}return!1}var n=this.createNetwork();return t instanceof I?(n.$f(t.nodes,!0,e),n.$f(t.links,!0,e)):t instanceof ut?n.$f(t.memberParts,!1,e):n.$f(t.iterator,!1,e),n},mt.prototype.doLayout=function(t){this.network===null&&(this.network=this.makeNetwork(t)),this.arrangement!==ld&&(this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin));var e=this.diagram;if(e===null&&t instanceof I&&(e=t),this.path===rd&&e!==null?this.nd=e.isTreePathToChildren?co:ia:this.nd=this.path===rd?co:this.path,0<this.network.vertexes.count){for(this.network.eo(),t=this.network.vertexes.iterator;t.next();)e=t.value,e.initialized=!1,e.level=0,e.parent=null,e.children=[];if(0<this.Ob.count){for(t=new H,e=this.Ob.iterator;e.next();){var n=e.value;n instanceof _?(n=this.network.Yh(n),n!==null&&t.add(n)):n instanceof di&&t.add(n)}this.Ob=t}for(this.Ob.count===0&&this.findRoots(),t=this.Ob.copy().iterator;t.next();)e=t.value,e.initialized||(e.initialized=!0,hc(this,e));for(e=this.network.vertexes,t=null;t=Av(e),0<t.count;)e=my(this,t),e!==null&&this.Ob.add(e),e.initialized=!0,hc(this,e),e=t;for(t=this.Ob.iterator;t.next();)e=t.value,e instanceof di&&yy(this,e);for(t=this.Ob.iterator;t.next();)e=t.value,e instanceof di&&vy(this,e);for(t=this.Ob.iterator;t.next();)e=t.value,e instanceof di&&Sy(this,e);if(this.$t(),this.layerStyle===ud){for(t=[],e=this.network.vertexes.iterator;e.next();){n=e.value;var i=n.parent;i===null&&(i=n),i=i.angle===0||i.angle===180;var r=t[n.level];r===void 0&&(r=0),t[n.level]=Math.max(r,i?n.width:n.height)}for(e=0;e<t.length;e++)t[e]===void 0&&(t[e]=0);for(this.uv=t,e=this.network.vertexes.iterator;e.next();)n=e.value,i=n.parent,i===null&&(i=n),i.angle===0||i.angle===180?(i.angle===180&&(n.focusX+=t[n.level]-n.width),n.width=t[n.level]):(i.angle===270&&(n.focusY+=t[n.level]-n.height),n.height=t[n.level])}else if(this.layerStyle===vc)for(t=this.network.vertexes.iterator;t.next();){for(e=t.value,n=e.angle===0||e.angle===180,i=-1,r=0;r<e.children.length;r++){var s=e.children[r];i=Math.max(i,n?s.width:s.height)}if(0<=i)for(r=0;r<e.children.length;r++)s=e.children[r],n?(e.angle===180&&(s.focusX+=i-s.width),s.width=i):(e.angle===270&&(s.focusY+=i-s.height),s.height=i)}for(t=this.Ob.iterator;t.next();)e=t.value,e instanceof di&&this.layoutTree(e);this.arrangeTrees(),this.updateParts()}this.network=null,this.Ob=new H,this.isValidLayout=!0};function Av(t){var e=new H;for(t=t.iterator;t.next();){var n=t.value;n.initialized||e.add(n)}return e}mt.prototype.findRoots=function(){for(var t=this.network.vertexes,e=t.iterator;e.next();){var n=e.value;switch(this.nd){case co:n.sourceEdges.count===0&&this.Ob.add(n);break;case ia:n.destinationEdges.count===0&&this.Ob.add(n);break;default:X("Unhandled path value "+this.nd.toString())}}this.Ob.count===0&&(t=my(this,t),t!==null&&this.Ob.add(t))};function my(t,e){var n=999999,i=null;for(e=e.iterator;e.next();){var r=e.value;switch(t.nd){case co:r.sourceEdges.count<n&&(n=r.sourceEdges.count,i=r);break;case ia:r.destinationEdges.count<n&&(n=r.destinationEdges.count,i=r);break;default:X("Unhandled path value "+t.nd.toString())}}return i}function hc(t,e){if(e!==null){switch(t.nd){case co:if(0<e.destinationEdges.count){for(var n=new Q,i=e.destinationVertexes;i.next();){var r=i.value;xy(t,e,r)&&n.add(r)}0<n.count&&(e.children=n.Da())}break;case ia:if(0<e.sourceEdges.count){for(n=new Q,i=e.sourceVertexes;i.next();)r=i.value,xy(t,e,r)&&n.add(r);0<n.count&&(e.children=n.Da())}break;default:X("Unhandled path value"+t.nd.toString())}for(n=e.children,i=n.length,r=0;r<i;r++){var s=n[r];s.initialized=!0,s.level=e.level+1,s.parent=e,t.Ob.remove(s)}for(e=0;e<i;e++)hc(t,n[e])}}function xy(t,e,n){if(n.initialized){if(e===null)var i=!1;else{for(i=e.parent;i!==null&&i!==n;)i=i.parent;i=i===n}if(i||n.level>e.level)return!1;t.removeChild(n.parent,n)}return!0}mt.prototype.removeChild=function(t,e){if(t!==null&&e!==null){for(var n=t.children,i=0,r=0;r<n.length;r++)n[r]===e&&i++;if(0<i){i=Array(n.length-i);for(var s=r=0;s<n.length;s++)n[s]!==e&&(i[r++]=n[s]);t.children=i}}};function yy(t,e){if(e!==null){t.initializeTreeVertexValues(e),e.alignment===yo&&t.sortTreeVertexChildren(e);for(var n=0,i=e.childrenCount,r=0,s=e.children,h=s.length,u=0;u<h;u++){var p=s[u];yy(t,p),n+=p.descendantCount+1,i=Math.max(i,p.maxChildrenCount),r=Math.max(r,p.maxGenerationCount)}e.descendantCount=n,e.maxChildrenCount=i,e.maxGenerationCount=0<i?r+1:0}}function zv(t,e){switch(t.Pn){default:case ad:return e.parent!==null?e.parent:t.V;case mc:return e.parent===null?t.V:e.parent.parent===null?t.Y:e.parent;case cc:return e.parent!==null?e.parent.parent!==null?e.parent.parent:t.Y:t.V;case gc:var n=!0;if(e.childrenCount===0)n=!1;else for(var i=e.children,r=i.length,s=0;s<r;s++)if(0<i[s].childrenCount){n=!1;break}return n&&e.parent!==null?t.Y:e.parent!==null?e.parent:t.V}}mt.prototype.initializeTreeVertexValues=function(t){if(t.copyInheritedPropertiesFrom(zv(this,t)),t.parent!==null&&t.parent.alignment===yo){for(var e=t.angle,n=t.parent.children,i=0;i<n.length&&t!==n[i];)i++;i%2===0?i!==n.length-1&&(e=e===90?180:e===180?270:e===270?180:270):e=e===90?0:e===180?90:e===270?0:90,t.angle=e}t.initialized=!0};function vy(t,e){if(e!==null){t.assignTreeVertexValues(e),e=e.children;for(var n=e.length,i=0;i<n;i++)vy(t,e[i])}}mt.prototype.assignTreeVertexValues=function(){};function Sy(t,e){if(e!==null){e.alignment!==yo&&t.sortTreeVertexChildren(e),e=e.children;for(var n=e.length,i=0;i<n;i++)Sy(t,e[i])}}mt.prototype.sortTreeVertexChildren=function(t){switch(t.sorting){case vh:break;case Ql:t.children.reverse();break;case bl:t.children.sort(t.comparer);break;case ql:t.children.sort(t.comparer),t.children.reverse();break;default:X("Unhandled sorting value "+t.sorting.toString())}},mt.prototype.$t=function(){if(this.comments)for(var t=this.network.vertexes.iterator;t.next();)this.addComments(t.value)},mt.prototype.addComments=function(t){var e=t.angle,n=t.parent,i=0,r=!1;n!==null&&(i=n.angle,r=n.alignment,r=Wr(r)),e=e===90||e===270,i=i===90||i===270,n=t.childrenCount===0;var s=0,h=0,u=0,p=t.commentSpacing;if(t.node!==null)for(var d=t.node.ku();d.next();){var g=d.value;g.category==="Comment"&&g.canLayout()&&(t.comments===null&&(t.comments=[]),t.comments.push(g),g.Ta(),g=g.measuredBounds,e&&!n||!r&&!i&&n||r&&i&&n?(s=Math.max(s,g.width),h+=g.height+Math.abs(u)):(s+=g.width+Math.abs(u),h=Math.max(h,g.height)),u=p)}t.comments!==null&&(e&&!n||!r&&!i&&n||r&&i&&n?(s+=Math.abs(t.commentMargin),h=Math.max(0,h-t.height)):(h+=Math.abs(t.commentMargin),s=Math.max(0,s-t.width)),r=E.allocAt(0,0,t.bounds.width+s,t.bounds.height+h),t.bounds=r,E.free(r))};function Wr(t){return t===pr||t===yo||t===dr||t===Io}function $l(t){return t===pr||t===yo}function lc(t){var e=t.parent;if(e!==null){var n=e.alignment;if(Wr(n)){if($l(n)){for(e=e.children,n=0;n<e.length&&t!==e[n];)n++;return n%2===0}if(n===dr)return!0}}return!1}mt.prototype.layoutComments=function(t){if(t.comments!==null){var e=t.node.measuredBounds,n=t.parent,i=t.angle,r=0,s=!1;n!==null&&(r=n.angle,s=n.alignment,s=Wr(s)),i=i===90||i===270,n=r===90||r===270;for(var h=t.childrenCount===0,u=lc(t),p=0,d=t.comments,g=d.length,c=T.alloc(),y=0;y<g;y++){var S=d[y],v=S.measuredBounds;if(i&&!h||!s&&!n&&h||s&&n&&h){if(135<r&&!s||n&&u)if(0<=t.commentMargin)for(c.h(t.bounds.x-t.commentMargin-v.width,t.bounds.y+p),S.move(c),S=S.Fd();S.next();){var L=S.value;L.fromSpot=si,L.toSpot=Tn}else for(c.h(t.bounds.x+2*t.focus.x-t.commentMargin,t.bounds.y+p),S.move(c),S=S.Fd();S.next();)L=S.value,L.fromSpot=Tn,L.toSpot=si;else if(0<=t.commentMargin)for(c.h(t.bounds.x+2*t.focus.x+t.commentMargin,t.bounds.y+p),S.move(c),S=S.Fd();S.next();)L=S.value,L.fromSpot=Tn,L.toSpot=si;else for(c.h(t.bounds.x+t.commentMargin-v.width,t.bounds.y+p),S.move(c),S=S.Fd();S.next();)L=S.value,L.fromSpot=si,L.toSpot=Tn;p=0<=t.commentSpacing?p+(v.height+t.commentSpacing):p+(t.commentSpacing-v.height)}else{if(135<r&&!s||!n&&u)if(0<=t.commentMargin)for(c.h(t.bounds.x+p,t.bounds.y-t.commentMargin-v.height),S.move(c),S=S.Fd();S.next();)L=S.value,L.fromSpot=ri,L.toSpot=ai;else for(c.h(t.bounds.x+p,t.bounds.y+2*t.focus.y-t.commentMargin),S.move(c),S=S.Fd();S.next();)L=S.value,L.fromSpot=ai,L.toSpot=ri;else if(0<=t.commentMargin)for(c.h(t.bounds.x+p,t.bounds.y+2*t.focus.y+t.commentMargin),S.move(c),S=S.Fd();S.next();)L=S.value,L.fromSpot=ai,L.toSpot=ri;else for(c.h(t.bounds.x+p,t.bounds.y+t.commentMargin-v.height),S.move(c),S=S.Fd();S.next();)L=S.value,L.fromSpot=ri,L.toSpot=ai;p=0<=t.commentSpacing?p+(v.width+t.commentSpacing):p+(t.commentSpacing-v.width)}}if(T.free(c),e=p-t.commentSpacing-(i?e.height:e.width),this.nd===co)for(t=t.destinationEdges;t.next();)r=t.value.link,r===null||r.isAvoiding||(r.fromEndSegmentLength=0<e?e:NaN);else for(t=t.sourceEdges;t.next();)r=t.value.link,r===null||r.isAvoiding||(r.toEndSegmentLength=0<e?e:NaN)}},mt.prototype.layoutTree=function(t){if(t!==null){for(var e=t.children,n=e.length,i=0;i<n;i++)this.layoutTree(e[i]);switch(t.compaction){case sd:Py(this,t);break;case tu:if(t.alignment===yo)Py(this,t);else if(t.childrenCount===0)i=t.parent,n=!1,e=0,i!==null&&(e=i.angle,n=i.alignment,n=Wr(n)),i=lc(t),t.S.h(0,0),t.Ba.h(t.width,t.height),t.parent===null||t.comments===null||(e!==180&&e!==270||n)&&!i?t.ka.h(0,0):e===180&&!n||(e===90||e===270)&&i?t.ka.h(t.width-2*t.focus.x,0):t.ka.h(0,t.height-2*t.focus.y),t.so=null,t.Eo=null;else{var r=Ni(t);e=r===90||r===270;var s=0,h=t.children,u=h.length;for(n=0;n<u;n++)i=h[n],s=Math.max(s,e?i.Ba.width:i.Ba.height);var p=t.alignment,d=p===xo,g=Wr(p),c=Math.max(0,t.breadthLimit);n=yh(t);var y=t.nodeSpacing,S=ur(t),v=t.rowSpacing,L=0;(p===mo||d||t.Gl||t.Hl&&t.maxGenerationCount===1)&&(L=Math.max(0,t.rowIndent)),i=t.width;var N=t.height,M=0,B=0,F=0,j=null,D=null,R=0,W=0,tt=0,q=0,b=0,V=0,ft=0,at=0;if(g&&!$l(p)&&135<r&&h.reverse(),$l(p))if(1<u)for(var Mt=0;Mt<u;Mt++)Mt%2===0&&Mt!==u-1&&(at=Math.max(at,e?h[Mt].Ba.width:h[Mt].Ba.height));else u===1&&(at=e?h[0].Ba.width:h[0].Ba.height);if(g){switch(p){case pr:B=135>r?wy(t,h,at,M,B):Ly(t,h,at,M,B),at=B.x,M=B.width,B=B.height;break;case dr:for(j=0;j<u;j++)D=h[j],c=D.Ba,F=V===0?0:v,e?(D.S.h(s-c.width,q+F),M=Math.max(M,c.width),B=Math.max(B,q+F+c.height),q+=F+c.height):(D.S.h(tt+F,s-c.height),M=Math.max(M,tt+F+c.width),B=Math.max(B,c.height),tt+=F+c.width),V++;break;case Io:for(j=0;j<u;j++)D=h[j],s=D.Ba,c=V===0?0:v,e?(D.S.h(y/2+t.focus.x,q+c),M=Math.max(M,s.width),B=Math.max(B,q+c+s.height),q+=c+s.height):(D.S.h(tt+c,y/2+t.focus.y),M=Math.max(M,tt+c+s.width),B=Math.max(B,s.height),tt+=c+s.width),V++}j=wn(this,2),D=wn(this,2),e?(j[0].h(0,0),j[1].h(0,B),D[0].h(M,0)):(j[0].h(0,0),j[1].h(M,0),D[0].h(0,B)),D[1].h(M,B)}else for(Mt=0;Mt<u;Mt++){var Vt=h[Mt],Se=Vt.Ba;if(e){0<c&&0<V&&tt+y+Se.width>c&&(tt<s&&Ps(t,p,s-tt,0,ft,Mt-1),b++,V=0,ft=Mt,F=B,tt=0,q=135<r?-B-v:B+v),id(this,Vt,0,q);var Ne=0;if(V===0)j=Vt.so,D=Vt.Eo,R=Se.width,W=Se.height,(j===null||D===null||r!==Ni(Vt))&&(j=wn(this,2),D=wn(this,2),j[0].h(0,0),j[1].h(0,W),D[0].h(R,0),D[1].h(R,W));else{var tn=Yt();W=My(this,t,Vt,j,D,R,W,tn),Ne=W.x,j=tn[0],D=tn[1],R=W.width,W=W.height,At(tn),tt<Se.width&&0>Ne&&(na(t,-Ne,0,ft,Mt-1),od(j,-Ne,0),od(D,-Ne,0),Ne=0)}Vt.S.h(Ne,q),M=Math.max(M,R),B=Math.max(B,F+(b===0?0:v)+Se.height),tt=R}else 0<c&&0<V&&q+y+Se.height>c&&(q<s&&Ps(t,p,0,s-q,ft,Mt-1),b++,V=0,ft=Mt,F=M,q=0,tt=135<r?-M-v:M+v),id(this,Vt,tt,0),Ne=0,V===0?(j=Vt.so,D=Vt.Eo,R=Se.width,W=Se.height,(j===null||D===null||r!==Ni(Vt))&&(j=wn(this,2),D=wn(this,2),j[0].h(0,0),j[1].h(R,0),D[0].h(0,W),D[1].h(R,W))):(tn=Yt(),W=My(this,t,Vt,j,D,R,W,tn),Ne=W.x,j=tn[0],D=tn[1],R=W.width,W=W.height,At(tn),q<Se.height&&0>Ne&&(na(t,0,-Ne,ft,Mt-1),od(j,0,-Ne),od(D,0,-Ne),Ne=0)),Vt.S.h(tt,Ne),B=Math.max(B,W),M=Math.max(M,F+(b===0?0:v)+Se.width),q=W;V++}switch(0<b&&(e?(B+=Math.max(0,n),tt<M&&Ps(t,p,M-tt,0,ft,u-1),0<L&&(d||na(t,L,0,0,u-1),M+=L)):(M+=Math.max(0,n),q<B&&Ps(t,p,0,B-q,ft,u-1),0<L&&(d||na(t,0,L,0,u-1),B+=L))),L=d=0,p){case Sh:e?d+=M/2-t.focus.x-S/2:L+=B/2-t.focus.y-S/2;break;case oa:0<b?e?d+=M/2-t.focus.x-S/2:L+=B/2-t.focus.y-S/2:e?(at=h[0].S.x+h[0].ka.x,d+=at+(h[u-1].S.x+h[u-1].ka.x+2*h[u-1].focus.x-at)/2-t.focus.x-S/2):(at=h[0].S.y+h[0].ka.y,L+=at+(h[u-1].S.y+h[u-1].ka.y+2*h[u-1].focus.y-at)/2-t.focus.y-S/2);break;case mo:e?(d-=S,M+=S):(L-=S,B+=S);break;case xo:e?(d+=M-t.width+S,M+=S):(L+=B-t.height+S,B+=S);break;case pr:e?1<u?d+=at+y/2-t.focus.x:d+=h[0].focus.x-t.focus.x+h[0].ka.x:1<u?L+=at+y/2-t.focus.y:L+=h[0].focus.y-t.focus.y+h[0].ka.y;break;case dr:e?d+=M+y/2-t.focus.x:L+=B+y/2-t.focus.y;break;case Io:break;default:X("Unhandled alignment value "+p.toString())}for(S=0;S<u;S++)at=h[S],e?at.S.h(at.S.x+at.ka.x-d,at.S.y+(135<r?(g?-B:-at.Ba.height)+at.ka.y-n:N+n+at.ka.y)):at.S.h(at.S.x+(135<r?(g?-M:-at.Ba.width)+at.ka.x-n:i+n+at.ka.x),at.S.y+at.ka.y-L);if(u=h=0,g?e?(M=uc(t,M,d),0>d&&(d=0),135<r&&(L+=B+n),B+=N+n,p===Io&&(h+=y/2+t.focus.x),u+=N+n):(135<r&&(d+=M+n),M+=i+n,B=pc(t,B,L),0>L&&(L=0),p===Io&&(u+=y/2+t.focus.y),h+=i+n):e?(t.comments===null?i>M&&(M=dc(p,i-M,0),h=M.x,u=M.y,M=i,d=0):M=uc(t,M,d),0>d&&(h-=d,d=0),135<r&&(L+=B+n),B=Math.max(Math.max(B,N),B+N+n),u+=N+n):(135<r&&(d+=M+n),M=Math.max(Math.max(M,i),M+i+n),t.comments===null?N>B&&(B=dc(p,0,N-B),h=B.x,u=B.y,B=N,L=0):B=pc(t,B,L),0>L&&(u-=L,L=0),h+=i+n),0<b)r=wn(this,4),b=wn(this,4),e?(r[2].h(0,N+n),r[3].h(r[2].x,B),b[2].h(M,r[2].y),b[3].h(b[2].x,r[3].y)):(r[2].h(i+n,0),r[3].h(M,r[2].y),b[2].h(r[2].x,B),b[3].h(r[3].x,b[2].y));else{for(r=wn(this,j.length+2),b=wn(this,D.length+2),p=0;p<j.length;p++)g=j[p],r[p+2].h(g.x+h,g.y+u);for(p=0;p<D.length;p++)g=D[p],b[p+2].h(g.x+h,g.y+u)}e?(r[0].h(d,0),r[1].h(r[0].x,N),r[2].y<r[1].y&&(r[2].x>r[0].x?r[2].assign(r[1]):r[1].assign(r[2])),r[3].y<r[2].y&&(r[3].x>r[0].x?r[3].assign(r[2]):r[2].assign(r[3])),b[0].h(d+i,0),b[1].h(b[0].x,N),b[2].y<b[1].y&&(b[2].x<b[0].x?b[2].assign(b[1]):b[1].assign(b[2])),b[3].y<b[2].y&&(b[3].x<b[0].x?b[3].assign(b[2]):b[2].assign(b[3])),r[2].y-=n/2,b[2].y-=n/2):(r[0].h(0,L),r[1].h(i,r[0].y),r[2].x<r[1].x&&(r[2].y>r[0].y?r[2].assign(r[1]):r[1].assign(r[2])),r[3].x<r[2].x&&(r[3].y>r[0].y?r[3].assign(r[2]):r[2].assign(r[3])),b[0].h(0,L+N),b[1].h(i,b[0].y),b[2].x<b[1].x&&(b[2].y<b[0].y?b[2].assign(b[1]):b[1].assign(b[2])),b[3].x<b[2].x&&(b[3].y<b[0].y?b[3].assign(b[2]):b[2].assign(b[3])),r[2].x-=n/2,b[2].x-=n/2),Yi(this,j),Yi(this,D),t.so=r,t.Eo=b,t.ka.h(d,L),t.Ba.h(M,B)}break;default:X("Unhandled compaction value "+t.compaction.toString())}}};function Py(t,e){if(e.childrenCount===0){var n=!1,i=0;e.parent!==null&&(i=e.parent.angle,n=e.parent.alignment,n=Wr(n));var r=lc(e);e.S.h(0,0),e.Ba.h(e.width,e.height),e.parent===null||e.comments===null||(i!==180&&i!==270||n)&&!r?e.ka.h(0,0):i===180&&!n||(i===90||i===270)&&r?e.ka.h(e.width-2*e.focus.x,0):e.ka.h(0,e.height-2*e.focus.y)}else{i=Ni(e),n=i===90||i===270;var s=0;r=e.children;for(var h=r.length,u=0;u<h;u++){var p=r[u];s=Math.max(s,n?p.Ba.width:p.Ba.height)}var d=e.alignment,g=d===mo,c=d===xo;u=Wr(d);var y=Math.max(0,e.breadthLimit);p=yh(e);var S=e.nodeSpacing,v=ur(e),L=g||c?0:v/2,N=e.rowSpacing,M=0;(g||c||e.Gl||e.Hl&&e.maxGenerationCount===1)&&(M=Math.max(0,e.rowIndent)),g=e.width;var B=e.height,F=0,j=0,D=0,R=0,W=0,tt=0,q=0,b=0,V=0;if(u&&!$l(d)&&135<i&&r.reverse(),$l(d))if(1<h)for(var ft=0;ft<h;ft++){var at=r[ft],Mt=at.Ba;ft%2===0&&ft!==h-1&&(V=Math.max(V,(n?Mt.width:Mt.height)+Jr(at)-S))}else h===1&&(V=n?r[0].Ba.width:r[0].Ba.height);if(u)switch(d){case pr:case yo:j=135>i?wy(e,r,V,F,j):Ly(e,r,V,F,j),V=j.x,F=j.width,j=j.height;break;case dr:for(t=0;t<h;t++)y=r[t],L=y.Ba,D=q===0?0:N,n?(y.S.h(s-L.width,W+D),F=Math.max(F,L.width),j=Math.max(j,W+D+L.height),W+=D+L.height):(y.S.h(R+D,s-L.height),F=Math.max(F,R+D+L.width),j=Math.max(j,L.height),R+=D+L.width),q++;break;case Io:for(s=0;s<h;s++)t=r[s],y=t.Ba,L=q===0?0:N,n?(t.S.h(S/2+e.focus.x,W+L),F=Math.max(F,y.width),j=Math.max(j,W+L+y.height),W+=L+y.height):(t.S.h(R+L,S/2+e.focus.y),F=Math.max(F,R+L+y.width),j=Math.max(j,y.height),R+=L+y.width),q++}else for(ft=0;ft<h;ft++){if(at=r[ft],Mt=at.Ba,n){0<y&&0<q&&R+S+Mt.width>y&&(R<s&&Ps(e,d,s-R,0,b,ft-1),tt++,q=0,b=ft,D=j,R=0,W=135<i?-j-N:j+N);var Vt=q===0?L:S;id(t,at,0,W),at.S.h(R+Vt,W),F=Math.max(F,R+Vt+Mt.width),j=Math.max(j,D+(tt===0?0:N)+Mt.height),R+=Vt+Mt.width}else 0<y&&0<q&&W+S+Mt.height>y&&(W<s&&Ps(e,d,0,s-W,b,ft-1),tt++,q=0,b=ft,D=F,W=0,R=135<i?-F-N:F+N),Vt=q===0?L:S,id(t,at,R,0),at.S.h(R,W+Vt),j=Math.max(j,W+Vt+Mt.height),F=Math.max(F,D+(tt===0?0:N)+Mt.width),W+=Vt+Mt.height;q++}switch(0<tt&&(n?(j+=Math.max(0,p),R<F&&Ps(e,d,F-R,0,b,h-1),0<M&&(c||na(e,M,0,0,h-1),F+=M)):(F+=Math.max(0,p),W<j&&Ps(e,d,0,j-W,b,h-1),0<M&&(c||na(e,0,M,0,h-1),j+=M))),M=c=0,d){case Sh:n?c+=F/2-e.focus.x-v/2:M+=j/2-e.focus.y-v/2;break;case oa:0<tt?n?c+=F/2-e.focus.x-v/2:M+=j/2-e.focus.y-v/2:n?(d=r[0].S.x+r[0].ka.x,c+=d+(r[h-1].S.x+r[h-1].ka.x+2*r[h-1].focus.x-d)/2-e.focus.x-v/2):(d=r[0].S.y+r[0].ka.y,M+=d+(r[h-1].S.y+r[h-1].ka.y+2*r[h-1].focus.y-d)/2-e.focus.y-v/2);break;case mo:n?(c-=v,F+=v):(M-=v,j+=v);break;case xo:n?(c+=F-e.width+v,F+=v):(M+=j-e.height+v,j+=v);break;case pr:case yo:n?1<h?c+=V+S/2-e.focus.x:c+=r[0].focus.x-e.focus.x+r[0].ka.x:1<h?M+=V+S/2-e.focus.y:M+=r[0].focus.y-e.focus.y+r[0].ka.y;break;case dr:n?c+=F+S/2-e.focus.x:M+=j+S/2-e.focus.y;break;case Io:break;default:X("Unhandled alignment value "+d.toString())}for(v=0;v<h;v++)d=r[v],n?d.S.h(d.S.x+d.ka.x-c,d.S.y+(135<i?(u?-j:-d.Ba.height)+d.ka.y-p:B+p+d.ka.y)):d.S.h(d.S.x+(135<i?(u?-F:-d.Ba.width)+d.ka.x-p:g+p+d.ka.x),d.S.y+d.ka.y-M);n?(F=uc(e,F,c),0>c&&(c=0),135<i&&(M+=j+p),j=Math.max(Math.max(j,B),j+B+p)):(135<i&&(c+=F+p),F=Math.max(Math.max(F,g),F+g+p),j=pc(e,j,M),0>M&&(M=0)),e.ka.h(c,M),e.Ba.h(F,j)}}function wy(t,e,n,i,r){var s=e.length;if(s===0)return new E(n,0,i,r);if(s===1)return t=e[0],i=t.Ba.width,r=t.Ba.height,new E(n,0,i,r);for(var h=t.nodeSpacing,u=t.rowSpacing,p=Ni(t)===90,d=0,g=0,c=0,y=0;y<s;y++)if(!(y%2!==0||1<s&&y===s-1)){var S=e[y],v=S.Ba,L=d===0?0:u;if(p){var N=Jr(S)-h;S.S.h(n-(v.width+N),c+L),i=Math.max(i,v.width+N),r=Math.max(r,c+L+v.height),c+=L+v.height}else N=Jr(S)-h,S.S.h(g+L,n-(v.height+N)),r=Math.max(r,v.height+N),i=Math.max(i,g+L+v.width),g+=L+v.width;d++}for(d=0,S=g,y=c,p?(g=n+h,c=0):(g=0,c=n+h),v=0;v<s;v++)if(v%2!==0){L=e[v],N=L.Ba;var M=d===0?0:u;if(p){var B=Jr(L)-h;L.S.h(g+B,c+M),i=Math.max(i,g+N.width+B),r=Math.max(r,c+M+N.height),c+=M+N.height}else B=Jr(L)-h,L.S.h(g+M,c+B),i=Math.max(i,g+M+N.width),r=Math.max(r,c+N.height+B),g+=M+N.width;d++}return 1<s&&s%2===1&&(e=e[s-1],s=e.Ba,u=e.parent===null?0:e.parent.rowSpacing,p?(e.S.h(n+h/2-e.focus.x-e.ka.x,r+u),p=n+h/2-e.focus.x-e.ka.x,i=Math.max(i,p+s.width),0>p&&(i-=p),r=Math.max(r,Math.max(y,c)+u+s.height),0>e.S.x&&(n=nd(t,e.S.x,!1,n,h))):(e.S.h(i+u,n+h/2-e.focus.y-e.ka.y),i=Math.max(i,Math.max(S,g)+u+s.width),c=n+h/2-e.focus.y-e.ka.y,r=Math.max(r,c+s.height),0>c&&(r-=c),0>e.S.y&&(n=nd(t,e.S.y,!0,n,h)))),new E(n,0,i,r)}function Ly(t,e,n,i,r){var s=e.length;if(s===0)return new E(n,0,i,r);if(s===1)return e=e[0],i=e.Ba.width,r=e.Ba.height,new E(n,0,i,r);for(var h=t.nodeSpacing,u=t.rowSpacing,p=Ni(t)===270,d=0,g=0,c=0,y=0;y<s;y++)if(!(y%2!==0||1<s&&y===s-1)){var S=e[y],v=S.Ba,L=d===0?0:u;if(p){var N=Jr(S)-h;c-=L+v.height,S.S.h(n-(v.width+N),c),i=Math.max(i,v.width+N),r=Math.max(r,Math.abs(c))}else N=Jr(S)-h,g-=L+v.width,S.S.h(g,n-(v.height+N)),r=Math.max(r,v.height+N),i=Math.max(i,Math.abs(g));d++}for(d=0,S=g,y=c,p?(g=n+h,c=0):(g=0,c=n+h),v=0;v<s;v++)if(v%2!==0){L=e[v],N=L.Ba;var M=d===0?0:u;if(p){var B=Jr(L)-h;c-=M+N.height,L.S.h(g+B,c),i=Math.max(i,g+N.width+B),r=Math.max(r,Math.abs(c))}else B=Jr(L)-h,g-=M+N.width,L.S.h(g,c+B),r=Math.max(r,c+N.height+B),i=Math.max(i,Math.abs(g));d++}for(1<s&&s%2===1&&(u=e[s-1],d=u.Ba,v=u.parent===null?0:u.parent.rowSpacing,p?(u.S.h(n+h/2-u.focus.x-u.ka.x,-r-d.height-v),g=n+h/2-u.focus.x-u.ka.x,i=Math.max(i,g+d.width),0>g&&(i-=g),r=Math.max(r,Math.abs(Math.min(y,c))+v+d.height),0>u.S.x&&(n=nd(t,u.S.x,!1,n,h))):(u.S.h(-i-d.width-v,n+h/2-u.focus.y-u.ka.y),i=Math.max(i,Math.abs(Math.min(S,g))+v+d.width),c=n+h/2-u.focus.y-u.ka.y,r=Math.max(r,c+d.height),0>c&&(r-=c),0>u.S.y&&(n=nd(t,u.S.y,!0,n,h)))),t=0;t<s;t++)h=e[t],p?h.S.h(h.S.x,h.S.y+r):h.S.h(h.S.x+i,h.S.y);return new E(n,0,i,r)}function Jr(t){return t.parent===null?0:t.parent.nodeSpacing}function nd(t,e,n,i,r){t=t.children;for(var s=t.length,h=0;h<s;h++)n?t[h].S.h(t[h].S.x,t[h].S.y-e):t[h].S.h(t[h].S.x-e,t[h].S.y);return e=t[s-1],Math.max(i,n?e.ka.y+e.focus.y-r/2:e.ka.x+e.focus.x-r/2)}function uc(t,e,n){switch(t.alignment){case oa:case Sh:return n+t.width>e&&(e=n+t.width),0>n&&(e-=n),e;case mo:return t.width>e?t.width:e;case xo:return 2*t.focus.x>e?t.width:e+t.width-2*t.focus.x;case pr:case yo:return Math.max(t.width,Math.max(e,n+t.width)-Math.min(0,n));case dr:return t.width-t.focus.x+t.nodeSpacing/2+e;case Io:return Math.max(t.width,t.focus.x+t.nodeSpacing/2+e);default:return e}}function pc(t,e,n){switch(t.alignment){case oa:case Sh:return n+t.height>e&&(e=n+t.height),0>n&&(e-=n),e;case mo:return t.height>e?t.height:e;case xo:return 2*t.focus.y>e?t.height:e+t.height-2*t.focus.y;case pr:case yo:return Math.max(t.height,Math.max(e,n+t.height)-Math.min(0,n));case dr:return t.height-t.focus.y+t.nodeSpacing/2+e;case Io:return Math.max(t.height,t.focus.y+t.nodeSpacing/2+e);default:return e}}function dc(t,e,n){switch(t){case Sh:e/=2,n/=2;break;case oa:e/=2,n/=2;break;case mo:n=e=0;break;case xo:break;default:X("Unhandled alignment value "+t.toString())}return new T(e,n)}function Ps(t,e,n,i,r,s){e=dc(e,n,i),na(t,e.x,e.y,r,s)}function na(t,e,n,i,r){if(e!==0||n!==0)for(t=t.children;i<=r;i++){var s=t[i].S;s.x+=e,s.y+=n}}function id(t,e,n,i){var r=e.parent;switch(t.nd){case co:for(t=e.sourceEdges;t.next();)e=t.value,e.fromVertex===r&&e.relativePoint.h(n,i);break;case ia:for(t=e.destinationEdges;t.next();)e=t.value,e.toVertex===r&&e.relativePoint.h(n,i);break;default:X("Unhandled path value "+t.nd.toString())}}function od(t,e,n){for(var i=0;i<t.length;i++){var r=t[i];r.x+=e,r.y+=n}}function My(t,e,n,i,r,s,h,u){var p=Ni(e),d=p===90||p===270,g=e.nodeSpacing;e=i;var c=r;i=s;var y=h,S=n.so,v=n.Eo;h=n.Ba;var L=d?Math.max(y,h.height):Math.max(i,h.width);if((S===null||p!==Ni(n))&&(S=wn(t,2),v=wn(t,2),d?(S[0].h(0,0),S[1].h(0,h.height),v[0].h(h.width,0),v[1].h(v[0].x,S[1].y)):(S[0].h(0,0),S[1].h(h.width,0),v[0].h(0,h.height),v[1].h(S[1].x,v[0].y))),d){if(y=9999999,!(c===null||2>c.length||S===null||2>S.length))for(r=n=0;n<c.length&&r<S.length;){s=c[n];var N=S[r];p=N.x,d=N.y,p+=i;var M=s;n+1<c.length&&(M=c[n+1]);var B=N;N=B.x,B=B.y,r+1<S.length&&(B=S[r+1],N=B.x,B=B.y,N+=i);var F=y;s.y===d?F=p-s.x:s.y>d&&s.y<B?F=p+(s.y-d)/(B-d)*(N-p)-s.x:d>s.y&&d<M.y&&(F=p-(s.x+(d-s.y)/(M.y-s.y)*(M.x-s.x))),F<y&&(y=F),M.y<=s.y?n++:B<=d?r++:(M.y<=B&&n++,B<=M.y&&r++)}if(y=i-y,y+=g,n=S,r=y,e===null||2>e.length||n===null||2>n.length)i=null;else{for(g=wn(t,e.length+n.length),i=s=p=0;s<n.length&&n[s].y<e[0].y;)d=n[s++],g[i++].h(d.x+r,d.y);for(;p<e.length;)d=e[p++],g[i++].h(d.x,d.y);for(p=e[e.length-1].y;s<n.length&&n[s].y<=p;)s++;for(;s<n.length&&n[s].y>p;)d=n[s++],g[i++].h(d.x+r,d.y);for(n=wn(t,i),p=0;p<i;p++)n[p].assign(g[p]);Yi(t,g),i=n}if(s=v,p=y,c===null||2>c.length||s===null||2>s.length)r=null;else{for(g=wn(t,c.length+s.length),r=d=n=0;n<c.length&&c[n].y<s[0].y;)M=c[n++],g[r++].h(M.x,M.y);for(;d<s.length;)M=s[d++],g[r++].h(M.x+p,M.y);for(s=s[s.length-1].y;n<c.length&&c[n].y<=s;)n++;for(;n<c.length&&c[n].y>s;)p=c[n++],g[r++].h(p.x,p.y);for(s=wn(t,r),n=0;n<r;n++)s[n].assign(g[n]);Yi(t,g),r=s}return s=Math.max(0,y)+h.width,h=L,Yi(t,e),Yi(t,S),Yi(t,c),Yi(t,v),u[0]=i,u[1]=r,new E(y,0,s,h)}if(i=9999999,!(c===null||2>c.length||S===null||2>S.length))for(r=n=0;n<c.length&&r<S.length;)s=c[n],N=S[r],p=N.x,d=N.y,d+=y,M=s,n+1<c.length&&(M=c[n+1]),B=N,N=B.x,B=B.y,r+1<S.length&&(B=S[r+1],N=B.x,B=B.y,B+=y),F=i,s.x===p?F=d-s.y:s.x>p&&s.x<N?F=d+(s.x-p)/(N-p)*(B-d)-s.y:p>s.x&&p<M.x&&(F=d-(s.y+(p-s.x)/(M.x-s.x)*(M.y-s.y))),F<i&&(i=F),M.x<=s.x?n++:N<=p?r++:(M.x<=N&&n++,N<=M.x&&r++);if(y-=i,y+=g,n=S,r=y,e===null||2>e.length||n===null||2>n.length)i=null;else{for(g=wn(t,e.length+n.length),i=s=p=0;s<n.length&&n[s].x<e[0].x;)d=n[s++],g[i++].h(d.x,d.y+r);for(;p<e.length;)d=e[p++],g[i++].h(d.x,d.y);for(p=e[e.length-1].x;s<n.length&&n[s].x<=p;)s++;for(;s<n.length&&n[s].x>p;)d=n[s++],g[i++].h(d.x,d.y+r);for(n=wn(t,i),p=0;p<i;p++)n[p].assign(g[p]);Yi(t,g),i=n}if(s=v,p=y,c===null||2>c.length||s===null||2>s.length)r=null;else{for(g=wn(t,c.length+s.length),r=d=n=0;n<c.length&&c[n].x<s[0].x;)M=c[n++],g[r++].h(M.x,M.y);for(;d<s.length;)M=s[d++],g[r++].h(M.x,M.y+p);for(s=s[s.length-1].x;n<c.length&&c[n].x<=s;)n++;for(;n<c.length&&c[n].x>s;)p=c[n++],g[r++].h(p.x,p.y);for(s=wn(t,r),n=0;n<r;n++)s[n].assign(g[n]);Yi(t,g),r=s}return s=L,h=Math.max(0,y)+h.height,Yi(t,e),Yi(t,S),Yi(t,c),Yi(t,v),u[0]=i,u[1]=r,new E(y,0,s,h)}function wn(t,e){if(t=t.Nt[e],t!==void 0&&(t=t.pop(),t!==void 0))return t;t=[];for(var n=0;n<e;n++)t[n]=new T;return t}function Yi(t,e){var n=e.length,i=t.Nt[n];i===void 0&&(i=[],t.Nt[n]=i),i.push(e)}mt.prototype.arrangeTrees=function(){if(this.Lb===ld)for(var t=this.Ob.iterator;t.next();){var e=t.value;if(e instanceof di){var n=e.node;if(n!==null){var i=n.position;n=i.x,i=i.y,isFinite(n)||(n=0),isFinite(i)||(i=0),fc(this,e,n,i)}}}else{for(t=[],e=this.Ob.iterator;e.next();)n=e.value,n instanceof di&&t.push(n);switch(this.sorting){case vh:break;case Ql:t.reverse();break;case bl:t.sort(this.comparer);break;case ql:t.sort(this.comparer),t.reverse();break;default:X("Unhandled sorting value "+this.sorting.toString())}for(n=this.arrangementOrigin,e=n.x,n=n.y,i=0;i<t.length;i++){var r=t[i];switch(fc(this,r,e+r.ka.x,n+r.ka.y),this.Lb){case hd:n+=r.Ba.height+this.Pd.height;break;case xc:e+=r.Ba.width+this.Pd.width;break;default:X("Unhandled arrangement value "+this.Lb.toString())}}}};function fc(t,e,n,i){if(e!==null){e.x=n,e.y=i,e=e.children;for(var r=e.length,s=0;s<r;s++){var h=e[s];fc(t,h,n+h.S.x,i+h.S.y)}}}mt.prototype.commitLayout=function(){this.Vu(),this.commitNodes(),this.cu(),this.isRouting&&this.commitLinks()},mt.prototype.commitNodes=function(){for(var t=this.network.vertexes.iterator;t.next();)t.value.commit();for(t.reset();t.next();)this.layoutComments(t.value)},mt.prototype.cu=function(){if(this.layerStyle===ud){for(var t=this.uv,e=[],n=null,i=this.network.vertexes.iterator;i.next();){var r=i.value;n===null?n=r.bounds.copy():n.Vc(r.bounds);var s=e[r.level];s===void 0?s=yh(r):s=Math.max(s,yh(r)),e[r.level]=s}for(i=0;i<e.length;i++)e[i]===void 0&&(e[i]=0);if(this.angle===90||this.angle===270?(n.vc(this.nodeSpacing/2,this.layerSpacing),i=new T(-this.nodeSpacing/2,-this.layerSpacing/2)):(n.vc(this.layerSpacing,this.nodeSpacing/2),i=new T(-this.layerSpacing/2,-this.nodeSpacing/2)),r=[],n=this.angle===90||this.angle===270?n.width:n.height,s=0,this.angle===180||this.angle===270)for(var h=0;h<t.length;h++)s+=t[h]+e[h];for(h=0;h<t.length;h++){var u=t[h]+e[h];this.angle===270?(s-=u,r.push(new E(0,s,n,u))):this.angle===90?(r.push(new E(0,s,n,u)),s+=u):this.angle===180?(s-=u,r.push(new E(s,0,u,n))):(r.push(new E(s,0,u,n)),s+=u)}this.commitLayers(r,i)}},mt.prototype.commitLayers=function(){},mt.prototype.commitLinks=function(){for(var t=this.network.edges.iterator;t.next();)t.value.commit()},mt.prototype.Vu=function(){for(var t=this.Ob.iterator;t.next();){var e=t.value;e instanceof di&&ky(this,e)}};function ky(t,e){if(e!==null){t.setPortSpots(e),e=e.children;for(var n=e.length,i=0;i<n;i++)ky(t,e[i])}}mt.prototype.setPortSpots=function(t){var e=t.alignment;if(Wr(e)){var n=this.nd===co,i=Ni(t);switch(i){case 0:var r=Tn;break;case 90:r=ai;break;case 180:r=si;break;default:r=ri}var s=t.children,h=s.length;switch(e){case pr:case yo:for(e=0;e<h;e++){var u=s[e];if(u=(n?u.sourceEdges:u.destinationEdges).first(),u!==null&&(u=u.link,u!==null)){var p=i===90||i===270?si:ri;if(h===1||e===h-1&&h%2===1)switch(i){case 0:p=si;break;case 90:p=ri;break;case 180:p=Tn;break;default:p=ai}else e%2===0&&(p=i===90||i===270?Tn:ai);n?(t.setsPortSpot&&(u.fromSpot=r),t.setsChildPortSpot&&(u.toSpot=p)):(t.setsPortSpot&&(u.fromSpot=p),t.setsChildPortSpot&&(u.toSpot=r))}}break;case dr:for(i=i===90||i===270?Tn:ai,s=n?t.destinationEdges:t.sourceEdges;s.next();)h=s.value.link,h!==null&&(n?(t.setsPortSpot&&(h.fromSpot=r),t.setsChildPortSpot&&(h.toSpot=i)):(t.setsPortSpot&&(h.fromSpot=i),t.setsChildPortSpot&&(h.toSpot=r)));break;case Io:for(i=i===90||i===270?si:ri,s=n?t.destinationEdges:t.sourceEdges;s.next();)h=s.value.link,h!==null&&(n?(t.setsPortSpot&&(h.fromSpot=r),t.setsChildPortSpot&&(h.toSpot=i)):(t.setsPortSpot&&(h.fromSpot=i),t.setsChildPortSpot&&(h.toSpot=r)))}}else if(n=Ni(t),this.nd===co){for(r=t.destinationEdges;r.next();)if(i=r.value.link,i!==null){if(t.setsPortSpot)if(t.portSpot.Rb())switch(n){case 0:i.fromSpot=Tn;break;case 90:i.fromSpot=ai;break;case 180:i.fromSpot=si;break;default:i.fromSpot=ri}else i.fromSpot=t.portSpot;if(t.setsChildPortSpot)if(t.childPortSpot.Rb())switch(n){case 0:i.toSpot=si;break;case 90:i.toSpot=ri;break;case 180:i.toSpot=Tn;break;default:i.toSpot=ai}else i.toSpot=t.childPortSpot}}else for(r=t.sourceEdges;r.next();)if(i=r.value.link,i!==null){if(t.setsPortSpot)if(t.portSpot.Rb())switch(n){case 0:i.toSpot=Tn;break;case 90:i.toSpot=ai;break;case 180:i.toSpot=si;break;default:i.toSpot=ri}else i.toSpot=t.portSpot;if(t.setsChildPortSpot)if(t.childPortSpot.Rb())switch(n){case 0:i.fromSpot=si;break;case 90:i.fromSpot=ri;break;case 180:i.fromSpot=Tn;break;default:i.fromSpot=ai}else i.fromSpot=t.childPortSpot}};function Ni(t){return t=t.angle,45>=t?0:135>=t?90:225>=t?180:315>=t?270:0}function yh(t){var e=Ni(t);e=e===90||e===270;var n=t.layerSpacing;if(0<t.layerSpacingParentOverlap){var i=Math.min(1,t.layerSpacingParentOverlap);n-=e?t.height*i:t.width*i}return n<(e?-t.height:-t.width)&&(n=e?-t.height:-t.width),n}function ur(t){var e=Ni(t),n=t.nodeIndent;if(0<t.nodeIndentPastParent){var i=Math.min(1,t.nodeIndentPastParent);n+=e===90||e===270?t.width*i:t.height*i}return n=Math.max(0,n)}Z.Object.defineProperties(mt.prototype,{roots:{get:function(){return this.Ob},set:function(t){this.Ob!==t&&(this.Ob=t,this.D())}},path:{get:function(){return this.vn},set:function(t){this.vn!==t&&(this.vn=t,this.D())}},treeStyle:{get:function(){return this.Pn},set:function(t){this.Lb===t||t!==ad&&t!==cc&&t!==gc&&t!==mc||(this.Pn=t,this.D())}},layerStyle:{get:function(){return this.Up},set:function(t){this.Lb===t||t!==yc&&t!==vc&&t!==ud||(this.Up=t,this.D())}},comments:{get:function(){return this.ld},set:function(t){this.ld!==t&&(this.ld=t,this.D())}},arrangement:{get:function(){return this.Lb},set:function(t){this.Lb===t||t!==hd&&t!==xc&&t!==ld||(this.Lb=t,this.D())}},arrangementSpacing:{get:function(){return this.Pd},set:function(t){this.Pd.C(t)||(this.Pd.assign(t),this.D())}},rootDefaults:{get:function(){return this.V},set:function(t){this.V!==t&&(this.V=t,this.D())}},alternateDefaults:{get:function(){return this.Y},set:function(t){this.Y!==t&&(this.Y=t,this.D())}},sorting:{get:function(){return this.V.sorting},set:function(t){this.V.sorting===t||t!==vh&&t!==Ql&&t!==bl&&!ql||(this.V.sorting=t,this.D())}},comparer:{get:function(){return this.V.comparer},set:function(t){this.V.comparer!==t&&(this.V.comparer=t,this.D())}},angle:{get:function(){return this.V.angle},set:function(t){this.V.angle!==t&&(t===0||t===90||t===180||t===270?(this.V.angle=t,this.D()):X("TreeLayout.angle must be 0, 90, 180, or 270"))}},alignment:{get:function(){return this.V.alignment},set:function(t){this.V.alignment!==t&&(this.V.alignment=t,this.D())}},nodeIndent:{get:function(){return this.V.nodeIndent},set:function(t){this.V.nodeIndent!==t&&0<=t&&(this.V.nodeIndent=t,this.D())}},nodeIndentPastParent:{get:function(){return this.V.nodeIndentPastParent},set:function(t){this.V.nodeIndentPastParent!==t&&0<=t&&1>=t&&(this.V.nodeIndentPastParent=t,this.D())}},nodeSpacing:{get:function(){return this.V.nodeSpacing},set:function(t){this.V.nodeSpacing!==t&&(this.V.nodeSpacing=t,this.D())}},layerSpacing:{get:function(){return this.V.layerSpacing},set:function(t){this.V.layerSpacing!==t&&(this.V.layerSpacing=t,this.D())}},layerSpacingParentOverlap:{get:function(){return this.V.layerSpacingParentOverlap},set:function(t){this.V.layerSpacingParentOverlap!==t&&0<=t&&1>=t&&(this.V.layerSpacingParentOverlap=t,this.D())}},compaction:{get:function(){return this.V.compaction},set:function(t){this.V.compaction===t||t!==sd&&t!==tu||(this.V.compaction=t,this.D())}},breadthLimit:{get:function(){return this.V.breadthLimit},set:function(t){this.V.breadthLimit!==t&&0<=t&&(this.V.breadthLimit=t,this.D())}},rowSpacing:{get:function(){return this.V.rowSpacing},set:function(t){this.V.rowSpacing!==t&&(this.V.rowSpacing=t,this.D())}},rowIndent:{get:function(){return this.V.rowIndent},set:function(t){this.V.rowIndent!==t&&0<=t&&(this.V.rowIndent=t,this.D())}},commentSpacing:{get:function(){return this.V.commentSpacing},set:function(t){this.V.commentSpacing!==t&&(this.V.commentSpacing=t,this.D())}},commentMargin:{get:function(){return this.V.commentMargin},set:function(t){this.V.commentMargin!==t&&(this.V.commentMargin=t,this.D())}},setsPortSpot:{get:function(){return this.V.setsPortSpot},set:function(t){this.V.setsPortSpot!==t&&(this.V.setsPortSpot=t,this.D())}},portSpot:{get:function(){return this.V.portSpot},set:function(t){this.V.portSpot.C(t)||(this.V.portSpot=t,this.D())}},setsChildPortSpot:{get:function(){return this.V.setsChildPortSpot},set:function(t){this.V.setsChildPortSpot!==t&&(this.V.setsChildPortSpot=t,this.D())}},childPortSpot:{get:function(){return this.V.childPortSpot},set:function(t){this.V.childPortSpot.C(t)||(this.V.childPortSpot=t,this.D())}},alternateSorting:{get:function(){return this.Y.sorting},set:function(t){this.Y.sorting===t||t!==vh&&t!==Ql&&t!==bl&&!ql||(this.Y.sorting=t,this.D())}},alternateComparer:{get:function(){return this.Y.comparer},set:function(t){this.Y.comparer!==t&&(this.Y.comparer=t,this.D())}},alternateAngle:{get:function(){return this.Y.angle},set:function(t){this.Y.angle===t||t!==0&&t!==90&&t!==180&&t!==270||(this.Y.angle=t,this.D())}},alternateAlignment:{get:function(){return this.Y.alignment},set:function(t){this.Y.alignment!==t&&(this.Y.alignment=t,this.D())}},alternateNodeIndent:{get:function(){return this.Y.nodeIndent},set:function(t){this.Y.nodeIndent!==t&&0<=t&&(this.Y.nodeIndent=t,this.D())}},alternateNodeIndentPastParent:{get:function(){return this.Y.nodeIndentPastParent},set:function(t){this.Y.nodeIndentPastParent!==t&&0<=t&&1>=t&&(this.Y.nodeIndentPastParent=t,this.D())}},alternateNodeSpacing:{get:function(){return this.Y.nodeSpacing},set:function(t){this.Y.nodeSpacing!==t&&(this.Y.nodeSpacing=t,this.D())}},alternateLayerSpacing:{get:function(){return this.Y.layerSpacing},set:function(t){this.Y.layerSpacing!==t&&(this.Y.layerSpacing=t,this.D())}},alternateLayerSpacingParentOverlap:{get:function(){return this.Y.layerSpacingParentOverlap},set:function(t){this.Y.layerSpacingParentOverlap!==t&&0<=t&&1>=t&&(this.Y.layerSpacingParentOverlap=t,this.D())}},alternateCompaction:{get:function(){return this.Y.compaction},set:function(t){this.Y.compaction===t||t!==sd&&t!==tu||(this.Y.compaction=t,this.D())}},alternateBreadthLimit:{get:function(){return this.Y.breadthLimit},set:function(t){this.Y.breadthLimit!==t&&0<=t&&(this.Y.breadthLimit=t,this.D())}},alternateRowSpacing:{get:function(){return this.Y.rowSpacing},set:function(t){this.Y.rowSpacing!==t&&(this.Y.rowSpacing=t,this.D())}},alternateRowIndent:{get:function(){return this.Y.rowIndent},set:function(t){this.Y.rowIndent!==t&&0<=t&&(this.Y.rowIndent=t,this.D())}},alternateCommentSpacing:{get:function(){return this.Y.commentSpacing},set:function(t){this.Y.commentSpacing!==t&&(this.Y.commentSpacing=t,this.D())}},alternateCommentMargin:{get:function(){return this.Y.commentMargin},set:function(t){this.Y.commentMargin!==t&&(this.Y.commentMargin=t,this.D())}},alternateSetsPortSpot:{get:function(){return this.Y.setsPortSpot},set:function(t){this.Y.setsPortSpot!==t&&(this.Y.setsPortSpot=t,this.D())}},alternatePortSpot:{get:function(){return this.Y.portSpot},set:function(t){this.Y.portSpot.C(t)||(this.Y.portSpot=t,this.D())}},alternateSetsChildPortSpot:{get:function(){return this.Y.setsChildPortSpot},set:function(t){this.Y.setsChildPortSpot!==t&&(this.Y.setsChildPortSpot=t,this.D())}},alternateChildPortSpot:{get:function(){return this.Y.childPortSpot},set:function(t){this.Y.childPortSpot.C(t)||(this.Y.childPortSpot=t,this.D())}}});var rd=new J(mt,"PathDefault",-1),co=new J(mt,"PathDestination",0),ia=new J(mt,"PathSource",1),vh=new J(mt,"SortingForwards",10),Ql=new J(mt,"SortingReverse",11),bl=new J(mt,"SortingAscending",12),ql=new J(mt,"SortingDescending",13),Sh=new J(mt,"AlignmentCenterSubtrees",20),oa=new J(mt,"AlignmentCenterChildren",21),mo=new J(mt,"AlignmentStart",22),xo=new J(mt,"AlignmentEnd",23),pr=new J(mt,"AlignmentBus",24),yo=new J(mt,"AlignmentBusBranching",25),dr=new J(mt,"AlignmentTopLeftBus",26),Io=new J(mt,"AlignmentBottomRightBus",27),sd=new J(mt,"CompactionNone",30),tu=new J(mt,"CompactionBlock",31),ad=new J(mt,"StyleLayered",40),gc=new J(mt,"StyleLastParents",41),cc=new J(mt,"StyleAlternating",42),mc=new J(mt,"StyleRootOnly",43),hd=new J(mt,"ArrangementVertical",50),xc=new J(mt,"ArrangementHorizontal",51),ld=new J(mt,"ArrangementFixedRoots",52),yc=new J(mt,"LayerIndividual",60),vc=new J(mt,"LayerSiblings",61),ud=new J(mt,"LayerUniform",62);mt.className="TreeLayout",mt.PathDefault=rd,mt.PathDestination=co,mt.PathSource=ia,mt.SortingForwards=vh,mt.SortingReverse=Ql,mt.SortingAscending=bl,mt.SortingDescending=ql,mt.AlignmentCenterSubtrees=Sh,mt.AlignmentCenterChildren=oa,mt.AlignmentStart=mo,mt.AlignmentEnd=xo,mt.AlignmentBus=pr,mt.AlignmentBusBranching=yo,mt.AlignmentTopLeftBus=dr,mt.AlignmentBottomRightBus=Io,mt.CompactionNone=sd,mt.CompactionBlock=tu,mt.StyleLayered=ad,mt.StyleLastParents=gc,mt.StyleAlternating=cc,mt.StyleRootOnly=mc,mt.ArrangementVertical=hd,mt.ArrangementHorizontal=xc,mt.ArrangementFixedRoots=ld,mt.LayerIndividual=yc,mt.LayerSiblings=vc,mt.LayerUniform=ud;function ra(t){zt.call(this,t)}z(ra,zt),ra.prototype.createVertex=function(){return new di(this)},ra.prototype.createEdge=function(){return new Ph(this)},ra.className="TreeNetwork";function di(t){Te.call(this,t),this.W=!1,this.gb=null,this.u=[],this.mb=this.Fa=this.F=this.ga=0,this.ld=null,this.S=new T(0,0),this.Ba=new ht(0,0),this.ka=new T(0,0),this.Hl=this.Gl=this.Iz=!1,this.Eo=this.so=null,this.cd=vh,this.Wc=Vg,this.Gb=0,this.Fb=oa,this.oq=this.nq=0,this.pq=20,this.Yd=50,this.Tp=0,this.ap=tu,this.Uo=0,this.Gq=25,this.$o=this.Fq=10,this.Zo=20,this.Oq=!0,this.wq=He,this.Nq=!0,this.Xo=He}z(di,Te),di.prototype.copyInheritedPropertiesFrom=function(t){t!==null&&(this.cd=t.sorting,this.Wc=t.comparer,this.Gb=t.angle,this.Fb=t.alignment,this.nq=t.nodeIndent,this.oq=t.nodeIndentPastParent,this.pq=t.nodeSpacing,this.Yd=t.layerSpacing,this.Tp=t.layerSpacingParentOverlap,this.ap=t.compaction,this.Uo=t.breadthLimit,this.Gq=t.rowSpacing,this.Fq=t.rowIndent,this.$o=t.commentSpacing,this.Zo=t.commentMargin,this.Oq=t.setsPortSpot,this.wq=t.portSpot,this.Nq=t.setsChildPortSpot,this.Xo=t.childPortSpot)},Z.Object.defineProperties(di.prototype,{initialized:{get:function(){return this.W},set:function(t){this.W!==t&&(this.W=t)}},parent:{get:function(){return this.gb},set:function(t){this.gb!==t&&(this.gb=t)}},children:{get:function(){return this.u},set:function(t){if(this.u!==t){if(t!==null)for(var e=t.length,n=0;n<e;n++);this.u=t}}},level:{get:function(){return this.ga},set:function(t){this.ga!==t&&(this.ga=t)}},descendantCount:{get:function(){return this.F},set:function(t){this.F!==t&&(this.F=t)}},maxChildrenCount:{get:function(){return this.Fa},set:function(t){this.Fa!==t&&(this.Fa=t)}},maxGenerationCount:{get:function(){return this.mb},set:function(t){this.mb!==t&&(this.mb=t)}},comments:{get:function(){return this.ld},set:function(t){if(this.ld!==t){if(t!==null)for(var e=t.length,n=0;n<e;n++);this.ld=t}}},sorting:{get:function(){return this.cd},set:function(t){this.cd!==t&&(this.cd=t)}},comparer:{get:function(){return this.Wc},set:function(t){this.Wc!==t&&(this.Wc=t)}},angle:{get:function(){return this.Gb},set:function(t){this.Gb!==t&&(this.Gb=t)}},alignment:{get:function(){return this.Fb},set:function(t){this.Fb!==t&&(this.Fb=t)}},nodeIndent:{get:function(){return this.nq},set:function(t){this.nq!==t&&(this.nq=t)}},nodeIndentPastParent:{get:function(){return this.oq},set:function(t){this.oq!==t&&(this.oq=t)}},nodeSpacing:{get:function(){return this.pq},set:function(t){this.pq!==t&&(this.pq=t)}},layerSpacing:{get:function(){return this.Yd},set:function(t){this.Yd!==t&&(this.Yd=t)}},layerSpacingParentOverlap:{get:function(){return this.Tp},set:function(t){this.Tp!==t&&(this.Tp=t)}},compaction:{get:function(){return this.ap},set:function(t){this.ap!==t&&(this.ap=t)}},breadthLimit:{get:function(){return this.Uo},set:function(t){this.Uo!==t&&(this.Uo=t)}},rowSpacing:{get:function(){return this.Gq},set:function(t){this.Gq!==t&&(this.Gq=t)}},rowIndent:{get:function(){return this.Fq},set:function(t){this.Fq!==t&&(this.Fq=t)}},commentSpacing:{get:function(){return this.$o},set:function(t){this.$o!==t&&(this.$o=t)}},commentMargin:{get:function(){return this.Zo},set:function(t){this.Zo!==t&&(this.Zo=t)}},setsPortSpot:{get:function(){return this.Oq},set:function(t){this.Oq!==t&&(this.Oq=t)}},portSpot:{get:function(){return this.wq},set:function(t){this.wq.C(t)||(this.wq=t)}},setsChildPortSpot:{get:function(){return this.Nq},set:function(t){this.Nq!==t&&(this.Nq=t)}},childPortSpot:{get:function(){return this.Xo},set:function(t){this.Xo.C(t)||(this.Xo=t)}},childrenCount:{get:function(){return this.children.length}},relativePosition:{get:function(){return this.S},set:function(t){this.S.set(t)}},subtreeSize:{get:function(){return this.Ba},set:function(t){this.Ba.set(t)}},subtreeOffset:{get:function(){return this.ka},set:function(t){this.ka.set(t)}}}),di.className="TreeVertex";function Ph(t){Fn.call(this,t),this.vt=new T(0,0)}z(Ph,Fn),Ph.prototype.commit=function(){var t=this.link;if(t!==null&&!t.isAvoiding){var e=this.network.layout,n=null,i=null;switch(e.nd){case co:n=this.fromVertex,i=this.toVertex;break;case ia:n=this.toVertex,i=this.fromVertex;break;default:X("Unhandled path value "+e.nd.toString())}if(n!==null&&i!==null)if(e=this.vt,e.x!==0||e.y!==0||n.Iz){i=n.bounds;var r=Ni(n),s=yh(n),h=n.rowSpacing;t.hg();var u=t.curve===Yn,p=t.isOrthogonal,d;if(t.eh(),p||u){for(d=2;4<t.pointsCount;)t.Ou(2);var g=t.i(1),c=t.i(2)}else{for(d=1;3<t.pointsCount;)t.Ou(1);g=t.i(0),c=t.i(t.pointsCount-1)}var y=t.i(t.pointsCount-1);r===0?(n.alignment===xo?(r=i.bottom+e.y,e.y===0&&g.y>y.y+n.rowIndent&&(r=Math.min(r,Math.max(g.y,r-ur(n))))):n.alignment===mo?(r=i.top+e.y,e.y===0&&g.y<y.y-n.rowIndent&&(r=Math.max(r,Math.min(g.y,r+ur(n))))):r=n.Gl||n.Hl&&n.maxGenerationCount===1?i.top-n.ka.y+e.y:i.y+i.height/2+e.y,u?(t.l(d,g.x,r),d++,t.l(d,i.right+s,r),d++,t.l(d,i.right+s+(e.x-h)/3,r),d++,t.l(d,i.right+s+2*(e.x-h)/3,r),d++,t.l(d,i.right+s+(e.x-h),r),d++,t.l(d,c.x,r)):(p&&(t.l(d,i.right+s/2,g.y),d++),t.l(d,i.right+s/2,r),d++,t.l(d,i.right+s+e.x-(p?h/2:h),r),d++,p&&t.l(d,t.i(d-1).x,c.y))):r===90?(n.alignment===xo?(r=i.right+e.x,e.x===0&&g.x>y.x+n.rowIndent&&(r=Math.min(r,Math.max(g.x,r-ur(n))))):n.alignment===mo?(r=i.left+e.x,e.x===0&&g.x<y.x-n.rowIndent&&(r=Math.max(r,Math.min(g.x,r+ur(n))))):r=n.Gl||n.Hl&&n.maxGenerationCount===1?i.left-n.ka.x+e.x:i.x+i.width/2+e.x,u?(t.l(d,r,g.y),d++,t.l(d,r,i.bottom+s),d++,t.l(d,r,i.bottom+s+(e.y-h)/3),d++,t.l(d,r,i.bottom+s+2*(e.y-h)/3),d++,t.l(d,r,i.bottom+s+(e.y-h)),d++,t.l(d,r,c.y)):(p&&(t.l(d,g.x,i.bottom+s/2),d++),t.l(d,r,i.bottom+s/2),d++,t.l(d,r,i.bottom+s+e.y-(p?h/2:h)),d++,p&&t.l(d,c.x,t.i(d-1).y))):r===180?(n.alignment===xo?(r=i.bottom+e.y,e.y===0&&g.y>y.y+n.rowIndent&&(r=Math.min(r,Math.max(g.y,r-ur(n))))):n.alignment===mo?(r=i.top+e.y,e.y===0&&g.y<y.y-n.rowIndent&&(r=Math.max(r,Math.min(g.y,r+ur(n))))):r=n.Gl||n.Hl&&n.maxGenerationCount===1?i.top-n.ka.y+e.y:i.y+i.height/2+e.y,u?(t.l(d,g.x,r),d++,t.l(d,i.left-s,r),d++,t.l(d,i.left-s+(e.x+h)/3,r),d++,t.l(d,i.left-s+2*(e.x+h)/3,r),d++,t.l(d,i.left-s+(e.x+h),r),d++,t.l(d,c.x,r)):(p&&(t.l(d,i.left-s/2,g.y),d++),t.l(d,i.left-s/2,r),d++,t.l(d,i.left-s+e.x+(p?h/2:h),r),d++,p&&t.l(d,t.i(d-1).x,c.y))):r===270?(n.alignment===xo?(r=i.right+e.x,e.x===0&&g.x>y.x+n.rowIndent&&(r=Math.min(r,Math.max(g.x,r-ur(n))))):n.alignment===mo?(r=i.left+e.x,e.x===0&&g.x<y.x-n.rowIndent&&(r=Math.max(r,Math.min(g.x,r+ur(n))))):r=n.Gl||n.Hl&&n.maxGenerationCount===1?i.left-n.ka.x+e.x:i.x+i.width/2+e.x,u?(t.l(d,r,g.y),d++,t.l(d,r,i.top-s),d++,t.l(d,r,i.top-s+(e.y+h)/3),d++,t.l(d,r,i.top-s+2*(e.y+h)/3),d++,t.l(d,r,i.top-s+(e.y+h)),d++,t.l(d,r,c.y)):(p&&(t.l(d,g.x,i.top-s/2),d++),t.l(d,r,i.top-s/2),d++,t.l(d,r,i.top-s+e.y+(p?h/2:h)),d++,p&&t.l(d,c.x,t.i(d-1).y))):X("Invalid angle "+r),t.kf()}else t=this.link,s=Ni(n),s!==Ni(i)&&(h=yh(n),u=n.bounds,n=i.bounds,s===0&&n.left-u.right<h+1||s===90&&n.top-u.bottom<h+1||s===180&&u.left-n.right<h+1||s===270&&u.top-n.bottom<h+1||(t.hg(),n=t.curve===Yn,e=t.isOrthogonal,i=Wr(this.fromVertex.alignment),t.eh(),s===0?(s=u.right+h/2,n?t.pointsCount===4&&(n=t.i(3).y,t.M(1,s-20,t.i(1).y),t.l(2,s-20,n),t.l(3,s,n),t.l(4,s+20,n),t.M(5,t.i(5).x,n)):e?i?t.M(3,t.i(2).x,t.i(4).y):t.pointsCount===6&&(t.M(2,s,t.i(2).y),t.M(3,s,t.i(3).y)):t.pointsCount===4?t.l(2,s,t.i(2).y):t.pointsCount===3?t.M(1,s,t.i(2).y):t.pointsCount===2&&t.l(1,s,t.i(1).y)):s===90?(s=u.bottom+h/2,n?t.pointsCount===4&&(n=t.i(3).x,t.M(1,t.i(1).x,s-20),t.l(2,n,s-20),t.l(3,n,s),t.l(4,n,s+20),t.M(5,n,t.i(5).y)):e?i?t.M(3,t.i(2).x,t.i(4).y):t.pointsCount===6&&(t.M(2,t.i(2).x,s),t.M(3,t.i(3).x,s)):t.pointsCount===4?t.l(2,t.i(2).x,s):t.pointsCount===3?t.M(1,t.i(2).x,s):t.pointsCount===2&&t.l(1,t.i(1).x,s)):s===180?(s=u.left-h/2,n?t.pointsCount===4&&(n=t.i(3).y,t.M(1,s+20,t.i(1).y),t.l(2,s+20,n),t.l(3,s,n),t.l(4,s-20,n),t.M(5,t.i(5).x,n)):e?i?t.M(3,t.i(2).x,t.i(4).y):t.pointsCount===6&&(t.M(2,s,t.i(2).y),t.M(3,s,t.i(3).y)):t.pointsCount===4?t.l(2,s,t.i(2).y):t.pointsCount===3?t.M(1,s,t.i(2).y):t.pointsCount===2&&t.l(1,s,t.i(1).y)):s===270&&(s=u.top-h/2,n?t.pointsCount===4&&(n=t.i(3).x,t.M(1,t.i(1).x,s+20),t.l(2,n,s+20),t.l(3,n,s),t.l(4,n,s-20),t.M(5,n,t.i(5).y)):e?i?t.M(3,t.i(2).x,t.i(4).y):t.pointsCount===6&&(t.M(2,t.i(2).x,s),t.M(3,t.i(3).x,s)):t.pointsCount===4?t.l(2,t.i(2).x,s):t.pointsCount===3?t.M(1,t.i(2).x,s):t.pointsCount===2&&t.l(1,t.i(1).x,s)),t.kf()))}},Z.Object.defineProperties(Ph.prototype,{fromVertex:{get:function(){return this.Yc},set:function(t){this.Yc!==t&&(this.Yc=t)}},toVertex:{get:function(){return this.fd},set:function(t){this.fd!==t&&(this.fd=t)}},relativePoint:{get:function(){return this.vt},set:function(t){this.vt.set(t)}}}),Ph.className="TreeEdge",$t.prototype.initializeStandardTools=function(){this.fb("Action",new Ho,this.mouseDownTools),this.fb("Relinking",new hi,this.mouseDownTools),this.fb("LinkReshaping",new de,this.mouseDownTools),this.fb("Rotating",new An,this.mouseDownTools),this.fb("Resizing",new on,this.mouseDownTools),this.fb("Linking",new Sn,this.mouseMoveTools),this.fb("Dragging",new Qt,this.mouseMoveTools),this.fb("DragSelecting",new so,this.mouseMoveTools),this.fb("Panning",new ao,this.mouseMoveTools),this.fb("ContextMenu",new zn,this.mouseUpTools),this.fb("TextEditing",new Kt,this.mouseUpTools),this.fb("ClickCreating",new hs,this.mouseUpTools),this.fb("ClickSelecting",new ja,this.mouseUpTools)},Qi("Horizontal",new Uu),Qi("Spot",new Hu),Qi("Table",new Ju),Qi("Viewbox",new $u),Qi("TableRow",new Zu),Qi("TableColumn",new _u),Qi("Graduated",new cl),Qi("Grid",new gl),Iu.add("GraphLinksModel",ke),Iu.add("TreeModel",ei);var pd=it.go,Sc={get licenseKey(){return I.licenseKey},set licenseKey(t){I.licenseKey=t},get version(){return I.version},Group:ut,EnumValue:J,List:Q,Set:H,Map:pt,Point:T,Size:ht,Rect:E,Margin:Ft,Spot:rt,Geometry:K,PathFigure:Fe,PathSegment:wt,InputEvent:_n,DiagramEvent:Os,ChangedEvent:_t,Model:et,GraphLinksModel:vt,TreeModel:pn,Binding:ie,Transaction:Ge,UndoManager:qt,CommandHandler:Ot,Tool:Lt,DraggingTool:Qt,DraggingInfo:jr,DraggingOptions:Ua,LinkingBaseTool:We,LinkingTool:Sn,RelinkingTool:hi,LinkReshapingTool:de,ResizingTool:on,RotatingTool:An,ClickSelectingTool:ja,ActionTool:Ho,ClickCreatingTool:hs,HTMLInfo:Wo,ContextMenuTool:zn,DragSelectingTool:so,PanningTool:ao,TextEditingTool:Kt,ToolManager:$t,Animation:be,AnimationManager:$n,AnimationTrigger:ho,Layer:qe,Diagram:I,Palette:zu,Overview:No,Brush:kt,GraphObject:nt,Panel:Y,RowColumnDefinition:ye,Shape:dt,TextBlock:Gt,Picture:Pn,Part:ot,Adornment:St,Node:_,Link:U,Placeholder:an,Layout:Ut,LayoutNetwork:zt,LayoutVertex:Te,LayoutEdge:Fn,GridLayout:Be,PanelLayout:fe,CircularLayout:Wt,CircularNetwork:ch,CircularVertex:Ul,CircularEdge:Jp,ForceDirectedLayout:Ie,ForceDirectedNetwork:ea,ForceDirectedVertex:Kl,ForceDirectedEdge:Hl,LayeredDigraphLayout:It,LayeredDigraphNetwork:xh,LayeredDigraphVertex:Zl,LayeredDigraphEdge:_l,TreeLayout:mt,TreeNetwork:ra,TreeVertex:di,TreeEdge:Ph};typeof pd=="object"&&pd.version&&Ve("WARNING: a `go` object on the root object is already defined.  "+("Debug"in pd?"debug ":"")+"version: "+pd.version+", replaced with version: "+Sc.version),I.prototype.go=Sc,it.go=Sc,k.exports=typeof ns<"u"?ns.go:self.go})()})(o);class ga extends o.exports.CommandHandler{constructor(){super(...arguments);Fi(this,"_arrowKeyBehavior","move");Fi(this,"_pasteOffset",new o.exports.Point(10,10));Fi(this,"_lastPasteOffset",new o.exports.Point(0,0))}get arrowKeyBehavior(){return this._arrowKeyBehavior}set arrowKeyBehavior(l){if(l!=="move"&&l!=="select"&&l!=="scroll"&&l!=="none")throw new Error('DrawCommandHandler.arrowKeyBehavior must be either "move", "select", "scroll", or "none", not: '+l);this._arrowKeyBehavior=l}get pasteOffset(){return this._pasteOffset}set pasteOffset(l){if(!(l instanceof o.exports.Point))throw new Error("DrawCommandHandler.pasteOffset must be a Point, not: "+l);this._pasteOffset.set(l)}canAlignSelection(){const l=this.diagram;return!(l.isReadOnly||l.isModelReadOnly||l.selection.count<2)}alignLeft(){const l=this.diagram;l.startTransaction("aligning left");let m=1/0;l.selection.each(f=>{f instanceof o.exports.Link||(m=Math.min(f.position.x,m))}),l.selection.each(f=>{f instanceof o.exports.Link||f.move(new o.exports.Point(m,f.position.y))}),l.commitTransaction("aligning left")}alignRight(){const l=this.diagram;l.startTransaction("aligning right");let m=-1/0;l.selection.each(f=>{if(f instanceof o.exports.Link)return;const x=f.actualBounds.x+f.actualBounds.width;m=Math.max(x,m)}),l.selection.each(f=>{f instanceof o.exports.Link||f.move(new o.exports.Point(m-f.actualBounds.width,f.position.y))}),l.commitTransaction("aligning right")}alignTop(){const l=this.diagram;l.startTransaction("alignTop");let m=1/0;l.selection.each(f=>{f instanceof o.exports.Link||(m=Math.min(f.position.y,m))}),l.selection.each(f=>{f instanceof o.exports.Link||f.move(new o.exports.Point(f.position.x,m))}),l.commitTransaction("alignTop")}alignBottom(){const l=this.diagram;l.startTransaction("aligning bottom");let m=-1/0;l.selection.each(f=>{if(f instanceof o.exports.Link)return;const x=f.actualBounds.y+f.actualBounds.height;m=Math.max(x,m)}),l.selection.each(f=>{f instanceof o.exports.Link||f.move(new o.exports.Point(f.actualBounds.x,m-f.actualBounds.height))}),l.commitTransaction("aligning bottom")}alignCenterX(){const l=this.diagram,m=l.selection.first();if(!m)return;l.startTransaction("aligning Center X");const f=m.actualBounds.x+m.actualBounds.width/2;l.selection.each(x=>{x instanceof o.exports.Link||x.move(new o.exports.Point(f-x.actualBounds.width/2,x.actualBounds.y))}),l.commitTransaction("aligning Center X")}alignCenterY(){const l=this.diagram,m=l.selection.first();if(!m)return;l.startTransaction("aligning Center Y");const f=m.actualBounds.y+m.actualBounds.height/2;l.selection.each(x=>{x instanceof o.exports.Link||x.move(new o.exports.Point(x.actualBounds.x,f-x.actualBounds.height/2))}),l.commitTransaction("aligning Center Y")}alignColumn(l){const m=this.diagram;m.startTransaction("align Column"),l===void 0&&(l=0),l=parseFloat(l.toString());const f=new Array;m.selection.each(x=>{x instanceof o.exports.Link||f.push(x)});for(let x=0;x<f.length-1;x++){const P=f[x],w=P.actualBounds.y+P.actualBounds.height+l;f[x+1].move(new o.exports.Point(P.actualBounds.x,w))}m.commitTransaction("align Column")}alignRow(l){l===void 0&&(l=0),l=parseFloat(l.toString());const m=this.diagram;m.startTransaction("align Row");const f=new Array;m.selection.each(x=>{x instanceof o.exports.Link||f.push(x)});for(let x=0;x<f.length-1;x++){const P=f[x],w=P.actualBounds.x+P.actualBounds.width+l;f[x+1].move(new o.exports.Point(w,P.actualBounds.y))}m.commitTransaction("align Row")}canRotate(){const l=this.diagram;return!(l.isReadOnly||l.isModelReadOnly||l.selection.count<1)}rotate(l){l===void 0&&(l=90);const m=this.diagram;m.startTransaction("rotate "+l.toString()),m.selection.each(f=>{f instanceof o.exports.Link||f instanceof o.exports.Group||(f.angle+=l)}),m.commitTransaction("rotate "+l.toString())}pullToFront(){const l=this.diagram;l.startTransaction("pullToFront");const m=new o.exports.Map;l.selection.each(function(f){f.layer!==null&&m.set(f.layer,0)}),m.iteratorKeys.each(function(f){let x=0;f.parts.each(function(P){if(P.isSelected)return;const w=P.zOrder;isNaN(w)?P.zOrder=0:x=Math.max(x,w)}),m.set(f,x)}),l.selection.each(function(f){const x=m.get(f.layer)||0;ga._assignZOrder(f,x+1)}),l.commitTransaction("pullToFront")}pushToBack(){const l=this.diagram;l.startTransaction("pushToBack");const m=new o.exports.Map;l.selection.each(function(f){f.layer!==null&&m.set(f.layer,0)}),m.iteratorKeys.each(function(f){let x=0;f.parts.each(function(P){if(P.isSelected)return;const w=P.zOrder;isNaN(w)?P.zOrder=0:x=Math.min(x,w)}),m.set(f,x)}),l.selection.each(function(f){const x=m.get(f.layer)||0;ga._assignZOrder(f,x-1-ga._findGroupDepth(f))}),l.commitTransaction("pushToBack")}static _assignZOrder(l,m,f){f===void 0&&(f=l),l.layer===f.layer&&(l.zOrder=m),l instanceof o.exports.Group&&l.memberParts.each(function(x){ga._assignZOrder(x,m+1,f)})}static _findGroupDepth(l){if(l instanceof o.exports.Group){let m=0;return l.memberParts.each(function(f){m=Math.max(m,ga._findGroupDepth(f))}),m+1}else return 0}doKeyDown(){const m=this.diagram.lastInput;if(m.key==="Up"||m.key==="Down"||m.key==="Left"||m.key==="Right"){const f=this.arrowKeyBehavior;if(f==="none")return;if(f==="select"){this._arrowKeySelect();return}else if(f==="move"){this._arrowKeyMove();return}}super.doKeyDown()}_getAllParts(){const l=new Array;return this.diagram.nodes.each(m=>{l.push(m)}),this.diagram.parts.each(m=>{l.push(m)}),l}_arrowKeyMove(){const l=this.diagram,m=l.lastInput;let f=0,x=0;if(m.control||m.meta)f=1,x=1;else if(l.grid!==null){const P=l.grid.gridCellSize;x=P.width,f=P.height}l.startTransaction("arrowKeyMove"),l.selection.each(P=>{m.key==="Up"?P.move(new o.exports.Point(P.actualBounds.x,P.actualBounds.y-f)):m.key==="Down"?P.move(new o.exports.Point(P.actualBounds.x,P.actualBounds.y+f)):m.key==="Left"?P.move(new o.exports.Point(P.actualBounds.x-x,P.actualBounds.y)):m.key==="Right"&&P.move(new o.exports.Point(P.actualBounds.x+x,P.actualBounds.y))}),l.commitTransaction("arrowKeyMove")}_arrowKeySelect(){const l=this.diagram,m=l.lastInput;let f=null;m.key==="Up"?f=this._findNearestPartTowards(270):m.key==="Down"?f=this._findNearestPartTowards(90):m.key==="Left"?f=this._findNearestPartTowards(180):m.key==="Right"&&(f=this._findNearestPartTowards(0)),f!==null&&(m.shift?f.isSelected=!0:m.control||m.meta?f.isSelected=!f.isSelected:l.select(f))}_findNearestPartTowards(l){const m=this.diagram.selection.first();if(m===null)return null;const f=m.actualBounds.center,x=this._getAllParts();let P=1/0,w=m;for(let C=0;C<x.length;C++){const G=x[C];if(G===m)continue;const A=G.actualBounds.center,z=f.directionPoint(A),Z=this._angleCloseness(z,l);if(Z<=45){let gt=f.distanceSquaredPoint(A);gt*=1+Math.sin(Z*Math.PI/180),gt<P&&(P=gt,w=G)}}return w}_angleCloseness(l,m){return Math.min(Math.abs(m-l),Math.min(Math.abs(m+360-l),Math.abs(m-360-l)))}copyToClipboard(l){super.copyToClipboard(l),this._lastPasteOffset.set(this.pasteOffset)}pasteFromClipboard(){const l=super.pasteFromClipboard();return this.diagram.moveParts(l,this._lastPasteOffset,!1),this._lastPasteOffset.add(this.pasteOffset),l}}const Gh=class{constructor(a,l,m,f){Fi(this,"_name");Fi(this,"_defaultValue");Fi(this,"_minimum");Fi(this,"_maximum");m===void 0&&(m=0),f===void 0&&(f=1/0),this._name=a,this._defaultValue=l,this._minimum=m,this._maximum=f}get name(){return this._name}set name(a){if(typeof a!="string"||a==="")throw new Error("Shape name must be a valid string.");this._name=a}get defaultValue(){return this._defaultValue}set defaultValue(a){if(typeof a!="number"||isNaN(a))throw new Error("The default value must be a real number, not: "+a);this._defaultValue=a}get minimum(){return this._minimum}set minimum(a){if(typeof a!="number"||isNaN(a))throw new Error("Minimum must be a real number, not: "+a);this._minimum=a}get maximum(){return this._maximum}set maximum(a){if(typeof a!="number"||isNaN(a))throw new Error("Maximum must be a real number, not: "+a);this._maximum=a}static getFigureParameter(a,l){const m=Gh.definedParameters[a];return m?m[l]:null}static setFigureParameter(a,l,m){if(!(m instanceof Gh))throw new Error("Third argument to FigureParameter.setFigureParameter is not FigureParameter: "+m);if(m.defaultValue<m.minimum||m.defaultValue>m.maximum)throw new Error("defaultValue must be between minimum and maximum, not: "+m.defaultValue);let f=Gh.definedParameters[a];f||(f=[],Gh.definedParameters[a]=f),f[l]=m}};let Pt=Gh;Fi(Pt,"definedParameters",{});const Bc=[];function Cc(k,a){const l=Bc.pop();return l===void 0?new o.exports.Point(k,a):(l.x=k,l.y=a,l)}function we(){const k=Bc.pop();return k===void 0?new o.exports.Point:k}function le(k){Bc.push(k)}function io(k,a,l,m,f,x,P,w,C){const G=k-l,A=f-P;let z,Z;if(G===0||A===0)if(G===0){const gt=(x-w)/A,Nt=x-gt*f;z=k,Z=gt*z+Nt}else{const gt=(a-m)/G,Nt=a-gt*k;z=f,Z=gt*z+Nt}else{const gt=(a-m)/G,Nt=(x-w)/A,jt=a-gt*k;z=(x-Nt*f-jt)/(gt-Nt),Z=gt*z+jt}return C.x=z,C.y=Z,C}function wr(k,a,l,m,f,x,P,w,C,G,A,z,Z,gt){const Nt=1-C,jt=C,it=k*Nt+l*jt,vn=a*Nt+m*jt,mi=l*Nt+f*jt,On=m*Nt+x*jt,_e=f*Nt+P*jt,X=x*Nt+w*jt,yt=it*Nt+mi*jt,Rt=vn*Nt+On*jt,Ve=mi*Nt+_e*jt,Bt=On*Nt+X*jt,ue=yt*Nt+Ve*jt,wo=Rt*Nt+Bt*jt;G.x=it,G.y=vn,A.x=yt,A.y=Rt,z.x=ue,z.y=wo,Z.x=Ve,Z.y=Bt,gt.x=_e,gt.y=X}const Ty=new o.exports.Spot(.156,.156),Cy=new o.exports.Spot(.844,.844),lt=4*((Math.sqrt(2)-1)/3);Pt.setFigureParameter("RoundedRectangle",0,new Pt("CornerRounding",5));o.exports.Shape.defineFigureGenerator("RoundedRectangle",(k,a,l)=>{let m=k?k.parameter1:NaN;(isNaN(m)||m<0)&&(m=5),m=Math.min(m,a/3),m=Math.min(m,l/3);const f=m*lt,x=new o.exports.Geometry().add(new o.exports.PathFigure(m,0,!0).add(new o.exports.PathSegment(o.exports.PathSegment.Line,a-m,0)).add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,a,m,a-f,0,a,f)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,l-m)).add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,a-m,l,a,l-f,a-f,l)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,m,l)).add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,0,l-m,f,l,0,l-f)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,m)).add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,m,0,0,f,f,0).close()));return f>1&&(x.spot1=new o.exports.Spot(0,0,f,f),x.spot2=new o.exports.Spot(1,1,-f,-f)),x});o.exports.Shape.defineFigureGenerator("Border","RoundedRectangle");o.exports.Shape.defineFigureGenerator("TriangleRight",(k,a,l)=>new o.exports.Geometry().add(new o.exports.PathFigure(0,0).add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,.5*l)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,l).close())).setSpots(0,.25,.5,.75));o.exports.Shape.defineFigureGenerator("TriangleDown",(k,a,l)=>new o.exports.Geometry().add(new o.exports.PathFigure(0,0).add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,0)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,.5*a,l).close())).setSpots(.25,0,.75,.5));o.exports.Shape.defineFigureGenerator("TriangleLeft",(k,a,l)=>new o.exports.Geometry().add(new o.exports.PathFigure(a,l).add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,.5*l)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,0).close())).setSpots(.5,.25,1,.75));o.exports.Shape.defineFigureGenerator("TriangleUp",(k,a,l)=>new o.exports.Geometry().add(new o.exports.PathFigure(a,l).add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,l)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,.5*a,0).close())).setSpots(.25,.5,.75,1));o.exports.Shape.defineFigureGenerator("Triangle","TriangleUp");o.exports.Shape.defineFigureGenerator("Diamond",(k,a,l)=>new o.exports.Geometry().add(new o.exports.PathFigure(.5*a,0).add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,.5*l)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,.5*a,l)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,.5*l).close())).setSpots(.25,.25,.75,.75));o.exports.Shape.defineFigureGenerator("LineH",(k,a,l)=>{const m=new o.exports.Geometry(o.exports.Geometry.Line);return m.startX=0,m.startY=l/2,m.endX=a,m.endY=l/2,m});o.exports.Shape.defineFigureGenerator("LineV",(k,a,l)=>{const m=new o.exports.Geometry(o.exports.Geometry.Line);return m.startX=a/2,m.startY=0,m.endX=a/2,m.endY=l,m});o.exports.Shape.defineFigureGenerator("BarH","Rectangle");o.exports.Shape.defineFigureGenerator("BarV","Rectangle");o.exports.Shape.defineFigureGenerator("MinusLine","LineH");o.exports.Shape.defineFigureGenerator("PlusLine",(k,a,l)=>new o.exports.Geometry().add(new o.exports.PathFigure(0,l/2,!1).add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,l/2)).add(new o.exports.PathSegment(o.exports.PathSegment.Move,a/2,0)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,a/2,l))));o.exports.Shape.defineFigureGenerator("XLine",(k,a,l)=>new o.exports.Geometry().add(new o.exports.PathFigure(0,l,!1).add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,0)).add(new o.exports.PathSegment(o.exports.PathSegment.Move,0,0)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,l))));o.exports.Shape.defineFigureGenerator("LineRight",function(k,a,l){return new o.exports.Geometry().add(new o.exports.PathFigure(.25*a,0,!1).add(new o.exports.PathSegment(o.exports.PathSegment.Line,.75*a,.5*l)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,.25*a,l)))});o.exports.Shape.defineFigureGenerator("LineDown",function(k,a,l){return new o.exports.Geometry().add(new o.exports.PathFigure(0,.25*l,!1).add(new o.exports.PathSegment(o.exports.PathSegment.Line,.5*a,.75*l)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,.25*l)))});o.exports.Shape.defineFigureGenerator("LineLeft",function(k,a,l){return new o.exports.Geometry().add(new o.exports.PathFigure(.75*a,0,!1).add(new o.exports.PathSegment(o.exports.PathSegment.Line,.25*a,.5*l)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,.75*a,l)))});o.exports.Shape.defineFigureGenerator("LineUp",function(k,a,l){return new o.exports.Geometry().add(new o.exports.PathFigure(0,.75*l,!1).add(new o.exports.PathSegment(o.exports.PathSegment.Line,.5*a,.25*l)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,.75*l)))});o.exports.Shape.defineFigureGenerator("AsteriskLine",(k,a,l)=>{const m=.2/Math.SQRT2;return new o.exports.Geometry().add(new o.exports.PathFigure(m*a,(1-m)*l,!1).add(new o.exports.PathSegment(o.exports.PathSegment.Line,(1-m)*a,m*l)).add(new o.exports.PathSegment(o.exports.PathSegment.Move,m*a,m*l)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,(1-m)*a,(1-m)*l)).add(new o.exports.PathSegment(o.exports.PathSegment.Move,0,l/2)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,l/2)).add(new o.exports.PathSegment(o.exports.PathSegment.Move,a/2,0)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,a/2,l)))});o.exports.Shape.defineFigureGenerator("CircleLine",(k,a,l)=>{const m=a/2,f=new o.exports.Geometry().add(new o.exports.PathFigure(a,a/2,!1).add(new o.exports.PathSegment(o.exports.PathSegment.Arc,0,360,m,m,m,m).close()));return f.spot1=Ty,f.spot2=Cy,f.defaultStretch=o.exports.GraphObject.Uniform,f});o.exports.Shape.defineFigureGenerator("Line1",(k,a,l)=>{const m=new o.exports.Geometry(o.exports.Geometry.Line);return m.startX=0,m.startY=0,m.endX=a,m.endY=l,m});o.exports.Shape.defineFigureGenerator("Line2",(k,a,l)=>{const m=new o.exports.Geometry(o.exports.Geometry.Line);return m.startX=a,m.startY=0,m.endX=0,m.endY=l,m});o.exports.Shape.defineFigureGenerator("Curve1",(k,a,l)=>new o.exports.Geometry().add(new o.exports.PathFigure(0,0,!1).add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,a,l,lt*a,0,a,(1-lt)*l))));o.exports.Shape.defineFigureGenerator("Curve2",(k,a,l)=>new o.exports.Geometry().add(new o.exports.PathFigure(0,0,!1).add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,a,l,0,lt*l,(1-lt)*a,l))));o.exports.Shape.defineFigureGenerator("Curve3",(k,a,l)=>new o.exports.Geometry().add(new o.exports.PathFigure(a,0,!1).add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,0,l,a,lt*l,lt*a,l))));o.exports.Shape.defineFigureGenerator("Curve4",(k,a,l)=>new o.exports.Geometry().add(new o.exports.PathFigure(a,0,!1).add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,0,l,(1-lt)*a,0,0,(1-lt)*l))));o.exports.Shape.defineFigureGenerator("TriangleDownLeft",(k,a,l)=>new o.exports.Geometry().add(new o.exports.PathFigure(0,0,!0).add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,l)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,l).close())).setSpots(0,.5,.5,1));o.exports.Shape.defineFigureGenerator("TriangleDownRight",(k,a,l)=>new o.exports.Geometry().add(new o.exports.PathFigure(a,0,!0).add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,l)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,l).close())).setSpots(.5,.5,1,1));o.exports.Shape.defineFigureGenerator("TriangleUpLeft",(k,a,l)=>new o.exports.Geometry().add(new o.exports.PathFigure(0,0,!0).add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,0)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,l).close())).setSpots(0,0,.5,.5));o.exports.Shape.defineFigureGenerator("TriangleUpRight",(k,a,l)=>new o.exports.Geometry().add(new o.exports.PathFigure(0,0,!0).add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,0)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,l).close())).setSpots(.5,0,1,.5));o.exports.Shape.defineFigureGenerator("RightTriangle","TriangleDownLeft");Pt.setFigureParameter("Parallelogram1",0,new Pt("Indent",.1,-.99,.99));o.exports.Shape.defineFigureGenerator("Parallelogram1",(k,a,l)=>{let m=k?k.parameter1:NaN;isNaN(m)?m=.1:m<-1?m=-1:m>1&&(m=1);const f=Math.abs(m)*a;if(m===0){const x=new o.exports.Geometry(o.exports.Geometry.Rectangle);return x.startX=0,x.startY=0,x.endX=a,x.endY=l,x}else{const x=new o.exports.Geometry;return m>0?x.add(new o.exports.PathFigure(f,0).add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,0)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,a-f,l)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,l).close())):x.add(new o.exports.PathFigure(0,0).add(new o.exports.PathSegment(o.exports.PathSegment.Line,a-f,0)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,l)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,f,l).close())),f<a/2&&x.setSpots(f/a,0,(a-f)/a,1),x}});o.exports.Shape.defineFigureGenerator("Parallelogram","Parallelogram1");Pt.setFigureParameter("Parallelogram2",0,new Pt("Indent",10,-1/0,1/0));o.exports.Shape.defineFigureGenerator("Parallelogram2",(k,a,l)=>{let m=k?k.parameter1:NaN;isNaN(m)?m=10:m<-1?m=-a:m>1&&(m=a);const f=Math.abs(m);if(m===0){const x=new o.exports.Geometry(o.exports.Geometry.Rectangle);return x.startX=0,x.startY=0,x.endX=a,x.endY=l,x}else{const x=new o.exports.Geometry;return m>0?x.add(new o.exports.PathFigure(f,0).add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,0)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,a-f,l)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,l).close())):x.add(new o.exports.PathFigure(0,0).add(new o.exports.PathSegment(o.exports.PathSegment.Line,a-f,0)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,l)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,f,l).close())),f<a/2&&x.setSpots(f/a,0,(a-f)/a,1),x}});Pt.setFigureParameter("Trapezoid1",0,new Pt("Indent",.2,-.99,.99));o.exports.Shape.defineFigureGenerator("Trapezoid1",(k,a,l)=>{let m=k?k.parameter1:NaN;isNaN(m)?m=.2:m<.5?m=-.5:m>.5&&(m=.5);const f=Math.abs(m)*a;if(m===0){const x=new o.exports.Geometry(o.exports.Geometry.Rectangle);return x.startX=0,x.startY=0,x.endX=a,x.endY=l,x}else{const x=new o.exports.Geometry;return m>0?x.add(new o.exports.PathFigure(f,0).add(new o.exports.PathSegment(o.exports.PathSegment.Line,a-f,0)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,l)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,l).close())):x.add(new o.exports.PathFigure(0,0).add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,0)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,a-f,l)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,f,l).close())),f<a/2&&x.setSpots(f/a,0,(a-f)/a,1),x}});o.exports.Shape.defineFigureGenerator("Trapezoid","Trapezoid1");Pt.setFigureParameter("Trapezoid2",0,new Pt("Indent",20,-1/0,1/0));o.exports.Shape.defineFigureGenerator("Trapezoid2",(k,a,l)=>{let m=k?k.parameter1:NaN;isNaN(m)?m=20:m<-a?m=-a/2:m>a&&(m=a/2);const f=Math.abs(m);if(m===0){const x=new o.exports.Geometry(o.exports.Geometry.Rectangle);return x.startX=0,x.startY=0,x.endX=a,x.endY=l,x}else{const x=new o.exports.Geometry;return m>0?x.add(new o.exports.PathFigure(f,0).add(new o.exports.PathSegment(o.exports.PathSegment.Line,a-f,0)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,l)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,l).close())):x.add(new o.exports.PathFigure(0,0).add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,0)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,a-f,l)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,f,l).close())),f<a/2&&x.setSpots(f/a,0,(a-f)/a,1),x}});Pt.setFigureParameter("ManualOperation",0,new Pt("Indent",10,-1/0,1/0));o.exports.Shape.defineFigureGenerator("ManualOperation",(k,a,l)=>{let m=k?k.parameter1:NaN;isNaN(m)?m=10:m<-a?m=-a/2:m>a&&(m=a/2);const f=Math.abs(m);if(m===0){const x=new o.exports.Geometry(o.exports.Geometry.Rectangle);return x.startX=0,x.startY=0,x.endX=a,x.endY=l,x}else{const x=new o.exports.Geometry;return m>0?x.add(new o.exports.PathFigure(0,0).add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,0)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,a-f,l)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,f,l).close())):x.add(new o.exports.PathFigure(f,0).add(new o.exports.PathSegment(o.exports.PathSegment.Line,a-f,0)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,l)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,l).close())),f<a/2&&x.setSpots(f/a,0,(a-f)/a,1),x}});const Fy=[];function jc(){const k=Fy.pop();return k===void 0?[]:k}function yn(k){k.length=0,Fy.push(k)}function Bs(k){const a=jc(),l=.5,m=.5,f=Math.PI*1.5;let x=0;for(let P=0;P<k;P++)x=2*Math.PI/k*P+f,a[P]=new o.exports.Point(m+l*Math.cos(x),m+l*Math.sin(x));return a.push(a[0]),a}function Oh(k){const a=ca(k),l=jc();l[0]=a[0];for(let m=1,f=1;m<a.length;m+=2,f+=3)l[f]=a[m],l[f+1]=a[m],l[f+2]=a[m+1];return yn(a),l}function ca(k){const a=Bs(k),l=jc(),m=Math.floor(a.length/2),f=a.length-1,x=k%2===0?2:1;for(let P=0;P<f;P++){const w=a[P],C=a[P+1],G=a[(m+P-1)%f],A=a[(m+P+x)%f];l[P*2]=w,l[P*2+1]=io(w.x,w.y,G.x,G.y,C.x,C.y,A.x,A.y,new o.exports.Point)}return l[l.length]=l[0],yn(a),l}o.exports.Shape.defineFigureGenerator("Pentagon",(k,a,l)=>{const m=Bs(5),f=new o.exports.Geometry,x=new o.exports.PathFigure(m[0].x*a,m[0].y*l,!0);f.add(x);for(let P=1;P<5;P++)x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,m[P].x*a,m[P].y*l));return x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,m[0].x*a,m[0].y*l).close()),yn(m),f.spot1=new o.exports.Spot(.2,.22),f.spot2=new o.exports.Spot(.8,.9),f});o.exports.Shape.defineFigureGenerator("Hexagon",(k,a,l)=>{const m=Bs(6),f=new o.exports.Geometry,x=new o.exports.PathFigure(m[0].x*a,m[0].y*l,!0);f.add(x);for(let P=1;P<6;P++)x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,m[P].x*a,m[P].y*l));return x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,m[0].x*a,m[0].y*l).close()),yn(m),f.spot1=new o.exports.Spot(.07,.25),f.spot2=new o.exports.Spot(.93,.75),f});o.exports.Shape.defineFigureGenerator("Heptagon",(k,a,l)=>{const m=Bs(7),f=new o.exports.Geometry,x=new o.exports.PathFigure(m[0].x*a,m[0].y*l,!0);f.add(x);for(let P=1;P<7;P++)x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,m[P].x*a,m[P].y*l));return x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,m[0].x*a,m[0].y*l).close()),yn(m),f.spot1=new o.exports.Spot(.2,.15),f.spot2=new o.exports.Spot(.8,.85),f});o.exports.Shape.defineFigureGenerator("Octagon",(k,a,l)=>{const m=Bs(8),f=new o.exports.Geometry,x=new o.exports.PathFigure(m[0].x*a,m[0].y*l,!0);f.add(x);for(let P=1;P<8;P++)x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,m[P].x*a,m[P].y*l));return x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,m[0].x*a,m[0].y*l).close()),yn(m),f.spot1=new o.exports.Spot(.15,.15),f.spot2=new o.exports.Spot(.85,.85),f});o.exports.Shape.defineFigureGenerator("Nonagon",(k,a,l)=>{const m=Bs(9),f=new o.exports.Geometry,x=new o.exports.PathFigure(m[0].x*a,m[0].y*l,!0);f.add(x);for(let P=1;P<9;P++)x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,m[P].x*a,m[P].y*l));return x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,m[0].x*a,m[0].y*l).close()),yn(m),f.spot1=new o.exports.Spot(.17,.13),f.spot2=new o.exports.Spot(.82,.82),f});o.exports.Shape.defineFigureGenerator("Decagon",(k,a,l)=>{const m=Bs(10),f=new o.exports.Geometry,x=new o.exports.PathFigure(m[0].x*a,m[0].y*l,!0);f.add(x);for(let P=1;P<10;P++)x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,m[P].x*a,m[P].y*l));return x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,m[0].x*a,m[0].y*l).close()),yn(m),f.spot1=new o.exports.Spot(.16,.16),f.spot2=new o.exports.Spot(.84,.84),f});o.exports.Shape.defineFigureGenerator("Dodecagon",(k,a,l)=>{const m=Bs(12),f=new o.exports.Geometry,x=new o.exports.PathFigure(m[0].x*a,m[0].y*l,!0);f.add(x);for(let P=1;P<12;P++)x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,m[P].x*a,m[P].y*l));return x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,m[0].x*a,m[0].y*l).close()),yn(m),f.spot1=new o.exports.Spot(.16,.16),f.spot2=new o.exports.Spot(.84,.84),f});o.exports.Shape.defineFigureGenerator("FivePointedStar",(k,a,l)=>{const m=ca(5),f=new o.exports.Geometry,x=new o.exports.PathFigure(m[0].x*a,m[0].y*l,!0);f.add(x);for(let P=1;P<10;P++)x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,m[P].x*a,m[P].y*l));return x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,m[0].x*a,m[0].y*l).close()),yn(m),f.spot1=new o.exports.Spot(.266,.333),f.spot2=new o.exports.Spot(.733,.733),f});o.exports.Shape.defineFigureGenerator("SixPointedStar",(k,a,l)=>{const m=ca(6),f=new o.exports.Geometry,x=new o.exports.PathFigure(m[0].x*a,m[0].y*l,!0);f.add(x);for(let P=1;P<12;P++)x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,m[P].x*a,m[P].y*l));return x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,m[0].x*a,m[0].y*l).close()),yn(m),f.spot1=new o.exports.Spot(.17,.25),f.spot2=new o.exports.Spot(.83,.75),f});o.exports.Shape.defineFigureGenerator("SevenPointedStar",(k,a,l)=>{const m=ca(7),f=new o.exports.Geometry,x=new o.exports.PathFigure(m[0].x*a,m[0].y*l,!0);f.add(x);for(let P=1;P<14;P++)x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,m[P].x*a,m[P].y*l));return x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,m[0].x*a,m[0].y*l).close()),yn(m),f.spot1=new o.exports.Spot(.222,.277),f.spot2=new o.exports.Spot(.777,.666),f});o.exports.Shape.defineFigureGenerator("EightPointedStar",(k,a,l)=>{const m=ca(8),f=new o.exports.Geometry,x=new o.exports.PathFigure(m[0].x*a,m[0].y*l,!0);f.add(x);for(let P=1;P<16;P++)x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,m[P].x*a,m[P].y*l));return x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,m[0].x*a,m[0].y*l).close()),yn(m),f.spot1=new o.exports.Spot(.25,.25),f.spot2=new o.exports.Spot(.75,.75),f});o.exports.Shape.defineFigureGenerator("NinePointedStar",(k,a,l)=>{const m=ca(9),f=new o.exports.Geometry,x=new o.exports.PathFigure(m[0].x*a,m[0].y*l,!0);f.add(x);for(let P=1;P<18;P++)x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,m[P].x*a,m[P].y*l));return x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,m[0].x*a,m[0].y*l).close()),yn(m),f.spot1=new o.exports.Spot(.222,.277),f.spot2=new o.exports.Spot(.777,.666),f});o.exports.Shape.defineFigureGenerator("TenPointedStar",(k,a,l)=>{const m=ca(10),f=new o.exports.Geometry,x=new o.exports.PathFigure(m[0].x*a,m[0].y*l,!0);f.add(x);for(let P=1;P<20;P++)x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,m[P].x*a,m[P].y*l));return x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,m[0].x*a,m[0].y*l).close()),yn(m),f.spot1=new o.exports.Spot(.281,.261),f.spot2=new o.exports.Spot(.723,.748),f});o.exports.Shape.defineFigureGenerator("FivePointedBurst",(k,a,l)=>{const m=Oh(5),f=new o.exports.Geometry,x=new o.exports.PathFigure(m[0].x*a,m[0].y*l,!0);f.add(x);for(let w=1;w<m.length;w+=3)x.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,m[w+2].x*a,m[w+2].y*l,m[w].x*a,m[w].y*l,m[w+1].x*a,m[w+1].y*l));const P=x.segments.last();return P!==null&&P.close(),yn(m),f.spot1=new o.exports.Spot(.222,.277),f.spot2=new o.exports.Spot(.777,.777),f});o.exports.Shape.defineFigureGenerator("SixPointedBurst",(k,a,l)=>{const m=Oh(6),f=new o.exports.Geometry,x=new o.exports.PathFigure(m[0].x*a,m[0].y*l,!0);f.add(x);for(let w=1;w<m.length;w+=3)x.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,m[w+2].x*a,m[w+2].y*l,m[w].x*a,m[w].y*l,m[w+1].x*a,m[w+1].y*l));const P=x.segments.last();return P!==null&&P.close(),yn(m),f.spot1=new o.exports.Spot(.17,.222),f.spot2=new o.exports.Spot(.833,.777),f});o.exports.Shape.defineFigureGenerator("SevenPointedBurst",(k,a,l)=>{const m=Oh(7),f=new o.exports.Geometry,x=new o.exports.PathFigure(m[0].x*a,m[0].y*l,!0);f.add(x);for(let w=1;w<m.length;w+=3)x.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,m[w+2].x*a,m[w+2].y*l,m[w].x*a,m[w].y*l,m[w+1].x*a,m[w+1].y*l));const P=x.segments.last();return P!==null&&P.close(),yn(m),f.spot1=new o.exports.Spot(.222,.222),f.spot2=new o.exports.Spot(.777,.777),f});o.exports.Shape.defineFigureGenerator("EightPointedBurst",(k,a,l)=>{const m=Oh(8),f=new o.exports.Geometry,x=new o.exports.PathFigure(m[0].x*a,m[0].y*l,!0);f.add(x);for(let w=1;w<m.length;w+=3)x.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,m[w+2].x*a,m[w+2].y*l,m[w].x*a,m[w].y*l,m[w+1].x*a,m[w+1].y*l));const P=x.segments.last();return P!==null&&P.close(),yn(m),f.spot1=new o.exports.Spot(.222,.222),f.spot2=new o.exports.Spot(.777,.777),f});o.exports.Shape.defineFigureGenerator("NinePointedBurst",(k,a,l)=>{const m=Oh(9),f=new o.exports.Geometry,x=new o.exports.PathFigure(m[0].x*a,m[0].y*l,!0);f.add(x);for(let w=1;w<m.length;w+=3)x.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,m[w+2].x*a,m[w+2].y*l,m[w].x*a,m[w].y*l,m[w+1].x*a,m[w+1].y*l));const P=x.segments.last();return P!==null&&P.close(),yn(m),f.spot1=new o.exports.Spot(.222,.222),f.spot2=new o.exports.Spot(.777,.777),f});o.exports.Shape.defineFigureGenerator("TenPointedBurst",(k,a,l)=>{const m=Oh(10),f=new o.exports.Geometry,x=new o.exports.PathFigure(m[0].x*a,m[0].y*l,!0);f.add(x);for(let w=1;w<m.length;w+=3)x.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,m[w+2].x*a,m[w+2].y*l,m[w].x*a,m[w].y*l,m[w+1].x*a,m[w+1].y*l));const P=x.segments.last();return P!==null&&P.close(),yn(m),f.spot1=new o.exports.Spot(.222,.222),f.spot2=new o.exports.Spot(.777,.777),f});Pt.setFigureParameter("FramedRectangle",0,new Pt("ThicknessX",8));Pt.setFigureParameter("FramedRectangle",1,new Pt("ThicknessY",8));o.exports.Shape.defineFigureGenerator("FramedRectangle",(k,a,l)=>{let m=k?k.parameter1:NaN,f=k?k.parameter2:NaN;isNaN(m)&&(m=8),isNaN(f)&&(f=8);const x=new o.exports.Geometry,P=new o.exports.PathFigure(0,0,!0);return x.add(P),P.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,0)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,l)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,l).close()),m<a/2&&f<l/2&&(P.add(new o.exports.PathSegment(o.exports.PathSegment.Move,m,f)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Line,m,l-f)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a-m,l-f)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a-m,f).close())),x.setSpots(0,0,1,1,m,f,-m,-f),x});Pt.setFigureParameter("Ring",0,new Pt("Thickness",8));o.exports.Shape.defineFigureGenerator("Ring",(k,a,l)=>{let m=k?k.parameter1:NaN;(isNaN(m)||m<0)&&(m=8);const f=a/2,x=new o.exports.Geometry,P=new o.exports.PathFigure(a,a/2,!0);x.add(P),P.add(new o.exports.PathSegment(o.exports.PathSegment.Arc,0,360,f,f,f,f).close());const w=Math.max(f-m,0);return w>0&&(P.add(new o.exports.PathSegment(o.exports.PathSegment.Move,a/2+w,a/2)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Arc,0,-360,f,f,w,w).close())),x.spot1=Ty,x.spot2=Cy,x.defaultStretch=o.exports.GraphObject.Uniform,x});o.exports.Shape.defineFigureGenerator("Cloud",(k,a,l)=>new o.exports.Geometry().add(new o.exports.PathFigure(.08034461*a,.1944299*l,!0).add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,.2008615*a,.05349299*l,-.09239631*a,.07836421*l,.1406031*a,-.0542823*l)).add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,.4338609*a,.074219*l,.2450511*a,-.00697547*l,.3776197*a,-.01112067*l)).add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,.6558228*a,.07004196*l,.4539471*a,0,.6066018*a,-.02526587*l)).add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,.8921095*a,.08370865*l,.6914277*a,-.01904177*l,.8921095*a,-.01220843*l)).add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,.9147671*a,.3194596*l,1.036446*a,.04105738*l,1.020377*a,.3022052*l)).add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,.9082935*a,.562044*l,1.04448*a,.360238*l,.992256*a,.5219009*l)).add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,.9212406*a,.8217117*l,1.032337*a,.5771781*l,1.018411*a,.8120651*l)).add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,.7592566*a,.9156953*l,1.028411*a,.9571472*l,.8556702*a,1.052487*l)).add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,.5101666*a,.9310455*l,.7431877*a,1.009325*l,.5624123*a,1.021761*l)).add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,.2609328*a,.9344623*l,.4820677*a,1.031761*l,.3030112*a,1.002796*l)).add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,.08034461*a,.870098*l,.2329994*a,1.01518*l,.03213784*a,1.01518*l)).add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,.06829292*a,.6545475*l,-.02812061*a,.9032597*l,-.01205169*a,.6835638*l)).add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,.06427569*a,.4265613*l,-.01812061*a,.6089503*l,-.00606892*a,.4555777*l)).add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,.08034461*a,.1944299*l,-.01606892*a,.3892545*l,-.01205169*a,.1944299*l))).setSpots(.1,.1,.9,.9));o.exports.Shape.defineFigureGenerator("StopSign",(k,a,l)=>{const m=1/(Math.SQRT2+2);return new o.exports.Geometry().add(new o.exports.PathFigure(m*a,0,!0).add(new o.exports.PathSegment(o.exports.PathSegment.Line,(1-m)*a,0)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,m*l)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,(1-m)*l)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,(1-m)*a,l)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,m*a,l)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,(1-m)*l)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,m*l).close())).setSpots(m/2,m/2,1-m/2,1-m/2)});Pt.setFigureParameter("Pie",0,new Pt("Start",0,-360,360));Pt.setFigureParameter("Pie",1,new Pt("Sweep",315,-360,360));o.exports.Shape.defineFigureGenerator("Pie",(k,a,l)=>{let m=k?k.parameter1:NaN,f=k?k.parameter2:NaN;isNaN(m)&&(m=0),isNaN(f)&&(f=315);let x=m%360;x<0&&(x+=360);const P=f%360,w=Math.min(a,l)/2;return new o.exports.Geometry().add(new o.exports.PathFigure(w,w).add(new o.exports.PathSegment(o.exports.PathSegment.Arc,x,P,w,w,w,w).close()))});o.exports.Shape.defineFigureGenerator("PiePiece",(k,a,l)=>{const m=lt/Math.SQRT2*.5,f=Math.SQRT2/2,x=1-Math.SQRT2/2;return new o.exports.Geometry().add(new o.exports.PathFigure(a,l,!0).add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,f*a,x*l,a,(1-m)*l,(f+m)*a,(x+m)*l)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,l).close()))});Pt.setFigureParameter("ThickCross",0,new Pt("Thickness",30));o.exports.Shape.defineFigureGenerator("ThickCross",(k,a,l)=>{let m=k?k.parameter1:NaN;(isNaN(m)||m<0)&&(m=30);const f=Math.min(m,a)/2,x=a/2,P=l/2;return new o.exports.Geometry().add(new o.exports.PathFigure(x-f,0,!0).add(new o.exports.PathSegment(o.exports.PathSegment.Line,x+f,0)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,x+f,P-f)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,P-f)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,P+f)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,x+f,P+f)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,x+f,l)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,x-f,l)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,x-f,P+f)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,P+f)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,P-f)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,x-f,P-f).close()))});Pt.setFigureParameter("ThinCross",0,new Pt("Thickness",10));o.exports.Shape.defineFigureGenerator("ThinCross",(k,a,l)=>{let m=k?k.parameter1:NaN;(isNaN(m)||m<0)&&(m=10);const f=Math.min(m,a)/2,x=a/2,P=l/2;return new o.exports.Geometry().add(new o.exports.PathFigure(x-f,0,!0).add(new o.exports.PathSegment(o.exports.PathSegment.Line,x+f,0)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,x+f,P-f)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,P-f)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,P+f)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,x+f,P+f)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,x+f,l)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,x-f,l)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,x-f,P+f)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,P+f)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,P-f)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,x-f,P-f).close()))});Pt.setFigureParameter("ThickX",0,new Pt("Thickness",30));o.exports.Shape.defineFigureGenerator("ThickX",(k,a,l)=>{let m=k?k.parameter1:NaN;if((isNaN(m)||m<0)&&(m=30),a===0||l===0){const f=new o.exports.Geometry(o.exports.Geometry.Rectangle);return f.startX=0,f.startY=0,f.endX=a,f.endY=l,f}else{const f=a/2,x=l/2,P=Math.atan2(l,a),w=m-Math.min(Math.cos(P)*m/2,f),C=m-Math.min(Math.sin(P)*m/2,x),G=new o.exports.Geometry,A=new o.exports.PathFigure(w,0,!0);return G.add(A),A.add(new o.exports.PathSegment(o.exports.PathSegment.Line,f,.2*l)),A.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a-w,0)),A.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,C)),A.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.8*a,x)),A.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,l-C)),A.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a-w,l)),A.add(new o.exports.PathSegment(o.exports.PathSegment.Line,f,.8*l)),A.add(new o.exports.PathSegment(o.exports.PathSegment.Line,w,l)),A.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,l-C)),A.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.2*a,x)),A.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,C).close()),G}});Pt.setFigureParameter("ThinX",0,new Pt("Thickness",10));o.exports.Shape.defineFigureGenerator("ThinX",(k,a,l)=>{k&&k.parameter1;const m=new o.exports.Geometry,f=new o.exports.PathFigure(.1*a,0,!0);return m.add(f),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.5*a,.4*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.9*a,0)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,.1*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.6*a,.5*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,.9*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.9*a,l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.5*a,.6*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.1*a,l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,.9*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.4*a,.5*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,.1*l).close()),m});Pt.setFigureParameter("SquareIBeam",0,new Pt("BeamWidth",.2,.1,.9));o.exports.Shape.defineFigureGenerator("SquareIBeam",(k,a,l)=>{let m=k?k.parameter1:NaN;isNaN(m)&&(m=.2);const f=new o.exports.Geometry,x=new o.exports.PathFigure(0,0,!0);return f.add(x),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,0)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,m*l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,(.5+m/2)*a,m*l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,(.5+m/2)*a,(1-m)*l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,(1-m)*l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,(1-m)*l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,(.5-m/2)*a,(1-m)*l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,(.5-m/2)*a,m*l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,m*l).close()),f});Pt.setFigureParameter("RoundedIBeam",0,new Pt("Curviness",.5,.05,.65));o.exports.Shape.defineFigureGenerator("RoundedIBeam",(k,a,l)=>{let m=k?k.parameter1:NaN;isNaN(m)&&(m=.5);const f=new o.exports.Geometry,x=new o.exports.PathFigure(0,0,!0);return f.add(x),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,0)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,a,l,Math.abs(1-m)*a,.25*l,Math.abs(1-m)*a,.75*l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,0,0,m*a,.75*l,m*a,.25*l).close()),f});o.exports.Shape.defineFigureGenerator("HalfEllipse",(k,a,l)=>new o.exports.Geometry().add(new o.exports.PathFigure(0,0,!0).add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,a,.5*l,lt*a,0,a,(.5-lt/2)*l)).add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,0,l,a,(.5+lt/2)*l,lt*a,l).close())).setSpots(0,.156,.844,.844));o.exports.Shape.defineFigureGenerator("Crescent",(k,a,l)=>new o.exports.Geometry().add(new o.exports.PathFigure(0,0,!0).add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,0,l,a,0,a,l)).add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,0,0,.5*a,.75*l,.5*a,.25*l).close())).setSpots(.311,.266,.744,.744));o.exports.Shape.defineFigureGenerator("Heart",(k,a,l)=>new o.exports.Geometry().add(new o.exports.PathFigure(.5*a,l,!0).add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,0,.3*l,.1*a,.8*l,0,.5*l)).add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,.5*a,.3*l,0,0,.45*a,0)).add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,a,.3*l,.55*a,0,a,0)).add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,.5*a,l,a,.5*l,.9*a,.8*l).close())).setSpots(.14,.29,.86,.78));o.exports.Shape.defineFigureGenerator("Spade",(k,a,l)=>new o.exports.Geometry().add(new o.exports.PathFigure(.5*a,0,!0).add(new o.exports.PathSegment(o.exports.PathSegment.Line,.51*a,.01*l)).add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,a,.5*l,.6*a,.2*l,a,.25*l)).add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,.55*a,.7*l,a,.8*l,.6*a,.8*l)).add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,.75*a,l,.5*a,.75*l,.55*a,.95*l)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,.25*a,l)).add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,.45*a,.7*l,.45*a,.95*l,.5*a,.75*l)).add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,0,.5*l,.4*a,.8*l,0,.8*l)).add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,.49*a,.01*l,0,.25*l,.4*a,.2*l).close())).setSpots(.14,.26,.86,.78));o.exports.Shape.defineFigureGenerator("Club",(k,a,l)=>{const m=new o.exports.Geometry,f=new o.exports.PathFigure(.4*a,.6*l,!0);m.add(f),f.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,.15*a,l,.5*a,.75*l,.45*a,.95*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.85*a,l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,.6*a,.6*l,.55*a,.95*l,.5*a,.75*l));let x=.2,P=.3,w=0,C=x*lt;return f.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,(.5+P)*a,(.5+x+w)*l,(.5-x+P)*a,(.5+C+w)*l,(.5-C+P)*a,(.5+x+w)*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,(1-.5+x+P)*a,(.5+w)*l,(.5+C+P)*a,(.5+x+w)*l,(.5+x+P)*a,(.5+C+w)*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,(.5+P)*a,(.5-x+w)*l,(1-.5+x+P)*a,(.5-C+w)*l,(.5+C+P)*a,(.5-x+w)*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,.65*a,.36771243*l,(.5-C+P)*a,(.5-x+w)*l,(.5-x+P+.05)*a,(.5-C+w-.02)*l)),x=.2,P=0,w=-.3,C=x*lt,f.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,(1-.5+x+P)*a,(.5+w)*l,(.5+C+P)*a,(.5+x+w)*l,(.5+x+P)*a,(.5+C+w)*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,(.5+P)*a,(.5-x+w)*l,(1-.5+x+P)*a,(.5-C+w)*l,(.5+C+P)*a,(.5-x+w)*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,(.5-x+P)*a,(.5+w)*l,(.5-C+P)*a,(.5-x+w)*l,(.5-x+P)*a,(.5-C+w)*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,(.5-C+P)*a,(.5+x+w)*l,(.5-x+P)*a,(.5+C+w)*l,(.5-C+P)*a,(.5+x+w)*l)),x=.2,P=-.3,w=0,C=x*lt,f.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,(.5+P)*a,(.5-x+w)*l,(1-.5+x+P-.05)*a,(.5-C+w-.02)*l,(.5+C+P)*a,(.5-x+w)*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,(.5-x+P)*a,(.5+w)*l,(.5-C+P)*a,(.5-x+w)*l,(.5-x+P)*a,(.5-C+w)*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,(.5+P)*a,(.5+x+w)*l,(.5-x+P)*a,(.5+C+w)*l,(.5-C+P)*a,(.5+x+w)*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,.4*a,.6*l,(.5+C+P)*a,(.5+x+w)*l,(.5+x+P)*a,(.5+C+w)*l).close()),m.setSpots(.06,.33,.93,.68),m});o.exports.Shape.defineFigureGenerator("YinYang",(k,a,l)=>{const m=new o.exports.Geometry;let f=new o.exports.PathFigure(a*.5,0,!0);m.add(f),f.add(new o.exports.PathSegment(o.exports.PathSegment.Arc,270,180,a*.5,a*.5,a*.5,a*.5)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Arc,90,-180,a*.5,a*.75,a*.25,a*.25)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Arc,90,180,a*.5,a*.25,a*.25,a*.25));const x=.1,P=.5;let w=.25;return f.add(new o.exports.PathSegment(o.exports.PathSegment.Move,(P+x)*a,w*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Arc,0,-360,a*P,l*w,x*a,x*a).close()),f=new o.exports.PathFigure(a*.5,0,!1),m.add(f),f.add(new o.exports.PathSegment(o.exports.PathSegment.Arc,270,-180,a*.5,a*.5,a*.5,a*.5)),w=.75,f=new o.exports.PathFigure((P+x)*a,w*l,!0),m.add(f),f.add(new o.exports.PathSegment(o.exports.PathSegment.Arc,0,360,a*P,l*w,x*a,x*a).close()),m.defaultStretch=o.exports.GraphObject.Uniform,m});o.exports.Shape.defineFigureGenerator("Peace",(k,a,l)=>{const m=.8535533905932737,f=.5*a,x=.5*l;return new o.exports.Geometry().add(new o.exports.PathFigure(f,0,!1).add(new o.exports.PathSegment(o.exports.PathSegment.Arc,270,360,f,x,f,x)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,f,l)).add(new o.exports.PathSegment(o.exports.PathSegment.Move,f,x)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,(1-m)*a,m*l)).add(new o.exports.PathSegment(o.exports.PathSegment.Move,f,x)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,m*a,m*l)))});o.exports.Shape.defineFigureGenerator("NotAllowed",(k,a,l)=>{const m=new o.exports.Geometry;let f=lt*.5,x=.5;const P=.5,w=.5,C=new o.exports.PathFigure(P*a,(w-x)*l);m.add(C),C.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,(P-x)*a,w*l,(P-f)*a,(w-x)*l,(P-x)*a,(w-f)*l)),C.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,P*a,(w+x)*l,(P-x)*a,(w+f)*l,(P-f)*a,(w+x)*l)),C.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,(P+x)*a,w*l,(P+f)*a,(w+x)*l,(P+x)*a,(w+f)*l)),C.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,P*a,(w-x)*l,(P+x)*a,(w-f)*l,(P+f)*a,(w-x)*l)),x=.4,f=lt*.4;const G=we(),A=we(),z=we(),Z=we();wr(P,w-x,P+f,w-x,P+x,w-f,P+x,w,.42,G,A,z,Z,Z);const gt=we(),Nt=we(),jt=we();wr(P,w-x,P+f,w-x,P+x,w-f,P+x,w,.58,Z,Z,jt,gt,Nt);const it=we(),vn=we(),mi=we();wr(P,w+x,P-f,w+x,P-x,w+f,P-x,w,.42,it,vn,mi,Z,Z);const On=we(),_e=we(),X=we();return wr(P,w+x,P-f,w+x,P-x,w+f,P-x,w,.58,Z,Z,X,On,_e),C.add(new o.exports.PathSegment(o.exports.PathSegment.Move,X.x*a,X.y*l)),C.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,(P-x)*a,w*l,On.x*a,On.y*l,_e.x*a,_e.y*l)),C.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,P*a,(w-x)*l,(P-x)*a,(w-f)*l,(P-f)*a,(w-x)*l)),C.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,z.x*a,z.y*l,G.x*a,G.y*l,A.x*a,A.y*l)),C.add(new o.exports.PathSegment(o.exports.PathSegment.Line,X.x*a,X.y*l).close()),C.add(new o.exports.PathSegment(o.exports.PathSegment.Move,mi.x*a,mi.y*l)),C.add(new o.exports.PathSegment(o.exports.PathSegment.Line,jt.x*a,jt.y*l)),C.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,(P+x)*a,w*l,gt.x*a,gt.y*l,Nt.x*a,Nt.y*l)),C.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,P*a,(w+x)*l,(P+x)*a,(w+f)*l,(P+f)*a,(w+x)*l)),C.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,mi.x*a,mi.y*l,it.x*a,it.y*l,vn.x*a,vn.y*l).close()),le(G),le(A),le(z),le(Z),le(gt),le(Nt),le(jt),le(it),le(vn),le(mi),le(On),le(_e),le(X),m.defaultStretch=o.exports.GraphObject.Uniform,m});o.exports.Shape.defineFigureGenerator("Fragile",(k,a,l)=>new o.exports.Geometry().add(new o.exports.PathFigure(0,0,!0).add(new o.exports.PathSegment(o.exports.PathSegment.Line,.25*a,0)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,.2*a,.15*l)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,.3*a,.25*l)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,.29*a,.33*l)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,.35*a,.25*l)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,.3*a,.15*l)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,.4*a,0)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,0)).add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,.55*a,.5*l,a,.25*l,.75*a,.5*l)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,.55*a,.9*l)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,.7*a,.9*l)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,.7*a,l)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,.3*a,l)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,.3*a,.9*l)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,.45*a,.9*l)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,.45*a,.5*l)).add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,0,0,.25*a,.5*l,0,.25*l).close())));Pt.setFigureParameter("HourGlass",0,new Pt("Thickness",30));o.exports.Shape.defineFigureGenerator("HourGlass",(k,a,l)=>{let m=k?k.parameter1:NaN;(isNaN(m)||m<0)&&(m=30),m>a&&(m=a);const f=(a-m)/2,x=f+m;return new o.exports.Geometry().add(new o.exports.PathFigure(x,.5*l).add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,l)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,l)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,f,.5*l)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,0)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,0).close()))});o.exports.Shape.defineFigureGenerator("Lightning",(k,a,l)=>new o.exports.Geometry().add(new o.exports.PathFigure(0,.55*l).add(new o.exports.PathSegment(o.exports.PathSegment.Line,.6*a,0)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,.3*a,.45*l)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,.45*l)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,.4*a,l)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,.7*a,.55*l).close())));o.exports.Shape.defineFigureGenerator("GenderMale",(k,a,l)=>{const m=new o.exports.Geometry;let f=lt*.4,x=.4;const P=.5,w=.5,C=we(),G=we(),A=we(),z=we(),Z=new o.exports.PathFigure((P-x)*a,w*l,!1);m.add(Z),Z.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,P*a,(w-x)*l,(P-x)*a,(w-f)*l,(P-f)*a,(w-x)*l)),wr(P,w-x,P+f,w-x,P+x,w-f,P+x,w,.44,A,z,G,C,C),Z.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,G.x*a,G.y*l,A.x*a,A.y*l,z.x*a,z.y*l));const gt=Cc(G.x,G.y);wr(P,w-x,P+f,w-x,P+x,w-f,P+x,w,.56,C,C,G,A,z);const Nt=Cc(G.x,G.y);Z.add(new o.exports.PathSegment(o.exports.PathSegment.Line,(gt.x*.1+.95*.9)*a,gt.y*.1*l)),Z.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.85*a,gt.y*.1*l)),Z.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.85*a,0)),Z.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,0)),Z.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,.15*l)),Z.add(new o.exports.PathSegment(o.exports.PathSegment.Line,(Nt.x*.1+.9)*a,.15*l)),Z.add(new o.exports.PathSegment(o.exports.PathSegment.Line,(Nt.x*.1+.9)*a,(Nt.y*.1+.05*.9)*l)),Z.add(new o.exports.PathSegment(o.exports.PathSegment.Line,Nt.x*a,Nt.y*l)),Z.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,(P+x)*a,w*l,A.x*a,A.y*l,z.x*a,z.y*l)),Z.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,P*a,(w+x)*l,(P+x)*a,(w+f)*l,(P+f)*a,(w+x)*l)),Z.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,(P-x)*a,w*l,(P-f)*a,(w+x)*l,(P-x)*a,(w+f)*l)),x=.35,f=lt*.35;const jt=new o.exports.PathFigure(P*a,(w-x)*l,!1);m.add(jt),jt.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,(P-x)*a,w*l,(P-f)*a,(w-x)*l,(P-x)*a,(w-f)*l)),jt.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,P*a,(w+x)*l,(P-x)*a,(w+f)*l,(P-f)*a,(w+x)*l)),jt.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,(P+x)*a,w*l,(P+f)*a,(w+x)*l,(P+x)*a,(w+f)*l)),jt.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,P*a,(w-x)*l,(P+x)*a,(w-f)*l,(P+f)*a,(w-x)*l));const it=new o.exports.PathFigure((P-x)*a,w*l,!1);return m.add(it),le(C),le(G),le(A),le(z),le(gt),le(Nt),m.spot1=new o.exports.Spot(.202,.257),m.spot2=new o.exports.Spot(.792,.739),m.defaultStretch=o.exports.GraphObject.Uniform,m});o.exports.Shape.defineFigureGenerator("GenderFemale",(k,a,l)=>{const m=new o.exports.Geometry;let f=.375,x=0,P=-.125,w=f*lt,C=new o.exports.PathFigure((.525+x)*a,(.5+f+P)*l,!1);return m.add(C),C.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,(1-.5+f+x)*a,(.5+P)*l,(.5+w+x)*a,(.5+f+P)*l,(.5+f+x)*a,(.5+w+P)*l)),C.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,(.5+x)*a,(.5-f+P)*l,(1-.5+f+x)*a,(.5-w+P)*l,(.5+w+x)*a,(.5-f+P)*l)),C.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,(.5-f+x)*a,(.5+P)*l,(.5-w+x)*a,(.5-f+P)*l,(.5-f+x)*a,(.5-w+P)*l)),C.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,(.475+x)*a,(.5+f+P)*l,(.5-f+x)*a,(.5+w+P)*l,(.5-w+x)*a,(.5+f+P)*l)),C.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.475*a,.85*l)),C.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.425*a,.85*l)),C.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.425*a,.9*l)),C.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.475*a,.9*l)),C.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.475*a,l)),C.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.525*a,l)),C.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.525*a,.9*l)),C.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.575*a,.9*l)),C.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.575*a,.85*l)),C.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.525*a,.85*l).close()),f=.325,x=0,P=-.125,w=f*lt,C=new o.exports.PathFigure((1-.5+f+x)*a,(.5+P)*l,!1),m.add(C),C.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,(.5+x)*a,(.5+f+P)*l,(.5+f+x)*a,(.5+w+P)*l,(.5+w+x)*a,(.5+f+P)*l)),C.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,(.5-f+x)*a,(.5+P)*l,(.5-w+x)*a,(.5+f+P)*l,(.5-f+x)*a,(.5+w+P)*l)),C.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,(.5+x)*a,(.5-f+P)*l,(.5-f+x)*a,(.5-w+P)*l,(.5-w+x)*a,(.5-f+P)*l)),C.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,(1-.5+f+x)*a,(.5+P)*l,(.5+w+x)*a,(.5-f+P)*l,(1-.5+f+x)*a,(.5-w+P)*l)),C=new o.exports.PathFigure((.525+x)*a,(.5+f+P)*l,!1),m.add(C),m.spot1=new o.exports.Spot(.232,.136),m.spot2=new o.exports.Spot(.682,.611),m.defaultStretch=o.exports.GraphObject.Uniform,m});o.exports.Shape.defineFigureGenerator("LogicImplies",(k,a,l)=>{let m=k?k.parameter1:NaN;return isNaN(m)&&(m=.2),new o.exports.Geometry().add(new o.exports.PathFigure((1-m)*a,0,!1).add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,.5*l)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,(1-m)*a,l)).add(new o.exports.PathSegment(o.exports.PathSegment.Move,0,.5*l)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,.5*l))).setSpots(0,0,.8,.5)});o.exports.Shape.defineFigureGenerator("LogicIff",(k,a,l)=>{let m=k?k.parameter1:NaN;return isNaN(m)&&(m=.2),new o.exports.Geometry().add(new o.exports.PathFigure((1-m)*a,0,!1).add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,.5*l)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,(1-m)*a,l)).add(new o.exports.PathSegment(o.exports.PathSegment.Move,0,.5*l)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,.5*l)).add(new o.exports.PathSegment(o.exports.PathSegment.Move,m*a,0)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,.5*l)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,m*a,l))).setSpots(.2,0,.8,.5)});o.exports.Shape.defineFigureGenerator("LogicNot",(k,a,l)=>new o.exports.Geometry().add(new o.exports.PathFigure(0,0,!1).add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,0)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,l))));o.exports.Shape.defineFigureGenerator("LogicAnd",(k,a,l)=>new o.exports.Geometry().add(new o.exports.PathFigure(0,l,!1).add(new o.exports.PathSegment(o.exports.PathSegment.Line,.5*a,0)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,l))).setSpots(.25,.5,.75,1));o.exports.Shape.defineFigureGenerator("LogicOr",(k,a,l)=>new o.exports.Geometry().add(new o.exports.PathFigure(0,0,!1).add(new o.exports.PathSegment(o.exports.PathSegment.Line,.5*a,l)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,0))).setSpots(.219,0,.78,.409));o.exports.Shape.defineFigureGenerator("LogicXor",(k,a,l)=>{const m=new o.exports.Geometry().add(new o.exports.PathFigure(.5*a,0,!1).add(new o.exports.PathSegment(o.exports.PathSegment.Line,.5*a,l)).add(new o.exports.PathSegment(o.exports.PathSegment.Move,0,.5*l)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,.5*l)).add(new o.exports.PathSegment(o.exports.PathSegment.Arc,0,360,.5*a,.5*l,.5*a,.5*l)));return m.defaultStretch=o.exports.GraphObject.Uniform,m});o.exports.Shape.defineFigureGenerator("LogicTruth",(k,a,l)=>new o.exports.Geometry().add(new o.exports.PathFigure(0,0,!1).add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,0)).add(new o.exports.PathSegment(o.exports.PathSegment.Move,.5*a,0)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,.5*a,l))));o.exports.Shape.defineFigureGenerator("LogicFalsity",(k,a,l)=>new o.exports.Geometry().add(new o.exports.PathFigure(0,l,!1).add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,l)).add(new o.exports.PathSegment(o.exports.PathSegment.Move,.5*a,l)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,.5*a,0))));o.exports.Shape.defineFigureGenerator("LogicThereExists",(k,a,l)=>new o.exports.Geometry().add(new o.exports.PathFigure(0,0,!1).add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,0)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,.5*l)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,.5*l)).add(new o.exports.PathSegment(o.exports.PathSegment.Move,a,.5*l)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,l)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,l))));o.exports.Shape.defineFigureGenerator("LogicForAll",(k,a,l)=>new o.exports.Geometry().add(new o.exports.PathFigure(0,0,!1).add(new o.exports.PathSegment(o.exports.PathSegment.Line,.5*a,l)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,0)).add(new o.exports.PathSegment(o.exports.PathSegment.Move,.25*a,.5*l)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,.75*a,.5*l))).setSpots(.25,0,.75,.5));o.exports.Shape.defineFigureGenerator("LogicIsDefinedAs",(k,a,l)=>new o.exports.Geometry().add(new o.exports.PathFigure(0,0,!1).add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,0)).add(new o.exports.PathSegment(o.exports.PathSegment.Move,0,.5*l)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,.5*l)).add(new o.exports.PathSegment(o.exports.PathSegment.Move,0,l)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,l))).setSpots(.01,.01,.99,.49));o.exports.Shape.defineFigureGenerator("LogicIntersect",(k,a,l)=>new o.exports.Geometry().add(new o.exports.PathFigure(0,l,!1).add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,.5*l)).add(new o.exports.PathSegment(o.exports.PathSegment.Arc,180,180,.5*a,.5*l,.5*a,.5*l)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,l))).setSpots(0,.5,1,1));o.exports.Shape.defineFigureGenerator("LogicUnion",(k,a,l)=>new o.exports.Geometry().add(new o.exports.PathFigure(a,0,!1).add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,.5*l)).add(new o.exports.PathSegment(o.exports.PathSegment.Arc,0,180,.5*a,.5*l,.5*a,.5*l)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,0))).setSpots(0,0,1,.5));Pt.setFigureParameter("Arrow",0,new Pt("ArrowheadWidth",.3,.01,.99));Pt.setFigureParameter("Arrow",1,new Pt("TailHeight",.3,.01,.99));o.exports.Shape.defineFigureGenerator("Arrow",(k,a,l)=>{let m=k?k.parameter1:NaN;isNaN(m)&&(m=.3);let f=k?k.parameter2:NaN;isNaN(f)&&(f=.3);const x=(1-m)*a,P=(.5-f/2)*l,w=(.5+f/2)*l,C=new o.exports.Geometry,G=new o.exports.PathFigure(0,P,!0);C.add(G),G.add(new o.exports.PathSegment(o.exports.PathSegment.Line,x,P)),G.add(new o.exports.PathSegment(o.exports.PathSegment.Line,x,0)),G.add(new o.exports.PathSegment(o.exports.PathSegment.Line,x,0)),G.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,.5*l)),G.add(new o.exports.PathSegment(o.exports.PathSegment.Line,x,l)),G.add(new o.exports.PathSegment(o.exports.PathSegment.Line,x,w)),G.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,w).close()),C.spot1=new o.exports.Spot(0,P/l);const A=io(0,w/l,1,w/l,x/a,1,1,.5,we());return C.spot2=new o.exports.Spot(A.x,A.y),le(A),C});Pt.setFigureParameter("Arrow2",0,new Pt("ArrowheadWidth",30));Pt.setFigureParameter("Arrow2",1,new Pt("TailHeight",30));o.exports.Shape.defineFigureGenerator("Arrow2",(k,a,l)=>{let m=k?k.parameter1:NaN;isNaN(m)&&(m=30),m>a&&(m=a);let f=k?k.parameter2:NaN;isNaN(f)&&(f=30),f=Math.min(f,l/2);const x=a-m,P=(l-f)/2,w=P+f,C=new o.exports.Geometry,G=new o.exports.PathFigure(0,P,!0);C.add(G),G.add(new o.exports.PathSegment(o.exports.PathSegment.Line,x,P)),G.add(new o.exports.PathSegment(o.exports.PathSegment.Line,x,0)),G.add(new o.exports.PathSegment(o.exports.PathSegment.Line,x,0)),G.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,.5*l)),G.add(new o.exports.PathSegment(o.exports.PathSegment.Line,x,l)),G.add(new o.exports.PathSegment(o.exports.PathSegment.Line,x,w)),G.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,w).close()),C.spot1=new o.exports.Spot(0,P/l);const A=io(0,w/l,1,w/l,x/a,1,1,.5,we());return C.spot2=new o.exports.Spot(A.x,A.y),le(A),C});o.exports.Shape.defineFigureGenerator("Chevron",(k,a,l)=>{const m=new o.exports.Geometry,f=new o.exports.PathFigure(0,0,!0);return m.add(f),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.5*a,0)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,.5*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.5*a,l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.5*a,.5*l).close()),m});o.exports.Shape.defineFigureGenerator("DoubleArrow",(k,a,l)=>{const m=new o.exports.Geometry,f=new o.exports.PathFigure(0,0,!0);return m.add(f),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.3*a,.214*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.3*a,0)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,1*a,.5*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.3*a,1*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.3*a,.786*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,1*l).close()),m});Pt.setFigureParameter("DoubleEndArrow",0,new Pt("ConnecterHeight",.3,.01,.99));o.exports.Shape.defineFigureGenerator("DoubleEndArrow",(k,a,l)=>{let m=k?k.parameter1:NaN;isNaN(m)&&(m=.3);const f=(.5-m/2)*l,x=(.5+m/2)*l,P=new o.exports.Geometry,w=new o.exports.PathFigure(a,.5*l,!0);P.add(w),w.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.7*a,l)),w.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.7*a,x)),w.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.3*a,x)),w.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.3*a,l)),w.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,.5*l)),w.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.3*a,0)),w.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.3*a,f)),w.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.7*a,f)),w.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.7*a,0).close());let C=io(0,.5,.3,0,0,f/l,.1,f/l,we());return P.spot1=new o.exports.Spot(C.x,C.y),C=io(.7,1,1,.5,0,x/l,1,x/l,C),P.spot2=new o.exports.Spot(C.x,C.y),le(C),P});Pt.setFigureParameter("DoubleEndArrow2",0,new Pt("ConnecterHeight",40));Pt.setFigureParameter("DoubleEndArrow2",1,new Pt("ArrowHeight",100));o.exports.Shape.defineFigureGenerator("DoubleEndArrow2",(k,a,l)=>{let m=k?k.parameter1:NaN;isNaN(m)&&(m=40);let f=k?k.parameter2:NaN;isNaN(f)&&(f=100);let x=(l-m)/2,P=x+m,w=(l-f)/2,C=w+f;(m>l||f>l)&&(f>m?(m=m*l/f,x=(l-m)/2,P=x+m,w=0,C=l):(x=0,P=l,w=0,C=l));const G=new o.exports.Geometry,A=new o.exports.PathFigure(a,.5*l,!0);G.add(A),A.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.7*a,C)),A.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.7*a,P)),A.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.3*a,P)),A.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.3*a,C)),A.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,.5*l)),A.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.3*a,w)),A.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.3*a,x)),A.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.7*a,x)),A.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.7*a,w).close());let z=io(0,.5,.3,w/l,0,x/l,1,x/l,we());return G.spot1=new o.exports.Spot(z.x,z.y),z=io(.7,C/l,1,.5,0,P/l,1,P/l,z),G.spot2=new o.exports.Spot(z.x,z.y),le(z),G});Pt.setFigureParameter("IBeamArrow",0,new Pt("ConnectorHeight",.3,.01,.99));o.exports.Shape.defineFigureGenerator("IBeamArrow",(k,a,l)=>{let m=k?k.parameter1:NaN;isNaN(m)&&(m=.3);const f=(.5-m/2)*l,x=(.5+m/2)*l,P=new o.exports.Geometry,w=new o.exports.PathFigure(a,.5*l,!0);P.add(w),w.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.7*a,l)),w.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.7*a,x)),w.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.2*a,x)),w.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.2*a,l)),w.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,l)),w.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,0)),w.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.2*a,0)),w.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.2*a,f)),w.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.7*a,f)),w.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.7*a,0).close()),P.spot1=new o.exports.Spot(0,f/l);const C=io(.7,1,1,.5,0,x/l,1,x/l,we());return P.spot2=new o.exports.Spot(C.x,C.y),le(C),P});Pt.setFigureParameter("IBeamArrow2",0,new Pt("ConnectorHeight",40));Pt.setFigureParameter("IBeamArrow2",1,new Pt("BeamArrowHeight",100));o.exports.Shape.defineFigureGenerator("IBeamArrow2",(k,a,l)=>{let m=k?k.parameter1:NaN;isNaN(m)&&(m=40);let f=k?k.parameter2:NaN;isNaN(f)&&(f=100);let x=(l-m)/2,P=x+m,w=(l-f)/2,C=w+f;(m>l||f>l)&&(f>m?(m=m*l/f,x=(l-m)/2,P=x+m,w=0,C=l):(x=0,P=l,w=0,C=l));const G=new o.exports.Geometry,A=new o.exports.PathFigure(a,.5*l,!0);G.add(A),A.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.7*a,C)),A.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.7*a,P)),A.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.2*a,P)),A.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.2*a,C)),A.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,C)),A.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,w)),A.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.2*a,w)),A.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.2*a,x)),A.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.7*a,x)),A.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.7*a,w).close()),G.spot1=new o.exports.Spot(0,x/l);const z=io(.7,C/l,1,.5,0,P/l,1,P/l,we());return G.spot2=new o.exports.Spot(z.x,z.y),le(z),G});Pt.setFigureParameter("Pointer",0,new Pt("BackPoint",.1,0,.2));o.exports.Shape.defineFigureGenerator("Pointer",(k,a,l)=>{let m=k?k.parameter1:NaN;isNaN(m)&&(m=.1);const f=new o.exports.Geometry,x=new o.exports.PathFigure(a,.5*l,!0);f.add(x),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,m*a,.5*l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,0).close()),f.spot1=new o.exports.Spot(m,.35);const P=io(0,.65,1,.65,0,1,1,.5,we());return f.spot2=new o.exports.Spot(P.x,P.y),le(P),f});Pt.setFigureParameter("RoundedPointer",0,new Pt("RoundedEdged",.3,0,.5));o.exports.Shape.defineFigureGenerator("RoundedPointer",(k,a,l)=>{let m=k?k.parameter1:NaN;isNaN(m)&&(m=.3);const f=new o.exports.Geometry,x=new o.exports.PathFigure(a,.5*l,!0);f.add(x),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,0,0,m*a,.75*l,m*a,.25*l).close()),f.spot1=new o.exports.Spot(m,.35);const P=io(0,.65,1,.65,0,1,1,.5,we());return f.spot2=new o.exports.Spot(P.x,P.y),le(P),f});Pt.setFigureParameter("SplitEndArrow",0,new Pt("TailHeight",.4,.01,.99));o.exports.Shape.defineFigureGenerator("SplitEndArrow",(k,a,l)=>{let m=k?k.parameter1:NaN;isNaN(m)&&(m=.4);const f=(.5-m/2)*l,x=(.5+m/2)*l,P=new o.exports.Geometry,w=new o.exports.PathFigure(a,.5*l,!0);P.add(w),w.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.7*a,l)),w.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.7*a,x)),w.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,x)),w.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.2*a,.5*l)),w.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,f)),w.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.7*a,f)),w.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.7*a,0).close()),P.spot1=new o.exports.Spot(.2,f/l);const C=io(.7,1,1,.5,0,x/l,1,x/l,we());return P.spot2=new o.exports.Spot(C.x,C.y),le(C),P});Pt.setFigureParameter("SplitEndArrow2",0,new Pt("TailHeight",40));o.exports.Shape.defineFigureGenerator("SplitEndArrow2",(k,a,l)=>{let m=k?k.parameter1:NaN;isNaN(m)&&(m=50);let f=(l-m)/2,x=f+m;m>l&&(f=0,x=l);const P=new o.exports.Geometry,w=new o.exports.PathFigure(a,.5*l,!0);P.add(w),w.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.7*a,l)),w.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.7*a,x)),w.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,x)),w.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.2*a,.5*l)),w.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,f)),w.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.7*a,f)),w.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.7*a,0).close()),P.spot1=new o.exports.Spot(.2,f/l);const C=io(.7,1,1,.5,0,x/l,1,x/l,we());return P.spot2=new o.exports.Spot(C.x,C.y),le(C),P});Pt.setFigureParameter("SquareArrow",0,new Pt("ArrowPoint",.7,.2,.9));o.exports.Shape.defineFigureGenerator("SquareArrow",(k,a,l)=>{let m=k?k.parameter1:NaN;isNaN(m)&&(m=.7);const f=new o.exports.Geometry,x=new o.exports.PathFigure(a,.5*l,!0);return f.add(x),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,m*a,l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,0)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,m*a,0).close()),f.spot1=o.exports.Spot.TopLeft,f.spot2=new o.exports.Spot(m,1),f});o.exports.Shape.defineFigureGenerator("Cone1",(k,a,l)=>{const m=new o.exports.Geometry,f=lt*.5,x=lt*.1,P=new o.exports.PathFigure(0,.9*l,!0);return m.add(P),P.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.5*a,0)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,.9*l)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,.5*a,l,a,(.9+x)*l,(.5+f)*a,l)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,0,.9*l,(.5-f)*a,l,0,(.9+x)*l).close()),m.spot1=new o.exports.Spot(.25,.5),m.spot2=new o.exports.Spot(.75,.97),m});o.exports.Shape.defineFigureGenerator("Cone2",(k,a,l)=>{const m=new o.exports.Geometry,f=new o.exports.PathFigure(0,.9*l,!0);m.add(f),f.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,a,.9*l,(1-.85/.9)*a,l,.85/.9*a,l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.5*a,0)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,.9*l).close());const x=new o.exports.PathFigure(0,.9*l,!1);return m.add(x),x.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,a,.9*l,(1-.85/.9)*a,.8*l,.85/.9*a,.8*l)),m.spot1=new o.exports.Spot(.25,.5),m.spot2=new o.exports.Spot(.75,.82),m});o.exports.Shape.defineFigureGenerator("Cube1",(k,a,l)=>{const m=new o.exports.Geometry,f=new o.exports.PathFigure(.5*a,l,!0);m.add(f),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,.85*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,.15*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.5*a,0)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,.15*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,.85*l).close());const x=new o.exports.PathFigure(.5*a,l,!1);return m.add(x),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.5*a,.3*l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,.15*l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Move,.5*a,.3*l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,.15*l)),m.spot1=new o.exports.Spot(0,.3),m.spot2=new o.exports.Spot(.5,.85),m});o.exports.Shape.defineFigureGenerator("Cube2",(k,a,l)=>{const m=new o.exports.Geometry,f=new o.exports.PathFigure(0,.3*l,!0);m.add(f),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.7*a,l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,.7*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,0)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.3*a,0).close());const x=new o.exports.PathFigure(0,.3*l,!1);return m.add(x),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.7*a,.3*l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,0)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Move,.7*a,.3*l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.7*a,l)),m.spot1=new o.exports.Spot(0,.3),m.spot2=new o.exports.Spot(.7,1),m});o.exports.Shape.defineFigureGenerator("Cylinder1",function(k,a,l){let m=k?k.parameter1:NaN;isNaN(m)&&(m=5),m=Math.min(m,l/3);const f=new o.exports.Geometry,x=lt*.5,P=new o.exports.PathFigure(0,m,!0);f.add(P),P.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,.5*a,0,0,lt*m,(.5-x)*a,0)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,1*a,m,(.5+x)*a,0,1*a,lt*m)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,l-m)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,.5*a,1*l,1*a,l-lt*m,(.5+x)*a,1*l)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,0,l-m,(.5-x)*a,1*l,0,l-lt*m)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,m));const w=new o.exports.PathFigure(a,m,!1);return f.add(w),w.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,.5*a,2*m,1*a,2*m-lt*m,(.5+x)*a,2*m)),w.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,0,m,(.5-x)*a,2*m,0,2*m-lt*m)),f.spot1=new o.exports.Spot(0,0,0,2*m),f.spot2=new o.exports.Spot(1,1),f});o.exports.Shape.defineFigureGenerator("Cylinder2",function(k,a,l){let m=k?k.parameter1:NaN;isNaN(m)&&(m=5),m=Math.min(m,l/3);const f=new o.exports.Geometry,x=lt*.5,P=new o.exports.PathFigure(0,l-m,!0);f.add(P),P.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,m)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,.5*a,0,0,lt*m,(.5-x)*a,0)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,a,m,(.5+x)*a,0,a,lt*m)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,l-m)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,.5*a,l,a,l-lt*m,(.5+x)*a,l)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,0,l-m,(.5-x)*a,l,0,l-lt*m));const w=new o.exports.PathFigure(0,l-m,!1);return f.add(w),w.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,.5*a,l-2*m,0,l-m-lt*m,(.5-x)*a,l-2*m)),w.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,a,l-m,(.5+x)*a,l-2*m,a,l-m-lt*m)),f.spot1=new o.exports.Spot(0,0),f.spot2=new o.exports.Spot(1,1,0,-2*m),f});o.exports.Shape.defineFigureGenerator("Cylinder3",function(k,a,l){let m=k?k.parameter1:NaN;isNaN(m)&&(m=5),m=Math.min(m,a/3);const f=new o.exports.Geometry,x=lt*.5,P=new o.exports.PathFigure(m,0,!0);f.add(P),P.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a-m,0)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,a,.5*l,a-lt*m,0,a,(.5-x)*l)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,a-m,l,a,(.5+x)*l,a-lt*m,l)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Line,m,l)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,0,.5*l,lt*m,l,0,(.5+x)*l)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,m,0,0,(.5-x)*l,lt*m,0));const w=new o.exports.PathFigure(m,0,!1);return f.add(w),w.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,2*m,.5*l,m+lt*m,0,2*m,(.5-x)*l)),w.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,m,l,2*m,(.5+x)*l,m+lt*m,l)),f.spot1=new o.exports.Spot(0,0,2*m,0),f.spot2=new o.exports.Spot(1,1),f});o.exports.Shape.defineFigureGenerator("Cylinder4",function(k,a,l){let m=k?k.parameter1:NaN;isNaN(m)&&(m=5),m=Math.min(m,a/3);const f=new o.exports.Geometry,x=lt*.5,P=new o.exports.PathFigure(a-m,0,!0);f.add(P),P.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,a,.5*l,a-lt*m,0,a,(.5-x)*l)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,a-m,l,a,(.5+x)*l,a-lt*m,l)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Line,m,l)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,0,.5*l,lt*m,l,0,(.5+x)*l)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,m,0,0,(.5-x)*l,lt*m,0)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a-m,0));const w=new o.exports.PathFigure(a-m,0,!1);return f.add(w),w.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,a-2*m,.5*l,a-m-lt*m,0,a-2*m,(.5-x)*l)),w.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,a-m,l,a-2*m,(.5+x)*l,a-m-lt*m,l)),f.spot1=new o.exports.Spot(0,0),f.spot2=new o.exports.Spot(1,1,-2*m,0),f});o.exports.Shape.defineFigureGenerator("Prism1",(k,a,l)=>{const m=new o.exports.Geometry,f=new o.exports.PathFigure(.25*a,.25*l,!0);m.add(f),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.75*a,0)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,.5*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.5*a,l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,l).close());const x=new o.exports.PathFigure(.25*a,.25*l,!1);return m.add(x),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.5*a,l)),m.spot1=new o.exports.Spot(.408,.172),m.spot2=new o.exports.Spot(.833,.662),m});o.exports.Shape.defineFigureGenerator("Prism2",(k,a,l)=>{const m=new o.exports.Geometry,f=new o.exports.PathFigure(0,.25*l,!0);m.add(f),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.75*a,0)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,.25*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.75*a,.75*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,l).close());const x=new o.exports.PathFigure(0,l,!1);return m.add(x),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.25*a,.5*l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,.25*l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Move,0,.25*l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.25*a,.5*l)),m.spot1=new o.exports.Spot(.25,.5),m.spot2=new o.exports.Spot(.75,.75),m});o.exports.Shape.defineFigureGenerator("Pyramid1",(k,a,l)=>{const m=new o.exports.Geometry,f=new o.exports.PathFigure(.5*a,0,!0);m.add(f),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,.75*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.5*a,l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,.75*l).close());const x=new o.exports.PathFigure(.5*a,0,!1);return m.add(x),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.5*a,l)),m.spot1=new o.exports.Spot(.25,.367),m.spot2=new o.exports.Spot(.75,.875),m});o.exports.Shape.defineFigureGenerator("Pyramid2",(k,a,l)=>{const m=new o.exports.Geometry,f=new o.exports.PathFigure(.5*a,0,!0);m.add(f),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,.85*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.5*a,l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,.85*l).close());const x=new o.exports.PathFigure(.5*a,0,!1);return m.add(x),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.5*a,.7*l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,.85*l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Move,.5*a,.7*l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,.85*l)),m.spot1=new o.exports.Spot(.25,.367),m.spot2=new o.exports.Spot(.75,.875),m});o.exports.Shape.defineFigureGenerator("Actor",(k,a,l)=>{const m=new o.exports.Geometry,f=.2,x=.1,P=lt*f,w=lt*x;let C=.5,G=.1;const A=new o.exports.PathFigure(C*a,(G+x)*l,!0);m.add(A),A.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,(C-f)*a,G*l,(C-P)*a,(G+x)*l,(C-f)*a,(G+w)*l)),A.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,C*a,(G-x)*l,(C-f)*a,(G-w)*l,(C-P)*a,(G-x)*l)),A.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,(C+f)*a,G*l,(C+P)*a,(G-x)*l,(C+f)*a,(G-w)*l)),A.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,C*a,(G+x)*l,(C+f)*a,(G+w)*l,(C+P)*a,(G+x)*l));let z=.05,Z=lt*z;C=.05,G=.25;const gt=new o.exports.PathFigure(.5*a,.2*l,!0);return m.add(gt),gt.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.95*a,.2*l)),C=.95,G=.25,gt.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,(C+z)*a,G*l,(C+Z)*a,(G-z)*l,(C+z)*a,(G-Z)*l)),gt.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,.6*l)),gt.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.85*a,.6*l)),gt.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.85*a,.35*l)),z=.025,Z=lt*z,C=.825,G=.35,gt.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,C*a,(G-z)*l,(C+z)*a,(G-Z)*l,(C+Z)*a,(G-z)*l)),gt.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,(C-z)*a,G*l,(C-Z)*a,(G-z)*l,(C-z)*a,(G-Z)*l)),gt.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.8*a,l)),gt.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.55*a,l)),gt.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.55*a,.7*l)),z=.05,Z=lt*z,C=.5,G=.7,gt.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,C*a,(G-z)*l,(C+z)*a,(G-Z)*l,(C+Z)*a,(G-z)*l)),gt.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,(C-z)*a,G*l,(C-Z)*a,(G-z)*l,(C-z)*a,(G-Z)*l)),gt.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.45*a,l)),gt.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.2*a,l)),gt.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.2*a,.35*l)),z=.025,Z=lt*z,C=.175,G=.35,gt.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,C*a,(G-z)*l,(C+z)*a,(G-Z)*l,(C+Z)*a,(G-z)*l)),gt.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,(C-z)*a,G*l,(C-Z)*a,(G-z)*l,(C-z)*a,(G-Z)*l)),gt.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.15*a,.6*l)),gt.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,.6*l)),gt.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,.25*l)),z=.05,Z=lt*z,C=.05,G=.25,gt.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,C*a,(G-z)*l,(C-z)*a,(G-Z)*l,(C-Z)*a,(G-z)*l)),gt.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.5*a,.2*l)),m.spot1=new o.exports.Spot(.2,.2),m.spot2=new o.exports.Spot(.8,.65),m});Pt.setFigureParameter("Card",0,new Pt("CornerCutoutSize",.2,.1,.9));o.exports.Shape.defineFigureGenerator("Card",(k,a,l)=>{let m=k?k.parameter1:NaN;isNaN(m)&&(m=.2);const f=new o.exports.Geometry,x=new o.exports.PathFigure(a,0,!0);return f.add(x),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,m*l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,m*a,0).close()),f.spot1=new o.exports.Spot(0,m),f.spot2=o.exports.Spot.BottomRight,f});o.exports.Shape.defineFigureGenerator("Collate",(k,a,l)=>{const m=new o.exports.Geometry,f=new o.exports.PathFigure(.5*a,.5*l,!0);m.add(f),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,0)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,0)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.5*a,.5*l));const x=new o.exports.PathFigure(.5*a,.5*l,!0);return m.add(x),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.5*a,.5*l)),m.spot1=new o.exports.Spot(.25,0),m.spot2=new o.exports.Spot(.75,.25),m});o.exports.Shape.defineFigureGenerator("CreateRequest",(k,a,l)=>{const m=new o.exports.Geometry;let f=k?k.parameter1:NaN;isNaN(f)&&(f=.1);const x=new o.exports.PathFigure(0,0,!0);m.add(x),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,0)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,l).close());const P=new o.exports.PathFigure(0,f*l,!1);return m.add(P),P.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,f*l)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Move,0,(1-f)*l)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,(1-f)*l)),m});o.exports.Shape.defineFigureGenerator("Database",(k,a,l)=>{const m=new o.exports.Geometry,f=lt*.5,x=lt*.1,P=new o.exports.PathFigure(a,.1*l,!0);m.add(P),P.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,.9*l)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,.5*a,l,a,(.9+x)*l,(.5+f)*a,l)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,0,.9*l,(.5-f)*a,l,0,(.9+x)*l)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,.1*l)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,.5*a,0,0,(.1-x)*l,(.5-f)*a,0)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,a,.1*l,(.5+f)*a,0,a,(.1-x)*l));const w=new o.exports.PathFigure(a,.1*l,!1);return m.add(w),w.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,.5*a,.2*l,a,(.1+x)*l,(.5+f)*a,.2*l)),w.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,0,.1*l,(.5-f)*a,.2*l,0,(.1+x)*l)),w.add(new o.exports.PathSegment(o.exports.PathSegment.Move,a,.2*l)),w.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,.5*a,.3*l,a,(.2+x)*l,(.5+f)*a,.3*l)),w.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,0,.2*l,(.5-f)*a,.3*l,0,(.2+x)*l)),w.add(new o.exports.PathSegment(o.exports.PathSegment.Move,a,.3*l)),w.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,.5*a,.4*l,a,(.3+x)*l,(.5+f)*a,.4*l)),w.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,0,.3*l,(.5-f)*a,.4*l,0,(.3+x)*l)),m.spot1=new o.exports.Spot(0,.4),m.spot2=new o.exports.Spot(1,.9),m});o.exports.Shape.defineFigureGenerator("DataStorage",(k,a,l)=>{const m=new o.exports.Geometry,f=new o.exports.PathFigure(0,0,!0);return m.add(f),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.75*a,0)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,.75*a,l,a,0,a,l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,0,0,.25*a,.9*l,.25*a,.1*l).close()),m.spot1=new o.exports.Spot(.226,0),m.spot2=new o.exports.Spot(.81,1),m});o.exports.Shape.defineFigureGenerator("DiskStorage",(k,a,l)=>{const m=new o.exports.Geometry,f=lt*.5,x=lt*.1,P=new o.exports.PathFigure(a,.1*l,!0);m.add(P),P.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,.9*l)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,.5*a,l,a,(.9+x)*l,(.5+f)*a,l)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,0,.9*l,(.5-f)*a,l,0,(.9+x)*l)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,.1*l)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,.5*a,0,0,(.1-x)*l,(.5-f)*a,0)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,a,.1*l,(.5+f)*a,0,a,(.1-x)*l));const w=new o.exports.PathFigure(a,.1*l,!1);return m.add(w),w.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,.5*a,.2*l,a,(.1+x)*l,(.5+f)*a,.2*l)),w.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,0,.1*l,(.5-f)*a,.2*l,0,(.1+x)*l)),w.add(new o.exports.PathSegment(o.exports.PathSegment.Move,a,.2*l)),w.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,.5*a,.3*l,a,(.2+x)*l,(.5+f)*a,.3*l)),w.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,0,.2*l,(.5-f)*a,.3*l,0,(.2+x)*l)),m.spot1=new o.exports.Spot(0,.3),m.spot2=new o.exports.Spot(1,.9),m});o.exports.Shape.defineFigureGenerator("Display",(k,a,l)=>{const m=new o.exports.Geometry,f=new o.exports.PathFigure(.25*a,0,!0);return m.add(f),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.75*a,0)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,.75*a,l,a,0,a,l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.25*a,l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,.5*l).close()),m.spot1=new o.exports.Spot(.25,0),m.spot2=new o.exports.Spot(.75,1),m});o.exports.Shape.defineFigureGenerator("DividedEvent",(k,a,l)=>{const m=new o.exports.Geometry;let f=k?k.parameter1:NaN;isNaN(f)?f=.2:f<.15&&(f=.15);const x=lt*.2,P=new o.exports.PathFigure(0,.2*l,!0);m.add(P),P.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,.2*a,0,0,(.2-x)*l,(.2-x)*a,0)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.8*a,0)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,a,.2*l,(.8+x)*a,0,a,(.2-x)*l)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,.8*l)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,.8*a,l,a,(.8+x)*l,(.8+x)*a,l)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.2*a,l)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,0,.8*l,(.2-x)*a,l,0,(.8+x)*l)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,.2*l));const w=new o.exports.PathFigure(0,f*l,!1);return m.add(w),w.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,f*l)),m});o.exports.Shape.defineFigureGenerator("DividedProcess",(k,a,l)=>{const m=new o.exports.Geometry;let f=k?k.parameter1:NaN;(isNaN(f)||f<.1)&&(f=.1);const x=new o.exports.PathFigure(0,0,!0);m.add(x),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,0)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,l).close());const P=new o.exports.PathFigure(0,f*l,!1);return m.add(P),P.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,f*l)),m});o.exports.Shape.defineFigureGenerator("Document",(k,a,l)=>{const m=new o.exports.Geometry;l=l/.8;const f=new o.exports.PathFigure(0,.7*l,!0);return m.add(f),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,0)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,0)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,.7*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,0,.7*l,.5*a,.4*l,.5*a,l).close()),m.spot1=o.exports.Spot.TopLeft,m.spot2=new o.exports.Spot(1,.6),m});o.exports.Shape.defineFigureGenerator("ExternalOrganization",(k,a,l)=>{const m=new o.exports.Geometry;let f=k?k.parameter1:NaN;(isNaN(f)||f<.2)&&(f=.2);const x=new o.exports.PathFigure(0,0,!0);m.add(x),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,0)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,l).close());const P=new o.exports.PathFigure(f*a,0,!1);return m.add(P),P.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,f*l)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Move,a,f*l)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Line,(1-f)*a,0)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Move,0,(1-f)*l)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Line,f*a,l)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Move,(1-f)*a,l)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,(1-f)*l)),m});o.exports.Shape.defineFigureGenerator("ExternalProcess",(k,a,l)=>{const m=new o.exports.Geometry,f=new o.exports.PathFigure(.5*a,0,!0);m.add(f),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,.5*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.5*a,l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,.5*l).close());const x=new o.exports.PathFigure(.1*a,.4*l,!1);return m.add(x),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.1*a,.6*l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Move,.9*a,.6*l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.9*a,.4*l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Move,.6*a,.1*l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.4*a,.1*l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Move,.4*a,.9*l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.6*a,.9*l)),m.spot1=new o.exports.Spot(.25,.25),m.spot2=new o.exports.Spot(.75,.75),m});o.exports.Shape.defineFigureGenerator("File",(k,a,l)=>{const m=new o.exports.Geometry,f=new o.exports.PathFigure(0,0,!0);m.add(f),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.75*a,0)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,.25*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,l).close());const x=new o.exports.PathFigure(.75*a,0,!1);return m.add(x),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.75*a,.25*l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,.25*l)),m.spot1=new o.exports.Spot(0,.25),m.spot2=o.exports.Spot.BottomRight,m});o.exports.Shape.defineFigureGenerator("Interrupt",(k,a,l)=>{const m=new o.exports.Geometry,f=new o.exports.PathFigure(a,.5*l,!0);m.add(f),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,0)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,.5*l));const x=new o.exports.PathFigure(a,.5*l,!1);m.add(x),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,l));const P=new o.exports.PathFigure(a,.5*l,!1);return m.add(P),P.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,0)),m.spot1=new o.exports.Spot(0,.25),m.spot2=new o.exports.Spot(.5,.75),m});o.exports.Shape.defineFigureGenerator("InternalStorage",(k,a,l)=>{const m=new o.exports.Geometry;let f=k?k.parameter1:NaN,x=k?k.parameter2:NaN;isNaN(f)&&(f=.1),isNaN(x)&&(x=.1);const P=new o.exports.PathFigure(0,0,!0);m.add(P),P.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,0)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,l)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,l).close());const w=new o.exports.PathFigure(f*a,0,!1);return m.add(w),w.add(new o.exports.PathSegment(o.exports.PathSegment.Line,f*a,l)),w.add(new o.exports.PathSegment(o.exports.PathSegment.Move,0,x*l)),w.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,x*l)),m});o.exports.Shape.defineFigureGenerator("Junction",(k,a,l)=>{const m=new o.exports.Geometry,f=1/Math.SQRT2,x=(1-1/Math.SQRT2)/2,P=lt*.5,w=.5,C=new o.exports.PathFigure(a,w*l,!0);m.add(C),C.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,w*a,l,a,(w+P)*l,(w+P)*a,l)),C.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,0,w*l,(w-P)*a,l,0,(w+P)*l)),C.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,w*a,0,0,(w-P)*l,(w-P)*a,0)),C.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,a,w*l,(w+P)*a,0,a,(w-P)*l));const G=new o.exports.PathFigure((x+f)*a,(x+f)*l,!1);return m.add(G),G.add(new o.exports.PathSegment(o.exports.PathSegment.Line,x*a,x*l)),G.add(new o.exports.PathSegment(o.exports.PathSegment.Move,x*a,(x+f)*l)),G.add(new o.exports.PathSegment(o.exports.PathSegment.Line,(x+f)*a,x*l)),m});o.exports.Shape.defineFigureGenerator("LinedDocument",(k,a,l)=>{const m=new o.exports.Geometry;l=l/.8;const f=new o.exports.PathFigure(0,.7*l,!0);m.add(f),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,0)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,0)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,.7*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,0,.7*l,.5*a,.4*l,.5*a,l).close());const x=new o.exports.PathFigure(.1*a,0,!1);return m.add(x),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.1*a,.75*l)),m.spot1=new o.exports.Spot(.1,0),m.spot2=new o.exports.Spot(1,.6),m});o.exports.Shape.defineFigureGenerator("LoopLimit",(k,a,l)=>{const m=new o.exports.Geometry,f=new o.exports.PathFigure(0,l,!0);return m.add(f),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,.25*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.25*a,0)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.75*a,0)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,.25*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,l).close()),m.spot1=new o.exports.Spot(0,.25),m.spot2=o.exports.Spot.BottomRight,m});o.exports.Shape.defineFigureGenerator("MagneticTape",(k,a,l)=>{const m=new o.exports.Geometry,f=lt*.5,x=.5,P=new o.exports.PathFigure(.5*a,l,!0);return m.add(P),P.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,0,x*l,(x-f)*a,l,0,(x+f)*l)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,x*a,0,0,(x-f)*l,(x-f)*a,0)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,a,x*l,(x+f)*a,0,a,(x-f)*l)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,(x+.1)*a,.9*l,a,(x+f)*l,(x+f)*a,.9*l)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,.9*l)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,l)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.5*a,l)),m.spot1=new o.exports.Spot(.15,.15),m.spot2=new o.exports.Spot(.85,.8),m});o.exports.Shape.defineFigureGenerator("ManualInput",(k,a,l)=>{const m=new o.exports.Geometry,f=new o.exports.PathFigure(a,0,!0);return m.add(f),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,.25*l).close()),m.spot1=new o.exports.Spot(0,.25),m.spot2=o.exports.Spot.BottomRight,m});o.exports.Shape.defineFigureGenerator("MessageFromUser",(k,a,l)=>{const m=new o.exports.Geometry;let f=k?k.parameter1:NaN;isNaN(f)&&(f=.7);const x=new o.exports.PathFigure(0,0,!0);return m.add(x),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,0)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,f*a,.5*l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,l).close()),m.spot1=o.exports.Spot.TopLeft,m});o.exports.Shape.defineFigureGenerator("MicroformProcessing",(k,a,l)=>{const m=new o.exports.Geometry;let f=k?k.parameter1:NaN;isNaN(f)&&(f=.25);const x=new o.exports.PathFigure(0,0,!0);return m.add(x),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.5*a,f*l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,0)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.5*a,(1-f)*l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,l).close()),m});o.exports.Shape.defineFigureGenerator("MicroformRecording",(k,a,l)=>{const m=new o.exports.Geometry,f=new o.exports.PathFigure(0,0,!0);return m.add(f),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.75*a,.25*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,.15*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,.85*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.75*a,.75*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,l).close()),m.spot1=new o.exports.Spot(0,.25),m.spot2=new o.exports.Spot(1,.75),m});o.exports.Shape.defineFigureGenerator("MultiDocument",(k,a,l)=>{const m=new o.exports.Geometry;l=l/.8;const f=new o.exports.PathFigure(a,0,!0);m.add(f),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,.5*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,.9*a,.44*l,.96*a,.47*l,.93*a,.45*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.9*a,.6*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,.8*a,.54*l,.86*a,.57*l,.83*a,.55*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.8*a,.7*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,0,.7*l,.4*a,.4*l,.4*a,l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,.2*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.1*a,.2*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.1*a,.1*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.2*a,.1*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.2*a,0).close());const x=new o.exports.PathFigure(.1*a,.2*l,!1);return m.add(x),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.8*a,.2*l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.8*a,.54*l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Move,.2*a,.1*l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.9*a,.1*l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.9*a,.44*l)),m.spot1=new o.exports.Spot(0,.25),m.spot2=new o.exports.Spot(.8,.77),m});o.exports.Shape.defineFigureGenerator("MultiProcess",(k,a,l)=>{const m=new o.exports.Geometry,f=new o.exports.PathFigure(.1*a,.1*l,!0);m.add(f),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.2*a,.1*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.2*a,0)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,0)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,.8*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.9*a,.8*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.9*a,.9*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.8*a,.9*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.8*a,l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,.2*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.1*a,.2*l).close());const x=new o.exports.PathFigure(.2*a,.1*l,!1);return m.add(x),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.9*a,.1*l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.9*a,.8*l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Move,.1*a,.2*l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.8*a,.2*l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.8*a,.9*l)),m.spot1=new o.exports.Spot(0,.2),m.spot2=new o.exports.Spot(.8,1),m});o.exports.Shape.defineFigureGenerator("OfflineStorage",(k,a,l)=>{const m=new o.exports.Geometry;let f=k?k.parameter1:NaN;isNaN(f)&&(f=.1);const x=new o.exports.PathFigure(0,0,!0);m.add(x),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,0)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.5*a,l).close());const P=new o.exports.PathFigure(.5*f*a,f*l,!1);return m.add(P),P.add(new o.exports.PathSegment(o.exports.PathSegment.Line,(1-.5*f)*a,f*l)),m});o.exports.Shape.defineFigureGenerator("OffPageConnector",(k,a,l)=>{const m=new o.exports.Geometry,f=new o.exports.PathFigure(0,0,!0);return m.add(f),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.75*a,0)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,.5*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.75*a,l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,l).close()),m.spot1=o.exports.Spot.TopLeft,m.spot2=new o.exports.Spot(.75,1),m});o.exports.Shape.defineFigureGenerator("Or",(k,a,l)=>{const m=new o.exports.Geometry,f=lt*.5,x=.5,P=new o.exports.PathFigure(a,x*l,!0);m.add(P),P.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,x*a,l,a,(x+f)*l,(x+f)*a,l)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,0,x*l,(x-f)*a,l,0,(x+f)*l)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,x*a,0,0,(x-f)*l,(x-f)*a,0)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,a,x*l,(x+f)*a,0,a,(x-f)*l));const w=new o.exports.PathFigure(a,.5*l,!1);return m.add(w),w.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,.5*l)),w.add(new o.exports.PathSegment(o.exports.PathSegment.Move,.5*a,l)),w.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.5*a,0)),m});o.exports.Shape.defineFigureGenerator("PaperTape",(k,a,l)=>{const m=new o.exports.Geometry;l=l/.8;const f=new o.exports.PathFigure(0,.7*l,!0);return m.add(f),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,.3*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,a,.3*l,.5*a,.6*l,.5*a,0)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,.7*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,0,.7*l,.5*a,.4*l,.5*a,l).close()),m.spot1=new o.exports.Spot(0,.49),m.spot2=new o.exports.Spot(1,.75),m});o.exports.Shape.defineFigureGenerator("PrimitiveFromCall",(k,a,l)=>{const m=new o.exports.Geometry;k&&k.parameter1;let f=k?k.parameter2:NaN;isNaN(f)&&(f=.3);const x=new o.exports.PathFigure(0,0,!0);return m.add(x),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,0)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,(1-f)*a,.5*l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,l).close()),m});o.exports.Shape.defineFigureGenerator("PrimitiveToCall",(k,a,l)=>{const m=new o.exports.Geometry;k&&k.parameter1;let f=k?k.parameter2:NaN;isNaN(f)&&(f=.3);const x=new o.exports.PathFigure(0,0,!0);return m.add(x),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,(1-f)*a,0)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,.5*l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,(1-f)*a,l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,l).close()),m});o.exports.Shape.defineFigureGenerator("Procedure",(k,a,l)=>{const m=new o.exports.Geometry;let f=k?k.parameter1:NaN;isNaN(f)&&(f=.1);const x=new o.exports.PathFigure(0,0,!0);m.add(x),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,0)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,l).close());const P=new o.exports.PathFigure((1-f)*a,0,!1);return m.add(P),P.add(new o.exports.PathSegment(o.exports.PathSegment.Line,(1-f)*a,l)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Move,f*a,0)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Line,f*a,l)),m});o.exports.Shape.defineFigureGenerator("Process",(k,a,l)=>{const m=new o.exports.Geometry;let f=k?k.parameter1:NaN;isNaN(f)&&(f=.1);const x=new o.exports.PathFigure(0,0,!0);m.add(x),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,0)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,l).close());const P=new o.exports.PathFigure(f*a,0,!1);return m.add(P),P.add(new o.exports.PathSegment(o.exports.PathSegment.Line,f*a,l)),m.spot2=o.exports.Spot.BottomRight,m});o.exports.Shape.defineFigureGenerator("Sort",(k,a,l)=>{const m=new o.exports.Geometry,f=new o.exports.PathFigure(.5*a,0,!0);m.add(f),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,.5*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.5*a,l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,.5*l).close());const x=new o.exports.PathFigure(0,.5*l,!1);return m.add(x),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,.5*l)),m.spot1=new o.exports.Spot(.25,.25),m.spot2=new o.exports.Spot(.75,.5),m});o.exports.Shape.defineFigureGenerator("Start",(k,a,l)=>{const m=new o.exports.Geometry;let f=k?k.parameter1:NaN;isNaN(f)&&(f=.25);const x=new o.exports.PathFigure(f*a,0,!0);m.add(x),x.add(new o.exports.PathSegment(o.exports.PathSegment.Arc,270,180,.75*a,.5*l,.25*a,.5*l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Arc,90,180,.25*a,.5*l,.25*a,.5*l));const P=new o.exports.PathFigure(f*a,0,!1);return m.add(P),P.add(new o.exports.PathSegment(o.exports.PathSegment.Line,f*a,l)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Move,(1-f)*a,0)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Line,(1-f)*a,l)),m.spot1=new o.exports.Spot(f,0),m.spot2=new o.exports.Spot(1-f,1),m});o.exports.Shape.defineFigureGenerator("Terminator",(k,a,l)=>{const m=new o.exports.Geometry,f=new o.exports.PathFigure(.25*a,0,!0);return m.add(f),f.add(new o.exports.PathSegment(o.exports.PathSegment.Arc,270,180,.75*a,.5*l,.25*a,.5*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Arc,90,180,.25*a,.5*l,.25*a,.5*l)),m.spot1=new o.exports.Spot(.23,0),m.spot2=new o.exports.Spot(.77,1),m});o.exports.Shape.defineFigureGenerator("TransmittalTape",(k,a,l)=>{const m=new o.exports.Geometry;let f=k?k.parameter1:NaN;isNaN(f)&&(f=.1);const x=new o.exports.PathFigure(0,0,!0);return m.add(x),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,0)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.75*a,(1-f)*l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,(1-f)*l).close()),m.spot1=o.exports.Spot.TopLeft,m});o.exports.Shape.defineFigureGenerator("AndGate",(k,a,l)=>{const m=new o.exports.Geometry,f=lt*.5,x=new o.exports.PathFigure(0,0,!0);return m.add(x),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.5*a,0)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,a,.5*l,(.5+f)*a,0,a,(.5-f)*l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,.5*a,l,a,(.5+f)*l,(.5+f)*a,l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,l).close()),m.spot1=o.exports.Spot.TopLeft,m.spot2=new o.exports.Spot(.55,1),m});o.exports.Shape.defineFigureGenerator("Buffer",(k,a,l)=>{const m=new o.exports.Geometry,f=new o.exports.PathFigure(0,0,!0);return m.add(f),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,.5*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,l).close()),m.spot1=new o.exports.Spot(0,.25),m.spot2=new o.exports.Spot(.5,.75),m});o.exports.Shape.defineFigureGenerator("Clock",(k,a,l)=>{const m=new o.exports.Geometry,f=lt*.5,x=.5,P=new o.exports.PathFigure(a,x*l,!0);m.add(P),P.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,x*a,l,a,(x+f)*l,(x+f)*a,l)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,0,x*l,(x-f)*a,l,0,(x+f)*l)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,x*a,0,0,(x-f)*l,(x-f)*a,0)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,a,x*l,(x+f)*a,0,a,(x-f)*l));const w=new o.exports.PathFigure(a,x*l,!1);m.add(w),w.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,x*l));const C=new o.exports.PathFigure(.8*a,.75*l,!1);return m.add(C),C.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.8*a,.25*l)),C.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.6*a,.25*l)),C.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.6*a,.75*l)),C.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.4*a,.75*l)),C.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.4*a,.25*l)),C.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.2*a,.25*l)),C.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.2*a,.75*l)),m});o.exports.Shape.defineFigureGenerator("Ground",(k,a,l)=>{const m=new o.exports.Geometry,f=new o.exports.PathFigure(.5*a,0,!1);return m.add(f),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.5*a,.4*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Move,.2*a,.6*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.8*a,.6*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Move,.3*a,.8*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.7*a,.8*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Move,.4*a,l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.6*a,l)),m});o.exports.Shape.defineFigureGenerator("Inverter",(k,a,l)=>{const m=new o.exports.Geometry,f=lt*.1,x=.1,P=.9,w=.5,C=new o.exports.PathFigure(.8*a,.5*l,!0);m.add(C),C.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,l)),C.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,0)),C.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.8*a,.5*l));const G=new o.exports.PathFigure((P+x)*a,w*l,!0);return m.add(G),G.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,P*a,(w+x)*l,(P+x)*a,(w+f)*l,(P+f)*a,(w+x)*l)),G.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,(P-x)*a,w*l,(P-f)*a,(w+x)*l,(P-x)*a,(w+f)*l)),G.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,P*a,(w-x)*l,(P-x)*a,(w-f)*l,(P-f)*a,(w-x)*l)),G.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,(P+x)*a,w*l,(P+f)*a,(w-x)*l,(P+x)*a,(w-f)*l)),m.spot1=new o.exports.Spot(0,.25),m.spot2=new o.exports.Spot(.4,.75),m});o.exports.Shape.defineFigureGenerator("NandGate",(k,a,l)=>{const m=new o.exports.Geometry,f=lt*.5,x=lt*.4,P=lt*.1,w=.1,C=.9,G=.5,A=new o.exports.PathFigure(.8*a,.5*l,!0);m.add(A),A.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,.4*a,l,.8*a,(.5+x)*l,(.4+f)*a,l)),A.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,l)),A.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,0)),A.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.4*a,0)),A.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,.8*a,.5*l,(.4+f)*a,0,.8*a,(.5-x)*l));const z=new o.exports.PathFigure((C+w)*a,G*l,!0);return m.add(z),z.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,C*a,(G+w)*l,(C+w)*a,(G+P)*l,(C+P)*a,(G+w)*l)),z.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,(C-w)*a,G*l,(C-P)*a,(G+w)*l,(C-w)*a,(G+P)*l)),z.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,C*a,(G-w)*l,(C-w)*a,(G-P)*l,(C-P)*a,(G-w)*l)),z.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,(C+w)*a,G*l,(C+P)*a,(G-w)*l,(C+w)*a,(G-P)*l)),m.spot1=new o.exports.Spot(0,.05),m.spot2=new o.exports.Spot(.55,.95),m});o.exports.Shape.defineFigureGenerator("NorGate",(k,a,l)=>{const m=new o.exports.Geometry;let f=.5,x=lt*f,P=0,w=.5;const C=new o.exports.PathFigure(.8*a,.5*l,!0);m.add(C),C.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,0,l,.7*a,(w+x)*l,(P+x)*a,(w+f)*l)),C.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,0,0,.25*a,.75*l,.25*a,.25*l)),C.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,.8*a,.5*l,(P+x)*a,(w-f)*l,.7*a,(w-x)*l)),f=.1,x=lt*.1,P=.9,w=.5;const G=new o.exports.PathFigure((P-f)*a,w*l,!0);return m.add(G),G.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,P*a,(w-f)*l,(P-f)*a,(w-x)*l,(P-x)*a,(w-f)*l)),G.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,(P+f)*a,w*l,(P+x)*a,(w-f)*l,(P+f)*a,(w-x)*l)),G.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,P*a,(w+f)*l,(P+f)*a,(w+x)*l,(P+x)*a,(w+f)*l)),G.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,(P-f)*a,w*l,(P-x)*a,(w+f)*l,(P-f)*a,(w+x)*l)),m.spot1=new o.exports.Spot(.2,.25),m.spot2=new o.exports.Spot(.6,.75),m});o.exports.Shape.defineFigureGenerator("OrGate",(k,a,l)=>{const m=new o.exports.Geometry,f=.5,x=lt*f,P=0,w=.5,C=new o.exports.PathFigure(0,0,!0);return m.add(C),C.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,a,.5*l,(P+x+x)*a,(w-f)*l,.8*a,(w-x)*l)),C.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,0,l,.8*a,(w+x)*l,(P+x+x)*a,(w+f)*l)),C.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,0,0,.25*a,.75*l,.25*a,.25*l).close()),m.spot1=new o.exports.Spot(.2,.25),m.spot2=new o.exports.Spot(.75,.75),m});o.exports.Shape.defineFigureGenerator("XnorGate",(k,a,l)=>{const m=new o.exports.Geometry;let f=.5,x=lt*f,P=.2,w=.5;const C=new o.exports.PathFigure(.1*a,0,!1);m.add(C),C.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,.1*a,l,.35*a,.25*l,.35*a,.75*l));const G=new o.exports.PathFigure(.8*a,.5*l,!0);m.add(G),G.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,.2*a,l,.7*a,(w+x)*l,(P+x)*a,(w+f)*l)),G.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,.2*a,0,.45*a,.75*l,.45*a,.25*l)),G.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,.8*a,.5*l,(P+x)*a,(w-f)*l,.7*a,(w-x)*l)),f=.1,x=lt*.1,P=.9,w=.5;const A=new o.exports.PathFigure((P-f)*a,w*l,!0);return m.add(A),A.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,P*a,(w-f)*l,(P-f)*a,(w-x)*l,(P-x)*a,(w-f)*l)),A.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,(P+f)*a,w*l,(P+x)*a,(w-f)*l,(P+f)*a,(w-x)*l)),A.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,P*a,(w+f)*l,(P+f)*a,(w+x)*l,(P+x)*a,(w+f)*l)),A.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,(P-f)*a,w*l,(P-x)*a,(w+f)*l,(P-f)*a,(w+x)*l)),m.spot1=new o.exports.Spot(.4,.25),m.spot2=new o.exports.Spot(.65,.75),m});o.exports.Shape.defineFigureGenerator("XorGate",(k,a,l)=>{const m=new o.exports.Geometry,f=.5,x=lt*f,P=.2,w=.5,C=new o.exports.PathFigure(.1*a,0,!1);m.add(C),C.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,.1*a,l,.35*a,.25*l,.35*a,.75*l));const G=new o.exports.PathFigure(.2*a,0,!0);return m.add(G),G.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,a,.5*l,(P+x)*a,(w-f)*l,.9*a,(w-x)*l)),G.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,.2*a,l,.9*a,(w+x)*l,(P+x)*a,(w+f)*l)),G.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,.2*a,0,.45*a,.75*l,.45*a,.25*l).close()),m.spot1=new o.exports.Spot(.4,.25),m.spot2=new o.exports.Spot(.8,.75),m});o.exports.Shape.defineFigureGenerator("Capacitor",(k,a,l)=>{const m=new o.exports.Geometry,f=new o.exports.PathFigure(0,0,!1);return m.add(f),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Move,a,0)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,l)),m});o.exports.Shape.defineFigureGenerator("Resistor",(k,a,l)=>{const m=new o.exports.Geometry,f=new o.exports.PathFigure(0,.5*l,!1);return m.add(f),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.1*a,0)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.2*a,l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.3*a,0)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.4*a,l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.5*a,0)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.6*a,l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.7*a,.5*l)),m});o.exports.Shape.defineFigureGenerator("Inductor",(k,a,l)=>{const m=new o.exports.Geometry,f=lt*.1,x=.1;let P=.1;const w=new o.exports.PathFigure((P-f*.5)*a,l,!1);return m.add(w),w.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,(P+x)*a,0,(P-f)*a,l,(P-x)*a,0)),P=.3,w.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,P*a,l,(P+x)*a,0,(P+f)*a,l)),w.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,(P+x)*a,0,(P-f)*a,l,(P-x)*a,0)),P=.5,w.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,P*a,l,(P+x)*a,0,(P+f)*a,l)),w.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,(P+x)*a,0,(P-f)*a,l,(P-x)*a,0)),P=.7,w.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,P*a,l,(P+x)*a,0,(P+f)*a,l)),w.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,(P+x)*a,0,(P-f)*a,l,(P-x)*a,0)),P=.9,w.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,(P+f*.5)*a,l,(P+x)*a,0,(P+f)*a,l)),m});o.exports.Shape.defineFigureGenerator("ACvoltageSource",(k,a,l)=>{const m=new o.exports.Geometry,f=lt*.5,x=.5,P=.5,w=.5,C=new o.exports.PathFigure((P-x)*a,w*l,!1);return m.add(C),C.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,P*a,(w-x)*l,(P-x)*a,(w-f)*l,(P-f)*a,(w-x)*l)),C.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,(P+x)*a,w*l,(P+f)*a,(w-x)*l,(P+x)*a,(w-f)*l)),C.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,P*a,(w+x)*l,(P+x)*a,(w+f)*l,(P+f)*a,(w+x)*l)),C.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,(P-x)*a,w*l,(P-f)*a,(w+x)*l,(P-x)*a,(w+f)*l)),C.add(new o.exports.PathSegment(o.exports.PathSegment.Move,(P-x+.1)*a,w*l)),C.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,(P+x-.1)*a,w*l,P*a,(w-x)*l,P*a,(w+x)*l)),m});o.exports.Shape.defineFigureGenerator("DCvoltageSource",(k,a,l)=>{const m=new o.exports.Geometry,f=new o.exports.PathFigure(0,.75*l,!1);return m.add(f),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,.25*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Move,a,0)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,l)),m});o.exports.Shape.defineFigureGenerator("Diode",(k,a,l)=>{const m=new o.exports.Geometry,f=new o.exports.PathFigure(a,0,!1);return m.add(f),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,.5*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,0)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,.5*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,l)),m.spot1=new o.exports.Spot(0,.25),m.spot2=new o.exports.Spot(.5,.75),m});o.exports.Shape.defineFigureGenerator("Wifi",(k,a,l)=>{const m=new o.exports.Geometry,f=a,x=l;a=a*.38,l=l*.6;let P=lt*.8,w=.8,C=0,G=.5;const A=(f-a)/2,z=(x-l)/2,Z=new o.exports.PathFigure(C*a+A,(G+w)*l+z,!0);m.add(Z),Z.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,(C-w)*a+A,G*l+z,(C-P)*a+A,(G+w)*l+z,(C-w)*a+A,(G+P)*l+z)),Z.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,C*a+A,(G-w)*l+z,(C-w)*a+A,(G-P)*l+z,(C-P)*a+A,(G-w)*l+z)),Z.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,(C-w+P*.5)*a+A,G*l+z,C*a+A,(G-w)*l+z,(C-w+P*.5)*a+A,(G-P)*l+z)),Z.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,C*a+A,(G+w)*l+z,(C-w+P*.5)*a+A,(G+P)*l+z,C*a+A,(G+w)*l+z).close()),P=lt*.4,w=.4,C=.2,G=.5;const gt=new o.exports.PathFigure(C*a+A,(G+w)*l+z,!0);m.add(gt),gt.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,(C-w)*a+A,G*l+z,(C-P)*a+A,(G+w)*l+z,(C-w)*a+A,(G+P)*l+z)),gt.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,C*a+A,(G-w)*l+z,(C-w)*a+A,(G-P)*l+z,(C-P)*a+A,(G-w)*l+z)),gt.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,(C-w+P*.5)*a+A,G*l+z,C*a+A,(G-w)*l+z,(C-w+P*.5)*a+A,(G-P)*l+z)),gt.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,C*a+A,(G+w)*l+z,(C-w+P*.5)*a+A,(G+P)*l+z,C*a+A,(G+w)*l+z).close()),P=lt*.2,w=.2,C=.5,G=.5;const Nt=new o.exports.PathFigure((C-w)*a+A,G*l+z,!0);m.add(Nt),Nt.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,C*a+A,(G-w)*l+z,(C-w)*a+A,(G-P)*l+z,(C-P)*a+A,(G-w)*l+z)),Nt.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,(C+w)*a+A,G*l+z,(C+P)*a+A,(G-w)*l+z,(C+w)*a+A,(G-P)*l+z)),Nt.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,C*a+A,(G+w)*l+z,(C+w)*a+A,(G+P)*l+z,(C+P)*a+A,(G+w)*l+z)),Nt.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,(C-w)*a+A,G*l+z,(C-P)*a+A,(G+w)*l+z,(C-w)*a+A,(G+P)*l+z)),P=lt*.4,w=.4,C=.8,G=.5;const jt=new o.exports.PathFigure(C*a+A,(G-w)*l+z,!0);m.add(jt),jt.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,(C+w)*a+A,G*l+z,(C+P)*a+A,(G-w)*l+z,(C+w)*a+A,(G-P)*l+z)),jt.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,C*a+A,(G+w)*l+z,(C+w)*a+A,(G+P)*l+z,(C+P)*a+A,(G+w)*l+z)),jt.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,(C+w-P*.5)*a+A,G*l+z,C*a+A,(G+w)*l+z,(C+w-P*.5)*a+A,(G+P)*l+z)),jt.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,C*a+A,(G-w)*l+z,(C+w-P*.5)*a+A,(G-P)*l+z,C*a+A,(G-w)*l+z).close()),P=lt*.8,w=.8,C=1,G=.5;const it=new o.exports.PathFigure(C*a+A,(G-w)*l+z,!0);return m.add(it),it.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,(C+w)*a+A,G*l+z,(C+P)*a+A,(G-w)*l+z,(C+w)*a+A,(G-P)*l+z)),it.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,C*a+A,(G+w)*l+z,(C+w)*a+A,(G+P)*l+z,(C+P)*a+A,(G+w)*l+z)),it.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,(C+w-P*.5)*a+A,G*l+z,C*a+A,(G+w)*l+z,(C+w-P*.5)*a+A,(G+P)*l+z)),it.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,C*a+A,(G-w)*l+z,(C+w-P*.5)*a+A,(G-P)*l+z,C*a+A,(G-w)*l+z).close()),m});o.exports.Shape.defineFigureGenerator("Email",(k,a,l)=>{const m=new o.exports.Geometry,f=new o.exports.PathFigure(0,0,!0);m.add(f),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,0)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,0).close());const x=new o.exports.PathFigure(0,0,!1);return m.add(x),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.5*a,.6*l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,0)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Move,0,l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.45*a,.54*l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Move,a,l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.55*a,.54*l)),m});o.exports.Shape.defineFigureGenerator("Ethernet",(k,a,l)=>{const m=new o.exports.Geometry,f=new o.exports.PathFigure(.35*a,0,!0);m.add(f),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.65*a,0)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.65*a,.4*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.35*a,.4*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.35*a,0).close());const x=new o.exports.PathFigure(.1*a,l,!0,!0);m.add(x),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.4*a,l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.4*a,.6*l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.1*a,.6*l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.1*a,l).close());const P=new o.exports.PathFigure(.6*a,l,!0,!0);m.add(P),P.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.9*a,l)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.9*a,.6*l)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.6*a,.6*l)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.6*a,l).close());const w=new o.exports.PathFigure(0,.5*l,!1);return m.add(w),w.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,.5*l)),w.add(new o.exports.PathSegment(o.exports.PathSegment.Move,.5*a,.5*l)),w.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.5*a,.4*l)),w.add(new o.exports.PathSegment(o.exports.PathSegment.Move,.75*a,.5*l)),w.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.75*a,.6*l)),w.add(new o.exports.PathSegment(o.exports.PathSegment.Move,.25*a,.5*l)),w.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.25*a,.6*l)),m});o.exports.Shape.defineFigureGenerator("Power",(k,a,l)=>{const m=new o.exports.Geometry;let f=lt*.4,x=.4;const P=.5,w=.5,C=we(),G=we(),A=we(),z=we();wr(P,w-x,P+f,w-x,P+x,w-f,P+x,w,.5,C,C,G,A,z);const Z=Cc(G.x,G.y);let gt=new o.exports.PathFigure(G.x*a,G.y*l,!0);return m.add(gt),gt.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,(P+x)*a,w*l,A.x*a,A.y*l,z.x*a,z.y*l)),gt.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,P*a,(w+x)*l,(P+x)*a,(w+f)*l,(P+f)*a,(w+x)*l)),gt.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,(P-x)*a,w*l,(P-f)*a,(w+x)*l,(P-x)*a,(w+f)*l)),wr(P-x,w,P-x,w-f,P-f,w-x,P,w-x,.5,A,z,G,C,C),gt.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,G.x*a,G.y*l,A.x*a,A.y*l,z.x*a,z.y*l)),f=lt*.3,x=.3,wr(P-x,w,P-x,w-f,P-f,w-x,P,w-x,.5,A,z,G,C,C),gt.add(new o.exports.PathSegment(o.exports.PathSegment.Line,G.x*a,G.y*l)),gt.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,(P-x)*a,w*l,z.x*a,z.y*l,A.x*a,A.y*l)),gt.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,P*a,(w+x)*l,(P-x)*a,(w+f)*l,(P-f)*a,(w+x)*l)),gt.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,(P+x)*a,w*l,(P+f)*a,(w+x)*l,(P+x)*a,(w+f)*l)),wr(P,w-x,P+f,w-x,P+x,w-f,P+x,w,.5,C,C,G,A,z),gt.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,G.x*a,G.y*l,z.x*a,z.y*l,A.x*a,A.y*l).close()),gt=new o.exports.PathFigure(.45*a,0,!0),m.add(gt),gt.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.45*a,.5*l)),gt.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.55*a,.5*l)),gt.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.55*a,0).close()),le(C),le(G),le(A),le(z),le(Z),m.spot1=new o.exports.Spot(.25,.45),m.spot2=new o.exports.Spot(.75,.8),m});o.exports.Shape.defineFigureGenerator("Fallout",(k,a,l)=>{const m=new o.exports.Geometry,f=new o.exports.PathFigure(0,l/2,!0);m.add(f),f.add(new o.exports.PathSegment(o.exports.PathSegment.Arc,180,360,a/2,l/2,a/2,l/2));function x(P,w,C){P.add(new o.exports.PathSegment(o.exports.PathSegment.Move,(.3+w)*a,(.8+C)*l)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Line,(.5+w)*a,(.5+C)*l)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Line,(.1+w)*a,(.5+C)*l)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Line,(.3+w)*a,(.8+C)*l).close())}return x(f,0,0),x(f,.4,0),x(f,.2,-.3),m});o.exports.Shape.defineFigureGenerator("IrritationHazard",(k,a,l)=>{const m=new o.exports.Geometry,f=new o.exports.PathFigure(.2*a,0,!0);return m.add(f),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.5*a,.3*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.8*a,0)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,.2*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.7*a,.5*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,.8*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.8*a,l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.5*a,.7*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.2*a,l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,.8*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.3*a,.5*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,.2*l).close()),m.spot1=new o.exports.Spot(.3,.3),m.spot2=new o.exports.Spot(.7,.7),m});o.exports.Shape.defineFigureGenerator("ElectricalHazard",(k,a,l)=>{const m=new o.exports.Geometry,f=new o.exports.PathFigure(.37*a,0,!0);return m.add(f),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.5*a,.11*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.77*a,.04*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.33*a,.49*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,.37*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.63*a,.86*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.77*a,.91*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.34*a,l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.34*a,.78*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.44*a,.8*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.65*a,.56*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,.68*l).close()),m});o.exports.Shape.defineFigureGenerator("FireHazard",(k,a,l)=>{const m=new o.exports.Geometry,f=new o.exports.PathFigure(.1*a,l,!0);return m.add(f),f.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,.29*a,0,-.25*a,.63*l,.45*a,.44*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,.51*a,.42*l,.48*a,.17*l,.54*a,.35*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,.59*a,.18*l,.59*a,.29*l,.58*a,.28*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,.75*a,.6*l,.8*a,.34*l,.88*a,.43*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,.88*a,.31*l,.87*a,.48*l,.88*a,.43*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,.9*a,l,1.17*a,.76*l,.82*a,.8*l).close()),m.spot1=new o.exports.Spot(.07,.445),m.spot2=new o.exports.Spot(.884,.958),m});o.exports.Shape.defineFigureGenerator("BpmnActivityLoop",(k,a,l)=>{const m=new o.exports.Geometry,f=.5,x=0,P=0,w=f*lt,C=.4*Math.SQRT2/2+.5,G=.5-.5*Math.SQRT2/2,A=1,z=.5,Z=.5,gt=0,Nt=new o.exports.PathFigure(C*a,(1-G)*l,!1);return m.add(Nt),Nt.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,A*a,z*l,A*a,.7*l,A*a,z*l)),Nt.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,(Z+x)*a,(gt+x)*l,(.5+f+x)*a,(.5-w+x)*l,(.5+w+x)*a,(.5-f+x)*l)),Nt.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,(.5-f+x)*a,(.5+P)*l,(.5-w+x)*a,(.5-f+P)*l,(.5-f+x)*a,(.5-w+P)*l)),Nt.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,(.35+x)*a,.9*l,(.5-f+x)*a,(.5+w+P)*l,(.5-w+x)*a,.9*l)),Nt.add(new o.exports.PathSegment(o.exports.PathSegment.Move,(.25+x)*a,.8*l)),Nt.add(new o.exports.PathSegment(o.exports.PathSegment.Line,(.35+x)*a,.9*l)),Nt.add(new o.exports.PathSegment(o.exports.PathSegment.Line,(.2+x)*a,.95*l)),m});o.exports.Shape.defineFigureGenerator("BpmnActivityParallel",(k,a,l)=>{const m=new o.exports.Geometry,f=new o.exports.PathFigure(0,0,!1);return m.add(f),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Move,.5*a,0)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.5*a,l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Move,a,0)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,l)),m});o.exports.Shape.defineFigureGenerator("BpmnActivitySequential",(k,a,l)=>{const m=new o.exports.Geometry,f=new o.exports.PathFigure(0,0,!1);return m.add(f),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,0)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Move,0,.5*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,.5*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Move,0,l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,l)),m});o.exports.Shape.defineFigureGenerator("BpmnActivityAdHoc",(k,a,l)=>{const m=new o.exports.Geometry,f=new o.exports.PathFigure(0,0,!1);m.add(f);const x=new o.exports.PathFigure(a,l,!1);m.add(x);const P=new o.exports.PathFigure(0,.5*l,!1);return m.add(P),P.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,.5*a,.5*l,.2*a,.35*l,.3*a,.35*l)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,a,.5*l,.7*a,.65*l,.8*a,.65*l)),m});o.exports.Shape.defineFigureGenerator("BpmnActivityCompensation",(k,a,l)=>{const m=new o.exports.Geometry,f=new o.exports.PathFigure(0,.5*l,!0);return m.add(f),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.5*a,0)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.5*a,.5*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,0)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.5*a,.5*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.5*a,l).close()),m});o.exports.Shape.defineFigureGenerator("BpmnTaskMessage",(k,a,l)=>{const m=new o.exports.Geometry;let f=new o.exports.PathFigure(0,.2*l,!0);return m.add(f),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,.2*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,.8*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,.8*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,.8*l).close()),f=new o.exports.PathFigure(0,.2*l,!1),m.add(f),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.5*a,.5*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,.2*l)),m});o.exports.Shape.defineFigureGenerator("BpmnTaskScript",(k,a,l)=>{const m=new o.exports.Geometry,f=new o.exports.PathFigure(.7*a,l,!0);m.add(f),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.3*a,l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,.3*a,0,.6*a,.5*l,0,.5*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.7*a,0)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,.7*a,l,.4*a,.5*l,a,.5*l).close());const x=new o.exports.PathFigure(.45*a,.73*l,!1);return m.add(x),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.7*a,.73*l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Move,.38*a,.5*l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.63*a,.5*l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Move,.31*a,.27*l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.56*a,.27*l)),m});o.exports.Shape.defineFigureGenerator("BpmnTaskUser",(k,a,l)=>{const m=new o.exports.Geometry,f=new o.exports.PathFigure(0,0,!1);m.add(f);const x=new o.exports.PathFigure(.335*a,(1-.555)*l,!0);m.add(x),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.335*a,(1-.405)*l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,(1-.335)*a,(1-.405)*l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,(1-.335)*a,(1-.555)*l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,a,.68*l,(1-.12)*a,.46*l,(1-.02)*a,.54*l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,.68*l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,.335*a,(1-.555)*l,.02*a,.54*l,.12*a,.46*l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.365*a,(1-.595)*l));const P=.5-.285,w=.5,C=P,G=Math.PI/4,A=4*(1-Math.cos(G))/(3*Math.sin(G)),z=P,Z=P,gt=A*z,Nt=A*Z;x.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,(w-z)*a,C*l,(w-(gt+z)/2)*a,(C+(Z+Nt)/2)*l,(w-z)*a,(C+Nt)*l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,w*a,(C-Z)*l,(w-z)*a,(C-Nt)*l,(w-gt)*a,(C-Z)*l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,(w+z)*a,C*l,(w+gt)*a,(C-Z)*l,(w+z)*a,(C-Nt)*l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,(1-.365)*a,(1-.595)*l,(w+z)*a,(C+Nt)*l,(w+(gt+z)/2)*a,(C+(Z+Nt)/2)*l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,(1-.365)*a,(1-.595)*l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,(1-.335)*a,(1-.555)*l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,(1-.335)*a,(1-.405)*l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.335*a,(1-.405)*l));const jt=new o.exports.PathFigure(.2*a,l,!1);m.add(jt),jt.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.2*a,.8*l));const it=new o.exports.PathFigure(.8*a,l,!1);return m.add(it),it.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.8*a,.8*l)),m});o.exports.Shape.defineFigureGenerator("BpmnEventConditional",(k,a,l)=>{const m=new o.exports.Geometry,f=new o.exports.PathFigure(.1*a,0,!0);m.add(f),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.9*a,0)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.9*a,l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.1*a,l).close());const x=new o.exports.PathFigure(.2*a,.2*l,!1);return m.add(x),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.8*a,.2*l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Move,.2*a,.4*l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.8*a,.4*l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Move,.2*a,.6*l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.8*a,.6*l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Move,.2*a,.8*l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.8*a,.8*l)),m});o.exports.Shape.defineFigureGenerator("BpmnEventError",(k,a,l)=>{const m=new o.exports.Geometry,f=new o.exports.PathFigure(0,l,!0);return m.add(f),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.33*a,0)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.66*a,.5*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,0)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.66*a,l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.33*a,.5*l).close()),m});o.exports.Shape.defineFigureGenerator("BpmnEventEscalation",(k,a,l)=>{const m=new o.exports.Geometry,f=new o.exports.PathFigure(0,0,!1);m.add(f);const x=new o.exports.PathFigure(a,l,!1);m.add(x);const P=new o.exports.PathFigure(.1*a,l,!0);return m.add(P),P.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.5*a,0)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.9*a,l)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.5*a,.5*l).close()),m});o.exports.Shape.defineFigureGenerator("Caution",(k,a,l)=>{const m=new o.exports.Geometry,f=new o.exports.PathFigure(.05*a,l,!0);m.add(f),f.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,.1*a,.8*l,0,l,0,l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.45*a,.1*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,.55*a,.1*l,.5*a,0,.5*a,0)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.95*a,.9*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,.9*a,l,a,l,a,l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.05*a,l));const x=.05;return f.add(new o.exports.PathSegment(o.exports.PathSegment.Move,(.5-x)*a,.875*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Arc,180,-360,.5*a,.875*l,x*a,x*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Move,.5*a,.75*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,.5*a,.325*l,.575*a,.725*l,.625*a,.375*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,.5*a,.75*l,.375*a,.375*l,.425*a,.725*l)),m});o.exports.Shape.defineFigureGenerator("Recycle",(k,a,l)=>{const m=new o.exports.Geometry,f=new o.exports.PathFigure(.45*a,.95*l,!1);m.add(f),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.2*a,.95*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,.185*a,.85*l,.17*a,.95*l,.15*a,.9*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.235*a,.75*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.3*a,.625*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.35*a,.65*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.275*a,.45*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.05*a,.45*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.1*a,.5*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.05*a,.575*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,.1875*a,.95*l,0,.675*l,0,.7*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Move,.45*a,.95*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.45*a,.775*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.22*a,.775*l));const x=new o.exports.PathFigure(.475*a,.2*l,!1);m.add(x),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.4*a,.4*l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.225*a,.3*l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.275*a,.175*l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.325*a,.05*l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,.4*a,.05*l,.35*a,0,.375*a,0)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.575*a,.375*l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.525*a,.4*l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.75*a,.475*l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.85*a,.315*l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.8*a,.32*l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.65*a,.05*l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,.575*a,0,.65*a,.05*l,.625*a,0)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.38*a,.0105*l));const P=new o.exports.PathFigure(.675*a,.575*l,!1);return m.add(P),P.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.875*a,.525*l)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,.775*l)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,.85*a,.95*l,a,.8*l,a,.85*l)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.65*a,.95*l)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.65*a,l)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.55*a,.85*l)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.65*a,.725*l)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.65*a,.775*l)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.7*a,.775*l)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,.775*l)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Move,.675*a,.575*l)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.775*a,.775*l)),m});o.exports.Shape.defineFigureGenerator("BpmnEventTimer",(k,a,l)=>{const m=new o.exports.Geometry,f=.5,x=lt*.5,P=new o.exports.PathFigure(a,f*l,!0);m.add(P),P.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,f*a,l,a,(f+x)*l,(f+x)*a,l)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,0,f*l,(f-x)*a,l,0,(f+x)*l)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,f*a,0,0,(f-x)*l,(f-x)*a,0)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,a,f*l,(f+x)*a,0,a,(f-x)*l));const w=new o.exports.PathFigure(f*a,0,!1);return m.add(w),w.add(new o.exports.PathSegment(o.exports.PathSegment.Line,f*a,.15*l)),w.add(new o.exports.PathSegment(o.exports.PathSegment.Move,f*a,l)),w.add(new o.exports.PathSegment(o.exports.PathSegment.Line,f*a,.85*l)),w.add(new o.exports.PathSegment(o.exports.PathSegment.Move,0,f*l)),w.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.15*a,f*l)),w.add(new o.exports.PathSegment(o.exports.PathSegment.Move,a,f*l)),w.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.85*a,f*l)),w.add(new o.exports.PathSegment(o.exports.PathSegment.Move,f*a,f*l)),w.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.58*a,.1*l)),w.add(new o.exports.PathSegment(o.exports.PathSegment.Move,f*a,f*l)),w.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.78*a,.54*l)),m});o.exports.Shape.defineFigureGenerator("Package",(k,a,l)=>{const m=new o.exports.Geometry,f=new o.exports.PathFigure(0,.15*l,!0);m.add(f),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,.15*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,l).close());const x=new o.exports.PathFigure(0,.15*l,!0);return m.add(x),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,0)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.6*a,0)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.65*a,.15*l).close()),m.spot1=new o.exports.Spot(0,.1),m.spot2=new o.exports.Spot(1,1),m});o.exports.Shape.defineFigureGenerator("Class",(k,a,l)=>{const m=new o.exports.Geometry,f=new o.exports.PathFigure(0,0,!0);m.add(f),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,0)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,0).close());const x=new o.exports.PathFigure(0,.2*l,!1);m.add(x),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,.2*l).close());const P=new o.exports.PathFigure(0,.5*l,!1);return m.add(P),P.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,.5*l).close()),m});o.exports.Shape.defineFigureGenerator("Component",(k,a,l)=>{const m=new o.exports.Geometry,f=new o.exports.PathFigure(a,l,!0);m.add(f),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,0)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.15*a,0)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.15*a,l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,l).close());const x=new o.exports.PathFigure(0,.2*l,!0);m.add(x),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.45*a,.2*l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.45*a,.4*l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,.4*l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,.2*l).close());const P=new o.exports.PathFigure(0,.6*l,!0);return m.add(P),P.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.45*a,.6*l)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.45*a,.8*l)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,.8*l)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,.6*l).close()),m});o.exports.Shape.defineFigureGenerator("Boat Shipment",(k,a,l)=>{const m=new o.exports.Geometry,f=new o.exports.PathFigure(.15*a,.6*l,!0);m.add(f),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.15*a,.6*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,.6*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.15*a,l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.85*a,l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,.6*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.85*a,.6*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.5*a,0)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.15*a,.6*l));const x=new o.exports.PathFigure(.15*a,.6*l,!1);return m.add(x),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.85*a,.6*l)),m});o.exports.Shape.defineFigureGenerator("Customer/Supplier",(k,a,l)=>{const m=new o.exports.Geometry,f=new o.exports.PathFigure(a,l,!0);return m.add(f),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,0)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.66*a,.33*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.66*a,0)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.33*a,.33*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.33*a,0)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,.33*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,l).close()),m});o.exports.Shape.defineFigureGenerator("Workcell",(k,a,l)=>{const m=new o.exports.Geometry,f=new o.exports.PathFigure(0,l,!0);return m.add(f),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,0)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,0)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.65*a,l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.65*a,.4*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.35*a,.4*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.35*a,l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,l).close()),m});o.exports.Shape.defineFigureGenerator("Supermarket",(k,a,l)=>{const m=new o.exports.Geometry,f=new o.exports.PathFigure(0,0,!1);return m.add(f),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,0)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,.33*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,.33*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Move,a,.33*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,.66*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,.66*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Move,a,.66*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,l)),m});o.exports.Shape.defineFigureGenerator("TruckShipment",(k,a,l)=>{const m=new o.exports.Geometry,f=new o.exports.PathFigure(0,0,!0);m.add(f),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.6*a,0)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.6*a,.8*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,.8*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,0).close());const x=new o.exports.PathFigure(a,.8*l,!0);m.add(x),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,.4*l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.6*a,.4*l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.6*a,.8*l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,.8*l).close());let P=.1,w=lt*.1,C=.2,G=.9;const A=new o.exports.PathFigure((C-P)*a,G*l,!0);m.add(A),A.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,C*a,(G-P)*l,(C-P)*a,(G-w)*l,(C-w)*a,(G-P)*l)),A.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,(C+P)*a,G*l,(C+w)*a,(G-P)*l,(C+P)*a,(G-w)*l)),A.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,C*a,(G+P)*l,(C+P)*a,(G+w)*l,(C+w)*a,(G+P)*l)),A.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,(C-P)*a,G*l,(C-w)*a,(G+P)*l,(C-P)*a,(G+w)*l).close()),P=.1,w=lt*.1,C=.8,G=.9;const z=new o.exports.PathFigure((C-P)*a,G*l,!0);return m.add(z),z.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,C*a,(G-P)*l,(C-P)*a,(G-w)*l,(C-w)*a,(G-P)*l)),z.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,(C+P)*a,G*l,(C+w)*a,(G-P)*l,(C+P)*a,(G-w)*l)),z.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,C*a,(G+P)*l,(C+P)*a,(G+w)*l,(C+w)*a,(G+P)*l)),z.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,(C-P)*a,G*l,(C-w)*a,(G+P)*l,(C-P)*a,(G+w)*l).close()),m});o.exports.Shape.defineFigureGenerator("KanbanPost",(k,a,l)=>{const m=new o.exports.Geometry,f=new o.exports.PathFigure(.2*a,0,!1);return m.add(f),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.2*a,.5*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.8*a,.5*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.8*a,0)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Move,.5*a,.5*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.5*a,l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.2*a,l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Move,.5*a,l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.8*a,l)),m});o.exports.Shape.defineFigureGenerator("Forklift",(k,a,l)=>{const m=new o.exports.Geometry,f=new o.exports.PathFigure(0,0,!0);m.add(f),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,.5*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.5*a,.5*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.4*a,0)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,0));const x=new o.exports.PathFigure(0,.5*l,!0);m.add(x),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,.8*l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.5*a,.8*l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.5*a,.5*l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,.5*l));const P=new o.exports.PathFigure(.5*a,.8*l,!0);m.add(P),P.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.5*a,.1*l)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.55*a,.1*l)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.55*a,.8*l)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.5*a,.8*l));const w=new o.exports.PathFigure(.5*a,.7*l,!1);m.add(w),w.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,.7*l));let C=.1,G=lt*.1,A=.1,z=.9;const Z=new o.exports.PathFigure((A-C)*a,z*l,!0);m.add(Z),Z.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,A*a,(z-C)*l,(A-C)*a,(z-G)*l,(A-G)*a,(z-C)*l)),Z.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,(A+C)*a,z*l,(A+G)*a,(z-C)*l,(A+C)*a,(z-G)*l)),Z.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,A*a,(z+C)*l,(A+C)*a,(z+G)*l,(A+G)*a,(z+C)*l)),Z.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,(A-C)*a,z*l,(A-G)*a,(z+C)*l,(A-C)*a,(z+G)*l)),C=.1,G=lt*.1,A=.4,z=.9;const gt=new o.exports.PathFigure((A-C)*a,z*l,!0);return m.add(gt),gt.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,A*a,(z-C)*l,(A-C)*a,(z-G)*l,(A-G)*a,(z-C)*l)),gt.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,(A+C)*a,z*l,(A+G)*a,(z-C)*l,(A+C)*a,(z-G)*l)),gt.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,A*a,(z+C)*l,(A+C)*a,(z+G)*l,(A+G)*a,(z+C)*l)),gt.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,(A-C)*a,z*l,(A-G)*a,(z+C)*l,(A-C)*a,(z+G)*l)),m});o.exports.Shape.defineFigureGenerator("RailShipment",(k,a,l)=>{const m=new o.exports.Geometry,f=new o.exports.PathFigure(.1*a,.4*l,!0);m.add(f),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.45*a,.4*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.45*a,.9*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.1*a,.9*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.1*a,.4*l).close());const x=new o.exports.PathFigure(.45*a,.7*l,!1);m.add(x),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.55*a,.7*l));const P=new o.exports.PathFigure(.55*a,.4*l,!0);m.add(P),P.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.9*a,.4*l)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.9*a,.9*l)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.55*a,.9*l)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.55*a,.4*l).close());let w=.05,C=lt*.05,G=.175,A=.95;const z=new o.exports.PathFigure((G-w)*a,A*l,!0);m.add(z),z.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,G*a,(A-w)*l,(G-w)*a,(A-C)*l,(G-C)*a,(A-w)*l)),z.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,(G+w)*a,A*l,(G+C)*a,(A-w)*l,(G+w)*a,(A-C)*l)),z.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,G*a,(A+w)*l,(G+w)*a,(A+C)*l,(G+C)*a,(A+w)*l)),z.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,(G-w)*a,A*l,(G-C)*a,(A+w)*l,(G-w)*a,(A+C)*l)),w=.05,C=lt*.05,G=.375,A=.95;const Z=new o.exports.PathFigure((G-w)*a,A*l,!0);m.add(Z),Z.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,G*a,(A-w)*l,(G-w)*a,(A-C)*l,(G-C)*a,(A-w)*l)),Z.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,(G+w)*a,A*l,(G+C)*a,(A-w)*l,(G+w)*a,(A-C)*l)),Z.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,G*a,(A+w)*l,(G+w)*a,(A+C)*l,(G+C)*a,(A+w)*l)),Z.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,(G-w)*a,A*l,(G-C)*a,(A+w)*l,(G-w)*a,(A+C)*l)),w=.05,C=lt*.05,G=.625,A=.95;const gt=new o.exports.PathFigure((G-w)*a,A*l,!0);m.add(gt),gt.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,G*a,(A-w)*l,(G-w)*a,(A-C)*l,(G-C)*a,(A-w)*l)),gt.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,(G+w)*a,A*l,(G+C)*a,(A-w)*l,(G+w)*a,(A-C)*l)),gt.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,G*a,(A+w)*l,(G+w)*a,(A+C)*l,(G+C)*a,(A+w)*l)),gt.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,(G-w)*a,A*l,(G-C)*a,(A+w)*l,(G-w)*a,(A+C)*l)),w=.05,C=lt*.05,G=.825,A=.95;const Nt=new o.exports.PathFigure((G-w)*a,A*l,!0);m.add(Nt),Nt.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,G*a,(A-w)*l,(G-w)*a,(A-C)*l,(G-C)*a,(A-w)*l)),Nt.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,(G+w)*a,A*l,(G+C)*a,(A-w)*l,(G+w)*a,(A-C)*l)),Nt.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,G*a,(A+w)*l,(G+w)*a,(A+C)*l,(G+C)*a,(A+w)*l)),Nt.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,(G-w)*a,A*l,(G-C)*a,(A+w)*l,(G-w)*a,(A+C)*l).close());const jt=new o.exports.PathFigure(0,l,!1);return m.add(jt),jt.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,l).close()),m});o.exports.Shape.defineFigureGenerator("Warehouse",(k,a,l)=>{const m=new o.exports.Geometry,f=new o.exports.PathFigure(0,0,!0);m.add(f),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,0)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,0).close());const x=new o.exports.PathFigure(0,.2*l,!1);m.add(x),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,.2*l).close());const P=new o.exports.PathFigure(.15*a,l,!0);m.add(P),P.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.15*a,.5*l)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.4*a,.5*l)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.4*a,l)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.15*a,l).close());const w=.05,C=lt*.05,G=.35,A=.775,z=new o.exports.PathFigure((G-w)*a,A*l,!0);return m.add(z),z.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,G*a,(A-w)*l,(G-w)*a,(A-C)*l,(G-C)*a,(A-w)*l)),z.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,(G+w)*a,A*l,(G+C)*a,(A-w)*l,(G+w)*a,(A-C)*l)),z.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,G*a,(A+w)*l,(G+w)*a,(A+C)*l,(G+C)*a,(A+w)*l)),z.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,(G-w)*a,A*l,(G-C)*a,(A+w)*l,(G-w)*a,(A+C)*l).close()),m});o.exports.Shape.defineFigureGenerator("ControlCenter",(k,a,l)=>{const m=new o.exports.Geometry,f=new o.exports.PathFigure(0,l,!0);return m.add(f),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,.8*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.1*a,.8*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.1*a,0)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.9*a,0)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.9*a,.8*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,.8*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Move,.1*a,.8*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.9*a,.8*l).close()),m});o.exports.Shape.defineFigureGenerator("Bluetooth",(k,a,l)=>{const m=new o.exports.Geometry,f=new o.exports.PathFigure(0,.75*l,!1);return m.add(f),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,.75*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,.25*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.5*a,0)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.5*a,l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,.75*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,.25*l)),m});o.exports.Shape.defineFigureGenerator("Bookmark",(k,a,l)=>{const m=new o.exports.Geometry,f=new o.exports.PathFigure(0,0,!0);return m.add(f),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.5*a,.6*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,0)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,0)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Move,.2*a,.2*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.8*a,.2*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Move,.2*a,.4*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.8*a,.4*l)),m});o.exports.Shape.defineFigureGenerator("Bookmark",(k,a,l)=>{const m=new o.exports.Geometry,f=new o.exports.PathFigure(0,0,!0);return m.add(f),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.5*a,.6*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,0)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,0)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Move,.2*a,.2*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.8*a,.2*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Move,.2*a,.4*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.8*a,.4*l)),m});o.exports.Shape.defineFigureGenerator("Globe",(k,a,l)=>{const m=new o.exports.Geometry,f=new o.exports.PathFigure(.5*a,0,!1);return m.add(f),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.5*a,l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Move,0,.5*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,.5*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Move,.5*a,0)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,a,.5*l,.75*a,0,a,.25*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,.5*a,l,a,.75*l,.75*a,l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,0,.5*l,.25*a,l,0,.75*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,.5*a,0,0,.25*l,.25*a,0)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,.5*a,l,.15*a,.25*l,.15*a,.75*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,.5*a,0,.85*a,.75*l,.85*a,.25*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Move,.1675*a,.15*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,.8325*a,.15*l,.35*a,.3*l,.65*a,.3*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Move,.1675*a,.85*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,.8325*a,.85*l,.35*a,.7*l,.65*a,.7*l)),m});o.exports.Shape.defineFigureGenerator("Wave",(k,a,l)=>{const m=new o.exports.Geometry,f=new o.exports.PathFigure(0,.25*l,!1);return m.add(f),f.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,.3*a,.25*l,.1*a,0,.2*a,0)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,.7*a,.25*l,.425*a,.5*l,.575*a,.5*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,a,.25*l,.8*a,0,.9*a,0)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,.75*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Move,0,.25*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,.75*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,.3*a,.75*l,.1*a,.5*l,.2*a,.5*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,.7*a,.75*l,.425*a,l,.575*a,l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,a,.75*l,.8*a,.5*l,.9*a,.5*l)),m});o.exports.Shape.defineFigureGenerator("Operator",(k,a,l)=>{const m=new o.exports.Geometry,f=.3,x=lt*.3,P=.5,w=.7,C=new o.exports.PathFigure((P-f)*a,w*l,!0);m.add(C),C.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,P*a,(w-f)*l,(P-f)*a,(w-x)*l,(P-x)*a,(w-f)*l)),C.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,(P+f)*a,w*l,(P+x)*a,(w-f)*l,(P+f)*a,(w-x)*l)),C.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,P*a,(w+f)*l,(P+f)*a,(w+x)*l,(P+x)*a,(w+f)*l)),C.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,(P-f)*a,w*l,(P-x)*a,(w+f)*l,(P-f)*a,(w+x)*l));const G=new o.exports.PathFigure(0,.7*l,!1);return m.add(G),G.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,a,.7*l,0,0,a,0)),m});o.exports.Shape.defineFigureGenerator("TripleFanBlades",(k,a,l)=>{const m=new o.exports.Geometry,f=new o.exports.PathFigure(.5*a,0,!0);return m.add(f),f.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,.5*a,.65*l,.65*a,.3*l,.65*a,.5*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,.5*a,0,.35*a,.5*l,.35*a,.3*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Move,.5*a,.65*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,0,l,.3*a,.6*l,.1*a,.8*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,.5*a,.65*l,.2*a,l,.35*a,.95*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Move,.5*a,.65*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,a,l,.7*a,.6*l,.9*a,.8*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,.5*a,.65*l,.8*a,l,.65*a,.95*l)),m});o.exports.Shape.defineFigureGenerator("CentrifugalPump",(k,a,l)=>{const m=new o.exports.Geometry,f=new o.exports.PathFigure(a,0,!0);return m.add(f),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.4*a,0)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,0,.5*l,0,.075*l,0,.5*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,.4*a,l,0,l,.4*a,l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,.8*a,.4*l,.8*a,l,.85*a,.6*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,.4*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,0)),m});o.exports.Shape.defineFigureGenerator("Battery",(k,a,l)=>{const m=new o.exports.Geometry,f=new o.exports.PathFigure(0,l,!0);m.add(f),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,.1*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,.1*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Move,.4*a,.1*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.4*a,0)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.6*a,0)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.6*a,.1*l));const x=new o.exports.PathFigure(0,.6*l,!1);return m.add(x),x.add(new o.exports.PathSegment(o.exports.PathSegment.Move,0,.4*l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,.4*l)),m});o.exports.Shape.defineFigureGenerator("Delete",(k,a,l)=>{const m=new o.exports.Geometry,f=.5,x=lt*.5,P=.5,w=.5,C=new o.exports.PathFigure((P-f)*a,w*l,!0);m.add(C),C.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,P*a,(w-f)*l,(P-f)*a,(w-x)*l,(P-x)*a,(w-f)*l)),C.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,(P+f)*a,w*l,(P+x)*a,(w-f)*l,(P+f)*a,(w-x)*l)),C.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,P*a,(w+f)*l,(P+f)*a,(w+x)*l,(P+x)*a,(w+f)*l)),C.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,(P-f)*a,w*l,(P-x)*a,(w+f)*l,(P-f)*a,(w+x)*l));const G=new o.exports.PathFigure(.15*a,.5*l,!1);return m.add(G),G.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.85*a,.5*l)),m});o.exports.Shape.defineFigureGenerator("Flag",(k,a,l)=>{const m=new o.exports.Geometry,f=new o.exports.PathFigure(0,.1*l,!0);return m.add(f),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Move,0,.1*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,.5*a,.1*l,.15*a,0,.35*a,0)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,a,.1*l,.65*a,.2*l,.85*a,.2*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,.5*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,.5*a,.5*l,.85*a,.6*l,.65*a,.6*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,0,.5*l,.35*a,.4*l,.15*a,.4*l).close()),m});o.exports.Shape.defineFigureGenerator("Help",(k,a,l)=>{const m=new o.exports.Geometry;let f=.5,x=lt*.5,P=.5,w=.5;const C=new o.exports.PathFigure((P-f)*a,w*l,!1);m.add(C),C.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,P*a,(w-f)*l,(P-f)*a,(w-x)*l,(P-x)*a,(w-f)*l)),C.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,(P+f)*a,w*l,(P+x)*a,(w-f)*l,(P+f)*a,(w-x)*l)),C.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,P*a,(w+f)*l,(P+f)*a,(w+x)*l,(P+x)*a,(w+f)*l)),C.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,(P-f)*a,w*l,(P-x)*a,(w+f)*l,(P-f)*a,(w+x)*l).close()),f=.05,x=lt*.05,P=.5,w=.8;const G=new o.exports.PathFigure((P-f)*a,w*l,!1);return m.add(G),G.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,P*a,(w-f)*l,(P-f)*a,(w-x)*l,(P-x)*a,(w-f)*l)),G.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,(P+f)*a,w*l,(P+x)*a,(w-f)*l,(P+f)*a,(w-x)*l)),G.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,P*a,(w+f)*l,(P+f)*a,(w+x)*l,(P+x)*a,(w+f)*l)),G.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,(P-f)*a,w*l,(P-x)*a,(w+f)*l,(P-f)*a,(w+x)*l).close()),G.add(new o.exports.PathSegment(o.exports.PathSegment.Move,.5*a,.7*l)),G.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.5*a,.5*l)),G.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,.5*a,.2*l,.75*a,.475*l,.75*a,.225*l)),G.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,.3*a,.35*l,.4*a,.2*l,.3*a,.25*l)),m});o.exports.Shape.defineFigureGenerator("Location",(k,a,l)=>new o.exports.Geometry().add(new o.exports.PathFigure(.5*a,l,!0).add(new o.exports.PathSegment(o.exports.PathSegment.Line,.75*a,.5*l)).add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,.5*a,0,.975*a,.025*l,.5*a,0)).add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,.25*a,.5*l,.5*a,0,.025*a,.025*l).close()).add(new o.exports.PathSegment(o.exports.PathSegment.Move,.5*a,.2*l)).add(new o.exports.PathSegment(o.exports.PathSegment.Arc,270,360,.5*a,.3*l,.1*a,.1*l).close())));o.exports.Shape.defineFigureGenerator("Lock",(k,a,l)=>{const m=new o.exports.Geometry,f=new o.exports.PathFigure(0,.5*l,!0);m.add(f),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,.5*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,.5*l));const x=new o.exports.PathFigure(.2*a,.5*l,!1);return m.add(x),x.add(new o.exports.PathSegment(o.exports.PathSegment.Move,.2*a,.5*l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.2*a,.3*l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,.8*a,.3*l,.25*a,0,.75*a,0)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.8*a,.5*l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.8*a,.3*l)),m});o.exports.Shape.defineFigureGenerator("Unlocked",(k,a,l)=>{const m=new o.exports.Geometry,f=new o.exports.PathFigure(0,.5*l,!0);m.add(f),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,.5*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,.5*l));const x=new o.exports.PathFigure(.2*a,.5*l,!1);return m.add(x),x.add(new o.exports.PathSegment(o.exports.PathSegment.Move,.2*a,.5*l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.2*a,.3*l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,.8*a,.3*l,.25*a,0,.75*a,0)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.8*a,.35*l)),m});o.exports.Shape.defineFigureGenerator("Gear",(k,a,l)=>new o.exports.Geometry().add(new o.exports.PathFigure(.9375*a,.56246875*l,!0).add(new o.exports.PathSegment(o.exports.PathSegment.Line,.9375*a,.4375*l)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,.80621875*a,.4375*l)).add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,.763*a,.3316875*l,.79840625*a,.39915625*l,.7834375*a,.3635*l)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,.8566875*a,.23796875*l)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,.76825*a,.14959375*l)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,.67596875*a,.24184375*l)).add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,.5625*a,.19378125*l,.64228125*a,.2188125*l,.603875*a,.2021875*l)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,.5625*a,.0625*l)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,.4375*a,.0625*l)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,.4375*a,.19378125*l)).add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,.32775*a,.239375*l,.39759375*a,.20190625*l,.36053125*a,.2176875*l)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,.2379375*a,.14959375*l)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,.14953125*a,.2379375*l)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,.23934375*a,.3278125*l)).add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,.19378125*a,.4375*l,.21765625*a,.36059375*l,.201875*a,.397625*l)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,.0625*a,.4375*l)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,.0625*a,.5625*l)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,.1938125*a,.5625*l)).add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,.241875*a,.67596875*l,.20221875*a,.603875*l,.21884375*a,.64228125*l)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,.1495625*a,.76825*l)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,.238*a,.8566875*l)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,.3316875*a,.76296875*l)).add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,.43753125*a,.80621875*l,.36353125*a,.78340625*l,.3991875*a,.79840625*l)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,.43753125*a,.9375*l)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,.5625*a,.9375*l)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,.5625*a,.80621875*l)).add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,.67225*a,.760625*l,.602375*a,.79809375*l,.63946875*a,.78234375*l)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,.76828125*a,.8566875*l)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,.85671875*a,.76825*l)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,.76065625*a,.67221875*l)).add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,.80621875*a,.56246875*l,.78234375*a,.63940625*l,.798125*a,.602375*l)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,.9375*a,.56246875*l).close()).add(new o.exports.PathSegment(o.exports.PathSegment.Move,.5*a,.6*l)).add(new o.exports.PathSegment(o.exports.PathSegment.Arc,90,360,.5*a,.5*l,.1*a,.1*l).close())));o.exports.Shape.defineFigureGenerator("Hand",function(k,a,l){const m=new o.exports.Geometry,f=new o.exports.PathFigure(0,.5*l,!0);return m.add(f),f.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,.1*a,.3*l,0,.375*l,.05*a,.325*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,.45*a,.075*l,.3*a,.225*l,.4*a,.175*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,.525*a,.075*l,.46*a,.05*l,.525*a,.05*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,.3*a,.4*l,.525*a,.275*l,.475*a,.325*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.9*a,.4*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,.9*a,.55*l,a,.4*l,a,.55*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.425*a,.55*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.6*a,.55*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,.6*a,.7*l,.675*a,.55*l,.675*a,.7*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.4*a,.7*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.575*a,.7*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,.575*a,.85*l,.65*a,.7*l,.65*a,.85*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.4*a,.85*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.525*a,.85*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,.535*a,l,.61*a,.85*l,.61*a,l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,0,.9*l,.435*a,l,0,l).close()),m});o.exports.Shape.defineFigureGenerator("Map",(k,a,l)=>{const m=new o.exports.Geometry,f=new o.exports.PathFigure(0,.2*l,!0);return m.add(f),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.25*a,0)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.5*a,.2*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.75*a,0)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,.2*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.75*a,.8*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.5*a,l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.25*a,.8*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,l).close()),f.add(new o.exports.PathSegment(o.exports.PathSegment.Move,.25*a,0)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.25*a,.8*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Move,.5*a,.2*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.5*a,l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Move,.75*a,0)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.75*a,.8*l)),m});o.exports.Shape.defineFigureGenerator("Eject",(k,a,l)=>{const m=new o.exports.Geometry,f=new o.exports.PathFigure(0,l,!0);m.add(f),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,l*.7)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,l*.7).close());const x=new o.exports.PathFigure(0,l*.6,!0);return m.add(x),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,.6*l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.5*a,0).close()),m});o.exports.Shape.defineFigureGenerator("Pencil",(k,a,l)=>new o.exports.Geometry().add(new o.exports.PathFigure(0,0,!0).add(new o.exports.PathSegment(o.exports.PathSegment.Line,.2*a,.1*l)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,.9*l)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,.9*a,l)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,.1*a,.2*l).close())));o.exports.Shape.defineFigureGenerator("Building",(k,a,l)=>{const m=new o.exports.Geometry,f=new o.exports.PathFigure(a*1,l*1,!1);m.add(f),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,l*1)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,l*.85)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.046*a,l*.85)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.046*a,l*.45)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,l*.45)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,l*.3)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.046*a,l*.3)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.5*a,l*0)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,(1-.046)*a,l*.3)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,l*.3)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,l*.45)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,(1-.046)*a,l*.45)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,(1-.046)*a,l*.85)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,l*.85).close());const x=new o.exports.PathFigure(.126*a,.85*l,!1);m.add(x),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.126*a,.45*l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.322*a,.45*l)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.322*a,.85*l).close());const P=new o.exports.PathFigure(.402*a,.85*l,!1);m.add(P),P.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.402*a,.45*l)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.598*a,.45*l)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.598*a,.85*l).close());const w=new o.exports.PathFigure(.678*a,.85*l,!1);m.add(w),w.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.678*a,.45*l)),w.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.874*a,.45*l)),w.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.874*a,.85*l).close());const C=new o.exports.PathFigure(.5*a,.1*l,!1);return m.add(C),C.add(new o.exports.PathSegment(o.exports.PathSegment.Line,(.046+.15)*a,.3*l)),C.add(new o.exports.PathSegment(o.exports.PathSegment.Line,(1-(.046+.15))*a,.3*l).close()),m});o.exports.Shape.defineFigureGenerator("Staircase",(k,a,l)=>{const m=new o.exports.Geometry,f=new o.exports.PathFigure(0,l*1,!0);return m.add(f),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.2,l*1)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.2,l*.8)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.4,l*.8)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.4,l*.6)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.6,l*.6)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.6,l*.4)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.8,l*.4)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.8,l*.2)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*1,l*.2)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*1,l*.15)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.75,l*.15)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.75,l*.35)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.55,l*.35)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.55,l*.55)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.35,l*.55)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.35,l*.75)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.15,l*.75)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.15,l*.95)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,l*.95).close()),m});o.exports.Shape.defineFigureGenerator("5Bars",(k,a,l)=>{const m=new o.exports.Geometry,f=new o.exports.PathFigure(0,l*1,!0);m.add(f),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.184,l*1)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.184,l*(1-.184)).close());const x=new o.exports.PathFigure(a*.204,l,!0);m.add(x),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.204,l*(1-.184))),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.388,l*(1-.184*2))),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.388,l*1).close());const P=new o.exports.PathFigure(a*.408,l,!0);m.add(P),P.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.408,l*(1-.184*2))),P.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.592,l*(1-.184*3))),P.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.592,l*1).close());const w=new o.exports.PathFigure(a*.612,l,!0);m.add(w),w.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.612,l*(1-.184*3))),w.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.796,l*(1-.184*4))),w.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.796,l*1).close());const C=new o.exports.PathFigure(a*.816,l,!0);return m.add(C),C.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.816,l*(1-.184*4))),C.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*1,l*(1-.184*5))),C.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*1,l*1).close()),m});o.exports.Shape.defineFigureGenerator("PC",(k,a,l)=>{const m=new o.exports.Geometry,f=new o.exports.PathFigure(0,0,!0);m.add(f),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,l*1)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.3,l*1)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.3,0).close());const x=new o.exports.PathFigure(a*.055,.07*l,!0);m.add(x),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.245,l*.07)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.245,l*.1)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.055,l*.1).close());const P=new o.exports.PathFigure(a*.055,.13*l,!0);m.add(P),P.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.245,l*.13)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.245,l*.16)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.055,l*.16).close());const w=new o.exports.PathFigure(a*.055,.18*l,!0);m.add(w),w.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.245,l*.18)),w.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.245,l*.21)),w.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.055,l*.21).close());const C=new o.exports.PathFigure(a*1,0,!0);return m.add(C),C.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.4,0)),C.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.4,l*.65)),C.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*1,l*.65).close()),m});o.exports.Shape.defineFigureGenerator("Plane",(k,a,l)=>{const m=new o.exports.Geometry,f=new o.exports.PathFigure(.55*a,l,!0);return m.add(f),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.5*a,.6*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.4*a,.7*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.1*a,.475*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,.35*a,.525*l,0,.4*l,.225*a,.45*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.4*a,.475*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.15*a,.35*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.2*a,.325*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.6*a,.325*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.85*a,.1*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,.9*a,.2*l,.975*a,0,a,.08*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.7*a,.45*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.6*a,.95*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,.55*a,l).close()),m});o.exports.Shape.defineFigureGenerator("Key",(k,a,l)=>{const m=new o.exports.Geometry,f=new o.exports.PathFigure(a*1,l*.5,!0);return m.add(f),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.9,.4*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.5,.4*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.5,.35*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.45,.35*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.3,.2*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.15,.2*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,.35*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,.65*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.15,.8*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.3,.8*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.45,.65*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.5,.65*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.5,.6*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.6,.6*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.65,.55*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.7,.6*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.75,.55*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.8,.6*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.85,.575*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.9,.6*l).close()),f.add(new o.exports.PathSegment(o.exports.PathSegment.Move,.17*a,.425*l)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Arc,270,360,.17*a,.5*l,.075*a,.075*l).close()),m});o.exports.Shape.defineFigureGenerator("FilmTape",(k,a,l)=>{const m=new o.exports.Geometry,f=new o.exports.PathFigure(0,0,!1);m.add(f),f.add(new o.exports.PathSegment(o.exports.PathSegment.Arc,270,180,a*0,a*.3,a*.055)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,l*1)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.08,l*1)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.08,l*.95)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*(.08+.056*1),l*.95)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*(.08+.056*1),l*1)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*(.08+.056*2),l*1)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*(.08+.056*2),l*.95)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*(.08+.056*3),l*.95)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*(.08+.056*3),l*1)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*(.08+.056*4),l*1)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*(.08+.056*4),l*.95)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*(.08+.056*5),l*.95)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*(.08+.056*5),l*1)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*(.08+.056*6),l*1)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*(.08+.056*6),l*.95)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*(.08+.056*7),l*.95)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*(.08+.056*7),l*1)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*(.08+.056*8),l*1)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*(.08+.056*8),l*.95)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*(.08+.056*9),l*.95)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*(.08+.056*9),l*1)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*(.08+.056*10),l*1)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*(.08+.056*10),l*.95)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*(.08+.056*11),l*.95)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*(.08+.056*11),l*1)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*(.08+.056*12),l*1)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*(.08+.056*12),l*.95)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*(.08+.056*13),l*.95)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*(.08+.056*13),l*1)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*(.08+.056*14),l*1)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*(.08+.056*14),l*.95)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*(.08+.056*15),l*.95)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*(.08+.056*15),l*1)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*1,l*1)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*1,l*1));const x=new o.exports.PathFigure(0,0,!1);m.add(x),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*1,l*0)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Arc,270,-180,a*1,a*.3,a*.055)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*1,l*1));const P=new o.exports.PathFigure(a*.11,l*.1,!1);m.add(P),P.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*(.11+.24133333*1+.028*0),l*.1)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*(.11+.24133333*1+.028*0),l*.8)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.11,l*.8).close());const w=new o.exports.PathFigure(a*(.11+.24133333*1+.028*1),l*.1,!1);m.add(w),w.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*(.11+.24133333*2+.028*1),l*.1)),w.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*(.11+.24133333*2+.028*1),l*.8)),w.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*(.11+.24133333*1+.028*1),l*.8).close());const C=new o.exports.PathFigure(a*(.11+.24133333*2+.028*2),l*.1,!1);return m.add(C),C.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*(.11+.24133333*3+.028*2),l*.1)),C.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*(.11+.24133333*3+.028*2),l*.8)),C.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*(.11+.24133333*2+.028*2),l*.8).close()),m});o.exports.Shape.defineFigureGenerator("FloppyDisk",(k,a,l)=>{const m=new o.exports.Geometry,f=8,x=f*lt,P=new o.exports.PathFigure(f,0,!1);m.add(P),P.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.86,0)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*1,l*.14)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,l-f)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,a-f,l,a,l-x,a-x,l)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Line,f,l)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,0,l-f,x,l,0,l-x)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,f)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,f,0,0,x,x,0).close());const w=new o.exports.PathFigure(a*.83,0,!1);m.add(w),w.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.83,l*.3)),w.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.17,l*.3)),w.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.17,l*0).close());const C=new o.exports.PathFigure(a*.83,l*1,!1);m.add(C),C.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.83,l*.5)),C.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.17,l*.5)),C.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.17,l*1).close());const G=new o.exports.PathFigure(a*.78,l*.05,!1);return m.add(G),G.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.66,l*.05)),G.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.66,l*.25)),G.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.78,l*.25).close()),m});o.exports.Shape.defineFigureGenerator("SpeechBubble",(k,a,l)=>{let m=k?k.parameter1:NaN;(isNaN(m)||m<0)&&(m=15),m=Math.min(m,a/3),m=Math.min(m,l/3);const f=m*lt,x=l*.8,P=new o.exports.Geometry,w=new o.exports.PathFigure(m,0,!0);return P.add(w),w.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a-m,0)),w.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,a,m,a-f,0,a,f)),w.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,x-m)),w.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,a-m,x,a,x-f,a-f,x)),w.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.7,x)),w.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.7,l)),w.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.55,x)),w.add(new o.exports.PathSegment(o.exports.PathSegment.Line,m,x)),w.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,0,x-m,f,x,0,x-f)),w.add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,m)),w.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,m,0,0,f,f,0).close()),f>1?(P.spot1=new o.exports.Spot(0,0,f,f),P.spot2=new o.exports.Spot(1,.8,-f,-f)):(P.spot1=o.exports.Spot.TopLeft,P.spot2=new o.exports.Spot(1,.8)),P});o.exports.Shape.defineFigureGenerator("Repeat",(k,a,l)=>{const m=new o.exports.Geometry,f=new o.exports.PathFigure(a*0,l*.45,!0);m.add(f),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.25,l*0)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.5,l*.45)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.3,l*.45)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.3,l*.9)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.6,l*.9)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.65,l*1)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.2,l*1)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.2,l*.45).close());const x=new o.exports.PathFigure(a*1,l*.55,!0);return m.add(x),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.75,l*1)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.5,l*.55)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.7,l*.55)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.7,l*.1)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.4,l*.1)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.35,l*0)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.8,l*0)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.8,l*.55).close()),m});o.exports.Shape.defineFigureGenerator("Windows",(k,a,l)=>new o.exports.Geometry().add(new o.exports.PathFigure(0,0,!0).add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,0)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,l)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,l).close()).add(new o.exports.PathSegment(o.exports.PathSegment.Move,.4*a,.4*l)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,.4*a,.8*l)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,.9*a,.8*l)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,.9*a,.4*l).close()).add(new o.exports.PathSegment(o.exports.PathSegment.Move,.2*a,.1*l)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,.2*a,.6*l)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,.7*a,.6*l)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,.7*a,.1*l).close()).add(new o.exports.PathSegment(o.exports.PathSegment.Move,.1*a,.6*l)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,.1*a,.9*l)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,.5*a,.9*l)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,.5*a,.6*l).close())));o.exports.Shape.defineFigureGenerator("Terminal",(k,a,l)=>{const m=new o.exports.Geometry,f=new o.exports.PathFigure(a*0,l*.1,!1);m.add(f),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*1,l*.1)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*1,l*.9)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*0,l*.9).close());const x=new o.exports.PathFigure(a*.1,l*.2,!0);m.add(x),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.1,l*.25)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.22,l*.285)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.1,l*.32)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.1,l*.37)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.275,l*.32)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.275,l*.25).close());const P=new o.exports.PathFigure(a*.28,l*.37,!0);return m.add(P),P.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.45,l*.37)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.45,l*.41)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.28,l*.41).close()),m});o.exports.Shape.defineFigureGenerator("Beaker",(k,a,l)=>{const m=new o.exports.Geometry,f=15,x=f*lt,P=new o.exports.PathFigure(a*.62,l*.475,!0);return m.add(P),P.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a,l-f)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,a-f,l,a,l-x,a-x,l)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Line,f,l)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Bezier,0,l-f,x,l,0,l-x)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.38,l*.475)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.38,l*.03)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.36,l*0)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.64,l*0)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.62,l*.03).close()),x>1?(m.spot1=new o.exports.Spot(0,0,x,x),m.spot2=new o.exports.Spot(1,1,-x,-x)):(m.spot1=o.exports.Spot.TopLeft,m.spot2=o.exports.Spot.BottomRight),m});o.exports.Shape.defineFigureGenerator("Download",(k,a,l)=>{const m=new o.exports.Geometry,f=new o.exports.PathFigure(a*0,l*1,!0);m.add(f);const x=.1/.3;f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*1,l*1)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*1,l*(1-x))),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.8,l*0)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.66,l*0)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.66,l*.055)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.755,l*.055)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.93,l*(1-x))),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.64,l*(1-x))),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.61,l*.75)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.5,l*.75)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.39,l*.75)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.36,l*(1-x))),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.07,l*(1-x))),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*(1-.755),l*.055)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*(1-.66),l*.055)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*(1-.66),l*0)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*(1-.8),l*0)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*0,l*(1-x)).close());const P=new o.exports.PathFigure(a*.4,l*0,!0);return m.add(P),P.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.4,l*.44)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.26,l*.44)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.5,l*.66)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*(1-.26),l*.44)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.6,l*.44)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.6,l*0).close()),m});o.exports.Shape.defineFigureGenerator("Bin",(k,a,l)=>{const m=new o.exports.Geometry,f=new o.exports.PathFigure(a*0,l*1,!0);m.add(f);const x=.1/.3;return f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*1,l*1)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*1,l*(1-x))),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.8,l*0)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.66,l*0)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.66,l*.055)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.755,l*.055)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.93,l*(1-x))),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.64,l*(1-x))),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.61,l*.75)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.5,l*.75)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.39,l*.75)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.36,l*(1-x))),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.07,l*(1-x))),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*(1-.755),l*.055)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*(1-.66),l*.055)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*(1-.66),l*0)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*(1-.8),l*0)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*0,l*(1-x)).close()),m});o.exports.Shape.defineFigureGenerator("Upload",(k,a,l)=>{const m=new o.exports.Geometry,f=new o.exports.PathFigure(a*0,l*1,!0);m.add(f);const x=.1/.3;f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*1,l*1)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*1,l*(1-x))),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.8,l*0)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.66,l*0)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.66,l*.055)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.755,l*.055)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.93,l*(1-x))),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.64,l*(1-x))),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.61,l*.75)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.5,l*.75)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.39,l*.75)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.36,l*(1-x))),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.07,l*(1-x))),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*(1-.755),l*.055)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*(1-.66),l*.055)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*(1-.66),l*0)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*(1-.8),l*0)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*0,l*(1-x)).close());const P=new o.exports.PathFigure(a*.5,l*0,!0);return m.add(P),P.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.26,l*.25)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.4,l*.25)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.4,l*.63)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.6,l*.63)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.6,l*.25)),P.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.74,l*.25).close()),m});o.exports.Shape.defineFigureGenerator("EmptyDrink",(k,a,l)=>{const m=new o.exports.Geometry,f=new o.exports.PathFigure(a*.15,l*0,!1);return m.add(f),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.85,l*0)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.7,l*1)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.3,l*1).close()),m});o.exports.Shape.defineFigureGenerator("Drink",(k,a,l)=>{const m=new o.exports.Geometry,f=new o.exports.PathFigure(a*.15,l*0,!1);m.add(f),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.85,l*0)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.7,l*1)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.3,l*1).close());const x=new o.exports.PathFigure(a*.235,l*.28,!0);return m.add(x),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.765,l*.28)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.655,l*.97)),x.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.345,l*.97).close()),m});o.exports.Shape.defineFigureGenerator("4Arrows",(k,a,l)=>{const m=new o.exports.Geometry,f=new o.exports.PathFigure(a*.5,l*0,!0);return m.add(f),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.65,l*.25)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.55,l*.25)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.55,l*.45)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.75,l*.45)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.75,l*.35)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*1,l*.5)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.75,l*.65)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.75,l*.55)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.55,l*.55)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.55,l*.75)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.65,l*.75)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.5,l*1)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.35,l*.75)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.45,l*.75)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.45,l*.55)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.25,l*.55)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.25,l*.65)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*0,l*.5)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.25,l*.35)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.25,l*.45)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.45,l*.45)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.45,l*.25)),f.add(new o.exports.PathSegment(o.exports.PathSegment.Line,a*.35,l*.25).close()),m});o.exports.Shape.defineFigureGenerator("Connector","Ellipse");o.exports.Shape.defineFigureGenerator("Alternative","TriangleUp");o.exports.Shape.defineFigureGenerator("Merge","TriangleUp");o.exports.Shape.defineFigureGenerator("Decision","Diamond");o.exports.Shape.defineFigureGenerator("DataTransmissions","Hexagon");o.exports.Shape.defineFigureGenerator("Gate","Crescent");o.exports.Shape.defineFigureGenerator("Delay","HalfEllipse");o.exports.Shape.defineFigureGenerator("Input","Parallelogram1");o.exports.Shape.defineFigureGenerator("ManualLoop","ManualOperation");o.exports.Shape.defineFigureGenerator("ISOProcess","Chevron");o.exports.Shape.defineFigureGenerator("MessageToUser","SquareArrow");o.exports.Shape.defineFigureGenerator("MagneticData","Cylinder1");o.exports.Shape.defineFigureGenerator("DirectData","Cylinder4");o.exports.Shape.defineFigureGenerator("StoredData","DataStorage");o.exports.Shape.defineFigureGenerator("SequentialData","MagneticTape");o.exports.Shape.defineFigureGenerator("Subroutine","Procedure");class Xv extends o.exports.Link{getLinkPoint(a,l,m,f,x,P,w){const C=new o.exports.Rect(l.getDocumentPoint(o.exports.Spot.TopLeft),l.getDocumentPoint(o.exports.Spot.BottomRight)),G=super.getLinkPoint(P,w,m,f,x,a,l),z=G.y>C.centerY?C.bottom:C.top;return a.category==="privateProcess"?G.x<C.left?new o.exports.Point(C.left,z):G.x>C.right?new o.exports.Point(C.right,z):new o.exports.Point(G.x,z):super.getLinkPoint(a,l,m,f,x,P,w)}computeOtherPoint(a,l){const m=super.computeOtherPoint(a,l);let f=this.toNode;return f===a&&(f=this.fromNode),f!==null&&(a.category==="privateProcess"?m.x=f.getDocumentPoint(o.exports.Spot.MiddleBottom).x:f===this.fromNode!=f.actualBounds.centerY<a.actualBounds.centerY?m.x-=1:m.x+=1),m}getLinkDirection(a,l,m,f,x,P,w,C){if(a.category==="privateProcess"){const G=l.getDocumentPoint(o.exports.Spot.Center);return C.getDocumentPoint(o.exports.Spot.Center).y>G.y?90:270}else return super.getLinkDirection.call(this,a,l,m,f,x,P,w,C)}}class Fs extends o.exports.LinkingTool{constructor(){super(),this.direction=o.exports.LinkingTool.ForwardsOnly,this.temporaryLink.routing=o.exports.Link.Orthogonal,this.linkValidation=(a,l,m,f)=>Fs.validateSequenceLinkConnection(a,l,m,f)||Fs.validateMessageLinkConnection(a,l,m,f)}insertLink(a,l,m,f){let x=null;Fs.validateMessageLinkConnection(a,l,m,f)&&(x=this.archetypeLinkData,this.archetypeLinkData={category:"msg"});const P=super.insertLink(a,l,m,f);if(P!==null&&a.category==="gateway"){const w=P.findObject("Label");w!==null&&(w.visible=!0)}return x!==null&&(this.archetypeLinkData=x),P}static validateSequenceLinkConnection(a,l,m,f){return a.category===null||m.category===null?!0:(a.containingGroup!==null&&a.containingGroup.category==="subprocess"||m.containingGroup!==null&&m.containingGroup.category==="subprocess")&&a.containingGroup!==m.containingGroup?!1:a.containingGroup===m.containingGroup?!0:a.findCommonContainingGroup(m)!=null}static validateMessageLinkConnection(a,l,m,f){return a.category===null||m.category===null||a.category==="privateProcess"||m.category==="privateProcess"?!0:(a.containingGroup!==null&&a.containingGroup.category==="subprocess"||m.containingGroup!==null&&m.containingGroup.category==="subprocess")&&a.containingGroup!==m.containingGroup||a.containingGroup===m.containingGroup?!1:a.findCommonContainingGroup(m)===null}}class Uv extends o.exports.RelinkingTool{constructor(){super(),this.temporaryLink.routing=o.exports.Link.Orthogonal,this.linkValidation=(a,l,m,f)=>Fs.validateSequenceLinkConnection(a,l,m,f)||Fs.validateMessageLinkConnection(a,l,m,f)}reconnectLink(a,l,m,f){const x=a.diagram;if(x===null)return!1;const P=x.model;if(P===null)return!1;function w(C,G){const A=P.copyLinkData(C);A.from=C.from,A.to=C.to,A.category=G,A.points=void 0,P.removeLinkData(C),P.addLinkData(A)}if(super.reconnectLink(a,l,m,f)){const C=a.data,G=a.fromNode,A=a.fromPort,z=a.toNode,Z=a.toPort;if(G!==null&&A!==null&&z!==null&&Z!==null){if(x.startTransaction("Relink updates"),Fs.validateMessageLinkConnection(G,A,z,Z)&&a.category!=="msg"&&w(C,"msg"),G.category==="gateway"){const gt=a.findObject("Label");gt!==null&&(gt.visible=!0)}x.commitTransaction("Relink updates")}return!0}return!1}}console.log("BPMNScript.ts");let xt;function Kv(){const k=o.exports.GraphObject.make;if(!pu()){const $=document.getElementById("currentFile");$.textContent="Sorry! No web storage support. If you're using Internet Explorer / Microsoft Edge, you must load the page from a server for local storage to work."}jQuery("#menuui").menu(),jQuery(function(){jQuery("#menuui").menu({position:{my:"left top",at:"left top+30"}})}),jQuery("#menuui").menu({icons:{submenu:"ui-icon-triangle-1-s"}});const a=document.getElementById("openDocument");a.style.visibility="hidden";const l=document.getElementById("removeDocument");l.style.visibility="hidden";const m=k(o.exports.Brush,"Linear",{0:"LightGoldenRodYellow",1:"#FFFF66"}),f=k(o.exports.Brush,"Linear",{0:"#E0FEE0",1:"PaleGreen"}),x=k(o.exports.Brush,"Linear",{0:"White",1:"#DADADA"}),P=k(o.exports.Brush,"Linear",{0:"OldLace",1:"PapayaWhip"}),w="#CDAA7D",C=1.5,G=120,A=80,z=1,Z=4,gt=P,Nt=w,jt=42,it=jt-6,vn=it-14,mi="pink",On=f,_e="white",X="dimgray",yt="green",Rt="red",Ve=4,Bt=80,ue=45,wo=m,Lr="darkgoldenrod",Bi="darkgoldenrod",Yt=m,At=3,oo=x;o.exports.Shape.defineFigureGenerator("Empty",function($,st,ae){return new o.exports.Geometry}),o.exports.Shape.defineFigureGenerator("Annotation",function($,st,ae){var Ce=Math.min(st,10);return new o.exports.Geometry().add(new o.exports.PathFigure(Ce,0).add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,0)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,0,ae)).add(new o.exports.PathSegment(o.exports.PathSegment.Line,Ce,ae)))});const Kn="F M 391,5L 419,14L 444.5,30.5L 451,120.5L 485.5,126L 522,141L 595,83L 618.5,92L 644,106.5L 660.5,132L 670,158L 616,220L 640.5,265.5L 658.122,317.809L 753.122,322.809L 770.122,348.309L 774.622,374.309L 769.5,402L 756.622,420.309L 659.122,428.809L 640.5,475L 616.5,519.5L 670,573.5L 663,600L 646,626.5L 622,639L 595,645.5L 531.5,597.5L 493.192,613.462L 450,627.5L 444.5,718.5L 421.5,733L 393,740.5L 361.5,733.5L 336.5,719L 330,627.5L 277.5,611.5L 227.5,584.167L 156.5,646L 124.5,641L 102,626.5L 82,602.5L 78.5,572.5L 148.167,500.833L 133.5,466.833L 122,432.5L 26.5,421L 11,400.5L 5,373.5L 12,347.5L 26.5,324L 123.5,317.5L 136.833,274.167L 154,241L 75.5,152.5L 85.5,128.5L 103,105.5L 128.5,88.5001L 154.872,82.4758L 237,155L 280.5,132L 330,121L 336,30L 361,15L 391,5 Z M 398.201,232L 510.201,275L 556.201,385L 505.201,491L 399.201,537L 284.201,489L 242.201,385L 282.201,273L 398.201,232 Z",Ih=o.exports.Geometry.parse(Kn);Ih.normalize(),o.exports.Shape.defineFigureGenerator("BpmnTaskService",function($,st,ae){const Ce=Ih.copy(),Ko=Ce.bounds,rs=Math.min(st/Ko.width,ae/Ko.height);return Ce.scale(rs,rs),Ce.spot1=new o.exports.Spot(0,.6,10,0),Ce.spot2=new o.exports.Spot(1,1),Ce});const Hn=o.exports.Geometry.parse("F1M18.13,10.06 C18.18,10.07 18.22,10.07 18.26,10.08 18.91,10.20 21.20,10.12 21.28,12.93 21.36,15.75 21.42,32.40 21.42,32.40 21.42,32.40 21.12,34.10 23.08,33.06 23.08,33.06 22.89,24.76 23.80,24.17 24.72,23.59 26.69,23.81 27.19,24.40 27.69,24.98 28.03,24.97 28.03,33.34 28.03,33.34 29.32,34.54 29.93,33.12 30.47,31.84 29.71,27.11 30.86,26.56 31.80,26.12 34.53,26.12 34.72,28.29 34.94,30.82 34.22,36.12 35.64,35.79 35.64,35.79 36.64,36.08 36.72,34.54 36.80,33.00 37.17,30.15 38.42,29.90 39.67,29.65 41.22,30.20 41.30,32.29 41.39,34.37 42.30,46.69 38.86,55.40 35.75,63.29 36.42,62.62 33.47,63.12 30.76,63.58 26.69,63.12 26.69,63.12 26.69,63.12 17.72,64.45 15.64,57.62 13.55,50.79 10.80,40.95 7.30,38.95 3.80,36.95 4.24,36.37 4.28,35.35 4.32,34.33 7.60,31.25 12.97,35.75 12.97,35.75 16.10,39.79 16.10,42.00 16.10,42.00 15.69,14.30 15.80,12.79 15.96,10.75 17.42,10.04 18.13,10.06z ");Hn.rotate(90,0,0),Hn.normalize(),o.exports.Shape.defineFigureGenerator("BpmnTaskManual",function($,st,ae){const Ce=Hn.copy(),Ko=Ce.bounds,rs=Math.min(st/Ko.width,ae/Ko.height);return Ce.scale(rs,rs),Ce.spot1=new o.exports.Spot(0,.6,10,0),Ce.spot2=new o.exports.Spot(1,1),Ce});const Tt=k("ToolTip",k(o.exports.TextBlock,{margin:3,editable:!0},new o.exports.Binding("text","",function($){return $.item!==void 0?$.item:"(unnamed item)"})));function Ah($){const st=["Empty","BpmnTaskMessage","BpmnTaskUser","BpmnTaskManual","BpmnTaskScript","BpmnTaskMessage","BpmnTaskService","InternalStorage"];return $<st.length?st[$]:"NotAllowed"}function Td($){const st=10+jt/2;return $===0?new o.exports.Spot(0,1,st,0):$===1?new o.exports.Spot(1,1,-st,0):$===2?new o.exports.Spot(1,0,-st,0):new o.exports.Spot(1,0,-st-($-2)*jt,0)}function Ji($){return $===5?"dimgray":"white"}function ma($){const st=["NotAllowed","Empty","BpmnTaskMessage","BpmnEventTimer","BpmnEventEscalation","BpmnEventConditional","Arrow","BpmnEventError","ThinX","BpmnActivityCompensation","Triangle","Pentagon","ThinCross","Circle"];return $<st.length?st[$]:"NotAllowed"}function J($){return $===8?Rt:yt}function Mr($){return $<=6?_e:X}const xa=k("ContextMenu",k("ContextMenuButton",k(o.exports.TextBlock,"Remove event"),{click:function($,st){In(st.part.adornedObject)}}));function In($){if($===null||$.panel===null||$.panel.itemArray===null)return;xt.startTransaction("removeBoundaryEvent");const st=$.portId,ae=$.panel.itemArray;for(let Ce=0;Ce<ae.length;Ce++)if(ae[Ce].portId===st){xt.model.removeArrayItem(ae,Ce);break}xt.commitTransaction("removeBoundaryEvent")}const js=k(o.exports.Panel,"Spot",{contextMenu:xa,alignmentFocus:o.exports.Spot.Center,fromLinkable:!0,toLinkable:!1,cursor:"pointer",fromSpot:o.exports.Spot.Bottom,fromMaxLinks:1,toMaxLinks:0},new o.exports.Binding("portId","portId"),new o.exports.Binding("alignment","alignmentIndex",Td),k(o.exports.Shape,"Circle",{desiredSize:new o.exports.Size(jt,jt)},new o.exports.Binding("strokeDashArray","eventDimension",function($){return $===6?[4,2]:null}),new o.exports.Binding("fromSpot","alignmentIndex",function($){return $<2?o.exports.Spot.Bottom:o.exports.Spot.Top}),new o.exports.Binding("fill","color")),k(o.exports.Shape,"Circle",{alignment:o.exports.Spot.Center,desiredSize:new o.exports.Size(it,it),fill:null},new o.exports.Binding("strokeDashArray","eventDimension",function($){return $===6?[4,2]:null})),k(o.exports.Shape,"NotAllowed",{alignment:o.exports.Spot.Center,desiredSize:new o.exports.Size(vn,vn),fill:"white"},new o.exports.Binding("figure","eventType",ma))),Ae=k("ContextMenu",k("ContextMenuButton",k(o.exports.TextBlock,"Add Email Event",{margin:3}),{click:function($,st){Dh(2,5)}}),k("ContextMenuButton",k(o.exports.TextBlock,"Add Timer Event",{margin:3}),{click:function($,st){Dh(3,5)}}),k("ContextMenuButton",k(o.exports.TextBlock,"Add Escalation Event",{margin:3}),{click:function($,st){Dh(4,5)}}),k("ContextMenuButton",k(o.exports.TextBlock,"Add Error Event",{margin:3}),{click:function($,st){Dh(7,5)}}),k("ContextMenuButton",k(o.exports.TextBlock,"Add Signal Event",{margin:3}),{click:function($,st){Dh(10,5)}}),k("ContextMenuButton",k(o.exports.TextBlock,"Add N-I Escalation Event",{margin:3}),{click:function($,st){Dh(4,6)}}),k("ContextMenuButton",k(o.exports.TextBlock,"Rename",{margin:3}),{click:function($,st){Jv(st)}}));function Wn($){return $?[k("SubGraphExpanderButton"),{margin:2,visible:!1},new o.exports.Binding("visible","isSubProcess")]:[]}function ge($,st){return k(o.exports.Panel,"Horizontal",{alignment:o.exports.Spot.MiddleBottom,alignmentFocus:o.exports.Spot.MiddleBottom},k(o.exports.Shape,"BpmnActivityLoop",{width:12/st,height:12/st,margin:2,visible:!1,strokeWidth:C},new o.exports.Binding("visible","isLoop")),k(o.exports.Shape,"BpmnActivityParallel",{width:12/st,height:12/st,margin:2,visible:!1,strokeWidth:C},new o.exports.Binding("visible","isParallel")),k(o.exports.Shape,"BpmnActivitySequential",{width:12/st,height:12/st,margin:2,visible:!1,strokeWidth:C},new o.exports.Binding("visible","isSequential")),k(o.exports.Shape,"BpmnActivityAdHoc",{width:12/st,height:12/st,margin:2,visible:!1,strokeWidth:C},new o.exports.Binding("visible","isAdHoc")),k(o.exports.Shape,"BpmnActivityCompensation",{width:12/st,height:12/st,margin:2,visible:!1,strokeWidth:C,fill:null},new o.exports.Binding("visible","isCompensation")),Wn($))}const Le=k(o.exports.Node,"Spot",{locationObjectName:"SHAPE",locationSpot:o.exports.Spot.Center,resizable:!0,resizeObjectName:"PANEL",toolTip:Tt,selectionAdorned:!1,contextMenu:Ae,itemTemplate:js},new o.exports.Binding("itemArray","boundaryEventArray"),new o.exports.Binding("location","loc",o.exports.Point.parse).makeTwoWay(o.exports.Point.stringify),k(o.exports.Panel,"Auto",{name:"PANEL",minSize:new o.exports.Size(G,A),desiredSize:new o.exports.Size(G,A)},new o.exports.Binding("desiredSize","size",o.exports.Size.parse).makeTwoWay(o.exports.Size.stringify),k(o.exports.Panel,"Spot",k(o.exports.Shape,"RoundedRectangle",{name:"SHAPE",fill:P,stroke:w,parameter1:10,portId:"",fromLinkable:!0,toLinkable:!0,cursor:"pointer",fromSpot:o.exports.Spot.RightSide,toSpot:o.exports.Spot.LeftSide},new o.exports.Binding("fill","color"),new o.exports.Binding("strokeWidth","isCall",function($){return $?Z:z})),k(o.exports.Shape,"BpmnTaskScript",{alignment:new o.exports.Spot(0,0,5,5),alignmentFocus:o.exports.Spot.TopLeft,width:22,height:22},new o.exports.Binding("fill","taskType",Ji),new o.exports.Binding("figure","taskType",Ah)),ge(!1,1)),k(o.exports.TextBlock,{alignment:o.exports.Spot.Center,textAlign:"center",margin:12,editable:!0},new o.exports.Binding("text").makeTwoWay()))),se=2,Q=k(o.exports.Node,"Vertical",{locationObjectName:"SHAPE",locationSpot:o.exports.Spot.Center,selectionAdorned:!1},new o.exports.Binding("location","loc",o.exports.Point.parse).makeTwoWay(o.exports.Point.stringify),k(o.exports.Panel,"Spot",{name:"PANEL",desiredSize:new o.exports.Size(G/se,A/se)},k(o.exports.Shape,"RoundedRectangle",{name:"SHAPE",fill:P,stroke:w,parameter1:10/se},new o.exports.Binding("strokeWidth","isCall",function($){return $?Z:z})),k(o.exports.Shape,"RoundedRectangle",{margin:3,stretch:o.exports.GraphObject.Fill,stroke:w,parameter1:8/se,fill:null,visible:!1},new o.exports.Binding("visible","isTransaction")),k(o.exports.Shape,"BpmnTaskScript",{alignment:new o.exports.Spot(0,0,5,5),alignmentFocus:o.exports.Spot.TopLeft,width:22/se,height:22/se},new o.exports.Binding("fill","taskType",Ji),new o.exports.Binding("figure","taskType",Ah)),ge(!1,se)),k(o.exports.TextBlock,{alignment:o.exports.Spot.Center,textAlign:"center",margin:2},new o.exports.Binding("text"))),Ye=k(o.exports.Group,"Vertical",{locationObjectName:"SHAPE",locationSpot:o.exports.Spot.Center,isSubGraphExpanded:!1,selectionAdorned:!1},k(o.exports.Panel,"Spot",{name:"PANEL",desiredSize:new o.exports.Size(G/se,A/se)},k(o.exports.Shape,"RoundedRectangle",{name:"SHAPE",fill:P,stroke:w,parameter1:10/se},new o.exports.Binding("strokeWidth","isCall",function($){return $?Z:z})),k(o.exports.Shape,"RoundedRectangle",{margin:3,stretch:o.exports.GraphObject.Fill,stroke:w,parameter1:8/se,fill:null,visible:!1},new o.exports.Binding("visible","isTransaction")),ge(!0,se)),k(o.exports.TextBlock,{alignment:o.exports.Spot.Center,textAlign:"center",margin:2},new o.exports.Binding("text"))),H=k(o.exports.Node,"Vertical",{locationObjectName:"SHAPE",locationSpot:o.exports.Spot.Center,toolTip:Tt},new o.exports.Binding("location","loc",o.exports.Point.parse).makeTwoWay(o.exports.Point.stringify),{resizable:!1,resizeObjectName:"SHAPE"},k(o.exports.Panel,"Spot",k(o.exports.Shape,"Circle",{strokeWidth:1,name:"SHAPE",desiredSize:new o.exports.Size(jt,jt),portId:"",fromLinkable:!0,toLinkable:!0,cursor:"pointer",fromSpot:o.exports.Spot.RightSide,toSpot:o.exports.Spot.LeftSide},new o.exports.Binding("fill","eventDimension",function($){return $===8?mi:On}),new o.exports.Binding("strokeWidth","eventDimension",function($){return $===8?Ve:1}),new o.exports.Binding("stroke","eventDimension",J),new o.exports.Binding("strokeDashArray","eventDimension",function($){return $===3||$===6?[4,2]:null}),new o.exports.Binding("desiredSize","size",o.exports.Size.parse).makeTwoWay(o.exports.Size.stringify)),k(o.exports.Shape,"Circle",{alignment:o.exports.Spot.Center,desiredSize:new o.exports.Size(it,it),fill:null},new o.exports.Binding("stroke","eventDimension",J),new o.exports.Binding("strokeDashArray","eventDimension",function($){return $===3||$===6?[4,2]:null}),new o.exports.Binding("visible","eventDimension",function($){return $>3&&$<=7})),k(o.exports.Shape,"NotAllowed",{alignment:o.exports.Spot.Center,desiredSize:new o.exports.Size(vn,vn),stroke:"black"},new o.exports.Binding("figure","eventType",ma),new o.exports.Binding("fill","eventDimension",Mr))),k(o.exports.TextBlock,{alignment:o.exports.Spot.Center,textAlign:"center",margin:5,editable:!0},new o.exports.Binding("text").makeTwoWay()));function ce($){const st=["NotAllowed","ThinCross","Circle","AsteriskLine","ThinX","Pentagon","Pentagon","ThinCross"];return $<st.length?st[$]:"NotAllowed"}function Xo($){const st=new o.exports.Size(ue,ue);return $===4?(st.width=st.width/4*3,st.height=st.height/4*3):$>4&&(st.width=st.width/1.6,st.height=st.height/1.6),st}function $e($){const st=Xo($);return st.width=st.width/2,st.height=st.height/2,st}const Lo=k(o.exports.Node,"Vertical",{locationObjectName:"SHAPE",locationSpot:o.exports.Spot.Center,toolTip:Tt},new o.exports.Binding("location","loc",o.exports.Point.parse).makeTwoWay(o.exports.Point.stringify),{resizable:!1,resizeObjectName:"SHAPE"},k(o.exports.Panel,"Spot",k(o.exports.Shape,"Diamond",{strokeWidth:1,fill:wo,stroke:Lr,name:"SHAPE",desiredSize:new o.exports.Size(Bt,Bt),portId:"",fromLinkable:!0,toLinkable:!0,cursor:"pointer",fromSpot:o.exports.Spot.NotLeftSide,toSpot:o.exports.Spot.NotRightSide},new o.exports.Binding("desiredSize","size",o.exports.Size.parse).makeTwoWay(o.exports.Size.stringify)),k(o.exports.Shape,"NotAllowed",{alignment:o.exports.Spot.Center,stroke:Bi,fill:Yt},new o.exports.Binding("figure","gatewayType",ce),new o.exports.Binding("strokeWidth","gatewayType",function($){return $<=4?At:1}),new o.exports.Binding("desiredSize","gatewayType",Xo)),k(o.exports.Shape,"Circle",{strokeWidth:1,stroke:Bi,fill:null,desiredSize:new o.exports.Size(jt,jt)},new o.exports.Binding("visible","gatewayType",function($){return $>=5})),k(o.exports.Shape,"Circle",{alignment:o.exports.Spot.Center,stroke:Bi,desiredSize:new o.exports.Size(it,it),fill:null},new o.exports.Binding("visible","gatewayType",function($){return $===5}))),k(o.exports.TextBlock,{alignment:o.exports.Spot.Center,textAlign:"center",margin:5,editable:!0},new o.exports.Binding("text").makeTwoWay())),ze=k(o.exports.Node,"Vertical",{toolTip:Tt,resizable:!1,locationObjectName:"SHAPE",locationSpot:o.exports.Spot.Center,resizeObjectName:"SHAPE"},new o.exports.Binding("location","loc",o.exports.Point.parse).makeTwoWay(o.exports.Point.stringify),k(o.exports.Panel,"Spot",k(o.exports.Shape,"Diamond",{strokeWidth:1,fill:wo,stroke:Lr,name:"SHAPE",desiredSize:new o.exports.Size(Bt/2,Bt/2)}),k(o.exports.Shape,"NotAllowed",{alignment:o.exports.Spot.Center,stroke:Bi,strokeWidth:At,fill:Yt},new o.exports.Binding("figure","gatewayType",ce),new o.exports.Binding("strokeWidth","gatewayType",function($){return $<=4?At:1}),new o.exports.Binding("desiredSize","gatewayType",$e)),k(o.exports.Shape,"Circle",{strokeWidth:1,stroke:Bi,fill:null,desiredSize:new o.exports.Size(jt/2,jt/2)},new o.exports.Binding("visible","gatewayType",function($){return $>=5})),k(o.exports.Shape,"Circle",{alignment:o.exports.Spot.Center,stroke:Bi,desiredSize:new o.exports.Size(it/2,it/2),fill:null},new o.exports.Binding("visible","gatewayType",function($){return $===5}))),k(o.exports.TextBlock,{alignment:o.exports.Spot.Center,textAlign:"center",margin:5,editable:!1},new o.exports.Binding("text"))),Zt=k(o.exports.Node,"Auto",{background:x,locationSpot:o.exports.Spot.Center},new o.exports.Binding("location","loc",o.exports.Point.parse).makeTwoWay(o.exports.Point.stringify),k(o.exports.Shape,"Annotation",{portId:"",fromLinkable:!0,cursor:"pointer",fromSpot:o.exports.Spot.Left,strokeWidth:2,stroke:"gray",fill:"transparent"}),k(o.exports.TextBlock,{margin:5,editable:!0},new o.exports.Binding("text").makeTwoWay())),Ee=k(o.exports.Node,"Vertical",{locationObjectName:"SHAPE",locationSpot:o.exports.Spot.Center},new o.exports.Binding("location","loc",o.exports.Point.parse).makeTwoWay(o.exports.Point.stringify),k(o.exports.Shape,"File",{name:"SHAPE",portId:"",fromLinkable:!0,toLinkable:!0,cursor:"pointer",fill:oo,desiredSize:new o.exports.Size(jt*.8,jt)}),k(o.exports.TextBlock,{margin:5,editable:!0},new o.exports.Binding("text").makeTwoWay())),is=k(o.exports.Node,"Vertical",{locationObjectName:"SHAPE",locationSpot:o.exports.Spot.Center},new o.exports.Binding("location","loc",o.exports.Point.parse).makeTwoWay(o.exports.Point.stringify),k(o.exports.Shape,"Database",{name:"SHAPE",portId:"",fromLinkable:!0,toLinkable:!0,cursor:"pointer",fill:oo,desiredSize:new o.exports.Size(jt,jt)}),k(o.exports.TextBlock,{margin:5,editable:!0},new o.exports.Binding("text").makeTwoWay())),Xe=k(o.exports.Node,"Auto",{layerName:"Background",resizable:!0,resizeObjectName:"LANE"},new o.exports.Binding("location","loc",o.exports.Point.parse).makeTwoWay(o.exports.Point.stringify),k(o.exports.Shape,"Rectangle",{fill:null}),k(o.exports.Panel,"Table",{desiredSize:new o.exports.Size(G*6,A),background:oo,name:"LANE",minSize:new o.exports.Size(G,A*.667)},new o.exports.Binding("desiredSize","size",o.exports.Size.parse).makeTwoWay(o.exports.Size.stringify),k(o.exports.TextBlock,{row:0,column:0,angle:270,margin:5,editable:!0,textAlign:"center"},new o.exports.Binding("text").makeTwoWay()),k(o.exports.RowColumnDefinition,{column:1,separatorStrokeWidth:1,separatorStroke:"black"}),k(o.exports.Shape,"Rectangle",{row:0,column:1,stroke:null,fill:"transparent",portId:"",fromLinkable:!0,toLinkable:!0,fromSpot:o.exports.Spot.TopBottomSides,toSpot:o.exports.Spot.TopBottomSides,cursor:"pointer",stretch:o.exports.GraphObject.Fill}))),pt=k(o.exports.Node,"Vertical",{locationSpot:o.exports.Spot.Center},k(o.exports.Shape,"Process",{fill:oo,desiredSize:new o.exports.Size(Bt/2,Bt/4)}),k(o.exports.TextBlock,{margin:5,editable:!0},new o.exports.Binding("text"))),T=k(o.exports.Group,"Vertical",{locationSpot:o.exports.Spot.Center,computesBoundsIncludingLinks:!1,isSubGraphExpanded:!1},k(o.exports.Shape,"Process",{fill:"white",desiredSize:new o.exports.Size(Bt/2,Bt/4)}),k(o.exports.Shape,"Process",{fill:"white",desiredSize:new o.exports.Size(Bt/2,Bt/4)}),k(o.exports.TextBlock,{margin:5,editable:!0},new o.exports.Binding("text"))),Zi=k(o.exports.Group,"Vertical");function kr($){if($ instanceof o.exports.Group){var st=$.isSelected?"Foreground":"";$.layerName=st,$.findSubGraphParts().each(function(ae){ae.layerName=st})}}const zh=k(o.exports.Group,"Spot",{locationSpot:o.exports.Spot.Center,locationObjectName:"PH",isSubGraphExpanded:!1,subGraphExpandedChanged:function($){$.isSubGraphExpanded&&($.isSelected=!0),kr($)},selectionChanged:kr,computesBoundsAfterDrag:!0,memberValidation:function($,st){return!(st instanceof o.exports.Group)||st.category!=="Pool"&&st.category!=="Lane"},mouseDrop:function($,st){if($.shift||!(st instanceof o.exports.Group)||st.diagram===null)return;st.addMembers(st.diagram.selection,!0)?kr(st):st.diagram.currentTool.doCancel()},contextMenu:Ae,itemTemplate:js,avoidable:!1},new o.exports.Binding("itemArray","boundaryEventArray"),new o.exports.Binding("location","loc",o.exports.Point.parse).makeTwoWay(o.exports.Point.stringify),k(o.exports.Panel,"Auto",k(o.exports.Shape,"RoundedRectangle",{name:"PH",fill:gt,stroke:Nt,minSize:new o.exports.Size(G,A),portId:"",fromLinkable:!0,toLinkable:!0,cursor:"pointer",fromSpot:o.exports.Spot.RightSide,toSpot:o.exports.Spot.LeftSide},new o.exports.Binding("strokeWidth","isCall",function($){return $?Z:z})),k(o.exports.Panel,"Vertical",{defaultAlignment:o.exports.Spot.Left},k(o.exports.TextBlock,{margin:3,editable:!0},new o.exports.Binding("text","text").makeTwoWay(),new o.exports.Binding("alignment","isSubGraphExpanded",function($){return $?o.exports.Spot.TopLeft:o.exports.Spot.Center})),k(o.exports.Panel,"Auto",k(o.exports.Shape,{opacity:0}),k(o.exports.Placeholder,{padding:new o.exports.Margin(5,5)})),ge(!0,1))));function ya(){return[{layerName:"Background",background:"transparent",movable:!0,copyable:!1,avoidable:!1},new o.exports.Binding("location","loc",o.exports.Point.parse).makeTwoWay(o.exports.Point.stringify)]}function Ds($){$.findExternalLinksConnected().each(st=>{st.visible=st.fromNode!==null&&st.fromNode.isVisible()&&st.toNode!==null&&st.toNode.isVisible()})}const du=k("ContextMenu",k("ContextMenuButton",k(o.exports.TextBlock,"Add Lane"),{click:function($,st){fu(st.part.adornedObject)}}));function fu($){if(xt.startTransaction("addLane"),$!=null&&$.data.category==="Lane"){const st=$.findObject("SHAPE"),ae=new o.exports.Size(st?st.width:lu,Dc),Ce={category:"Lane",text:"New Lane",color:"white",isGroup:!0,loc:o.exports.Point.stringify(new o.exports.Point($.location.x,$.location.y+1)),size:o.exports.Size.stringify(ae),group:$.data.group};xt.model.addNodeData(Ce)}xt.commitTransaction("addLane")}const Eh=k(o.exports.Group,"Spot",ya(),{name:"Lane",contextMenu:du,minLocation:new o.exports.Point(NaN,-1/0),maxLocation:new o.exports.Point(NaN,1/0),selectionObjectName:"SHAPE",resizable:!0,resizeObjectName:"SHAPE",layout:k(o.exports.LayeredDigraphLayout,{isInitial:!1,isOngoing:!1,direction:0,columnSpacing:10,layeringOption:o.exports.LayeredDigraphLayout.LayerLongestPathSource}),computesBoundsAfterDrag:!0,computesBoundsIncludingLinks:!1,computesBoundsIncludingLocation:!0,handlesDragDropForMembers:!0,mouseDrop:function($,st){if(!$.diagram.selection.any(ae=>ae instanceof o.exports.Group&&ae.category!=="subprocess"||ae.category==="privateProcess")){if(!(st instanceof o.exports.Group)||st.diagram===null)return;st.addMembers(st.diagram.selection,!0)?(Ds(st),Ld()):st.diagram.currentTool.doCancel()}},subGraphExpandedChanged:function($){if($.diagram===null||$.diagram.undoManager.isUndoingRedoing)return;const st=$.resizeObject;$.isSubGraphExpanded?st.height=$.data.savedBreadth:(isNaN(st.height)||$.diagram.model.set($.data,"savedBreadth",st.height),st.height=NaN),Ds($)}},k(o.exports.Shape,"Rectangle",{name:"SHAPE",fill:"white",stroke:null},new o.exports.Binding("fill","color"),new o.exports.Binding("desiredSize","size",o.exports.Size.parse).makeTwoWay(o.exports.Size.stringify)),k(o.exports.Panel,"Horizontal",{name:"HEADER",angle:270,alignment:o.exports.Spot.LeftCenter,alignmentFocus:o.exports.Spot.LeftCenter},k(o.exports.TextBlock,{editable:!0,margin:new o.exports.Margin(2,0,0,8)},new o.exports.Binding("visible","isSubGraphExpanded").ofObject(),new o.exports.Binding("text","text").makeTwoWay()),k("SubGraphExpanderButton",{margin:4,angle:-270})),k(o.exports.Placeholder,{padding:12,alignment:o.exports.Spot.TopLeft,alignmentFocus:o.exports.Spot.TopLeft}),k(o.exports.Panel,"Horizontal",{alignment:o.exports.Spot.TopLeft,alignmentFocus:o.exports.Spot.TopLeft},k(o.exports.TextBlock,{name:"LABEL",editable:!0,visible:!1,angle:0,margin:new o.exports.Margin(6,0,0,20)},new o.exports.Binding("visible","isSubGraphExpanded",function($){return!$}).ofObject(),new o.exports.Binding("text","text").makeTwoWay())));Eh.resizeAdornmentTemplate=k(o.exports.Adornment,"Spot",k(o.exports.Placeholder),k(o.exports.Shape,{alignment:o.exports.Spot.Right,desiredSize:new o.exports.Size(7,50),fill:"lightblue",stroke:"dodgerblue",cursor:"col-resize"},new o.exports.Binding("visible","",function($){return $.adornedPart===null?!1:$.adornedPart.isSubGraphExpanded}).ofObject()),k(o.exports.Shape,{alignment:o.exports.Spot.Bottom,desiredSize:new o.exports.Size(50,7),fill:"lightblue",stroke:"dodgerblue",cursor:"row-resize"},new o.exports.Binding("visible","",function($){return $.adornedPart===null?!1:$.adornedPart.isSubGraphExpanded}).ofObject()));const Ue=k(o.exports.Group,"Auto",ya(),{computesBoundsIncludingLinks:!1,layout:k(Wv,{spacing:new o.exports.Size(0,0)})},new o.exports.Binding("location","loc",o.exports.Point.parse).makeTwoWay(o.exports.Point.stringify),k(o.exports.Shape,{fill:"white"},new o.exports.Binding("fill","color")),k(o.exports.Panel,"Table",{defaultColumnSeparatorStroke:"black"},k(o.exports.Panel,"Horizontal",{column:0,angle:270},k(o.exports.TextBlock,{editable:!0,margin:new o.exports.Margin(5,0,5,0)},new o.exports.Binding("text").makeTwoWay())),k(o.exports.Placeholder,{background:"darkgray",column:1}))),ve=new o.exports.Map;ve.add("activity",Le),ve.add("event",H),ve.add("gateway",Lo),ve.add("annotation",Zt),ve.add("dataobject",Ee),ve.add("datastore",is),ve.add("privateProcess",Xe);const oi=new o.exports.Map;oi.add("subprocess",zh),oi.add("Lane",Eh),oi.add("Pool",Ue);const ji=new o.exports.Map;ji.add("activity",Q),ji.add("event",H),ji.add("gateway",ze),ji.add("annotation",Zt),ji.add("dataobject",Ee),ji.add("datastore",is),ji.add("privateProcess",pt);const Uo=new o.exports.Map;Uo.add("subprocess",Ye),Uo.add("Pool",T),Uo.add("Lane",Zi);const ht=k(o.exports.Link,{contextMenu:k("ContextMenu",k("ContextMenuButton",k(o.exports.TextBlock,"Default Flow"),{click:function($,st){Nr(st.part.adornedObject)}}),k("ContextMenuButton",k(o.exports.TextBlock,"Conditional Flow"),{click:function($,st){va(st.part.adornedObject)}})),routing:o.exports.Link.AvoidsNodes,curve:o.exports.Link.JumpGap,corner:10,reshapable:!0,relinkableFrom:!0,relinkableTo:!0,toEndSegmentLength:20},new o.exports.Binding("points").makeTwoWay(),k(o.exports.Shape,{stroke:"black",strokeWidth:1}),k(o.exports.Shape,{toArrow:"Triangle",scale:1.2,fill:"black",stroke:null}),k(o.exports.Shape,{fromArrow:"",scale:1.5,stroke:"black",fill:"white"},new o.exports.Binding("fromArrow","isDefault",function($){return $===null?"":$?"BackSlash":"StretchedDiamond"}),new o.exports.Binding("segmentOffset","isDefault",function($){return $?new o.exports.Point(5,0):new o.exports.Point(0,0)})),k(o.exports.TextBlock,{name:"Label",editable:!0,text:"label",segmentOffset:new o.exports.Point(-10,-10),visible:!1},new o.exports.Binding("text","text").makeTwoWay(),new o.exports.Binding("visible","visible").makeTwoWay()));function Nr($){xt.startTransaction("setSequenceLinkDefaultFlow");const st=xt.model;st.setDataProperty($.data,"isDefault",!0),$.fromNode!==null&&$.fromNode.findLinksOutOf().each(function(ae){ae!==$&&ae.data.isDefault&&st.setDataProperty(ae.data,"isDefault",null)}),xt.commitTransaction("setSequenceLinkDefaultFlow")}function va($){xt.startTransaction("setSequenceLinkConditionalFlow"),xt.model.setDataProperty($.data,"isDefault",!1),xt.commitTransaction("setSequenceLinkConditionalFlow")}const Rh=k(Xv,{routing:o.exports.Link.Orthogonal,curve:o.exports.Link.JumpGap,corner:10,fromSpot:o.exports.Spot.TopBottomSides,toSpot:o.exports.Spot.TopBottomSides,reshapable:!0,relinkableTo:!0,toEndSegmentLength:20},new o.exports.Binding("points").makeTwoWay(),k(o.exports.Shape,{stroke:"black",strokeWidth:1,strokeDashArray:[6,2]}),k(o.exports.Shape,{toArrow:"Triangle",scale:1,fill:"white",stroke:"black"}),k(o.exports.Shape,{fromArrow:"Circle",scale:1,visible:!0,stroke:"black",fill:"white"}),k(o.exports.TextBlock,{editable:!0,text:"label"},new o.exports.Binding("text","text").makeTwoWay())),Tr=k(o.exports.Link,{routing:o.exports.Link.AvoidsNodes,curve:o.exports.Link.JumpGap,corner:10,fromSpot:o.exports.Spot.AllSides,toSpot:o.exports.Spot.AllSides,reshapable:!0,relinkableFrom:!0,relinkableTo:!0},new o.exports.Binding("points").makeTwoWay(),k(o.exports.Shape,{stroke:"black",strokeWidth:1,strokeDashArray:[1,3]}),k(o.exports.Shape,{toArrow:"OpenTriangle",scale:1,fill:null,stroke:"blue"})),gu=k(o.exports.Link,{reshapable:!0,relinkableFrom:!0,relinkableTo:!0,toSpot:o.exports.Spot.AllSides,toEndSegmentLength:20,fromEndSegmentLength:40},new o.exports.Binding("points").makeTwoWay(),k(o.exports.Shape,{stroke:"black",strokeWidth:1,strokeDashArray:[1,3]}),k(o.exports.Shape,{toArrow:"OpenTriangle",scale:1,stroke:"black"})),Cr=new o.exports.Map;Cr.add("msg",Rh),Cr.add("annotation",gu),Cr.add("data",Tr),Cr.add("",ht),xt=k(o.exports.Diagram,"myDiagramDiv",{nodeTemplateMap:ve,linkTemplateMap:Cr,groupTemplateMap:oi,commandHandler:new ga,"commandHandler.arrowKeyBehavior":"move",mouseDrop:function($){xt.commandHandler.addTopLevelParts(xt.selection,!0)||xt.currentTool.doCancel()},resizingTool:new Hv,linkingTool:new Fs,relinkingTool:new Uv,SelectionMoved:Ld,SelectionCopied:Ld,LinkDrawn:function($){kr($.subject.containingGroup)},LinkRelinked:function($){kr($.subject.containingGroup)}}),xt.addDiagramListener("LinkDrawn",function($){$.subject.fromNode.category==="annotation"?$.subject.category="annotation":($.subject.fromNode.category==="dataobject"||$.subject.toNode.category==="dataobject"||$.subject.fromNode.category==="datastore"||$.subject.toNode.category==="datastore")&&($.subject.category="data")}),xt.addDiagramListener("Modified",function($){const st=document.getElementById("currentFile"),ae=st.textContent.indexOf("*");xt.isModified?ae<0&&(st.textContent=st.textContent+"*"):ae>=0&&(st.textContent=st.textContent.slice(0,ae))});function os($,st){const ae=$.data.key,Ce=st.data.key;return ae<Ce?-1:ae>Ce?1:0}const Vh=k(o.exports.Palette,"myPaletteLevel1",{nodeTemplateMap:ji,groupTemplateMap:Uo,layout:k(o.exports.GridLayout,{cellSize:new o.exports.Size(1,1),spacing:new o.exports.Size(5,5),comparer:os})}),Yh=k(o.exports.Palette,"myPaletteLevel2",{nodeTemplateMap:ji,groupTemplateMap:Uo,layout:k(o.exports.GridLayout,{cellSize:new o.exports.Size(1,1),spacing:new o.exports.Size(5,5),comparer:os})}),cu=k(o.exports.Palette,"myPaletteLevel3",{nodeTemplateMap:ji,groupTemplateMap:Uo,layout:k(o.exports.GridLayout,{cellSize:new o.exports.Size(1,1),spacing:new o.exports.Size(5,5),comparer:os})});jQuery("#accordion").accordion({activate:function($,st){Vh.requestUpdate(),Yh.requestUpdate()}}),Vh.model=k(o.exports.GraphLinksModel,{copiesArrays:!0,copiesArrayObjects:!0,nodeDataArray:[{key:101,category:"event",text:"Start",eventType:1,eventDimension:1,item:"start"},{key:102,category:"event",text:"Message",eventType:2,eventDimension:2,item:"Message"},{key:103,category:"event",text:"Timer",eventType:3,eventDimension:3,item:"Timer"},{key:104,category:"event",text:"End",eventType:1,eventDimension:8,item:"End"},{key:107,category:"event",text:"Message",eventType:2,eventDimension:8,item:"Message"},{key:108,category:"event",text:"Terminate",eventType:13,eventDimension:8,item:"Terminate"},{key:131,category:"activity",text:"Task",item:"generic task",taskType:0},{key:132,category:"activity",text:"User Task",item:"User task",taskType:2},{key:133,category:"activity",text:`Service
Task`,item:"service task",taskType:6},{key:134,category:"subprocess",loc:"0 0",text:"Subprocess",isGroup:!0,isSubProcess:!0,taskType:0},{key:-802,category:"event",loc:"0 0",group:134,text:"Start",eventType:1,eventDimension:1,item:"start"},{key:-803,category:"event",loc:"350 0",group:134,text:"End",eventType:1,eventDimension:8,item:"end",name:"end"},{key:201,category:"gateway",text:"Parallel",gatewayType:1},{key:204,category:"gateway",text:"Exclusive",gatewayType:4},{key:301,category:"dataobject",text:`Data
Object`},{key:302,category:"datastore",text:`Data
Storage`},{key:401,category:"privateProcess",text:"Black Box"},{key:"501",text:"Pool 1",isGroup:"true",category:"Pool"},{key:"Lane5",text:"Lane 1",isGroup:"true",group:"501",color:"lightyellow",category:"Lane"},{key:"Lane6",text:"Lane 2",isGroup:"true",group:"501",color:"lightgreen",category:"Lane"},{key:701,category:"annotation",text:"note"}]}),Yh.model=k(o.exports.GraphLinksModel,{copiesArrays:!0,copiesArrayObjects:!0,nodeDataArray:[{key:1,category:"activity",taskType:1,text:"Receive Task",item:"Receive Task"},{key:2,category:"activity",taskType:5,text:"Send Task",item:"Send Task"},{key:3,category:"activity",taskType:7,text:`Business
Rule Task`,item:"Business Rule Task"},{key:4,category:"activity",taskType:2,text:"User Task",item:"User Task",isCall:!0},{key:101,text:`Adhoc
Subprocess`,isGroup:!0,isSubProcess:!0,category:"subprocess",isAdHoc:!0,taskType:0,loc:"0 0"},{key:-812,group:101,category:"event",text:"Start",eventType:1,eventDimension:1,item:"start",loc:"0 0"},{key:-813,group:101,category:"event",text:"End",eventType:1,eventDimension:8,item:"end",name:"end"},{key:102,text:`Transactional
Subprocess`,isGroup:!0,isSubProcess:!0,category:"subprocess",isTransaction:!0,taskType:0,loc:"0 0"},{key:-822,group:102,category:"event",text:"Start",eventType:1,eventDimension:1,item:"start",loc:"0 0"},{key:-823,group:102,category:"event",text:"End",eventType:1,eventDimension:8,item:"end",name:"end",loc:"350 0"},{key:103,text:`Looping
Activity`,isGroup:!0,isLoop:!0,isSubProcess:!0,category:"subprocess",taskType:0,loc:"0 0"},{key:-831,group:103,category:"event",text:"Start",eventType:1,eventDimension:1,item:"start",loc:"0 0"},{key:-832,group:103,category:"event",text:"End",eventType:1,eventDimension:8,item:"end",name:"end",loc:"350 0"},{key:104,text:`Multi-Instance
Activity`,isGroup:!0,isSubProcess:!0,isParallel:!0,category:"subprocess",taskType:0,loc:"0 0"},{key:-841,group:104,category:"event",text:"Start",eventType:1,eventDimension:1,item:"start",loc:"0 0"},{key:-842,group:104,category:"event",text:"End",eventType:1,eventDimension:8,item:"end",name:"end",loc:"350 0"},{key:105,text:`Call
Subprocess`,isGroup:!0,isSubProcess:!0,category:"subprocess",isCall:!0,taskType:0,loc:"0 0"},{key:-861,group:105,category:"event",text:"Start",eventType:1,eventDimension:1,item:"start",loc:"0 0"},{key:-862,group:105,category:"event",text:"End",eventType:1,eventDimension:8,item:"end",name:"end",loc:"350 0"},{key:301,category:"gateway",gatewayType:2,text:"Inclusive"},{key:302,category:"gateway",gatewayType:5,text:`Event
Gateway`},{key:401,category:"event",eventType:5,eventDimension:1,text:`Conditional
Start`,item:"BpmnEventConditional"},{key:402,category:"event",eventType:10,eventDimension:1,text:`Signal
Start`,item:"BpmnEventSignal"},{key:403,category:"event",eventType:10,eventDimension:8,text:`Signal
End`,item:"end signal"},{key:404,category:"event",eventType:7,eventDimension:8,text:"Error",item:"BpmnEventError"},{key:405,category:"event",eventType:4,eventDimension:8,text:"Escalation",item:"BpmnEventEscalation"},{key:502,category:"event",eventType:6,eventDimension:4,text:`Catch
Link`,item:"BpmnEventOffPage"},{key:503,category:"event",eventType:6,eventDimension:7,text:`Throw
Link`,item:"BpmnEventOffPage"},{key:504,category:"event",eventType:2,eventDimension:4,text:`Catch
Message`,item:"Message"},{key:505,category:"event",eventType:2,eventDimension:7,text:`Throw
Message`,item:"Message"},{key:506,category:"event",eventType:5,eventDimension:4,text:`Catch
Conditional`,item:""},{key:507,category:"event",eventType:3,eventDimension:4,text:`Catch
Timer`,item:""},{key:508,category:"event",eventType:4,eventDimension:7,text:`Throw
Escalation`,item:"Escalation"},{key:509,category:"event",eventType:10,eventDimension:4,text:`Catch
Signal`,item:""},{key:510,category:"event",eventType:10,eventDimension:7,text:`Throw
Signal`,item:""}]}),cu.model=k(o.exports.GraphLinksModel,{copiesArrays:!0,copiesArrayObjects:!0,nodeDataArray:[{key:108,category:"event",eventType:8,eventDimension:5,text:"Cancel",item:"BpmnEventCancel"},{key:109,category:"event",eventType:9,eventDimension:5,text:"Compensation",item:"BpmnEventCompensation"},{key:111,category:"event",eventType:11,eventDimension:1,text:"Multiple",item:"Multiple"},{key:112,category:"event",eventType:12,eventDimension:1,text:"Parallel",item:"Parallel"},{key:203,category:"activity",taskType:3,isAdHoc:!0,text:"Manual",item:"Manual Task"},{key:204,category:"activity",taskType:4,isSequential:!0,text:"Script",item:"Script Task"},{key:205,category:"activity",taskType:5,isParallel:!0,text:"Send Msg",item:"Send Msg Task"},{key:206,category:"activity",taskType:6,isLoop:!0,isSubProcess:!0,isTransaction:!0,text:"Service",item:"service task"},{key:603,category:"gateway",text:"Complex",gatewayType:3},{key:606,category:"gateway",text:"Exclusive Start",gatewayType:6},{key:607,category:"gateway",text:"Parallel Start",gatewayType:7},{key:4,category:"activity",taskType:2,text:"User Task",item:"User Task",isCall:!0,isLoop:!0,isParallel:!0,isSequential:!0}]});const E=k(o.exports.Overview,"myOverviewDiv",{observed:xt,maxScale:.5,contentAlignment:o.exports.Spot.Center});E.box.elt(0).stroke="dodgerblue",eS("BPMNdata/OMG BPMN by Example Figure 5.1.json"),window.myDiagram=xt}const lu=400,Dc=20;function Ld(){xt.layout.invalidateLayout(),xt.findTopLevelGroups().each(function(k){k.category==="Pool"&&k.layout!==null&&k.layout.invalidateLayout()}),xt.layoutDiagram()}function By(k){let a=lu;return k.memberParts.each(function(l){if(!(l instanceof o.exports.Group))return;const m=l.placeholder;if(m!==null){const f=m.actualBounds;a=Math.max(a,f.width)}}),new o.exports.Size(a,NaN)}function jy(k){const a=Dy(k);if(k.isSubGraphExpanded){const m=k.placeholder;if(m!==null){const f=m.actualBounds;a.height=Math.max(a.height,f.height)}}const l=k.findObject("HEADER");return l!==null&&(a.height=Math.max(a.height,l.actualBounds.height)),a}function Dy(k){return k.isSubGraphExpanded?new o.exports.Size(lu,Dc):new o.exports.Size(lu,1)}class Hv extends o.exports.ResizingTool{isLengthening(){return this.handle!==null&&this.handle.alignment===o.exports.Spot.Right}computeMinSize(){if(this.adornedObject===null)return new o.exports.Size(lu,Dc);const a=this.adornedObject.part;if(!(a instanceof o.exports.Group))return o.exports.ResizingTool.prototype.computeMinSize.call(this);const l=Dy(a);if(a.containingGroup!==null&&this.isLengthening()){const m=By(a.containingGroup);l.width=Math.max(l.width,m.width)}else{const m=jy(a);l.width=Math.max(l.width,m.width),l.height=Math.max(l.height,m.height)}return l}resize(a){if(this.adornedObject===null)return;const l=this.adornedObject.part;if(!(l instanceof o.exports.Group))return o.exports.ResizingTool.prototype.resize.call(this,a);l instanceof o.exports.Group&&l.containingGroup!==null&&this.isLengthening()?l.containingGroup.memberParts.each(m=>{if(!(m instanceof o.exports.Group))return;const f=m.resizeObject;f!==null&&(f.width=a.width)}):super.resize.call(this,a),Ld()}}class Wv extends o.exports.GridLayout{constructor(){super(...arguments);Fi(this,"cellSize",new o.exports.Size(1,1));Fi(this,"wrappingColumn",1);Fi(this,"wrappingWidth",1/0);Fi(this,"isRealtime",!1);Fi(this,"alignment",o.exports.GridLayout.Position);Fi(this,"comparer",function(l,m){const f=l.location.y,x=m.location.y;return isNaN(f)||isNaN(x)?0:f<x?-1:f>x?1:0})}doLayout(l){const m=this.diagram;if(m===null)return;m.startTransaction("PoolLayout");const f=this.group;if(f!==null&&f.category==="Pool"){const x=By(f);f.memberParts.each(function(P){if(P instanceof o.exports.Group&&P.category!=="Pool"){const w=P.resizeObject;if(w!==null){const C=jy(P);w.width=isNaN(w.width)?x.width:Math.max(w.width,x.width),w.height=isNaN(w.height)?C.height:Math.max(w.height,C.height);const G=P.resizeCellSize;!isNaN(w.width)&&!isNaN(G.width)&&G.width>0&&(w.width=Math.ceil(w.width/G.width)*G.width),!isNaN(w.height)&&!isNaN(G.height)&&G.height>0&&(w.height=Math.ceil(w.height/G.height)*G.height)}}})}super.doLayout.call(this,l),m.commitTransaction("PoolLayout")}}function Dh(k,a){xt.startTransaction("addBoundaryEvent"),xt.selection.each(function(l){if(l instanceof o.exports.Node&&l.data&&(l.data.category==="activity"||l.data.category==="subprocess")){let m=0;const f=l.findPort("");for(;l.findPort("be"+m.toString())!==f;)m++;const x="be"+m.toString();l.data.boundaryEventArray||xt.model.setDataProperty(l.data,"boundaryEventArray",[]);const P={portId:x,eventType:k,eventDimension:a,color:"white",alignmentIndex:m};xt.model.insertArrayItem(l.data.boundaryEventArray,-1,P)}}),xt.commitTransaction("addBoundaryEvent")}function Jv(k){if(k===null||k.part===null||k.part.data===null)return;xt.startTransaction("rename");const a=prompt("Rename "+k.part.data.item+" to:");xt.model.setDataProperty(k.part.data,"item",a),xt.commitTransaction("rename")}function Zv(){xt.startTransaction("grid");const k=document.getElementById("grid");xt.grid.visible=k.checked,xt.commitTransaction("grid")}function _v(){document.getElementById("snap").checked?(xt.toolManager.draggingTool.isGridSnapEnabled=!0,xt.toolManager.resizingTool.isGridSnapEnabled=!0):(xt.toolManager.draggingTool.isGridSnapEnabled=!1,xt.toolManager.resizingTool.isGridSnapEnabled=!1)}function Gy(){return parseFloat(prompt("Desired space between nodes (in pixels):")||"0")}const Md="(Unsaved File)";function uu(){const a=document.getElementById("currentFile").textContent||"";return a&&a[a.length-1]==="*"?a.slice(0,-1):a}function kd(k){const a=document.getElementById("currentFile");xt.isModified&&(k+="*"),a.textContent=k}function $v(){xt.isModified&&confirm("Would you like to save changes to "+uu()+"?")&&Gc(),kd(Md),xt.model=new o.exports.GraphLinksModel,Qv()}function Qv(){xt.model.undoManager.isEnabled=!0,xt.model.linkFromPortIdProperty="fromPort",xt.model.linkToPortIdProperty="toPort",xt.model.copiesArrays=!0,xt.model.copiesArrayObjects=!0,xt.isModified=!1}function pu(){return typeof Storage<"u"&&window.localStorage!==void 0}function Gc(){if(pu()){const k=uu();if(k===Md)Oy();else{Iy(),window.localStorage.setItem(k,xt.model.toJson());let a,l;for(const m in window.localStorage){window.localStorage.getItem(m);const f=m.split("-");if(m===k){a=f[0],l=f[1];break}}fetch(`/api/${tenant}/diagramas/${a}/update`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({nombre:l,json:xt.model.toJson()})}),xt.isModified=!1}}}function Oy(){if(pu()){const k=prompt("Save file as...")||uu();k&&k!==Md&&(kd(k),Iy(),window.localStorage.setItem(k,xt.model.toJson()),fetch(`/api/${tenant}/diagramas/store`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({nombre:k,json:xt.model.toJson()})}),xt.isModified=!1)}}function bv(){pu()&&(xt.isModified&&confirm("Le gustaria guardar los cambios en"+uu()+"?")&&Gc(),Ay("openDocument","mySavedFiles"))}function qv(){pu()&&Ay("removeDocument","mySavedFiles2")}function tS(){const k=document.getElementById("mySavedFiles");let a;for(let l=0;l<k.options.length;l++)k.options[l].selected&&(a=k.options[l].value);if(a!==void 0){kd(a);const l=window.localStorage.getItem(a)||"";xt.model=o.exports.Model.fromJson(l),Fc(),xt.model.undoManager.isEnabled=!0,xt.isModified=!1}Nd("openDocument")}function eS(k){jQuery.getJSON(k,function(a){xt.addDiagramListener("InitialLayoutCompleted",Fc),xt.model=o.exports.Model.fromJson(a),Fc(),xt.model.undoManager.isEnabled=!0,xt.isModified=!1})}function Iy(){xt.model.modelData.position=o.exports.Point.stringify(xt.position)}function Fc(k){const a=xt.model.modelData.position;a&&(xt.initialPosition=o.exports.Point.parse(a))}function nS(){const k=document.getElementById("mySavedFiles2");if(k===null)return;let a;for(let l=0;l<k.options.length;l++)k.options[l].selected&&(a=k.options[l].value);if(a!==void 0){let l;for(const m in window.localStorage){window.localStorage.getItem(m);const f=m.split("-");if(m===a){l=f[0];break}}window.localStorage.removeItem(a),a===uu()&&(kd(Md),xt.model=new o.exports.GraphLinksModel),fetch(`/api/${tenant}/diagramas/${l}/delete`,{method:"DELETE",headers:{"Content-Type":"application/json"}})}Nd("removeDocument")}function iS(k){const a=document.getElementById(k);if(a===null)return;let l;for(;l=a.lastChild;)a.removeChild(l);for(const m in window.localStorage){if(!window.localStorage.getItem(m))continue;const x=document.createElement("option");x.value=m;const P=m.split("-");x.text=P[P.length-1],a.add(x,null)}}function Ay(k,a){const l=document.getElementById(k);l!==null&&l.style.visibility==="hidden"&&(iS(a),l.style.visibility="visible")}function Nd(k){const a=document.getElementById(k);a!==null&&a.style.visibility==="visible"&&(a.style.visibility="hidden")}function oS(){xt.commandHandler.undo()}function rS(){xt.commandHandler.redo()}function sS(){xt.commandHandler.cutSelection()}function aS(){xt.commandHandler.copySelection()}function hS(){xt.commandHandler.pasteSelection()}function lS(){xt.commandHandler.deleteSelection()}function uS(){xt.commandHandler.selectAll()}function pS(){xt.commandHandler.alignLeft()}function dS(){xt.commandHandler.alignRight()}function fS(){xt.commandHandler.alignTop()}function gS(){xt.commandHandler.alignBottom()}function cS(){xt.commandHandler.alignCenterY()}function mS(){xt.commandHandler.alignRow(Gy())}function xS(){xt.commandHandler.alignColumn(Gy())}function yS(){Nd("openDocument")}function vS(){Nd("removeDocument")}document.addEventListener("DOMContentLoaded",()=>{Kv(),document.getElementById("newDocument").onclick=$v,document.getElementById("openDocuments").onclick=bv,document.getElementById("saveDocument").onclick=Gc,document.getElementById("saveDocumentAs").onclick=Oy,document.getElementById("removeDocuments").onclick=qv,document.getElementById("undo").onclick=oS,document.getElementById("redo").onclick=rS,document.getElementById("cutSelection").onclick=sS,document.getElementById("copySelection").onclick=aS,document.getElementById("pasteSelection").onclick=hS,document.getElementById("deleteSelection").onclick=lS,document.getElementById("selectAll").onclick=uS,document.getElementById("alignLeft").onclick=pS,document.getElementById("alignRight").onclick=dS,document.getElementById("alignTop").onclick=fS,document.getElementById("alignBottom").onclick=gS,document.getElementById("alignCenterX").onclick=void 0,document.getElementById("alignCenterY").onclick=cS,document.getElementById("alignRows").onclick=mS,document.getElementById("alignColumns").onclick=xS,document.getElementById("grid").onclick=Zv,document.getElementById("snap").onclick=_v,document.getElementById("openBtn").onclick=tS,document.getElementById("cancelBtn").onclick=yS,document.getElementById("removeBtn").onclick=nS,document.getElementById("cancelBtn2").onclick=vS});
